var I9=Object.defineProperty;var D9=(n,e,t)=>e in n?I9(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var qt=(n,e,t)=>D9(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var R9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function DT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function P9(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var e=n.default;if(typeof e=="function"){var t=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}),t}var Lw={exports:{}},Hg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S3;function j9(){if(S3)return Hg;S3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,s){var a=null;if(s!==void 0&&(a=""+s),i.key!==void 0&&(a=""+i.key),"key"in i){s={};for(var o in i)o!=="key"&&(s[o]=i[o])}else s=i;return i=s.ref,{$$typeof:n,type:r,key:a,ref:i!==void 0?i:null,props:s}}return Hg.Fragment=e,Hg.jsx=t,Hg.jsxs=t,Hg}var T3;function L9(){return T3||(T3=1,Lw.exports=j9()),Lw.exports}var f=L9(),Ow={exports:{}},Rn={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E3;function O9(){if(E3)return Rn;E3=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),a=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),x=Symbol.iterator;function v(re){return re===null||typeof re!="object"?null:(re=x&&re[x]||re["@@iterator"],typeof re=="function"?re:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function T(re,M,W){this.props=re,this.context=M,this.refs=S,this.updater=W||_}T.prototype.isReactComponent={},T.prototype.setState=function(re,M){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,M,"setState")},T.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function k(){}k.prototype=T.prototype;function E(re,M,W){this.props=re,this.context=M,this.refs=S,this.updater=W||_}var j=E.prototype=new k;j.constructor=E,b(j,T.prototype),j.isPureReactComponent=!0;var F=Array.isArray;function z(){}var A={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function O(re,M,W){var K=W.ref;return{$$typeof:n,type:re,key:M,ref:K!==void 0?K:null,props:W}}function B(re,M){return O(re.type,M,re.props)}function R(re){return typeof re=="object"&&re!==null&&re.$$typeof===n}function P(re){var M={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(W){return M[W]})}var V=/\/+/g;function Y(re,M){return typeof re=="object"&&re!==null&&re.key!=null?P(""+re.key):M.toString(36)}function ie(re){switch(re.status){case"fulfilled":return re.value;case"rejected":throw re.reason;default:switch(typeof re.status=="string"?re.then(z,z):(re.status="pending",re.then(function(M){re.status==="pending"&&(re.status="fulfilled",re.value=M)},function(M){re.status==="pending"&&(re.status="rejected",re.reason=M)})),re.status){case"fulfilled":return re.value;case"rejected":throw re.reason}}throw re}function q(re,M,W,K,G){var te=typeof re;(te==="undefined"||te==="boolean")&&(re=null);var he=!1;if(re===null)he=!0;else switch(te){case"bigint":case"string":case"number":he=!0;break;case"object":switch(re.$$typeof){case n:case e:he=!0;break;case d:return he=re._init,q(he(re._payload),M,W,K,G)}}if(he)return G=G(re),he=K===""?"."+Y(re,0):K,F(G)?(W="",he!=null&&(W=he.replace(V,"$&/")+"/"),q(G,M,W,"",function(Ce){return Ce})):G!=null&&(R(G)&&(G=B(G,W+(G.key==null||re&&re.key===G.key?"":(""+G.key).replace(V,"$&/")+"/")+he)),M.push(G)),1;he=0;var ye=K===""?".":K+":";if(F(re))for(var be=0;be<re.length;be++)K=re[be],te=ye+Y(K,be),he+=q(K,M,W,te,G);else if(be=v(re),typeof be=="function")for(re=be.call(re),be=0;!(K=re.next()).done;)K=K.value,te=ye+Y(K,be++),he+=q(K,M,W,te,G);else if(te==="object"){if(typeof re.then=="function")return q(ie(re),M,W,K,G);throw M=String(re),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return he}function Q(re,M,W){if(re==null)return re;var K=[],G=0;return q(re,K,"","",function(te){return M.call(W,te,G++)}),K}function se(re){if(re._status===-1){var M=re._result;M=M(),M.then(function(W){(re._status===0||re._status===-1)&&(re._status=1,re._result=W)},function(W){(re._status===0||re._status===-1)&&(re._status=2,re._result=W)}),re._status===-1&&(re._status=0,re._result=M)}if(re._status===1)return re._result.default;throw re._result}var J=typeof reportError=="function"?reportError:function(re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof re=="object"&&re!==null&&typeof re.message=="string"?String(re.message):String(re),error:re});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",re);return}console.error(re)},me={map:Q,forEach:function(re,M,W){Q(re,function(){M.apply(this,arguments)},W)},count:function(re){var M=0;return Q(re,function(){M++}),M},toArray:function(re){return Q(re,function(M){return M})||[]},only:function(re){if(!R(re))throw Error("React.Children.only expected to receive a single React element child.");return re}};return Rn.Activity=p,Rn.Children=me,Rn.Component=T,Rn.Fragment=t,Rn.Profiler=i,Rn.PureComponent=E,Rn.StrictMode=r,Rn.Suspense=c,Rn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Rn.__COMPILER_RUNTIME={__proto__:null,c:function(re){return A.H.useMemoCache(re)}},Rn.cache=function(re){return function(){return re.apply(null,arguments)}},Rn.cacheSignal=function(){return null},Rn.cloneElement=function(re,M,W){if(re==null)throw Error("The argument must be a React element, but you passed "+re+".");var K=b({},re.props),G=re.key;if(M!=null)for(te in M.key!==void 0&&(G=""+M.key),M)!I.call(M,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&M.ref===void 0||(K[te]=M[te]);var te=arguments.length-2;if(te===1)K.children=W;else if(1<te){for(var he=Array(te),ye=0;ye<te;ye++)he[ye]=arguments[ye+2];K.children=he}return O(re.type,G,K)},Rn.createContext=function(re){return re={$$typeof:a,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null},re.Provider=re,re.Consumer={$$typeof:s,_context:re},re},Rn.createElement=function(re,M,W){var K,G={},te=null;if(M!=null)for(K in M.key!==void 0&&(te=""+M.key),M)I.call(M,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(G[K]=M[K]);var he=arguments.length-2;if(he===1)G.children=W;else if(1<he){for(var ye=Array(he),be=0;be<he;be++)ye[be]=arguments[be+2];G.children=ye}if(re&&re.defaultProps)for(K in he=re.defaultProps,he)G[K]===void 0&&(G[K]=he[K]);return O(re,te,G)},Rn.createRef=function(){return{current:null}},Rn.forwardRef=function(re){return{$$typeof:o,render:re}},Rn.isValidElement=R,Rn.lazy=function(re){return{$$typeof:d,_payload:{_status:-1,_result:re},_init:se}},Rn.memo=function(re,M){return{$$typeof:u,type:re,compare:M===void 0?null:M}},Rn.startTransition=function(re){var M=A.T,W={};A.T=W;try{var K=re(),G=A.S;G!==null&&G(W,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(z,J)}catch(te){J(te)}finally{M!==null&&W.types!==null&&(M.types=W.types),A.T=M}},Rn.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Rn.use=function(re){return A.H.use(re)},Rn.useActionState=function(re,M,W){return A.H.useActionState(re,M,W)},Rn.useCallback=function(re,M){return A.H.useCallback(re,M)},Rn.useContext=function(re){return A.H.useContext(re)},Rn.useDebugValue=function(){},Rn.useDeferredValue=function(re,M){return A.H.useDeferredValue(re,M)},Rn.useEffect=function(re,M){return A.H.useEffect(re,M)},Rn.useEffectEvent=function(re){return A.H.useEffectEvent(re)},Rn.useId=function(){return A.H.useId()},Rn.useImperativeHandle=function(re,M,W){return A.H.useImperativeHandle(re,M,W)},Rn.useInsertionEffect=function(re,M){return A.H.useInsertionEffect(re,M)},Rn.useLayoutEffect=function(re,M){return A.H.useLayoutEffect(re,M)},Rn.useMemo=function(re,M){return A.H.useMemo(re,M)},Rn.useOptimistic=function(re,M){return A.H.useOptimistic(re,M)},Rn.useReducer=function(re,M,W){return A.H.useReducer(re,M,W)},Rn.useRef=function(re){return A.H.useRef(re)},Rn.useState=function(re){return A.H.useState(re)},Rn.useSyncExternalStore=function(re,M,W){return A.H.useSyncExternalStore(re,M,W)},Rn.useTransition=function(){return A.H.useTransition()},Rn.version="19.2.3",Rn}var A3;function RT(){return A3||(A3=1,Ow.exports=O9()),Ow.exports}var ne=RT();const wp=DT(ne);var Mw={exports:{}},qg={},Fw={exports:{}},Bw={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N3;function M9(){return N3||(N3=1,(function(n){function e(q,Q){var se=q.length;q.push(Q);e:for(;0<se;){var J=se-1>>>1,me=q[J];if(0<i(me,Q))q[J]=Q,q[se]=me,se=J;else break e}}function t(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var Q=q[0],se=q.pop();if(se!==Q){q[0]=se;e:for(var J=0,me=q.length,re=me>>>1;J<re;){var M=2*(J+1)-1,W=q[M],K=M+1,G=q[K];if(0>i(W,se))K<me&&0>i(G,W)?(q[J]=G,q[K]=se,J=K):(q[J]=W,q[M]=se,J=M);else if(K<me&&0>i(G,se))q[J]=G,q[K]=se,J=K;else break e}}return Q}function i(q,Q){var se=q.sortIndex-Q.sortIndex;return se!==0?se:q.id-Q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var c=[],u=[],d=1,p=null,x=3,v=!1,_=!1,b=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function j(q){for(var Q=t(u);Q!==null;){if(Q.callback===null)r(u);else if(Q.startTime<=q)r(u),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=t(u)}}function F(q){if(b=!1,j(q),!_)if(t(c)!==null)_=!0,z||(z=!0,P());else{var Q=t(u);Q!==null&&ie(F,Q.startTime-q)}}var z=!1,A=-1,I=5,O=-1;function B(){return S?!0:!(n.unstable_now()-O<I)}function R(){if(S=!1,z){var q=n.unstable_now();O=q;var Q=!0;try{e:{_=!1,b&&(b=!1,k(A),A=-1),v=!0;var se=x;try{t:{for(j(q),p=t(c);p!==null&&!(p.expirationTime>q&&B());){var J=p.callback;if(typeof J=="function"){p.callback=null,x=p.priorityLevel;var me=J(p.expirationTime<=q);if(q=n.unstable_now(),typeof me=="function"){p.callback=me,j(q),Q=!0;break t}p===t(c)&&r(c),j(q)}else r(c);p=t(c)}if(p!==null)Q=!0;else{var re=t(u);re!==null&&ie(F,re.startTime-q),Q=!1}}break e}finally{p=null,x=se,v=!1}Q=void 0}}finally{Q?P():z=!1}}}var P;if(typeof E=="function")P=function(){E(R)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Y=V.port2;V.port1.onmessage=R,P=function(){Y.postMessage(null)}}else P=function(){T(R,0)};function ie(q,Q){A=T(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(q){switch(x){case 1:case 2:case 3:var Q=3;break;default:Q=x}var se=x;x=Q;try{return q()}finally{x=se}},n.unstable_requestPaint=function(){S=!0},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=x;x=q;try{return Q()}finally{x=se}},n.unstable_scheduleCallback=function(q,Q,se){var J=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?J+se:J):se=J,q){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,q={id:d++,callback:Q,priorityLevel:q,startTime:se,expirationTime:me,sortIndex:-1},se>J?(q.sortIndex=se,e(u,q),t(c)===null&&q===t(u)&&(b?(k(A),A=-1):b=!0,ie(F,se-J))):(q.sortIndex=me,e(c,q),_||v||(_=!0,z||(z=!0,P()))),q},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(q){var Q=x;return function(){var se=x;x=Q;try{return q.apply(this,arguments)}finally{x=se}}}})(Bw)),Bw}var C3;function F9(){return C3||(C3=1,Fw.exports=M9()),Fw.exports}var Vw={exports:{}},Aa={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k3;function B9(){if(k3)return Aa;k3=1;var n=RT();function e(c){var u="https://react.dev/errors/"+c;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,u,d){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:u,implementation:d}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(c,u){if(c==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Aa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Aa.createPortal=function(c,u){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(e(299));return s(c,u,null,d)},Aa.flushSync=function(c){var u=a.T,d=r.p;try{if(a.T=null,r.p=2,c)return c()}finally{a.T=u,r.p=d,r.d.f()}},Aa.preconnect=function(c,u){typeof c=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(c,u))},Aa.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},Aa.preinit=function(c,u){if(typeof c=="string"&&u&&typeof u.as=="string"){var d=u.as,p=o(d,u.crossOrigin),x=typeof u.integrity=="string"?u.integrity:void 0,v=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;d==="style"?r.d.S(c,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:p,integrity:x,fetchPriority:v}):d==="script"&&r.d.X(c,{crossOrigin:p,integrity:x,fetchPriority:v,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Aa.preinitModule=function(c,u){if(typeof c=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var d=o(u.as,u.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(c)},Aa.preload=function(c,u){if(typeof c=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var d=u.as,p=o(d,u.crossOrigin);r.d.L(c,d,{crossOrigin:p,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Aa.preloadModule=function(c,u){if(typeof c=="string")if(u){var d=o(u.as,u.crossOrigin);r.d.m(c,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(c)},Aa.requestFormReset=function(c){r.d.r(c)},Aa.unstable_batchedUpdates=function(c,u){return c(u)},Aa.useFormState=function(c,u,d){return a.H.useFormState(c,u,d)},Aa.useFormStatus=function(){return a.H.useHostTransitionStatus()},Aa.version="19.2.3",Aa}var I3;function uR(){if(I3)return Vw.exports;I3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Vw.exports=B9(),Vw.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D3;function V9(){if(D3)return qg;D3=1;var n=F9(),e=RT(),t=uR();function r(l){var h="https://react.dev/errors/"+l;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+l+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function s(l){var h=l,m=l;if(l.alternate)for(;h.return;)h=h.return;else{l=h;do h=l,(h.flags&4098)!==0&&(m=h.return),l=h.return;while(l)}return h.tag===3?m:null}function a(l){if(l.tag===13){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function o(l){if(l.tag===31){var h=l.memoizedState;if(h===null&&(l=l.alternate,l!==null&&(h=l.memoizedState)),h!==null)return h.dehydrated}return null}function c(l){if(s(l)!==l)throw Error(r(188))}function u(l){var h=l.alternate;if(!h){if(h=s(l),h===null)throw Error(r(188));return h!==l?null:l}for(var m=l,y=h;;){var C=m.return;if(C===null)break;var L=C.alternate;if(L===null){if(y=C.return,y!==null){m=y;continue}break}if(C.child===L.child){for(L=C.child;L;){if(L===m)return c(C),l;if(L===y)return c(C),h;L=L.sibling}throw Error(r(188))}if(m.return!==y.return)m=C,y=L;else{for(var ee=!1,de=C.child;de;){if(de===m){ee=!0,m=C,y=L;break}if(de===y){ee=!0,y=C,m=L;break}de=de.sibling}if(!ee){for(de=L.child;de;){if(de===m){ee=!0,m=L,y=C;break}if(de===y){ee=!0,y=L,m=C;break}de=de.sibling}if(!ee)throw Error(r(189))}}if(m.alternate!==y)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?l:h}function d(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l;for(l=l.child;l!==null;){if(h=d(l),h!==null)return h;l=l.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),E=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function P(l){return l===null||typeof l!="object"?null:(l=R&&l[R]||l["@@iterator"],typeof l=="function"?l:null)}var V=Symbol.for("react.client.reference");function Y(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===V?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case b:return"Fragment";case T:return"Profiler";case S:return"StrictMode";case F:return"Suspense";case z:return"SuspenseList";case O:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case _:return"Portal";case E:return l.displayName||"Context";case k:return(l._context.displayName||"Context")+".Consumer";case j:var h=l.render;return l=l.displayName,l||(l=h.displayName||h.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case A:return h=l.displayName||null,h!==null?h:Y(l.type)||"Memo";case I:h=l._payload,l=l._init;try{return Y(l(h))}catch{}}return null}var ie=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},J=[],me=-1;function re(l){return{current:l}}function M(l){0>me||(l.current=J[me],J[me]=null,me--)}function W(l,h){me++,J[me]=l.current,l.current=h}var K=re(null),G=re(null),te=re(null),he=re(null);function ye(l,h){switch(W(te,h),W(G,l),W(K,null),h.nodeType){case 9:case 11:l=(l=h.documentElement)&&(l=l.namespaceURI)?GN(l):0;break;default:if(l=h.tagName,h=h.namespaceURI)h=GN(h),l=$N(h,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}M(K),W(K,l)}function be(){M(K),M(G),M(te)}function Ce(l){l.memoizedState!==null&&W(he,l);var h=K.current,m=$N(h,l.type);h!==m&&(W(G,l),W(K,m))}function ke(l){G.current===l&&(M(K),M(G)),he.current===l&&(M(he),Bg._currentValue=se)}var oe,qe;function at(l){if(oe===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);oe=h&&h[1]||"",qe=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+oe+l+qe}var Fe=!1;function _e(l,h){if(!l||Fe)return"";Fe=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(h){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(it){var et=it}Reflect.construct(l,[],xt)}else{try{xt.call()}catch(it){et=it}l.call(xt.prototype)}}else{try{throw Error()}catch(it){et=it}(xt=l())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(it){if(it&&et&&typeof it.stack=="string")return[it.stack,et.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var L=y.DetermineComponentFrameRoot(),ee=L[0],de=L[1];if(ee&&de){var Ie=ee.split(`
`),Ze=de.split(`
`);for(C=y=0;y<Ie.length&&!Ie[y].includes("DetermineComponentFrameRoot");)y++;for(;C<Ze.length&&!Ze[C].includes("DetermineComponentFrameRoot");)C++;if(y===Ie.length||C===Ze.length)for(y=Ie.length-1,C=Ze.length-1;1<=y&&0<=C&&Ie[y]!==Ze[C];)C--;for(;1<=y&&0<=C;y--,C--)if(Ie[y]!==Ze[C]){if(y!==1||C!==1)do if(y--,C--,0>C||Ie[y]!==Ze[C]){var ht=`
`+Ie[y].replace(" at new "," at ");return l.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",l.displayName)),ht}while(1<=y&&0<=C);break}}}finally{Fe=!1,Error.prepareStackTrace=m}return(m=l?l.displayName||l.name:"")?at(m):""}function Be(l,h){switch(l.tag){case 26:case 27:case 5:return at(l.type);case 16:return at("Lazy");case 13:return l.child!==h&&h!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return _e(l.type,!1);case 11:return _e(l.type.render,!1);case 1:return _e(l.type,!0);case 31:return at("Activity");default:return""}}function lt(l){try{var h="",m=null;do h+=Be(l,m),m=l,l=l.return;while(l);return h}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var Ke=Object.prototype.hasOwnProperty,We=n.unstable_scheduleCallback,Et=n.unstable_cancelCallback,Oe=n.unstable_shouldYield,Dt=n.unstable_requestPaint,Rt=n.unstable_now,Wt=n.unstable_getCurrentPriorityLevel,Jt=n.unstable_ImmediatePriority,yn=n.unstable_UserBlockingPriority,ln=n.unstable_NormalPriority,Zt=n.unstable_LowPriority,Ft=n.unstable_IdlePriority,At=n.log,De=n.unstable_setDisableYieldValue,nt=null,ct=null;function Nt(l){if(typeof At=="function"&&De(l),ct&&typeof ct.setStrictMode=="function")try{ct.setStrictMode(nt,l)}catch{}}var gt=Math.clz32?Math.clz32:In,$t=Math.log,wt=Math.LN2;function In(l){return l>>>=0,l===0?32:31-($t(l)/wt|0)|0}var Ne=256,tt=262144,Pt=4194304;function kt(l){var h=l&42;if(h!==0)return h;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return l&261888;case 262144:case 524288:case 1048576:case 2097152:return l&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function St(l,h,m){var y=l.pendingLanes;if(y===0)return 0;var C=0,L=l.suspendedLanes,ee=l.pingedLanes;l=l.warmLanes;var de=y&134217727;return de!==0?(y=de&~L,y!==0?C=kt(y):(ee&=de,ee!==0?C=kt(ee):m||(m=de&~l,m!==0&&(C=kt(m))))):(de=y&~L,de!==0?C=kt(de):ee!==0?C=kt(ee):m||(m=y&~l,m!==0&&(C=kt(m)))),C===0?0:h!==0&&h!==C&&(h&L)===0&&(L=C&-C,m=h&-h,L>=m||L===32&&(m&4194048)!==0)?h:C}function jt(l,h){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&h)===0}function Fn(l,h){switch(l){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hn(){var l=Pt;return Pt<<=1,(Pt&62914560)===0&&(Pt=4194304),l}function nr(l){for(var h=[],m=0;31>m;m++)h.push(l);return h}function Tr(l,h){l.pendingLanes|=h,h!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function sn(l,h,m,y,C,L){var ee=l.pendingLanes;l.pendingLanes=m,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=m,l.entangledLanes&=m,l.errorRecoveryDisabledLanes&=m,l.shellSuspendCounter=0;var de=l.entanglements,Ie=l.expirationTimes,Ze=l.hiddenUpdates;for(m=ee&~m;0<m;){var ht=31-gt(m),xt=1<<ht;de[ht]=0,Ie[ht]=-1;var et=Ze[ht];if(et!==null)for(Ze[ht]=null,ht=0;ht<et.length;ht++){var it=et[ht];it!==null&&(it.lane&=-536870913)}m&=~xt}y!==0&&Br(l,y,0),L!==0&&C===0&&l.tag!==0&&(l.suspendedLanes|=L&~(ee&~h))}function Br(l,h,m){l.pendingLanes|=h,l.suspendedLanes&=~h;var y=31-gt(h);l.entangledLanes|=h,l.entanglements[y]=l.entanglements[y]|1073741824|m&261930}function Ar(l,h){var m=l.entangledLanes|=h;for(l=l.entanglements;m;){var y=31-gt(m),C=1<<y;C&h|l[y]&h&&(l[y]|=h),m&=~C}}function ei(l,h){var m=h&-h;return m=(m&42)!==0?1:Er(m),(m&(l.suspendedLanes|h))!==0?0:m}function Er(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function sr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function le(){var l=Q.p;return l!==0?l:(l=window.event,l===void 0?32:g3(l.type))}function Te(l,h){var m=Q.p;try{return Q.p=l,h()}finally{Q.p=m}}var xe=Math.random().toString(36).slice(2),ve="__reactFiber$"+xe,we="__reactProps$"+xe,Ee="__reactContainer$"+xe,Ue="__reactEvents$"+xe,rt="__reactListeners$"+xe,He="__reactHandles$"+xe,$e="__reactResources$"+xe,Ye="__reactMarker$"+xe;function yt(l){delete l[ve],delete l[we],delete l[Ue],delete l[rt],delete l[He]}function It(l){var h=l[ve];if(h)return h;for(var m=l.parentNode;m;){if(h=m[Ee]||m[ve]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(l=e3(l);l!==null;){if(m=l[ve])return m;l=e3(l)}return h}l=m,m=l.parentNode}return null}function Lt(l){if(l=l[ve]||l[Ee]){var h=l.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return l}return null}function bt(l){var h=l.tag;if(h===5||h===26||h===27||h===6)return l.stateNode;throw Error(r(33))}function Ot(l){var h=l[$e];return h||(h=l[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Qt(l){l[Ye]=!0}var Un=new Set,gn={};function Hn(l,h){ti(l,h),ti(l+"Capture",h)}function ti(l,h){for(gn[l]=h,l=0;l<h.length;l++)Un.add(h[l])}var xa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zs={},Ki={};function ea(l){return Ke.call(Ki,l)?!0:Ke.call(zs,l)?!1:xa.test(l)?Ki[l]=!0:(zs[l]=!0,!1)}function ls(l,h,m){if(ea(h))if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":l.removeAttribute(h);return;case"boolean":var y=h.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(h);return}}l.setAttribute(h,""+m)}}function rr(l,h,m){if(m===null)l.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(h);return}l.setAttribute(h,""+m)}}function si(l,h,m,y){if(y===null)l.removeAttribute(m);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(m);return}l.setAttributeNS(h,m,""+y)}}function Ei(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Ko(l){var h=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function tc(l,h,m){var y=Object.getOwnPropertyDescriptor(l.constructor.prototype,h);if(!l.hasOwnProperty(h)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var C=y.get,L=y.set;return Object.defineProperty(l,h,{configurable:!0,get:function(){return C.call(this)},set:function(ee){m=""+ee,L.call(this,ee)}}),Object.defineProperty(l,h,{enumerable:y.enumerable}),{getValue:function(){return m},setValue:function(ee){m=""+ee},stopTracking:function(){l._valueTracker=null,delete l[h]}}}}function hr(l){if(!l._valueTracker){var h=Ko(l)?"checked":"value";l._valueTracker=tc(l,h,""+l[h])}}function Ss(l){if(!l)return!1;var h=l._valueTracker;if(!h)return!0;var m=h.getValue(),y="";return l&&(y=Ko(l)?l.checked?"true":"false":l.value),l=y,l!==m?(h.setValue(l),!0):!1}function ta(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var ji=/[\n"\\]/g;function cs(l){return l.replace(ji,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function nc(l,h,m,y,C,L,ee,de){l.name="",ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"?l.type=ee:l.removeAttribute("type"),h!=null?ee==="number"?(h===0&&l.value===""||l.value!=h)&&(l.value=""+Ei(h)):l.value!==""+Ei(h)&&(l.value=""+Ei(h)):ee!=="submit"&&ee!=="reset"||l.removeAttribute("value"),h!=null?Uc(l,ee,Ei(h)):m!=null?Uc(l,ee,Ei(m)):y!=null&&l.removeAttribute("value"),C==null&&L!=null&&(l.defaultChecked=!!L),C!=null&&(l.checked=C&&typeof C!="function"&&typeof C!="symbol"),de!=null&&typeof de!="function"&&typeof de!="symbol"&&typeof de!="boolean"?l.name=""+Ei(de):l.removeAttribute("name")}function qh(l,h,m,y,C,L,ee,de){if(L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"&&(l.type=L),h!=null||m!=null){if(!(L!=="submit"&&L!=="reset"||h!=null)){hr(l);return}m=m!=null?""+Ei(m):"",h=h!=null?""+Ei(h):m,de||h===l.value||(l.value=h),l.defaultValue=h}y=y??C,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=de?l.checked:!!y,l.defaultChecked=!!y,ee!=null&&typeof ee!="function"&&typeof ee!="symbol"&&typeof ee!="boolean"&&(l.name=ee),hr(l)}function Uc(l,h,m){h==="number"&&ta(l.ownerDocument)===l||l.defaultValue===""+m||(l.defaultValue=""+m)}function Sl(l,h,m,y){if(l=l.options,h){h={};for(var C=0;C<m.length;C++)h["$"+m[C]]=!0;for(m=0;m<l.length;m++)C=h.hasOwnProperty("$"+l[m].value),l[m].selected!==C&&(l[m].selected=C),C&&y&&(l[m].defaultSelected=!0)}else{for(m=""+Ei(m),h=null,C=0;C<l.length;C++){if(l[C].value===m){l[C].selected=!0,y&&(l[C].defaultSelected=!0);return}h!==null||l[C].disabled||(h=l[C])}h!==null&&(h.selected=!0)}}function zu(l,h,m){if(h!=null&&(h=""+Ei(h),h!==l.value&&(l.value=h),m==null)){l.defaultValue!==h&&(l.defaultValue=h);return}l.defaultValue=m!=null?""+Ei(m):""}function Tl(l,h,m,y){if(h==null){if(y!=null){if(m!=null)throw Error(r(92));if(ie(y)){if(1<y.length)throw Error(r(93));y=y[0]}m=y}m==null&&(m=""),h=m}m=Ei(h),l.defaultValue=m,y=l.textContent,y===m&&y!==""&&y!==null&&(l.value=y),hr(l)}function us(l,h){if(h){var m=l.firstChild;if(m&&m===l.lastChild&&m.nodeType===3){m.nodeValue=h;return}}l.textContent=h}var Wh=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Uu(l,h,m){var y=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?y?l.setProperty(h,""):h==="float"?l.cssFloat="":l[h]="":y?l.setProperty(h,m):typeof m!="number"||m===0||Wh.has(h)?h==="float"?l.cssFloat=m:l[h]=(""+m).trim():l[h]=m+"px"}function Hu(l,h,m){if(h!=null&&typeof h!="object")throw Error(r(62));if(l=l.style,m!=null){for(var y in m)!m.hasOwnProperty(y)||h!=null&&h.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var C in h)y=h[C],h.hasOwnProperty(C)&&m[C]!==y&&Uu(l,C,y)}else for(var L in h)h.hasOwnProperty(L)&&Uu(l,L,h[L])}function va(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ka=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ic(l){return Ka.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}function Vr(){}var qu=null;function na(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var xn=null,go=null;function sc(l){var h=Lt(l);if(h&&(l=h.stateNode)){var m=l[we]||null;e:switch(l=h.stateNode,h.type){case"input":if(nc(l,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=l;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+cs(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var y=m[h];if(y!==l&&y.form===l.form){var C=y[we]||null;if(!C)throw Error(r(90));nc(y,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(h=0;h<m.length;h++)y=m[h],y.form===l.form&&Ss(y)}break e;case"textarea":zu(l,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Sl(l,!!m.multiple,h,!1)}}}var ra=!1;function Yo(l,h,m){if(ra)return l(h,m);ra=!0;try{var y=l(h);return y}finally{if(ra=!1,(xn!==null||go!==null)&&(Vv(),xn&&(h=xn,l=go,go=xn=null,sc(h),l)))for(h=0;h<l.length;h++)sc(l[h])}}function ya(l,h){var m=l.stateNode;if(m===null)return null;var y=m[we]||null;if(y===null)return null;m=y[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(m&&typeof m!="function")throw Error(r(231,h,typeof m));return m}var Ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xo=!1;if(Ts)try{var mr={};Object.defineProperty(mr,"passive",{get:function(){Xo=!0}}),window.addEventListener("test",mr,mr),window.removeEventListener("test",mr,mr)}catch{Xo=!1}var xo=null,Wu=null,Qo=null;function Jo(){if(Qo)return Qo;var l,h=Wu,m=h.length,y,C="value"in xo?xo.value:xo.textContent,L=C.length;for(l=0;l<m&&h[l]===C[l];l++);var ee=m-l;for(y=1;y<=ee&&h[m-y]===C[L-y];y++);return Qo=C.slice(l,1<y?1-y:void 0)}function ba(l){var h=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&h===13&&(l=13)):l=h,l===10&&(l=13),32<=l||l===13?l:0}function Zo(){return!0}function Es(){return!1}function Ai(l){function h(m,y,C,L,ee){this._reactName=m,this._targetInst=C,this.type=y,this.nativeEvent=L,this.target=ee,this.currentTarget=null;for(var de in l)l.hasOwnProperty(de)&&(m=l[de],this[de]=m?m(L):L[de]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Zo:Es,this.isPropagationStopped=Es,this}return p(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Zo)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Zo)},persist:function(){},isPersistent:Zo}),h}var _a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ya=Ai(_a),el=p({},_a,{view:0,detail:0}),Hc=Ai(el),tl,wa,As,qc=p({},el,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xa,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==As&&(As&&l.type==="mousemove"?(tl=l.screenX-As.screenX,wa=l.screenY-As.screenY):wa=tl=0,As=l),tl)},movementY:function(l){return"movementY"in l?l.movementY:wa}}),vo=Ai(qc),Ns=p({},qc,{dataTransfer:0}),Wc=Ai(Ns),El=p({},el,{relatedTarget:0}),ac=Ai(El),Al=p({},_a,{animationName:0,elapsedTime:0,pseudoElement:0}),Gh=Ai(Al),Nl=p({},_a,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),Gc=Ai(Nl),Gu=p({},_a,{data:0}),ia=Ai(Gu),$c={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$u={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $h(l){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(l):(l=$u[l])?!!h[l]:!1}function Xa(){return $h}var Ni=p({},el,{key:function(l){if(l.key){var h=$c[l.key]||l.key;if(h!=="Unidentified")return h}return l.type==="keypress"?(l=ba(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?Kc[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xa,charCode:function(l){return l.type==="keypress"?ba(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?ba(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),Yc=Ai(Ni),nl=p({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qa=Ai(nl),g=p({},el,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xa}),N=Ai(g),U=p({},_a,{propertyName:0,elapsedTime:0,pseudoElement:0}),Z=Ai(U),pe=p({},qc,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),Ae=Ai(pe),Ve=p({},_a,{newState:0,oldState:0}),vt=Ai(Ve),Kt=[9,13,27,32],Xt=Ts&&"CompositionEvent"in window,tn=null;Ts&&"documentMode"in document&&(tn=document.documentMode);var Nn=Ts&&"TextEvent"in window&&!tn,ar=Ts&&(!Xt||tn&&8<tn&&11>=tn),or=" ",pr=!1;function pi(l,h){switch(l){case"keyup":return Kt.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ai(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Us=!1;function Ja(l,h){switch(l){case"compositionend":return ai(h);case"keypress":return h.which!==32?null:(pr=!0,or);case"textInput":return l=h.data,l===or&&pr?null:l;default:return null}}function oc(l,h){if(Us)return l==="compositionend"||!Xt&&pi(l,h)?(l=Jo(),Qo=Wu=xo=null,Us=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return ar&&h.locale!=="ko"?null:h.data;default:return null}}var im={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kh(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h==="input"?!!im[l.type]:h==="textarea"}function Yh(l,h,m,y){xn?go?go.push(y):go=[y]:xn=y,h=$v(h,"onChange"),0<h.length&&(m=new Ya("onChange","change",null,m,y),l.push({event:m,listeners:h}))}var Cl=null,lc=null;function Ed(l){VN(l,0)}function cc(l){var h=bt(l);if(Ss(h))return l}function sa(l,h){if(l==="change")return h}var Ku=!1;if(Ts){var Xc;if(Ts){var Qc="oninput"in document;if(!Qc){var Xh=document.createElement("div");Xh.setAttribute("oninput","return;"),Qc=typeof Xh.oninput=="function"}Xc=Qc}else Xc=!1;Ku=Xc&&(!document.documentMode||9<document.documentMode)}function aa(){Cl&&(Cl.detachEvent("onpropertychange",sm),lc=Cl=null)}function sm(l){if(l.propertyName==="value"&&cc(lc)){var h=[];Yh(h,lc,l,na(l)),Yo(Ed,h)}}function Ad(l,h,m){l==="focusin"?(aa(),Cl=h,lc=m,Cl.attachEvent("onpropertychange",sm)):l==="focusout"&&aa()}function am(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return cc(lc)}function rl(l,h){if(l==="click")return cc(h)}function Nd(l,h){if(l==="input"||l==="change")return cc(h)}function ug(l,h){return l===h&&(l!==0||1/l===1/h)||l!==l&&h!==h}var oa=typeof Object.is=="function"?Object.is:ug;function yo(l,h){if(oa(l,h))return!0;if(typeof l!="object"||l===null||typeof h!="object"||h===null)return!1;var m=Object.keys(l),y=Object.keys(h);if(m.length!==y.length)return!1;for(y=0;y<m.length;y++){var C=m[y];if(!Ke.call(h,C)||!oa(l[C],h[C]))return!1}return!0}function Za(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function bo(l,h){var m=Za(l);l=0;for(var y;m;){if(m.nodeType===3){if(y=l+m.textContent.length,l<=h&&y>=h)return{node:m,offset:h-l};l=y}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Za(m)}}function uc(l,h){return l&&h?l===h?!0:l&&l.nodeType===3?!1:h&&h.nodeType===3?uc(l,h.parentNode):"contains"in l?l.contains(h):l.compareDocumentPosition?!!(l.compareDocumentPosition(h)&16):!1:!1}function il(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var h=ta(l.document);h instanceof l.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)l=h.contentWindow;else break;h=ta(l.document)}return h}function sl(l){var h=l&&l.nodeName&&l.nodeName.toLowerCase();return h&&(h==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||h==="textarea"||l.contentEditable==="true")}var Qh=Ts&&"documentMode"in document&&11>=document.documentMode,Hs=null,Jc=null,hc=null,kl=!1;function _o(l,h,m){var y=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;kl||Hs==null||Hs!==ta(y)||(y=Hs,"selectionStart"in y&&sl(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),hc&&yo(hc,y)||(hc=y,y=$v(Jc,"onSelect"),0<y.length&&(h=new Ya("onSelect","select",null,h,m),l.push({event:h,listeners:y}),h.target=Hs)))}function la(l,h){var m={};return m[l.toLowerCase()]=h.toLowerCase(),m["Webkit"+l]="webkit"+h,m["Moz"+l]="moz"+h,m}var wo={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},Zc={},eu={};Ts&&(eu=document.createElement("div").style,"AnimationEvent"in window||(delete wo.animationend.animation,delete wo.animationiteration.animation,delete wo.animationstart.animation),"TransitionEvent"in window||delete wo.transitionend.transition);function Sa(l){if(Zc[l])return Zc[l];if(!wo[l])return l;var h=wo[l],m;for(m in h)if(h.hasOwnProperty(m)&&m in eu)return Zc[l]=h[m];return l}var Jh=Sa("animationend"),eo=Sa("animationiteration"),Il=Sa("animationstart"),zr=Sa("transitionrun"),Ur=Sa("transitionstart"),Ci=Sa("transitioncancel"),Li=Sa("transitionend"),Dl=new Map,Rl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rl.push("scrollEnd");function qs(l,h){Dl.set(l,h),Hn(h,[l])}var Yu=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)},to=[],Xu=0,om=0;function Cd(){for(var l=Xu,h=om=Xu=0;h<l;){var m=to[h];to[h++]=null;var y=to[h];to[h++]=null;var C=to[h];to[h++]=null;var L=to[h];if(to[h++]=null,y!==null&&C!==null){var ee=y.pending;ee===null?C.next=C:(C.next=ee.next,ee.next=C),y.pending=C}L!==0&&Id(m,C,L)}}function kd(l,h,m,y){to[Xu++]=l,to[Xu++]=h,to[Xu++]=m,to[Xu++]=y,om|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function lm(l,h,m,y){return kd(l,h,m,y),Ws(l)}function fc(l,h){return kd(l,null,null,h),Ws(l)}function Id(l,h,m){l.lanes|=m;var y=l.alternate;y!==null&&(y.lanes|=m);for(var C=!1,L=l.return;L!==null;)L.childLanes|=m,y=L.alternate,y!==null&&(y.childLanes|=m),L.tag===22&&(l=L.stateNode,l===null||l._visibility&1||(C=!0)),l=L,L=L.return;return l.tag===3?(L=l.stateNode,C&&h!==null&&(C=31-gt(m),l=L.hiddenUpdates,y=l[C],y===null?l[C]=[h]:y.push(h),h.lane=m|536870912),L):null}function Ws(l){if(50<Rg)throw Rg=0,sw=null,Error(r(185));for(var h=l.return;h!==null;)l=h,h=l.return;return l.tag===3?l.stateNode:null}var Cs={};function cm(l,h,m,y){this.tag=l,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(l,h,m,y){return new cm(l,h,m,y)}function um(l){return l=l.prototype,!(!l||!l.isReactComponent)}function So(l,h){var m=l.alternate;return m===null?(m=Gs(l.tag,h,l.key,l.mode),m.elementType=l.elementType,m.type=l.type,m.stateNode=l.stateNode,m.alternate=l,l.alternate=m):(m.pendingProps=h,m.type=l.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=l.flags&65011712,m.childLanes=l.childLanes,m.lanes=l.lanes,m.child=l.child,m.memoizedProps=l.memoizedProps,m.memoizedState=l.memoizedState,m.updateQueue=l.updateQueue,h=l.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=l.sibling,m.index=l.index,m.ref=l.ref,m.refCleanup=l.refCleanup,m}function Dd(l,h){l.flags&=65011714;var m=l.alternate;return m===null?(l.childLanes=0,l.lanes=h,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=m.childLanes,l.lanes=m.lanes,l.child=m.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=m.memoizedProps,l.memoizedState=m.memoizedState,l.updateQueue=m.updateQueue,l.type=m.type,h=m.dependencies,l.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),l}function Zh(l,h,m,y,C,L){var ee=0;if(y=l,typeof l=="function")um(l)&&(ee=1);else if(typeof l=="string")ee=v9(l,m,K.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case O:return l=Gs(31,m,h,C),l.elementType=O,l.lanes=L,l;case b:return tu(m.children,C,L,h);case S:ee=8,C|=24;break;case T:return l=Gs(12,m,h,C|2),l.elementType=T,l.lanes=L,l;case F:return l=Gs(13,m,h,C),l.elementType=F,l.lanes=L,l;case z:return l=Gs(19,m,h,C),l.elementType=z,l.lanes=L,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case E:ee=10;break e;case k:ee=9;break e;case j:ee=11;break e;case A:ee=14;break e;case I:ee=16,y=null;break e}ee=29,m=Error(r(130,l===null?"null":typeof l,"")),y=null}return h=Gs(ee,m,h,C),h.elementType=l,h.type=y,h.lanes=L,h}function tu(l,h,m,y){return l=Gs(7,l,y,h),l.lanes=m,l}function Rd(l,h,m){return l=Gs(6,l,null,h),l.lanes=m,l}function hm(l){var h=Gs(18,null,null,0);return h.stateNode=l,h}function ef(l,h,m){return h=Gs(4,l.children!==null?l.children:[],l.key,h),h.lanes=m,h.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},h}var fm=new WeakMap;function To(l,h){if(typeof l=="object"&&l!==null){var m=fm.get(l);return m!==void 0?m:(h={value:l,source:h,stack:lt(h)},fm.set(l,h),h)}return{value:l,source:h,stack:lt(h)}}var tf=[],Qu=0,dm=null,Pd=0,Eo=[],Ao=0,nu=null,No=1,Co="";function no(l,h){tf[Qu++]=Pd,tf[Qu++]=dm,dm=l,Pd=h}function yv(l,h,m){Eo[Ao++]=No,Eo[Ao++]=Co,Eo[Ao++]=nu,nu=l;var y=No;l=Co;var C=32-gt(y)-1;y&=~(1<<C),m+=1;var L=32-gt(h)+C;if(30<L){var ee=C-C%5;L=(y&(1<<ee)-1).toString(32),y>>=ee,C-=ee,No=1<<32-gt(h)+C|m<<C|y,Co=L+l}else No=1<<L|m<<C|y,Co=l}function hg(l){l.return!==null&&(no(l,1),yv(l,1,0))}function mm(l){for(;l===dm;)dm=tf[--Qu],tf[Qu]=null,Pd=tf[--Qu],tf[Qu]=null;for(;l===nu;)nu=Eo[--Ao],Eo[Ao]=null,Co=Eo[--Ao],Eo[Ao]=null,No=Eo[--Ao],Eo[Ao]=null}function bv(l,h){Eo[Ao++]=No,Eo[Ao++]=Co,Eo[Ao++]=nu,No=h.id,Co=h.overflow,nu=l}var ks=null,Kr=null,Wn=!1,ca=null,gi=!1,al=Error(r(519));function ru(l){var h=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nf(To(h,l)),al}function fg(l){var h=l.stateNode,m=l.type,y=l.memoizedProps;switch(h[ve]=l,h[we]=y,m){case"dialog":Kn("cancel",h),Kn("close",h);break;case"iframe":case"object":case"embed":Kn("load",h);break;case"video":case"audio":for(m=0;m<jg.length;m++)Kn(jg[m],h);break;case"source":Kn("error",h);break;case"img":case"image":case"link":Kn("error",h),Kn("load",h);break;case"details":Kn("toggle",h);break;case"input":Kn("invalid",h),qh(h,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":Kn("invalid",h);break;case"textarea":Kn("invalid",h),Tl(h,y.value,y.defaultValue,y.children)}m=y.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||y.suppressHydrationWarning===!0||qN(h.textContent,m)?(y.popover!=null&&(Kn("beforetoggle",h),Kn("toggle",h)),y.onScroll!=null&&Kn("scroll",h),y.onScrollEnd!=null&&Kn("scrollend",h),y.onClick!=null&&(h.onclick=Vr),h=!0):h=!1,h||ru(l,!0)}function dc(l){for(ks=l.return;ks;)switch(ks.tag){case 5:case 31:case 13:gi=!1;return;case 27:case 3:gi=!0;return;default:ks=ks.return}}function Is(l){if(l!==ks)return!1;if(!Wn)return dc(l),Wn=!0,!1;var h=l.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=l.type,m=!(m!=="form"&&m!=="button")||bw(l.type,l.memoizedProps)),m=!m),m&&Kr&&ru(l),dc(l),h===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Kr=ZN(l)}else if(h===31){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(317));Kr=ZN(l)}else h===27?(h=Kr,xf(l.type)?(l=Ew,Ew=null,Kr=l):Kr=h):Kr=ks?Bl(l.stateNode.nextSibling):null;return!0}function Ju(){Kr=ks=null,Wn=!1}function dg(){var l=ca;return l!==null&&(jo===null?jo=l:jo.push.apply(jo,l),ca=null),l}function nf(l){ca===null?ca=[l]:ca.push(l)}var pm=re(null),iu=null,Pl=null;function su(l,h,m){W(pm,h._currentValue),h._currentValue=m}function ko(l){l._currentValue=pm.current,M(pm)}function rf(l,h,m){for(;l!==null;){var y=l.alternate;if((l.childLanes&h)!==h?(l.childLanes|=h,y!==null&&(y.childLanes|=h)):y!==null&&(y.childLanes&h)!==h&&(y.childLanes|=h),l===m)break;l=l.return}}function Zu(l,h,m,y){var C=l.child;for(C!==null&&(C.return=l);C!==null;){var L=C.dependencies;if(L!==null){var ee=C.child;L=L.firstContext;e:for(;L!==null;){var de=L;L=C;for(var Ie=0;Ie<h.length;Ie++)if(de.context===h[Ie]){L.lanes|=m,de=L.alternate,de!==null&&(de.lanes|=m),rf(L.return,m,l),y||(ee=null);break e}L=de.next}}else if(C.tag===18){if(ee=C.return,ee===null)throw Error(r(341));ee.lanes|=m,L=ee.alternate,L!==null&&(L.lanes|=m),rf(ee,m,l),ee=null}else ee=C.child;if(ee!==null)ee.return=C;else for(ee=C;ee!==null;){if(ee===l){ee=null;break}if(C=ee.sibling,C!==null){C.return=ee.return,ee=C;break}ee=ee.return}C=ee}}function au(l,h,m,y){l=null;for(var C=h,L=!1;C!==null;){if(!L){if((C.flags&524288)!==0)L=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var ee=C.alternate;if(ee===null)throw Error(r(387));if(ee=ee.memoizedProps,ee!==null){var de=C.type;oa(C.pendingProps.value,ee.value)||(l!==null?l.push(de):l=[de])}}else if(C===he.current){if(ee=C.alternate,ee===null)throw Error(r(387));ee.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(l!==null?l.push(Bg):l=[Bg])}C=C.return}l!==null&&Zu(h,l,m,y),h.flags|=262144}function gm(l){for(l=l.firstContext;l!==null;){if(!oa(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function ou(l){iu=l,Pl=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Ds(l){return _v(iu,l)}function xm(l,h){return iu===null&&ou(l),_v(l,h)}function _v(l,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},Pl===null){if(l===null)throw Error(r(308));Pl=h,l.dependencies={lanes:0,firstContext:h},l.flags|=524288}else Pl=Pl.next=h;return m}var T_=typeof AbortController<"u"?AbortController:function(){var l=[],h=this.signal={aborted:!1,addEventListener:function(m,y){l.push(y)}};this.abort=function(){h.aborted=!0,l.forEach(function(m){return m()})}},E_=n.unstable_scheduleCallback,A_=n.unstable_NormalPriority,ki={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sf(){return{controller:new T_,data:new Map,refCount:0}}function jd(l){l.refCount--,l.refCount===0&&E_(A_,function(){l.controller.abort()})}var Ld=null,vm=0,w=0,D=null;function H(l,h){if(Ld===null){var m=Ld=[];vm=0,w=hw(),D={status:"pending",value:void 0,then:function(y){m.push(y)}}}return vm++,h.then(X,X),h}function X(){if(--vm===0&&Ld!==null){D!==null&&(D.status="fulfilled");var l=Ld;Ld=null,w=0,D=null;for(var h=0;h<l.length;h++)(0,l[h])()}}function ae(l,h){var m=[],y={status:"pending",value:null,reason:null,then:function(C){m.push(C)}};return l.then(function(){y.status="fulfilled",y.value=h;for(var C=0;C<m.length;C++)(0,m[C])(h)},function(C){for(y.status="rejected",y.reason=C,C=0;C<m.length;C++)(0,m[C])(void 0)}),y}var ce=q.S;q.S=function(l,h){mN=Rt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&H(l,h),ce!==null&&ce(l,h)};var ue=re(null);function fe(){var l=ue.current;return l!==null?l:Xr.pooledCache}function ge(l,h){h===null?W(ue,ue.current):W(ue,h.pool)}function Se(){var l=fe();return l===null?null:{parent:ki._currentValue,pool:l}}var Re=Error(r(460)),Qe=Error(r(474)),Xe=Error(r(542)),Me={then:function(){}};function pt(l){return l=l.status,l==="fulfilled"||l==="rejected"}function st(l,h,m){switch(m=l[m],m===void 0?l.push(h):m!==h&&(h.then(Vr,Vr),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,_t(l),l;default:if(typeof h.status=="string")h.then(Vr,Vr);else{if(l=Xr,l!==null&&100<l.shellSuspendCounter)throw Error(r(482));l=h,l.status="pending",l.then(function(y){if(h.status==="pending"){var C=h;C.status="fulfilled",C.value=y}},function(y){if(h.status==="pending"){var C=h;C.status="rejected",C.reason=y}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw l=h.reason,_t(l),l}throw Le=h,Re}}function Pe(l){try{var h=l._init;return h(l._payload)}catch(m){throw m!==null&&typeof m=="object"&&typeof m.then=="function"?(Le=m,Re):m}}var Le=null;function dt(){if(Le===null)throw Error(r(459));var l=Le;return Le=null,l}function _t(l){if(l===Re||l===Xe)throw Error(r(483))}var ft=null,Yt=0;function Vt(l){var h=Yt;return Yt+=1,ft===null&&(ft=[]),st(ft,l,h)}function un(l,h){h=h.props.ref,l.ref=h!==void 0?h:null}function Ht(l,h){throw h.$$typeof===x?Error(r(525)):(l=Object.prototype.toString.call(h),Error(r(31,l==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":l)))}function lr(l){function h(ze,je){if(l){var Je=ze.deletions;Je===null?(ze.deletions=[je],ze.flags|=16):Je.push(je)}}function m(ze,je){if(!l)return null;for(;je!==null;)h(ze,je),je=je.sibling;return null}function y(ze){for(var je=new Map;ze!==null;)ze.key!==null?je.set(ze.key,ze):je.set(ze.index,ze),ze=ze.sibling;return je}function C(ze,je){return ze=So(ze,je),ze.index=0,ze.sibling=null,ze}function L(ze,je,Je){return ze.index=Je,l?(Je=ze.alternate,Je!==null?(Je=Je.index,Je<je?(ze.flags|=67108866,je):Je):(ze.flags|=67108866,je)):(ze.flags|=1048576,je)}function ee(ze){return l&&ze.alternate===null&&(ze.flags|=67108866),ze}function de(ze,je,Je,mt){return je===null||je.tag!==6?(je=Rd(Je,ze.mode,mt),je.return=ze,je):(je=C(je,Je),je.return=ze,je)}function Ie(ze,je,Je,mt){var dn=Je.type;return dn===b?ht(ze,je,Je.props.children,mt,Je.key):je!==null&&(je.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===I&&Pe(dn)===je.type)?(je=C(je,Je.props),un(je,Je),je.return=ze,je):(je=Zh(Je.type,Je.key,Je.props,null,ze.mode,mt),un(je,Je),je.return=ze,je)}function Ze(ze,je,Je,mt){return je===null||je.tag!==4||je.stateNode.containerInfo!==Je.containerInfo||je.stateNode.implementation!==Je.implementation?(je=ef(Je,ze.mode,mt),je.return=ze,je):(je=C(je,Je.children||[]),je.return=ze,je)}function ht(ze,je,Je,mt,dn){return je===null||je.tag!==7?(je=tu(Je,ze.mode,mt,dn),je.return=ze,je):(je=C(je,Je),je.return=ze,je)}function xt(ze,je,Je){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return je=Rd(""+je,ze.mode,Je),je.return=ze,je;if(typeof je=="object"&&je!==null){switch(je.$$typeof){case v:return Je=Zh(je.type,je.key,je.props,null,ze.mode,Je),un(Je,je),Je.return=ze,Je;case _:return je=ef(je,ze.mode,Je),je.return=ze,je;case I:return je=Pe(je),xt(ze,je,Je)}if(ie(je)||P(je))return je=tu(je,ze.mode,Je,null),je.return=ze,je;if(typeof je.then=="function")return xt(ze,Vt(je),Je);if(je.$$typeof===E)return xt(ze,xm(ze,je),Je);Ht(ze,je)}return null}function et(ze,je,Je,mt){var dn=je!==null?je.key:null;if(typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint")return dn!==null?null:de(ze,je,""+Je,mt);if(typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case v:return Je.key===dn?Ie(ze,je,Je,mt):null;case _:return Je.key===dn?Ze(ze,je,Je,mt):null;case I:return Je=Pe(Je),et(ze,je,Je,mt)}if(ie(Je)||P(Je))return dn!==null?null:ht(ze,je,Je,mt,null);if(typeof Je.then=="function")return et(ze,je,Vt(Je),mt);if(Je.$$typeof===E)return et(ze,je,xm(ze,Je),mt);Ht(ze,Je)}return null}function it(ze,je,Je,mt,dn){if(typeof mt=="string"&&mt!==""||typeof mt=="number"||typeof mt=="bigint")return ze=ze.get(Je)||null,de(je,ze,""+mt,dn);if(typeof mt=="object"&&mt!==null){switch(mt.$$typeof){case v:return ze=ze.get(mt.key===null?Je:mt.key)||null,Ie(je,ze,mt,dn);case _:return ze=ze.get(mt.key===null?Je:mt.key)||null,Ze(je,ze,mt,dn);case I:return mt=Pe(mt),it(ze,je,Je,mt,dn)}if(ie(mt)||P(mt))return ze=ze.get(Je)||null,ht(je,ze,mt,dn,null);if(typeof mt.then=="function")return it(ze,je,Je,Vt(mt),dn);if(mt.$$typeof===E)return it(ze,je,Je,xm(je,mt),dn);Ht(je,mt)}return null}function nn(ze,je,Je,mt){for(var dn=null,xr=null,on=je,On=je=0,Jn=null;on!==null&&On<Je.length;On++){on.index>On?(Jn=on,on=null):Jn=on.sibling;var vr=et(ze,on,Je[On],mt);if(vr===null){on===null&&(on=Jn);break}l&&on&&vr.alternate===null&&h(ze,on),je=L(vr,je,On),xr===null?dn=vr:xr.sibling=vr,xr=vr,on=Jn}if(On===Je.length)return m(ze,on),Wn&&no(ze,On),dn;if(on===null){for(;On<Je.length;On++)on=xt(ze,Je[On],mt),on!==null&&(je=L(on,je,On),xr===null?dn=on:xr.sibling=on,xr=on);return Wn&&no(ze,On),dn}for(on=y(on);On<Je.length;On++)Jn=it(on,ze,On,Je[On],mt),Jn!==null&&(l&&Jn.alternate!==null&&on.delete(Jn.key===null?On:Jn.key),je=L(Jn,je,On),xr===null?dn=Jn:xr.sibling=Jn,xr=Jn);return l&&on.forEach(function(wf){return h(ze,wf)}),Wn&&no(ze,On),dn}function _n(ze,je,Je,mt){if(Je==null)throw Error(r(151));for(var dn=null,xr=null,on=je,On=je=0,Jn=null,vr=Je.next();on!==null&&!vr.done;On++,vr=Je.next()){on.index>On?(Jn=on,on=null):Jn=on.sibling;var wf=et(ze,on,vr.value,mt);if(wf===null){on===null&&(on=Jn);break}l&&on&&wf.alternate===null&&h(ze,on),je=L(wf,je,On),xr===null?dn=wf:xr.sibling=wf,xr=wf,on=Jn}if(vr.done)return m(ze,on),Wn&&no(ze,On),dn;if(on===null){for(;!vr.done;On++,vr=Je.next())vr=xt(ze,vr.value,mt),vr!==null&&(je=L(vr,je,On),xr===null?dn=vr:xr.sibling=vr,xr=vr);return Wn&&no(ze,On),dn}for(on=y(on);!vr.done;On++,vr=Je.next())vr=it(on,ze,On,vr.value,mt),vr!==null&&(l&&vr.alternate!==null&&on.delete(vr.key===null?On:vr.key),je=L(vr,je,On),xr===null?dn=vr:xr.sibling=vr,xr=vr);return l&&on.forEach(function(k9){return h(ze,k9)}),Wn&&no(ze,On),dn}function Wr(ze,je,Je,mt){if(typeof Je=="object"&&Je!==null&&Je.type===b&&Je.key===null&&(Je=Je.props.children),typeof Je=="object"&&Je!==null){switch(Je.$$typeof){case v:e:{for(var dn=Je.key;je!==null;){if(je.key===dn){if(dn=Je.type,dn===b){if(je.tag===7){m(ze,je.sibling),mt=C(je,Je.props.children),mt.return=ze,ze=mt;break e}}else if(je.elementType===dn||typeof dn=="object"&&dn!==null&&dn.$$typeof===I&&Pe(dn)===je.type){m(ze,je.sibling),mt=C(je,Je.props),un(mt,Je),mt.return=ze,ze=mt;break e}m(ze,je);break}else h(ze,je);je=je.sibling}Je.type===b?(mt=tu(Je.props.children,ze.mode,mt,Je.key),mt.return=ze,ze=mt):(mt=Zh(Je.type,Je.key,Je.props,null,ze.mode,mt),un(mt,Je),mt.return=ze,ze=mt)}return ee(ze);case _:e:{for(dn=Je.key;je!==null;){if(je.key===dn)if(je.tag===4&&je.stateNode.containerInfo===Je.containerInfo&&je.stateNode.implementation===Je.implementation){m(ze,je.sibling),mt=C(je,Je.children||[]),mt.return=ze,ze=mt;break e}else{m(ze,je);break}else h(ze,je);je=je.sibling}mt=ef(Je,ze.mode,mt),mt.return=ze,ze=mt}return ee(ze);case I:return Je=Pe(Je),Wr(ze,je,Je,mt)}if(ie(Je))return nn(ze,je,Je,mt);if(P(Je)){if(dn=P(Je),typeof dn!="function")throw Error(r(150));return Je=dn.call(Je),_n(ze,je,Je,mt)}if(typeof Je.then=="function")return Wr(ze,je,Vt(Je),mt);if(Je.$$typeof===E)return Wr(ze,je,xm(ze,Je),mt);Ht(ze,Je)}return typeof Je=="string"&&Je!==""||typeof Je=="number"||typeof Je=="bigint"?(Je=""+Je,je!==null&&je.tag===6?(m(ze,je.sibling),mt=C(je,Je),mt.return=ze,ze=mt):(m(ze,je),mt=Rd(Je,ze.mode,mt),mt.return=ze,ze=mt),ee(ze)):m(ze,je)}return function(ze,je,Je,mt){try{Yt=0;var dn=Wr(ze,je,Je,mt);return ft=null,dn}catch(on){if(on===Re||on===Xe)throw on;var xr=Gs(29,on,null,ze.mode);return xr.lanes=mt,xr.return=ze,xr}finally{}}}var Gn=lr(!0),Xn=lr(!1),Dn=!1;function _r(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gr(l,h){l=l.updateQueue,h.updateQueue===l&&(h.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function bn(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function Nr(l,h,m){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(wr&2)!==0){var C=y.pending;return C===null?h.next=h:(h.next=C.next,C.next=h),y.pending=h,h=Ws(l),Id(l,null,m),h}return kd(l,y,h,m),Ws(l)}function hs(l,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var y=h.lanes;y&=l.pendingLanes,m|=y,h.lanes=m,Ar(l,m)}}function xi(l,h){var m=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,m===y)){var C=null,L=null;if(m=m.firstBaseUpdate,m!==null){do{var ee={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};L===null?C=L=ee:L=L.next=ee,m=m.next}while(m!==null);L===null?C=L=h:L=L.next=h}else C=L=h;m={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:L,shared:y.shared,callbacks:y.callbacks},l.updateQueue=m;return}l=m.lastBaseUpdate,l===null?m.firstBaseUpdate=h:l.next=h,m.lastBaseUpdate=h}var $s=!1;function ir(){if($s){var l=D;if(l!==null)throw l}}function Rs(l,h,m,y){$s=!1;var C=l.updateQueue;Dn=!1;var L=C.firstBaseUpdate,ee=C.lastBaseUpdate,de=C.shared.pending;if(de!==null){C.shared.pending=null;var Ie=de,Ze=Ie.next;Ie.next=null,ee===null?L=Ze:ee.next=Ze,ee=Ie;var ht=l.alternate;ht!==null&&(ht=ht.updateQueue,de=ht.lastBaseUpdate,de!==ee&&(de===null?ht.firstBaseUpdate=Ze:de.next=Ze,ht.lastBaseUpdate=Ie))}if(L!==null){var xt=C.baseState;ee=0,ht=Ze=Ie=null,de=L;do{var et=de.lane&-536870913,it=et!==de.lane;if(it?(Qn&et)===et:(y&et)===et){et!==0&&et===w&&($s=!0),ht!==null&&(ht=ht.next={lane:0,tag:de.tag,payload:de.payload,callback:null,next:null});e:{var nn=l,_n=de;et=h;var Wr=m;switch(_n.tag){case 1:if(nn=_n.payload,typeof nn=="function"){xt=nn.call(Wr,xt,et);break e}xt=nn;break e;case 3:nn.flags=nn.flags&-65537|128;case 0:if(nn=_n.payload,et=typeof nn=="function"?nn.call(Wr,xt,et):nn,et==null)break e;xt=p({},xt,et);break e;case 2:Dn=!0}}et=de.callback,et!==null&&(l.flags|=64,it&&(l.flags|=8192),it=C.callbacks,it===null?C.callbacks=[et]:it.push(et))}else it={lane:et,tag:de.tag,payload:de.payload,callback:de.callback,next:null},ht===null?(Ze=ht=it,Ie=xt):ht=ht.next=it,ee|=et;if(de=de.next,de===null){if(de=C.shared.pending,de===null)break;it=de,de=it.next,it.next=null,C.lastBaseUpdate=it,C.shared.pending=null}}while(!0);ht===null&&(Ie=xt),C.baseState=Ie,C.firstBaseUpdate=Ze,C.lastBaseUpdate=ht,L===null&&(C.shared.lanes=0),ff|=ee,l.lanes=ee,l.memoizedState=xt}}function Ta(l,h){if(typeof l!="function")throw Error(r(191,l));l.call(h)}function Yi(l,h){var m=l.callbacks;if(m!==null)for(l.callbacks=null,l=0;l<m.length;l++)Ta(m[l],h)}var vi=re(null),fs=re(0);function ro(l,h){l=hh,W(fs,l),W(vi,h),hh=l|h.baseLanes}function Io(){W(fs,hh),W(vi,vi.current)}function Oi(){hh=fs.current,M(vi),M(fs)}var Ii=re(null),ds=null;function io(l){var h=l.alternate;W(yi,yi.current&1),W(Ii,l),ds===null&&(h===null||vi.current!==null||h.memoizedState!==null)&&(ds=l)}function jl(l){W(yi,yi.current),W(Ii,l),ds===null&&(ds=l)}function oi(l){l.tag===22?(W(yi,yi.current),W(Ii,l),ds===null&&(ds=l)):Ll()}function Ll(){W(yi,yi.current),W(Ii,Ii.current)}function Ea(l){M(Ii),ds===l&&(ds=null),M(yi)}var yi=re(0);function eh(l){for(var h=l;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||Sw(m)||Tw(m)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var so=0,Cn=null,Bn=null,Yr=null,mc=!1,th=!1,Ol=!1,Od=0,lu=0,cu=null,ym=0;function Hr(){throw Error(r(321))}function mg(l,h){if(h===null)return!1;for(var m=0;m<h.length&&m<l.length;m++)if(!oa(l[m],h[m]))return!1;return!0}function pg(l,h,m,y,C,L){return so=L,Cn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,q.H=l===null||l.memoizedState===null?EA:j_,Ol=!1,L=m(y,C),Ol=!1,th&&(L=pc(h,m,y,C)),bm(l),L}function bm(l){q.H=Sg;var h=Bn!==null&&Bn.next!==null;if(so=0,Yr=Bn=Cn=null,mc=!1,lu=0,cu=null,h)throw Error(r(300));l===null||ps||(l=l.dependencies,l!==null&&gm(l)&&(ps=!0))}function pc(l,h,m,y){Cn=l;var C=0;do{if(th&&(cu=null),lu=0,th=!1,25<=C)throw Error(r(301));if(C+=1,Yr=Bn=null,l.updateQueue!=null){var L=l.updateQueue;L.lastEffect=null,L.events=null,L.stores=null,L.memoCache!=null&&(L.memoCache.index=0)}q.H=AA,L=h(m,y)}while(th);return L}function N_(){var l=q.H,h=l.useState()[0];return h=typeof h.then=="function"?uu(h):h,l=l.useState()[0],(Bn!==null?Bn.memoizedState:null)!==l&&(Cn.flags|=1024),h}function gg(){var l=Od!==0;return Od=0,l}function xg(l,h,m){h.updateQueue=l.updateQueue,h.flags&=-2053,l.lanes&=~m}function _m(l){if(mc){for(l=l.memoizedState;l!==null;){var h=l.queue;h!==null&&(h.pending=null),l=l.next}mc=!1}so=0,Yr=Bn=Cn=null,th=!1,lu=Od=0,cu=null}function ms(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yr===null?Cn.memoizedState=Yr=l:Yr=Yr.next=l,Yr}function bi(){if(Bn===null){var l=Cn.alternate;l=l!==null?l.memoizedState:null}else l=Bn.next;var h=Yr===null?Cn.memoizedState:Yr.next;if(h!==null)Yr=h,Bn=l;else{if(l===null)throw Cn.alternate===null?Error(r(467)):Error(r(310));Bn=l,l={memoizedState:Bn.memoizedState,baseState:Bn.baseState,baseQueue:Bn.baseQueue,queue:Bn.queue,next:null},Yr===null?Cn.memoizedState=Yr=l:Yr=Yr.next=l}return Yr}function Md(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function uu(l){var h=lu;return lu+=1,cu===null&&(cu=[]),l=st(cu,l,h),h=Cn,(Yr===null?h.memoizedState:Yr.next)===null&&(h=h.alternate,q.H=h===null||h.memoizedState===null?EA:j_),l}function af(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return uu(l);if(l.$$typeof===E)return Ds(l)}throw Error(r(438,String(l)))}function nh(l){var h=null,m=Cn.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var y=Cn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(h={data:y.data.map(function(C){return C.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=Md(),Cn.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(l),y=0;y<l;y++)m[y]=B;return h.index++,m}function Ml(l,h){return typeof h=="function"?h(l):h}function wm(l){var h=bi();return of(h,Bn,l)}function of(l,h,m){var y=l.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=m;var C=l.baseQueue,L=y.pending;if(L!==null){if(C!==null){var ee=C.next;C.next=L.next,L.next=ee}h.baseQueue=C=L,y.pending=null}if(L=l.baseState,C===null)l.memoizedState=L;else{h=C.next;var de=ee=null,Ie=null,Ze=h,ht=!1;do{var xt=Ze.lane&-536870913;if(xt!==Ze.lane?(Qn&xt)===xt:(so&xt)===xt){var et=Ze.revertLane;if(et===0)Ie!==null&&(Ie=Ie.next={lane:0,revertLane:0,gesture:null,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null}),xt===w&&(ht=!0);else if((so&et)===et){Ze=Ze.next,et===w&&(ht=!0);continue}else xt={lane:0,revertLane:Ze.revertLane,gesture:null,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Ie===null?(de=Ie=xt,ee=L):Ie=Ie.next=xt,Cn.lanes|=et,ff|=et;xt=Ze.action,Ol&&m(L,xt),L=Ze.hasEagerState?Ze.eagerState:m(L,xt)}else et={lane:xt,revertLane:Ze.revertLane,gesture:Ze.gesture,action:Ze.action,hasEagerState:Ze.hasEagerState,eagerState:Ze.eagerState,next:null},Ie===null?(de=Ie=et,ee=L):Ie=Ie.next=et,Cn.lanes|=xt,ff|=xt;Ze=Ze.next}while(Ze!==null&&Ze!==h);if(Ie===null?ee=L:Ie.next=de,!oa(L,l.memoizedState)&&(ps=!0,ht&&(m=D,m!==null)))throw m;l.memoizedState=L,l.baseState=ee,l.baseQueue=Ie,y.lastRenderedState=L}return C===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function Sm(l){var h=bi(),m=h.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=l;var y=m.dispatch,C=m.pending,L=h.memoizedState;if(C!==null){m.pending=null;var ee=C=C.next;do L=l(L,ee.action),ee=ee.next;while(ee!==C);oa(L,h.memoizedState)||(ps=!0),h.memoizedState=L,h.baseQueue===null&&(h.baseState=L),m.lastRenderedState=L}return[L,y]}function Tm(l,h,m){var y=Cn,C=bi(),L=Wn;if(L){if(m===void 0)throw Error(r(407));m=m()}else m=h();var ee=!oa((Bn||C).memoizedState,m);if(ee&&(C.memoizedState=m,ps=!0),C=C.queue,C_(yg.bind(null,y,C,l),[l]),C.getSnapshot!==h||ee||Yr!==null&&Yr.memoizedState.tag&1){if(y.flags|=2048,ih(9,{destroy:void 0},vg.bind(null,y,C,m,h),null),Xr===null)throw Error(r(349));L||(so&127)!==0||gc(y,h,m)}return m}function gc(l,h,m){l.flags|=16384,l={getSnapshot:h,value:m},h=Cn.updateQueue,h===null?(h=Md(),Cn.updateQueue=h,h.stores=[l]):(m=h.stores,m===null?h.stores=[l]:m.push(l))}function vg(l,h,m,y){h.value=m,h.getSnapshot=y,wv(h)&&bg(l)}function yg(l,h,m){return m(function(){wv(h)&&bg(l)})}function wv(l){var h=l.getSnapshot;l=l.value;try{var m=h();return!oa(l,m)}catch{return!0}}function bg(l){var h=fc(l,2);h!==null&&Lo(h,l,2)}function hu(l){var h=ms();if(typeof l=="function"){var m=l;if(l=m(),Ol){Nt(!0);try{m()}finally{Nt(!1)}}}return h.memoizedState=h.baseState=l,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:l},h}function Sv(l,h,m,y){return l.baseState=m,of(l,Bn,typeof y=="function"?y:Ml)}function Tv(l,h,m,y,C){if(Cv(l))throw Error(r(485));if(l=h.action,l!==null){var L={payload:C,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ee){L.listeners.push(ee)}};q.T!==null?m(!0):L.isTransition=!1,y(L),m=h.pending,m===null?(L.next=h.pending=L,Ev(h,L)):(L.next=m.next,h.pending=m.next=L)}}function Ev(l,h){var m=h.action,y=h.payload,C=l.state;if(h.isTransition){var L=q.T,ee={};q.T=ee;try{var de=m(C,y),Ie=q.S;Ie!==null&&Ie(ee,de),_g(l,h,de)}catch(Ze){rh(l,h,Ze)}finally{L!==null&&ee.types!==null&&(L.types=ee.types),q.T=L}}else try{L=m(C,y),_g(l,h,L)}catch(Ze){rh(l,h,Ze)}}function _g(l,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(y){Av(l,h,y)},function(y){return rh(l,h,y)}):Av(l,h,m)}function Av(l,h,m){h.status="fulfilled",h.value=m,Em(h),l.state=m,h=l.pending,h!==null&&(m=h.next,m===h?l.pending=null:(m=m.next,h.next=m,Ev(l,m)))}function rh(l,h,m){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do h.status="rejected",h.reason=m,Em(h),h=h.next;while(h!==y)}l.action=null}function Em(l){l=l.listeners;for(var h=0;h<l.length;h++)(0,l[h])()}function Fd(l,h){return h}function Fl(l,h){if(Wn){var m=Xr.formState;if(m!==null){e:{var y=Cn;if(Wn){if(Kr){t:{for(var C=Kr,L=gi;C.nodeType!==8;){if(!L){C=null;break t}if(C=Bl(C.nextSibling),C===null){C=null;break t}}L=C.data,C=L==="F!"||L==="F"?C:null}if(C){Kr=Bl(C.nextSibling),y=C.data==="F!";break e}}ru(y)}y=!1}y&&(h=m[0])}}return m=ms(),m.memoizedState=m.baseState=h,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fd,lastRenderedState:h},m.queue=y,m=wA.bind(null,Cn,y),y.dispatch=m,y=hu(!1),L=P_.bind(null,Cn,!1,y.queue),y=ms(),C={state:h,dispatch:null,action:l,pending:null},y.queue=C,m=Tv.bind(null,Cn,C,L,m),C.dispatch=m,y.memoizedState=l,[h,m,!1]}function xc(l){var h=bi();return vc(h,Bn,l)}function vc(l,h,m){if(h=of(l,h,Fd)[0],l=wm(Ml)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var y=uu(h)}catch(ee){throw ee===Re?Xe:ee}else y=h;h=bi();var C=h.queue,L=C.dispatch;return m!==h.memoizedState&&(Cn.flags|=2048,ih(9,{destroy:void 0},Am.bind(null,C,m),null)),[y,L,l]}function Am(l,h){l.action=h}function Nm(l){var h=bi(),m=Bn;if(m!==null)return vc(h,m,l);bi(),h=h.memoizedState,m=bi();var y=m.queue.dispatch;return m.memoizedState=l,[h,y,!1]}function ih(l,h,m,y){return l={tag:l,create:m,deps:y,inst:h,next:null},h=Cn.updateQueue,h===null&&(h=Md(),Cn.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=l.next=l:(y=m.next,m.next=l,l.next=y,h.lastEffect=l),l}function Nv(){return bi().memoizedState}function lf(l,h,m,y){var C=ms();Cn.flags|=l,C.memoizedState=ih(1|h,{destroy:void 0},m,y===void 0?null:y)}function cf(l,h,m,y){var C=bi();y=y===void 0?null:y;var L=C.memoizedState.inst;Bn!==null&&y!==null&&mg(y,Bn.memoizedState.deps)?C.memoizedState=ih(h,L,m,y):(Cn.flags|=l,C.memoizedState=ih(1|h,L,m,y))}function lA(l,h){lf(8390656,8,l,h)}function C_(l,h){cf(2048,8,l,h)}function S7(l){Cn.flags|=4;var h=Cn.updateQueue;if(h===null)h=Md(),Cn.updateQueue=h,h.events=[l];else{var m=h.events;m===null?h.events=[l]:m.push(l)}}function cA(l){var h=bi().memoizedState;return S7({ref:h,nextImpl:l}),function(){if((wr&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}function uA(l,h){return cf(4,2,l,h)}function hA(l,h){return cf(4,4,l,h)}function fA(l,h){if(typeof h=="function"){l=l();var m=h(l);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return l=l(),h.current=l,function(){h.current=null}}function dA(l,h,m){m=m!=null?m.concat([l]):null,cf(4,4,fA.bind(null,h,l),m)}function k_(){}function mA(l,h){var m=bi();h=h===void 0?null:h;var y=m.memoizedState;return h!==null&&mg(h,y[1])?y[0]:(m.memoizedState=[l,h],l)}function pA(l,h){var m=bi();h=h===void 0?null:h;var y=m.memoizedState;if(h!==null&&mg(h,y[1]))return y[0];if(y=l(),Ol){Nt(!0);try{l()}finally{Nt(!1)}}return m.memoizedState=[y,h],y}function I_(l,h,m){return m===void 0||(so&1073741824)!==0&&(Qn&261930)===0?l.memoizedState=h:(l.memoizedState=m,l=gN(),Cn.lanes|=l,ff|=l,m)}function gA(l,h,m,y){return oa(m,h)?m:vi.current!==null?(l=I_(l,m,y),oa(l,h)||(ps=!0),l):(so&42)===0||(so&1073741824)!==0&&(Qn&261930)===0?(ps=!0,l.memoizedState=m):(l=gN(),Cn.lanes|=l,ff|=l,h)}function xA(l,h,m,y,C){var L=Q.p;Q.p=L!==0&&8>L?L:8;var ee=q.T,de={};q.T=de,P_(l,!1,h,m);try{var Ie=C(),Ze=q.S;if(Ze!==null&&Ze(de,Ie),Ie!==null&&typeof Ie=="object"&&typeof Ie.then=="function"){var ht=ae(Ie,y);wg(l,h,ht,cl(l))}else wg(l,h,y,cl(l))}catch(xt){wg(l,h,{then:function(){},status:"rejected",reason:xt},cl())}finally{Q.p=L,ee!==null&&de.types!==null&&(ee.types=de.types),q.T=ee}}function T7(){}function D_(l,h,m,y){if(l.tag!==5)throw Error(r(476));var C=vA(l).queue;xA(l,C,h,se,m===null?T7:function(){return yA(l),m(y)})}function vA(l){var h=l.memoizedState;if(h!==null)return h;h={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:se},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:m},next:null},l.memoizedState=h,l=l.alternate,l!==null&&(l.memoizedState=h),h}function yA(l){var h=vA(l);h.next===null&&(h=l.alternate.memoizedState),wg(l,h.next.queue,{},cl())}function R_(){return Ds(Bg)}function bA(){return bi().memoizedState}function _A(){return bi().memoizedState}function E7(l){for(var h=l.return;h!==null;){switch(h.tag){case 24:case 3:var m=cl();l=bn(m);var y=Nr(h,l,m);y!==null&&(Lo(y,h,m),hs(y,h,m)),h={cache:sf()},l.payload=h;return}h=h.return}}function A7(l,h,m){var y=cl();m={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Cv(l)?SA(h,m):(m=lm(l,h,m,y),m!==null&&(Lo(m,l,y),TA(m,h,y)))}function wA(l,h,m){var y=cl();wg(l,h,m,y)}function wg(l,h,m,y){var C={lane:y,revertLane:0,gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null};if(Cv(l))SA(h,C);else{var L=l.alternate;if(l.lanes===0&&(L===null||L.lanes===0)&&(L=h.lastRenderedReducer,L!==null))try{var ee=h.lastRenderedState,de=L(ee,m);if(C.hasEagerState=!0,C.eagerState=de,oa(de,ee))return kd(l,h,C,0),Xr===null&&Cd(),!1}catch{}finally{}if(m=lm(l,h,C,y),m!==null)return Lo(m,l,y),TA(m,h,y),!0}return!1}function P_(l,h,m,y){if(y={lane:2,revertLane:hw(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},Cv(l)){if(h)throw Error(r(479))}else h=lm(l,m,y,2),h!==null&&Lo(h,l,2)}function Cv(l){var h=l.alternate;return l===Cn||h!==null&&h===Cn}function SA(l,h){th=mc=!0;var m=l.pending;m===null?h.next=h:(h.next=m.next,m.next=h),l.pending=h}function TA(l,h,m){if((m&4194048)!==0){var y=h.lanes;y&=l.pendingLanes,m|=y,h.lanes=m,Ar(l,m)}}var Sg={readContext:Ds,use:af,useCallback:Hr,useContext:Hr,useEffect:Hr,useImperativeHandle:Hr,useLayoutEffect:Hr,useInsertionEffect:Hr,useMemo:Hr,useReducer:Hr,useRef:Hr,useState:Hr,useDebugValue:Hr,useDeferredValue:Hr,useTransition:Hr,useSyncExternalStore:Hr,useId:Hr,useHostTransitionStatus:Hr,useFormState:Hr,useActionState:Hr,useOptimistic:Hr,useMemoCache:Hr,useCacheRefresh:Hr};Sg.useEffectEvent=Hr;var EA={readContext:Ds,use:af,useCallback:function(l,h){return ms().memoizedState=[l,h===void 0?null:h],l},useContext:Ds,useEffect:lA,useImperativeHandle:function(l,h,m){m=m!=null?m.concat([l]):null,lf(4194308,4,fA.bind(null,h,l),m)},useLayoutEffect:function(l,h){return lf(4194308,4,l,h)},useInsertionEffect:function(l,h){lf(4,2,l,h)},useMemo:function(l,h){var m=ms();h=h===void 0?null:h;var y=l();if(Ol){Nt(!0);try{l()}finally{Nt(!1)}}return m.memoizedState=[y,h],y},useReducer:function(l,h,m){var y=ms();if(m!==void 0){var C=m(h);if(Ol){Nt(!0);try{m(h)}finally{Nt(!1)}}}else C=h;return y.memoizedState=y.baseState=C,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:C},y.queue=l,l=l.dispatch=A7.bind(null,Cn,l),[y.memoizedState,l]},useRef:function(l){var h=ms();return l={current:l},h.memoizedState=l},useState:function(l){l=hu(l);var h=l.queue,m=wA.bind(null,Cn,h);return h.dispatch=m,[l.memoizedState,m]},useDebugValue:k_,useDeferredValue:function(l,h){var m=ms();return I_(m,l,h)},useTransition:function(){var l=hu(!1);return l=xA.bind(null,Cn,l.queue,!0,!1),ms().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,h,m){var y=Cn,C=ms();if(Wn){if(m===void 0)throw Error(r(407));m=m()}else{if(m=h(),Xr===null)throw Error(r(349));(Qn&127)!==0||gc(y,h,m)}C.memoizedState=m;var L={value:m,getSnapshot:h};return C.queue=L,lA(yg.bind(null,y,L,l),[l]),y.flags|=2048,ih(9,{destroy:void 0},vg.bind(null,y,L,m,h),null),m},useId:function(){var l=ms(),h=Xr.identifierPrefix;if(Wn){var m=Co,y=No;m=(y&~(1<<32-gt(y)-1)).toString(32)+m,h="_"+h+"R_"+m,m=Od++,0<m&&(h+="H"+m.toString(32)),h+="_"}else m=ym++,h="_"+h+"r_"+m.toString(32)+"_";return l.memoizedState=h},useHostTransitionStatus:R_,useFormState:Fl,useActionState:Fl,useOptimistic:function(l){var h=ms();h.memoizedState=h.baseState=l;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=P_.bind(null,Cn,!0,m),m.dispatch=h,[l,h]},useMemoCache:nh,useCacheRefresh:function(){return ms().memoizedState=E7.bind(null,Cn)},useEffectEvent:function(l){var h=ms(),m={impl:l};return h.memoizedState=m,function(){if((wr&2)!==0)throw Error(r(440));return m.impl.apply(void 0,arguments)}}},j_={readContext:Ds,use:af,useCallback:mA,useContext:Ds,useEffect:C_,useImperativeHandle:dA,useInsertionEffect:uA,useLayoutEffect:hA,useMemo:pA,useReducer:wm,useRef:Nv,useState:function(){return wm(Ml)},useDebugValue:k_,useDeferredValue:function(l,h){var m=bi();return gA(m,Bn.memoizedState,l,h)},useTransition:function(){var l=wm(Ml)[0],h=bi().memoizedState;return[typeof l=="boolean"?l:uu(l),h]},useSyncExternalStore:Tm,useId:bA,useHostTransitionStatus:R_,useFormState:xc,useActionState:xc,useOptimistic:function(l,h){var m=bi();return Sv(m,Bn,l,h)},useMemoCache:nh,useCacheRefresh:_A};j_.useEffectEvent=cA;var AA={readContext:Ds,use:af,useCallback:mA,useContext:Ds,useEffect:C_,useImperativeHandle:dA,useInsertionEffect:uA,useLayoutEffect:hA,useMemo:pA,useReducer:Sm,useRef:Nv,useState:function(){return Sm(Ml)},useDebugValue:k_,useDeferredValue:function(l,h){var m=bi();return Bn===null?I_(m,l,h):gA(m,Bn.memoizedState,l,h)},useTransition:function(){var l=Sm(Ml)[0],h=bi().memoizedState;return[typeof l=="boolean"?l:uu(l),h]},useSyncExternalStore:Tm,useId:bA,useHostTransitionStatus:R_,useFormState:Nm,useActionState:Nm,useOptimistic:function(l,h){var m=bi();return Bn!==null?Sv(m,Bn,l,h):(m.baseState=l,[l,m.queue.dispatch])},useMemoCache:nh,useCacheRefresh:_A};AA.useEffectEvent=cA;function L_(l,h,m,y){h=l.memoizedState,m=m(y,h),m=m==null?h:p({},h,m),l.memoizedState=m,l.lanes===0&&(l.updateQueue.baseState=m)}var O_={enqueueSetState:function(l,h,m){l=l._reactInternals;var y=cl(),C=bn(y);C.payload=h,m!=null&&(C.callback=m),h=Nr(l,C,y),h!==null&&(Lo(h,l,y),hs(h,l,y))},enqueueReplaceState:function(l,h,m){l=l._reactInternals;var y=cl(),C=bn(y);C.tag=1,C.payload=h,m!=null&&(C.callback=m),h=Nr(l,C,y),h!==null&&(Lo(h,l,y),hs(h,l,y))},enqueueForceUpdate:function(l,h){l=l._reactInternals;var m=cl(),y=bn(m);y.tag=2,h!=null&&(y.callback=h),h=Nr(l,y,m),h!==null&&(Lo(h,l,m),hs(h,l,m))}};function NA(l,h,m,y,C,L,ee){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,L,ee):h.prototype&&h.prototype.isPureReactComponent?!yo(m,y)||!yo(C,L):!0}function CA(l,h,m,y){l=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,y),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,y),h.state!==l&&O_.enqueueReplaceState(h,h.state,null)}function Bd(l,h){var m=h;if("ref"in h){m={};for(var y in h)y!=="ref"&&(m[y]=h[y])}if(l=l.defaultProps){m===h&&(m=p({},m));for(var C in l)m[C]===void 0&&(m[C]=l[C])}return m}function kA(l){Yu(l)}function IA(l){console.error(l)}function DA(l){Yu(l)}function kv(l,h){try{var m=l.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(y){setTimeout(function(){throw y})}}function RA(l,h,m){try{var y=l.onCaughtError;y(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function M_(l,h,m){return m=bn(m),m.tag=3,m.payload={element:null},m.callback=function(){kv(l,h)},m}function PA(l){return l=bn(l),l.tag=3,l}function jA(l,h,m,y){var C=m.type.getDerivedStateFromError;if(typeof C=="function"){var L=y.value;l.payload=function(){return C(L)},l.callback=function(){RA(h,m,y)}}var ee=m.stateNode;ee!==null&&typeof ee.componentDidCatch=="function"&&(l.callback=function(){RA(h,m,y),typeof C!="function"&&(df===null?df=new Set([this]):df.add(this));var de=y.stack;this.componentDidCatch(y.value,{componentStack:de!==null?de:""})})}function N7(l,h,m,y,C){if(m.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(h=m.alternate,h!==null&&au(h,m,C,!0),m=Ii.current,m!==null){switch(m.tag){case 31:case 13:return ds===null?zv():m.alternate===null&&Mi===0&&(Mi=3),m.flags&=-257,m.flags|=65536,m.lanes=C,y===Me?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([y]):h.add(y),lw(l,y,C)),!1;case 22:return m.flags|=65536,y===Me?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([y])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([y]):m.add(y)),lw(l,y,C)),!1}throw Error(r(435,m.tag))}return lw(l,y,C),zv(),!1}if(Wn)return h=Ii.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=C,y!==al&&(l=Error(r(422),{cause:y}),nf(To(l,m)))):(y!==al&&(h=Error(r(423),{cause:y}),nf(To(h,m))),l=l.current.alternate,l.flags|=65536,C&=-C,l.lanes|=C,y=To(y,m),C=M_(l.stateNode,y,C),xi(l,C),Mi!==4&&(Mi=2)),!1;var L=Error(r(520),{cause:y});if(L=To(L,m),Dg===null?Dg=[L]:Dg.push(L),Mi!==4&&(Mi=2),h===null)return!0;y=To(y,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,l=C&-C,m.lanes|=l,l=M_(m.stateNode,y,l),xi(m,l),!1;case 1:if(h=m.type,L=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(df===null||!df.has(L))))return m.flags|=65536,C&=-C,m.lanes|=C,C=PA(C),jA(C,l,m,y),xi(m,C),!1}m=m.return}while(m!==null);return!1}var F_=Error(r(461)),ps=!1;function ua(l,h,m,y){h.child=l===null?Xn(h,null,m,y):Gn(h,l.child,m,y)}function LA(l,h,m,y,C){m=m.render;var L=h.ref;if("ref"in y){var ee={};for(var de in y)de!=="ref"&&(ee[de]=y[de])}else ee=y;return ou(h),y=pg(l,h,m,ee,L,C),de=gg(),l!==null&&!ps?(xg(l,h,C),sh(l,h,C)):(Wn&&de&&hg(h),h.flags|=1,ua(l,h,y,C),h.child)}function OA(l,h,m,y,C){if(l===null){var L=m.type;return typeof L=="function"&&!um(L)&&L.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=L,MA(l,h,L,y,C)):(l=Zh(m.type,null,y,h,h.mode,C),l.ref=h.ref,l.return=h,h.child=l)}if(L=l.child,!G_(l,C)){var ee=L.memoizedProps;if(m=m.compare,m=m!==null?m:yo,m(ee,y)&&l.ref===h.ref)return sh(l,h,C)}return h.flags|=1,l=So(L,y),l.ref=h.ref,l.return=h,h.child=l}function MA(l,h,m,y,C){if(l!==null){var L=l.memoizedProps;if(yo(L,y)&&l.ref===h.ref)if(ps=!1,h.pendingProps=y=L,G_(l,C))(l.flags&131072)!==0&&(ps=!0);else return h.lanes=l.lanes,sh(l,h,C)}return B_(l,h,m,y,C)}function FA(l,h,m,y){var C=y.children,L=l!==null?l.memoizedState:null;if(l===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((h.flags&128)!==0){if(L=L!==null?L.baseLanes|m:m,l!==null){for(y=h.child=l.child,C=0;y!==null;)C=C|y.lanes|y.childLanes,y=y.sibling;y=C&~L}else y=0,h.child=null;return BA(l,h,L,m,y)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},l!==null&&ge(h,L!==null?L.cachePool:null),L!==null?ro(h,L):Io(),oi(h);else return y=h.lanes=536870912,BA(l,h,L!==null?L.baseLanes|m:m,m,y)}else L!==null?(ge(h,L.cachePool),ro(h,L),Ll(),h.memoizedState=null):(l!==null&&ge(h,null),Io(),Ll());return ua(l,h,C,m),h.child}function Tg(l,h){return l!==null&&l.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function BA(l,h,m,y,C){var L=fe();return L=L===null?null:{parent:ki._currentValue,pool:L},h.memoizedState={baseLanes:m,cachePool:L},l!==null&&ge(h,null),Io(),oi(h),l!==null&&au(l,h,y,!0),h.childLanes=C,null}function Iv(l,h){return h=Rv({mode:h.mode,children:h.children},l.mode),h.ref=l.ref,l.child=h,h.return=l,h}function VA(l,h,m){return Gn(h,l.child,null,m),l=Iv(h,h.pendingProps),l.flags|=2,Ea(h),h.memoizedState=null,l}function C7(l,h,m){var y=h.pendingProps,C=(h.flags&128)!==0;if(h.flags&=-129,l===null){if(Wn){if(y.mode==="hidden")return l=Iv(h,y),h.lanes=536870912,Tg(null,l);if(jl(h),(l=Kr)?(l=JN(l,gi),l=l!==null&&l.data==="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:nu!==null?{id:No,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},m=hm(l),m.return=h,h.child=m,ks=h,Kr=null)):l=null,l===null)throw ru(h);return h.lanes=536870912,null}return Iv(h,y)}var L=l.memoizedState;if(L!==null){var ee=L.dehydrated;if(jl(h),C)if(h.flags&256)h.flags&=-257,h=VA(l,h,m);else if(h.memoizedState!==null)h.child=l.child,h.flags|=128,h=null;else throw Error(r(558));else if(ps||au(l,h,m,!1),C=(m&l.childLanes)!==0,ps||C){if(y=Xr,y!==null&&(ee=ei(y,m),ee!==0&&ee!==L.retryLane))throw L.retryLane=ee,fc(l,ee),Lo(y,l,ee),F_;zv(),h=VA(l,h,m)}else l=L.treeContext,Kr=Bl(ee.nextSibling),ks=h,Wn=!0,ca=null,gi=!1,l!==null&&bv(h,l),h=Iv(h,y),h.flags|=4096;return h}return l=So(l.child,{mode:y.mode,children:y.children}),l.ref=h.ref,h.child=l,l.return=h,l}function Dv(l,h){var m=h.ref;if(m===null)l!==null&&l.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(l===null||l.ref!==m)&&(h.flags|=4194816)}}function B_(l,h,m,y,C){return ou(h),m=pg(l,h,m,y,void 0,C),y=gg(),l!==null&&!ps?(xg(l,h,C),sh(l,h,C)):(Wn&&y&&hg(h),h.flags|=1,ua(l,h,m,C),h.child)}function zA(l,h,m,y,C,L){return ou(h),h.updateQueue=null,m=pc(h,y,m,C),bm(l),y=gg(),l!==null&&!ps?(xg(l,h,L),sh(l,h,L)):(Wn&&y&&hg(h),h.flags|=1,ua(l,h,m,L),h.child)}function UA(l,h,m,y,C){if(ou(h),h.stateNode===null){var L=Cs,ee=m.contextType;typeof ee=="object"&&ee!==null&&(L=Ds(ee)),L=new m(y,L),h.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,L.updater=O_,h.stateNode=L,L._reactInternals=h,L=h.stateNode,L.props=y,L.state=h.memoizedState,L.refs={},_r(h),ee=m.contextType,L.context=typeof ee=="object"&&ee!==null?Ds(ee):Cs,L.state=h.memoizedState,ee=m.getDerivedStateFromProps,typeof ee=="function"&&(L_(h,m,ee,y),L.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(ee=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),ee!==L.state&&O_.enqueueReplaceState(L,L.state,null),Rs(h,y,L,C),ir(),L.state=h.memoizedState),typeof L.componentDidMount=="function"&&(h.flags|=4194308),y=!0}else if(l===null){L=h.stateNode;var de=h.memoizedProps,Ie=Bd(m,de);L.props=Ie;var Ze=L.context,ht=m.contextType;ee=Cs,typeof ht=="object"&&ht!==null&&(ee=Ds(ht));var xt=m.getDerivedStateFromProps;ht=typeof xt=="function"||typeof L.getSnapshotBeforeUpdate=="function",de=h.pendingProps!==de,ht||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(de||Ze!==ee)&&CA(h,L,y,ee),Dn=!1;var et=h.memoizedState;L.state=et,Rs(h,y,L,C),ir(),Ze=h.memoizedState,de||et!==Ze||Dn?(typeof xt=="function"&&(L_(h,m,xt,y),Ze=h.memoizedState),(Ie=Dn||NA(h,m,Ie,y,et,Ze,ee))?(ht||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount()),typeof L.componentDidMount=="function"&&(h.flags|=4194308)):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=y,h.memoizedState=Ze),L.props=y,L.state=Ze,L.context=ee,y=Ie):(typeof L.componentDidMount=="function"&&(h.flags|=4194308),y=!1)}else{L=h.stateNode,gr(l,h),ee=h.memoizedProps,ht=Bd(m,ee),L.props=ht,xt=h.pendingProps,et=L.context,Ze=m.contextType,Ie=Cs,typeof Ze=="object"&&Ze!==null&&(Ie=Ds(Ze)),de=m.getDerivedStateFromProps,(Ze=typeof de=="function"||typeof L.getSnapshotBeforeUpdate=="function")||typeof L.UNSAFE_componentWillReceiveProps!="function"&&typeof L.componentWillReceiveProps!="function"||(ee!==xt||et!==Ie)&&CA(h,L,y,Ie),Dn=!1,et=h.memoizedState,L.state=et,Rs(h,y,L,C),ir();var it=h.memoizedState;ee!==xt||et!==it||Dn||l!==null&&l.dependencies!==null&&gm(l.dependencies)?(typeof de=="function"&&(L_(h,m,de,y),it=h.memoizedState),(ht=Dn||NA(h,m,ht,y,et,it,Ie)||l!==null&&l.dependencies!==null&&gm(l.dependencies))?(Ze||typeof L.UNSAFE_componentWillUpdate!="function"&&typeof L.componentWillUpdate!="function"||(typeof L.componentWillUpdate=="function"&&L.componentWillUpdate(y,it,Ie),typeof L.UNSAFE_componentWillUpdate=="function"&&L.UNSAFE_componentWillUpdate(y,it,Ie)),typeof L.componentDidUpdate=="function"&&(h.flags|=4),typeof L.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof L.componentDidUpdate!="function"||ee===l.memoizedProps&&et===l.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ee===l.memoizedProps&&et===l.memoizedState||(h.flags|=1024),h.memoizedProps=y,h.memoizedState=it),L.props=y,L.state=it,L.context=Ie,y=ht):(typeof L.componentDidUpdate!="function"||ee===l.memoizedProps&&et===l.memoizedState||(h.flags|=4),typeof L.getSnapshotBeforeUpdate!="function"||ee===l.memoizedProps&&et===l.memoizedState||(h.flags|=1024),y=!1)}return L=y,Dv(l,h),y=(h.flags&128)!==0,L||y?(L=h.stateNode,m=y&&typeof m.getDerivedStateFromError!="function"?null:L.render(),h.flags|=1,l!==null&&y?(h.child=Gn(h,l.child,null,C),h.child=Gn(h,null,m,C)):ua(l,h,m,C),h.memoizedState=L.state,l=h.child):l=sh(l,h,C),l}function HA(l,h,m,y){return Ju(),h.flags|=256,ua(l,h,m,y),h.child}var V_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function z_(l){return{baseLanes:l,cachePool:Se()}}function U_(l,h,m){return l=l!==null?l.childLanes&~m:0,h&&(l|=ll),l}function qA(l,h,m){var y=h.pendingProps,C=!1,L=(h.flags&128)!==0,ee;if((ee=L)||(ee=l!==null&&l.memoizedState===null?!1:(yi.current&2)!==0),ee&&(C=!0,h.flags&=-129),ee=(h.flags&32)!==0,h.flags&=-33,l===null){if(Wn){if(C?io(h):Ll(),(l=Kr)?(l=JN(l,gi),l=l!==null&&l.data!=="&"?l:null,l!==null&&(h.memoizedState={dehydrated:l,treeContext:nu!==null?{id:No,overflow:Co}:null,retryLane:536870912,hydrationErrors:null},m=hm(l),m.return=h,h.child=m,ks=h,Kr=null)):l=null,l===null)throw ru(h);return Tw(l)?h.lanes=32:h.lanes=536870912,null}var de=y.children;return y=y.fallback,C?(Ll(),C=h.mode,de=Rv({mode:"hidden",children:de},C),y=tu(y,C,m,null),de.return=h,y.return=h,de.sibling=y,h.child=de,y=h.child,y.memoizedState=z_(m),y.childLanes=U_(l,ee,m),h.memoizedState=V_,Tg(null,y)):(io(h),H_(h,de))}var Ie=l.memoizedState;if(Ie!==null&&(de=Ie.dehydrated,de!==null)){if(L)h.flags&256?(io(h),h.flags&=-257,h=q_(l,h,m)):h.memoizedState!==null?(Ll(),h.child=l.child,h.flags|=128,h=null):(Ll(),de=y.fallback,C=h.mode,y=Rv({mode:"visible",children:y.children},C),de=tu(de,C,m,null),de.flags|=2,y.return=h,de.return=h,y.sibling=de,h.child=y,Gn(h,l.child,null,m),y=h.child,y.memoizedState=z_(m),y.childLanes=U_(l,ee,m),h.memoizedState=V_,h=Tg(null,y));else if(io(h),Tw(de)){if(ee=de.nextSibling&&de.nextSibling.dataset,ee)var Ze=ee.dgst;ee=Ze,y=Error(r(419)),y.stack="",y.digest=ee,nf({value:y,source:null,stack:null}),h=q_(l,h,m)}else if(ps||au(l,h,m,!1),ee=(m&l.childLanes)!==0,ps||ee){if(ee=Xr,ee!==null&&(y=ei(ee,m),y!==0&&y!==Ie.retryLane))throw Ie.retryLane=y,fc(l,y),Lo(ee,l,y),F_;Sw(de)||zv(),h=q_(l,h,m)}else Sw(de)?(h.flags|=192,h.child=l.child,h=null):(l=Ie.treeContext,Kr=Bl(de.nextSibling),ks=h,Wn=!0,ca=null,gi=!1,l!==null&&bv(h,l),h=H_(h,y.children),h.flags|=4096);return h}return C?(Ll(),de=y.fallback,C=h.mode,Ie=l.child,Ze=Ie.sibling,y=So(Ie,{mode:"hidden",children:y.children}),y.subtreeFlags=Ie.subtreeFlags&65011712,Ze!==null?de=So(Ze,de):(de=tu(de,C,m,null),de.flags|=2),de.return=h,y.return=h,y.sibling=de,h.child=y,Tg(null,y),y=h.child,de=l.child.memoizedState,de===null?de=z_(m):(C=de.cachePool,C!==null?(Ie=ki._currentValue,C=C.parent!==Ie?{parent:Ie,pool:Ie}:C):C=Se(),de={baseLanes:de.baseLanes|m,cachePool:C}),y.memoizedState=de,y.childLanes=U_(l,ee,m),h.memoizedState=V_,Tg(l.child,y)):(io(h),m=l.child,l=m.sibling,m=So(m,{mode:"visible",children:y.children}),m.return=h,m.sibling=null,l!==null&&(ee=h.deletions,ee===null?(h.deletions=[l],h.flags|=16):ee.push(l)),h.child=m,h.memoizedState=null,m)}function H_(l,h){return h=Rv({mode:"visible",children:h},l.mode),h.return=l,l.child=h}function Rv(l,h){return l=Gs(22,l,null,h),l.lanes=0,l}function q_(l,h,m){return Gn(h,l.child,null,m),l=H_(h,h.pendingProps.children),l.flags|=2,h.memoizedState=null,l}function WA(l,h,m){l.lanes|=h;var y=l.alternate;y!==null&&(y.lanes|=h),rf(l.return,h,m)}function W_(l,h,m,y,C,L){var ee=l.memoizedState;ee===null?l.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:y,tail:m,tailMode:C,treeForkCount:L}:(ee.isBackwards=h,ee.rendering=null,ee.renderingStartTime=0,ee.last=y,ee.tail=m,ee.tailMode=C,ee.treeForkCount=L)}function GA(l,h,m){var y=h.pendingProps,C=y.revealOrder,L=y.tail;y=y.children;var ee=yi.current,de=(ee&2)!==0;if(de?(ee=ee&1|2,h.flags|=128):ee&=1,W(yi,ee),ua(l,h,y,m),y=Wn?Pd:0,!de&&l!==null&&(l.flags&128)!==0)e:for(l=h.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&WA(l,m,h);else if(l.tag===19)WA(l,m,h);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===h)break e;for(;l.sibling===null;){if(l.return===null||l.return===h)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}switch(C){case"forwards":for(m=h.child,C=null;m!==null;)l=m.alternate,l!==null&&eh(l)===null&&(C=m),m=m.sibling;m=C,m===null?(C=h.child,h.child=null):(C=m.sibling,m.sibling=null),W_(h,!1,C,m,L,y);break;case"backwards":case"unstable_legacy-backwards":for(m=null,C=h.child,h.child=null;C!==null;){if(l=C.alternate,l!==null&&eh(l)===null){h.child=C;break}l=C.sibling,C.sibling=m,m=C,C=l}W_(h,!0,m,null,L,y);break;case"together":W_(h,!1,null,null,void 0,y);break;default:h.memoizedState=null}return h.child}function sh(l,h,m){if(l!==null&&(h.dependencies=l.dependencies),ff|=h.lanes,(m&h.childLanes)===0)if(l!==null){if(au(l,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(l!==null&&h.child!==l.child)throw Error(r(153));if(h.child!==null){for(l=h.child,m=So(l,l.pendingProps),h.child=m,m.return=h;l.sibling!==null;)l=l.sibling,m=m.sibling=So(l,l.pendingProps),m.return=h;m.sibling=null}return h.child}function G_(l,h){return(l.lanes&h)!==0?!0:(l=l.dependencies,!!(l!==null&&gm(l)))}function k7(l,h,m){switch(h.tag){case 3:ye(h,h.stateNode.containerInfo),su(h,ki,l.memoizedState.cache),Ju();break;case 27:case 5:Ce(h);break;case 4:ye(h,h.stateNode.containerInfo);break;case 10:su(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,jl(h),null;break;case 13:var y=h.memoizedState;if(y!==null)return y.dehydrated!==null?(io(h),h.flags|=128,null):(m&h.child.childLanes)!==0?qA(l,h,m):(io(h),l=sh(l,h,m),l!==null?l.sibling:null);io(h);break;case 19:var C=(l.flags&128)!==0;if(y=(m&h.childLanes)!==0,y||(au(l,h,m,!1),y=(m&h.childLanes)!==0),C){if(y)return GA(l,h,m);h.flags|=128}if(C=h.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),W(yi,yi.current),y)break;return null;case 22:return h.lanes=0,FA(l,h,m,h.pendingProps);case 24:su(h,ki,l.memoizedState.cache)}return sh(l,h,m)}function $A(l,h,m){if(l!==null)if(l.memoizedProps!==h.pendingProps)ps=!0;else{if(!G_(l,m)&&(h.flags&128)===0)return ps=!1,k7(l,h,m);ps=(l.flags&131072)!==0}else ps=!1,Wn&&(h.flags&1048576)!==0&&yv(h,Pd,h.index);switch(h.lanes=0,h.tag){case 16:e:{var y=h.pendingProps;if(l=Pe(h.elementType),h.type=l,typeof l=="function")um(l)?(y=Bd(l,y),h.tag=1,h=UA(null,h,l,y,m)):(h.tag=0,h=B_(null,h,l,y,m));else{if(l!=null){var C=l.$$typeof;if(C===j){h.tag=11,h=LA(null,h,l,y,m);break e}else if(C===A){h.tag=14,h=OA(null,h,l,y,m);break e}}throw h=Y(l)||l,Error(r(306,h,""))}}return h;case 0:return B_(l,h,h.type,h.pendingProps,m);case 1:return y=h.type,C=Bd(y,h.pendingProps),UA(l,h,y,C,m);case 3:e:{if(ye(h,h.stateNode.containerInfo),l===null)throw Error(r(387));y=h.pendingProps;var L=h.memoizedState;C=L.element,gr(l,h),Rs(h,y,null,m);var ee=h.memoizedState;if(y=ee.cache,su(h,ki,y),y!==L.cache&&Zu(h,[ki],m,!0),ir(),y=ee.element,L.isDehydrated)if(L={element:y,isDehydrated:!1,cache:ee.cache},h.updateQueue.baseState=L,h.memoizedState=L,h.flags&256){h=HA(l,h,y,m);break e}else if(y!==C){C=To(Error(r(424)),h),nf(C),h=HA(l,h,y,m);break e}else{switch(l=h.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(Kr=Bl(l.firstChild),ks=h,Wn=!0,ca=null,gi=!0,m=Xn(h,null,y,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ju(),y===C){h=sh(l,h,m);break e}ua(l,h,y,m)}h=h.child}return h;case 26:return Dv(l,h),l===null?(m=i3(h.type,null,h.pendingProps,null))?h.memoizedState=m:Wn||(m=h.type,l=h.pendingProps,y=Kv(te.current).createElement(m),y[ve]=h,y[we]=l,ha(y,m,l),Qt(y),h.stateNode=y):h.memoizedState=i3(h.type,l.memoizedProps,h.pendingProps,l.memoizedState),null;case 27:return Ce(h),l===null&&Wn&&(y=h.stateNode=t3(h.type,h.pendingProps,te.current),ks=h,gi=!0,C=Kr,xf(h.type)?(Ew=C,Kr=Bl(y.firstChild)):Kr=C),ua(l,h,h.pendingProps.children,m),Dv(l,h),l===null&&(h.flags|=4194304),h.child;case 5:return l===null&&Wn&&((C=y=Kr)&&(y=s9(y,h.type,h.pendingProps,gi),y!==null?(h.stateNode=y,ks=h,Kr=Bl(y.firstChild),gi=!1,C=!0):C=!1),C||ru(h)),Ce(h),C=h.type,L=h.pendingProps,ee=l!==null?l.memoizedProps:null,y=L.children,bw(C,L)?y=null:ee!==null&&bw(C,ee)&&(h.flags|=32),h.memoizedState!==null&&(C=pg(l,h,N_,null,null,m),Bg._currentValue=C),Dv(l,h),ua(l,h,y,m),h.child;case 6:return l===null&&Wn&&((l=m=Kr)&&(m=a9(m,h.pendingProps,gi),m!==null?(h.stateNode=m,ks=h,Kr=null,l=!0):l=!1),l||ru(h)),null;case 13:return qA(l,h,m);case 4:return ye(h,h.stateNode.containerInfo),y=h.pendingProps,l===null?h.child=Gn(h,null,y,m):ua(l,h,y,m),h.child;case 11:return LA(l,h,h.type,h.pendingProps,m);case 7:return ua(l,h,h.pendingProps,m),h.child;case 8:return ua(l,h,h.pendingProps.children,m),h.child;case 12:return ua(l,h,h.pendingProps.children,m),h.child;case 10:return y=h.pendingProps,su(h,h.type,y.value),ua(l,h,y.children,m),h.child;case 9:return C=h.type._context,y=h.pendingProps.children,ou(h),C=Ds(C),y=y(C),h.flags|=1,ua(l,h,y,m),h.child;case 14:return OA(l,h,h.type,h.pendingProps,m);case 15:return MA(l,h,h.type,h.pendingProps,m);case 19:return GA(l,h,m);case 31:return C7(l,h,m);case 22:return FA(l,h,m,h.pendingProps);case 24:return ou(h),y=Ds(ki),l===null?(C=fe(),C===null&&(C=Xr,L=sf(),C.pooledCache=L,L.refCount++,L!==null&&(C.pooledCacheLanes|=m),C=L),h.memoizedState={parent:y,cache:C},_r(h),su(h,ki,C)):((l.lanes&m)!==0&&(gr(l,h),Rs(h,null,null,m),ir()),C=l.memoizedState,L=h.memoizedState,C.parent!==y?(C={parent:y,cache:y},h.memoizedState=C,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=C),su(h,ki,y)):(y=L.cache,su(h,ki,y),y!==C.cache&&Zu(h,[ki],m,!0))),ua(l,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function ah(l){l.flags|=4}function $_(l,h,m,y,C){if((h=(l.mode&32)!==0)&&(h=!1),h){if(l.flags|=16777216,(C&335544128)===C)if(l.stateNode.complete)l.flags|=8192;else if(bN())l.flags|=8192;else throw Le=Me,Qe}else l.flags&=-16777217}function KA(l,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!c3(h))if(bN())l.flags|=8192;else throw Le=Me,Qe}function Pv(l,h){h!==null&&(l.flags|=4),l.flags&16384&&(h=l.tag!==22?hn():536870912,l.lanes|=h,Dm|=h)}function Eg(l,h){if(!Wn)switch(l.tailMode){case"hidden":h=l.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?l.tail=null:m.sibling=null;break;case"collapsed":m=l.tail;for(var y=null;m!==null;)m.alternate!==null&&(y=m),m=m.sibling;y===null?h||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function li(l){var h=l.alternate!==null&&l.alternate.child===l.child,m=0,y=0;if(h)for(var C=l.child;C!==null;)m|=C.lanes|C.childLanes,y|=C.subtreeFlags&65011712,y|=C.flags&65011712,C.return=l,C=C.sibling;else for(C=l.child;C!==null;)m|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=l,C=C.sibling;return l.subtreeFlags|=y,l.childLanes=m,h}function I7(l,h,m){var y=h.pendingProps;switch(mm(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return li(h),null;case 1:return li(h),null;case 3:return m=h.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),h.memoizedState.cache!==y&&(h.flags|=2048),ko(ki),be(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(l===null||l.child===null)&&(Is(h)?ah(h):l===null||l.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,dg())),li(h),null;case 26:var C=h.type,L=h.memoizedState;return l===null?(ah(h),L!==null?(li(h),KA(h,L)):(li(h),$_(h,C,null,y,m))):L?L!==l.memoizedState?(ah(h),li(h),KA(h,L)):(li(h),h.flags&=-16777217):(l=l.memoizedProps,l!==y&&ah(h),li(h),$_(h,C,l,y,m)),null;case 27:if(ke(h),m=te.current,C=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==y&&ah(h);else{if(!y){if(h.stateNode===null)throw Error(r(166));return li(h),null}l=K.current,Is(h)?fg(h):(l=t3(C,y,m),h.stateNode=l,ah(h))}return li(h),null;case 5:if(ke(h),C=h.type,l!==null&&h.stateNode!=null)l.memoizedProps!==y&&ah(h);else{if(!y){if(h.stateNode===null)throw Error(r(166));return li(h),null}if(L=K.current,Is(h))fg(h);else{var ee=Kv(te.current);switch(L){case 1:L=ee.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:L=ee.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":L=ee.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":L=ee.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":L=ee.createElement("div"),L.innerHTML="<script><\/script>",L=L.removeChild(L.firstChild);break;case"select":L=typeof y.is=="string"?ee.createElement("select",{is:y.is}):ee.createElement("select"),y.multiple?L.multiple=!0:y.size&&(L.size=y.size);break;default:L=typeof y.is=="string"?ee.createElement(C,{is:y.is}):ee.createElement(C)}}L[ve]=h,L[we]=y;e:for(ee=h.child;ee!==null;){if(ee.tag===5||ee.tag===6)L.appendChild(ee.stateNode);else if(ee.tag!==4&&ee.tag!==27&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===h)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===h)break e;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}h.stateNode=L;e:switch(ha(L,C,y),C){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&ah(h)}}return li(h),$_(h,h.type,l===null?null:l.memoizedProps,h.pendingProps,m),null;case 6:if(l&&h.stateNode!=null)l.memoizedProps!==y&&ah(h);else{if(typeof y!="string"&&h.stateNode===null)throw Error(r(166));if(l=te.current,Is(h)){if(l=h.stateNode,m=h.memoizedProps,y=null,C=ks,C!==null)switch(C.tag){case 27:case 5:y=C.memoizedProps}l[ve]=h,l=!!(l.nodeValue===m||y!==null&&y.suppressHydrationWarning===!0||qN(l.nodeValue,m)),l||ru(h,!0)}else l=Kv(l).createTextNode(y),l[ve]=h,h.stateNode=l}return li(h),null;case 31:if(m=h.memoizedState,l===null||l.memoizedState!==null){if(y=Is(h),m!==null){if(l===null){if(!y)throw Error(r(318));if(l=h.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(r(557));l[ve]=h}else Ju(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;li(h),l=!1}else m=dg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=m),l=!0;if(!l)return h.flags&256?(Ea(h),h):(Ea(h),null);if((h.flags&128)!==0)throw Error(r(558))}return li(h),null;case 13:if(y=h.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(C=Is(h),y!==null&&y.dehydrated!==null){if(l===null){if(!C)throw Error(r(318));if(C=h.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(r(317));C[ve]=h}else Ju(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;li(h),C=!1}else C=dg(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=C),C=!0;if(!C)return h.flags&256?(Ea(h),h):(Ea(h),null)}return Ea(h),(h.flags&128)!==0?(h.lanes=m,h):(m=y!==null,l=l!==null&&l.memoizedState!==null,m&&(y=h.child,C=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(C=y.alternate.memoizedState.cachePool.pool),L=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(L=y.memoizedState.cachePool.pool),L!==C&&(y.flags|=2048)),m!==l&&m&&(h.child.flags|=8192),Pv(h,h.updateQueue),li(h),null);case 4:return be(),l===null&&pw(h.stateNode.containerInfo),li(h),null;case 10:return ko(h.type),li(h),null;case 19:if(M(yi),y=h.memoizedState,y===null)return li(h),null;if(C=(h.flags&128)!==0,L=y.rendering,L===null)if(C)Eg(y,!1);else{if(Mi!==0||l!==null&&(l.flags&128)!==0)for(l=h.child;l!==null;){if(L=eh(l),L!==null){for(h.flags|=128,Eg(y,!1),l=L.updateQueue,h.updateQueue=l,Pv(h,l),h.subtreeFlags=0,l=m,m=h.child;m!==null;)Dd(m,l),m=m.sibling;return W(yi,yi.current&1|2),Wn&&no(h,y.treeForkCount),h.child}l=l.sibling}y.tail!==null&&Rt()>Fv&&(h.flags|=128,C=!0,Eg(y,!1),h.lanes=4194304)}else{if(!C)if(l=eh(L),l!==null){if(h.flags|=128,C=!0,l=l.updateQueue,h.updateQueue=l,Pv(h,l),Eg(y,!0),y.tail===null&&y.tailMode==="hidden"&&!L.alternate&&!Wn)return li(h),null}else 2*Rt()-y.renderingStartTime>Fv&&m!==536870912&&(h.flags|=128,C=!0,Eg(y,!1),h.lanes=4194304);y.isBackwards?(L.sibling=h.child,h.child=L):(l=y.last,l!==null?l.sibling=L:h.child=L,y.last=L)}return y.tail!==null?(l=y.tail,y.rendering=l,y.tail=l.sibling,y.renderingStartTime=Rt(),l.sibling=null,m=yi.current,W(yi,C?m&1|2:m&1),Wn&&no(h,y.treeForkCount),l):(li(h),null);case 22:case 23:return Ea(h),Oi(),y=h.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(h.flags|=8192):y&&(h.flags|=8192),y?(m&536870912)!==0&&(h.flags&128)===0&&(li(h),h.subtreeFlags&6&&(h.flags|=8192)):li(h),m=h.updateQueue,m!==null&&Pv(h,m.retryQueue),m=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),y=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(y=h.memoizedState.cachePool.pool),y!==m&&(h.flags|=2048),l!==null&&M(ue),null;case 24:return m=null,l!==null&&(m=l.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),ko(ki),li(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function D7(l,h){switch(mm(h),h.tag){case 1:return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 3:return ko(ki),be(),l=h.flags,(l&65536)!==0&&(l&128)===0?(h.flags=l&-65537|128,h):null;case 26:case 27:case 5:return ke(h),null;case 31:if(h.memoizedState!==null){if(Ea(h),h.alternate===null)throw Error(r(340));Ju()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 13:if(Ea(h),l=h.memoizedState,l!==null&&l.dehydrated!==null){if(h.alternate===null)throw Error(r(340));Ju()}return l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 19:return M(yi),null;case 4:return be(),null;case 10:return ko(h.type),null;case 22:case 23:return Ea(h),Oi(),l!==null&&M(ue),l=h.flags,l&65536?(h.flags=l&-65537|128,h):null;case 24:return ko(ki),null;case 25:return null;default:return null}}function YA(l,h){switch(mm(h),h.tag){case 3:ko(ki),be();break;case 26:case 27:case 5:ke(h);break;case 4:be();break;case 31:h.memoizedState!==null&&Ea(h);break;case 13:Ea(h);break;case 19:M(yi);break;case 10:ko(h.type);break;case 22:case 23:Ea(h),Oi(),l!==null&&M(ue);break;case 24:ko(ki)}}function Ag(l,h){try{var m=h.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var C=y.next;m=C;do{if((m.tag&l)===l){y=void 0;var L=m.create,ee=m.inst;y=L(),ee.destroy=y}m=m.next}while(m!==C)}}catch(de){kr(h,h.return,de)}}function uf(l,h,m){try{var y=h.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var L=C.next;y=L;do{if((y.tag&l)===l){var ee=y.inst,de=ee.destroy;if(de!==void 0){ee.destroy=void 0,C=h;var Ie=m,Ze=de;try{Ze()}catch(ht){kr(C,Ie,ht)}}}y=y.next}while(y!==L)}}catch(ht){kr(h,h.return,ht)}}function XA(l){var h=l.updateQueue;if(h!==null){var m=l.stateNode;try{Yi(h,m)}catch(y){kr(l,l.return,y)}}}function QA(l,h,m){m.props=Bd(l.type,l.memoizedProps),m.state=l.memoizedState;try{m.componentWillUnmount()}catch(y){kr(l,h,y)}}function Ng(l,h){try{var m=l.ref;if(m!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof m=="function"?l.refCleanup=m(y):m.current=y}}catch(C){kr(l,h,C)}}function fu(l,h){var m=l.ref,y=l.refCleanup;if(m!==null)if(typeof y=="function")try{y()}catch(C){kr(l,h,C)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(C){kr(l,h,C)}else m.current=null}function JA(l){var h=l.type,m=l.memoizedProps,y=l.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&y.focus();break e;case"img":m.src?y.src=m.src:m.srcSet&&(y.srcset=m.srcSet)}}catch(C){kr(l,l.return,C)}}function K_(l,h,m){try{var y=l.stateNode;Z7(y,l.type,m,h),y[we]=h}catch(C){kr(l,l.return,C)}}function ZA(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&xf(l.type)||l.tag===4}function Y_(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||ZA(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&xf(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function X_(l,h,m){var y=l.tag;if(y===5||y===6)l=l.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(l,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(l),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Vr));else if(y!==4&&(y===27&&xf(l.type)&&(m=l.stateNode,h=null),l=l.child,l!==null))for(X_(l,h,m),l=l.sibling;l!==null;)X_(l,h,m),l=l.sibling}function jv(l,h,m){var y=l.tag;if(y===5||y===6)l=l.stateNode,h?m.insertBefore(l,h):m.appendChild(l);else if(y!==4&&(y===27&&xf(l.type)&&(m=l.stateNode),l=l.child,l!==null))for(jv(l,h,m),l=l.sibling;l!==null;)jv(l,h,m),l=l.sibling}function eN(l){var h=l.stateNode,m=l.memoizedProps;try{for(var y=l.type,C=h.attributes;C.length;)h.removeAttributeNode(C[0]);ha(h,y,m),h[ve]=l,h[we]=m}catch(L){kr(l,l.return,L)}}var oh=!1,gs=!1,Q_=!1,tN=typeof WeakSet=="function"?WeakSet:Set,Ks=null;function R7(l,h){if(l=l.containerInfo,vw=t2,l=il(l),sl(l)){if("selectionStart"in l)var m={start:l.selectionStart,end:l.selectionEnd};else e:{m=(m=l.ownerDocument)&&m.defaultView||window;var y=m.getSelection&&m.getSelection();if(y&&y.rangeCount!==0){m=y.anchorNode;var C=y.anchorOffset,L=y.focusNode;y=y.focusOffset;try{m.nodeType,L.nodeType}catch{m=null;break e}var ee=0,de=-1,Ie=-1,Ze=0,ht=0,xt=l,et=null;t:for(;;){for(var it;xt!==m||C!==0&&xt.nodeType!==3||(de=ee+C),xt!==L||y!==0&&xt.nodeType!==3||(Ie=ee+y),xt.nodeType===3&&(ee+=xt.nodeValue.length),(it=xt.firstChild)!==null;)et=xt,xt=it;for(;;){if(xt===l)break t;if(et===m&&++Ze===C&&(de=ee),et===L&&++ht===y&&(Ie=ee),(it=xt.nextSibling)!==null)break;xt=et,et=xt.parentNode}xt=it}m=de===-1||Ie===-1?null:{start:de,end:Ie}}else m=null}m=m||{start:0,end:0}}else m=null;for(yw={focusedElem:l,selectionRange:m},t2=!1,Ks=h;Ks!==null;)if(h=Ks,l=h.child,(h.subtreeFlags&1028)!==0&&l!==null)l.return=h,Ks=l;else for(;Ks!==null;){switch(h=Ks,L=h.alternate,l=h.flags,h.tag){case 0:if((l&4)!==0&&(l=h.updateQueue,l=l!==null?l.events:null,l!==null))for(m=0;m<l.length;m++)C=l[m],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((l&1024)!==0&&L!==null){l=void 0,m=h,C=L.memoizedProps,L=L.memoizedState,y=m.stateNode;try{var nn=Bd(m.type,C);l=y.getSnapshotBeforeUpdate(nn,L),y.__reactInternalSnapshotBeforeUpdate=l}catch(_n){kr(m,m.return,_n)}}break;case 3:if((l&1024)!==0){if(l=h.stateNode.containerInfo,m=l.nodeType,m===9)ww(l);else if(m===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":ww(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(r(163))}if(l=h.sibling,l!==null){l.return=h.return,Ks=l;break}Ks=h.return}}function nN(l,h,m){var y=m.flags;switch(m.tag){case 0:case 11:case 15:ch(l,m),y&4&&Ag(5,m);break;case 1:if(ch(l,m),y&4)if(l=m.stateNode,h===null)try{l.componentDidMount()}catch(ee){kr(m,m.return,ee)}else{var C=Bd(m.type,h.memoizedProps);h=h.memoizedState;try{l.componentDidUpdate(C,h,l.__reactInternalSnapshotBeforeUpdate)}catch(ee){kr(m,m.return,ee)}}y&64&&XA(m),y&512&&Ng(m,m.return);break;case 3:if(ch(l,m),y&64&&(l=m.updateQueue,l!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Yi(l,h)}catch(ee){kr(m,m.return,ee)}}break;case 27:h===null&&y&4&&eN(m);case 26:case 5:ch(l,m),h===null&&y&4&&JA(m),y&512&&Ng(m,m.return);break;case 12:ch(l,m);break;case 31:ch(l,m),y&4&&sN(l,m);break;case 13:ch(l,m),y&4&&aN(l,m),y&64&&(l=m.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(m=z7.bind(null,m),o9(l,m))));break;case 22:if(y=m.memoizedState!==null||oh,!y){h=h!==null&&h.memoizedState!==null||gs,C=oh;var L=gs;oh=y,(gs=h)&&!L?uh(l,m,(m.subtreeFlags&8772)!==0):ch(l,m),oh=C,gs=L}break;case 30:break;default:ch(l,m)}}function rN(l){var h=l.alternate;h!==null&&(l.alternate=null,rN(h)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(h=l.stateNode,h!==null&&yt(h)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var _i=null,Do=!1;function lh(l,h,m){for(m=m.child;m!==null;)iN(l,h,m),m=m.sibling}function iN(l,h,m){if(ct&&typeof ct.onCommitFiberUnmount=="function")try{ct.onCommitFiberUnmount(nt,m)}catch{}switch(m.tag){case 26:gs||fu(m,h),lh(l,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:gs||fu(m,h);var y=_i,C=Do;xf(m.type)&&(_i=m.stateNode,Do=!1),lh(l,h,m),Og(m.stateNode),_i=y,Do=C;break;case 5:gs||fu(m,h);case 6:if(y=_i,C=Do,_i=null,lh(l,h,m),_i=y,Do=C,_i!==null)if(Do)try{(_i.nodeType===9?_i.body:_i.nodeName==="HTML"?_i.ownerDocument.body:_i).removeChild(m.stateNode)}catch(L){kr(m,h,L)}else try{_i.removeChild(m.stateNode)}catch(L){kr(m,h,L)}break;case 18:_i!==null&&(Do?(l=_i,XN(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,m.stateNode),Bm(l)):XN(_i,m.stateNode));break;case 4:y=_i,C=Do,_i=m.stateNode.containerInfo,Do=!0,lh(l,h,m),_i=y,Do=C;break;case 0:case 11:case 14:case 15:uf(2,m,h),gs||uf(4,m,h),lh(l,h,m);break;case 1:gs||(fu(m,h),y=m.stateNode,typeof y.componentWillUnmount=="function"&&QA(m,h,y)),lh(l,h,m);break;case 21:lh(l,h,m);break;case 22:gs=(y=gs)||m.memoizedState!==null,lh(l,h,m),gs=y;break;default:lh(l,h,m)}}function sN(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null))){l=l.dehydrated;try{Bm(l)}catch(m){kr(h,h.return,m)}}}function aN(l,h){if(h.memoizedState===null&&(l=h.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Bm(l)}catch(m){kr(h,h.return,m)}}function P7(l){switch(l.tag){case 31:case 13:case 19:var h=l.stateNode;return h===null&&(h=l.stateNode=new tN),h;case 22:return l=l.stateNode,h=l._retryCache,h===null&&(h=l._retryCache=new tN),h;default:throw Error(r(435,l.tag))}}function Lv(l,h){var m=P7(l);h.forEach(function(y){if(!m.has(y)){m.add(y);var C=U7.bind(null,l,y);y.then(C,C)}})}function Ro(l,h){var m=h.deletions;if(m!==null)for(var y=0;y<m.length;y++){var C=m[y],L=l,ee=h,de=ee;e:for(;de!==null;){switch(de.tag){case 27:if(xf(de.type)){_i=de.stateNode,Do=!1;break e}break;case 5:_i=de.stateNode,Do=!1;break e;case 3:case 4:_i=de.stateNode.containerInfo,Do=!0;break e}de=de.return}if(_i===null)throw Error(r(160));iN(L,ee,C),_i=null,Do=!1,L=C.alternate,L!==null&&(L.return=null),C.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)oN(h,l),h=h.sibling}var yc=null;function oN(l,h){var m=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Ro(h,l),Po(l),y&4&&(uf(3,l,l.return),Ag(3,l),uf(5,l,l.return));break;case 1:Ro(h,l),Po(l),y&512&&(gs||m===null||fu(m,m.return)),y&64&&oh&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(m=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=m===null?y:m.concat(y))));break;case 26:var C=yc;if(Ro(h,l),Po(l),y&512&&(gs||m===null||fu(m,m.return)),y&4){var L=m!==null?m.memoizedState:null;if(y=l.memoizedState,m===null)if(y===null)if(l.stateNode===null){e:{y=l.type,m=l.memoizedProps,C=C.ownerDocument||C;t:switch(y){case"title":L=C.getElementsByTagName("title")[0],(!L||L[Ye]||L[ve]||L.namespaceURI==="http://www.w3.org/2000/svg"||L.hasAttribute("itemprop"))&&(L=C.createElement(y),C.head.insertBefore(L,C.querySelector("head > title"))),ha(L,y,m),L[ve]=l,Qt(L),y=L;break e;case"link":var ee=o3("link","href",C).get(y+(m.href||""));if(ee){for(var de=0;de<ee.length;de++)if(L=ee[de],L.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&L.getAttribute("rel")===(m.rel==null?null:m.rel)&&L.getAttribute("title")===(m.title==null?null:m.title)&&L.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){ee.splice(de,1);break t}}L=C.createElement(y),ha(L,y,m),C.head.appendChild(L);break;case"meta":if(ee=o3("meta","content",C).get(y+(m.content||""))){for(de=0;de<ee.length;de++)if(L=ee[de],L.getAttribute("content")===(m.content==null?null:""+m.content)&&L.getAttribute("name")===(m.name==null?null:m.name)&&L.getAttribute("property")===(m.property==null?null:m.property)&&L.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&L.getAttribute("charset")===(m.charSet==null?null:m.charSet)){ee.splice(de,1);break t}}L=C.createElement(y),ha(L,y,m),C.head.appendChild(L);break;default:throw Error(r(468,y))}L[ve]=l,Qt(L),y=L}l.stateNode=y}else l3(C,l.type,l.stateNode);else l.stateNode=a3(C,y,l.memoizedProps);else L!==y?(L===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):L.count--,y===null?l3(C,l.type,l.stateNode):a3(C,y,l.memoizedProps)):y===null&&l.stateNode!==null&&K_(l,l.memoizedProps,m.memoizedProps)}break;case 27:Ro(h,l),Po(l),y&512&&(gs||m===null||fu(m,m.return)),m!==null&&y&4&&K_(l,l.memoizedProps,m.memoizedProps);break;case 5:if(Ro(h,l),Po(l),y&512&&(gs||m===null||fu(m,m.return)),l.flags&32){C=l.stateNode;try{us(C,"")}catch(nn){kr(l,l.return,nn)}}y&4&&l.stateNode!=null&&(C=l.memoizedProps,K_(l,C,m!==null?m.memoizedProps:C)),y&1024&&(Q_=!0);break;case 6:if(Ro(h,l),Po(l),y&4){if(l.stateNode===null)throw Error(r(162));y=l.memoizedProps,m=l.stateNode;try{m.nodeValue=y}catch(nn){kr(l,l.return,nn)}}break;case 3:if(Qv=null,C=yc,yc=Yv(h.containerInfo),Ro(h,l),yc=C,Po(l),y&4&&m!==null&&m.memoizedState.isDehydrated)try{Bm(h.containerInfo)}catch(nn){kr(l,l.return,nn)}Q_&&(Q_=!1,lN(l));break;case 4:y=yc,yc=Yv(l.stateNode.containerInfo),Ro(h,l),Po(l),yc=y;break;case 12:Ro(h,l),Po(l);break;case 31:Ro(h,l),Po(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Lv(l,y)));break;case 13:Ro(h,l),Po(l),l.child.flags&8192&&l.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Mv=Rt()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Lv(l,y)));break;case 22:C=l.memoizedState!==null;var Ie=m!==null&&m.memoizedState!==null,Ze=oh,ht=gs;if(oh=Ze||C,gs=ht||Ie,Ro(h,l),gs=ht,oh=Ze,Po(l),y&8192)e:for(h=l.stateNode,h._visibility=C?h._visibility&-2:h._visibility|1,C&&(m===null||Ie||oh||gs||Vd(l)),m=null,h=l;;){if(h.tag===5||h.tag===26){if(m===null){Ie=m=h;try{if(L=Ie.stateNode,C)ee=L.style,typeof ee.setProperty=="function"?ee.setProperty("display","none","important"):ee.display="none";else{de=Ie.stateNode;var xt=Ie.memoizedProps.style,et=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;de.style.display=et==null||typeof et=="boolean"?"":(""+et).trim()}}catch(nn){kr(Ie,Ie.return,nn)}}}else if(h.tag===6){if(m===null){Ie=h;try{Ie.stateNode.nodeValue=C?"":Ie.memoizedProps}catch(nn){kr(Ie,Ie.return,nn)}}}else if(h.tag===18){if(m===null){Ie=h;try{var it=Ie.stateNode;C?QN(it,!0):QN(Ie.stateNode,!1)}catch(nn){kr(Ie,Ie.return,nn)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===l)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===l)break e;for(;h.sibling===null;){if(h.return===null||h.return===l)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}y&4&&(y=l.updateQueue,y!==null&&(m=y.retryQueue,m!==null&&(y.retryQueue=null,Lv(l,m))));break;case 19:Ro(h,l),Po(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,Lv(l,y)));break;case 30:break;case 21:break;default:Ro(h,l),Po(l)}}function Po(l){var h=l.flags;if(h&2){try{for(var m,y=l.return;y!==null;){if(ZA(y)){m=y;break}y=y.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var C=m.stateNode,L=Y_(l);jv(l,L,C);break;case 5:var ee=m.stateNode;m.flags&32&&(us(ee,""),m.flags&=-33);var de=Y_(l);jv(l,de,ee);break;case 3:case 4:var Ie=m.stateNode.containerInfo,Ze=Y_(l);X_(l,Ze,Ie);break;default:throw Error(r(161))}}catch(ht){kr(l,l.return,ht)}l.flags&=-3}h&4096&&(l.flags&=-4097)}function lN(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var h=l;lN(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),l=l.sibling}}function ch(l,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)nN(l,h.alternate,h),h=h.sibling}function Vd(l){for(l=l.child;l!==null;){var h=l;switch(h.tag){case 0:case 11:case 14:case 15:uf(4,h,h.return),Vd(h);break;case 1:fu(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&QA(h,h.return,m),Vd(h);break;case 27:Og(h.stateNode);case 26:case 5:fu(h,h.return),Vd(h);break;case 22:h.memoizedState===null&&Vd(h);break;case 30:Vd(h);break;default:Vd(h)}l=l.sibling}}function uh(l,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var y=h.alternate,C=l,L=h,ee=L.flags;switch(L.tag){case 0:case 11:case 15:uh(C,L,m),Ag(4,L);break;case 1:if(uh(C,L,m),y=L,C=y.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(Ze){kr(y,y.return,Ze)}if(y=L,C=y.updateQueue,C!==null){var de=y.stateNode;try{var Ie=C.shared.hiddenCallbacks;if(Ie!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Ie.length;C++)Ta(Ie[C],de)}catch(Ze){kr(y,y.return,Ze)}}m&&ee&64&&XA(L),Ng(L,L.return);break;case 27:eN(L);case 26:case 5:uh(C,L,m),m&&y===null&&ee&4&&JA(L),Ng(L,L.return);break;case 12:uh(C,L,m);break;case 31:uh(C,L,m),m&&ee&4&&sN(C,L);break;case 13:uh(C,L,m),m&&ee&4&&aN(C,L);break;case 22:L.memoizedState===null&&uh(C,L,m),Ng(L,L.return);break;case 30:break;default:uh(C,L,m)}h=h.sibling}}function J_(l,h){var m=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),l=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(l=h.memoizedState.cachePool.pool),l!==m&&(l!=null&&l.refCount++,m!=null&&jd(m))}function Z_(l,h){l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&jd(l))}function bc(l,h,m,y){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)cN(l,h,m,y),h=h.sibling}function cN(l,h,m,y){var C=h.flags;switch(h.tag){case 0:case 11:case 15:bc(l,h,m,y),C&2048&&Ag(9,h);break;case 1:bc(l,h,m,y);break;case 3:bc(l,h,m,y),C&2048&&(l=null,h.alternate!==null&&(l=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==l&&(h.refCount++,l!=null&&jd(l)));break;case 12:if(C&2048){bc(l,h,m,y),l=h.stateNode;try{var L=h.memoizedProps,ee=L.id,de=L.onPostCommit;typeof de=="function"&&de(ee,h.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(Ie){kr(h,h.return,Ie)}}else bc(l,h,m,y);break;case 31:bc(l,h,m,y);break;case 13:bc(l,h,m,y);break;case 23:break;case 22:L=h.stateNode,ee=h.alternate,h.memoizedState!==null?L._visibility&2?bc(l,h,m,y):Cg(l,h):L._visibility&2?bc(l,h,m,y):(L._visibility|=2,Cm(l,h,m,y,(h.subtreeFlags&10256)!==0||!1)),C&2048&&J_(ee,h);break;case 24:bc(l,h,m,y),C&2048&&Z_(h.alternate,h);break;default:bc(l,h,m,y)}}function Cm(l,h,m,y,C){for(C=C&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var L=l,ee=h,de=m,Ie=y,Ze=ee.flags;switch(ee.tag){case 0:case 11:case 15:Cm(L,ee,de,Ie,C),Ag(8,ee);break;case 23:break;case 22:var ht=ee.stateNode;ee.memoizedState!==null?ht._visibility&2?Cm(L,ee,de,Ie,C):Cg(L,ee):(ht._visibility|=2,Cm(L,ee,de,Ie,C)),C&&Ze&2048&&J_(ee.alternate,ee);break;case 24:Cm(L,ee,de,Ie,C),C&&Ze&2048&&Z_(ee.alternate,ee);break;default:Cm(L,ee,de,Ie,C)}h=h.sibling}}function Cg(l,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=l,y=h,C=y.flags;switch(y.tag){case 22:Cg(m,y),C&2048&&J_(y.alternate,y);break;case 24:Cg(m,y),C&2048&&Z_(y.alternate,y);break;default:Cg(m,y)}h=h.sibling}}var kg=8192;function km(l,h,m){if(l.subtreeFlags&kg)for(l=l.child;l!==null;)uN(l,h,m),l=l.sibling}function uN(l,h,m){switch(l.tag){case 26:km(l,h,m),l.flags&kg&&l.memoizedState!==null&&y9(m,yc,l.memoizedState,l.memoizedProps);break;case 5:km(l,h,m);break;case 3:case 4:var y=yc;yc=Yv(l.stateNode.containerInfo),km(l,h,m),yc=y;break;case 22:l.memoizedState===null&&(y=l.alternate,y!==null&&y.memoizedState!==null?(y=kg,kg=16777216,km(l,h,m),kg=y):km(l,h,m));break;default:km(l,h,m)}}function hN(l){var h=l.alternate;if(h!==null&&(l=h.child,l!==null)){h.child=null;do h=l.sibling,l.sibling=null,l=h;while(l!==null)}}function Ig(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var y=h[m];Ks=y,dN(y,l)}hN(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)fN(l),l=l.sibling}function fN(l){switch(l.tag){case 0:case 11:case 15:Ig(l),l.flags&2048&&uf(9,l,l.return);break;case 3:Ig(l);break;case 12:Ig(l);break;case 22:var h=l.stateNode;l.memoizedState!==null&&h._visibility&2&&(l.return===null||l.return.tag!==13)?(h._visibility&=-3,Ov(l)):Ig(l);break;default:Ig(l)}}function Ov(l){var h=l.deletions;if((l.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var y=h[m];Ks=y,dN(y,l)}hN(l)}for(l=l.child;l!==null;){switch(h=l,h.tag){case 0:case 11:case 15:uf(8,h,h.return),Ov(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Ov(h));break;default:Ov(h)}l=l.sibling}}function dN(l,h){for(;Ks!==null;){var m=Ks;switch(m.tag){case 0:case 11:case 15:uf(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var y=m.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:jd(m.memoizedState.cache)}if(y=m.child,y!==null)y.return=m,Ks=y;else e:for(m=l;Ks!==null;){y=Ks;var C=y.sibling,L=y.return;if(rN(y),y===m){Ks=null;break e}if(C!==null){C.return=L,Ks=C;break e}Ks=L}}}var j7={getCacheForType:function(l){var h=Ds(ki),m=h.data.get(l);return m===void 0&&(m=l(),h.data.set(l,m)),m},cacheSignal:function(){return Ds(ki).controller.signal}},L7=typeof WeakMap=="function"?WeakMap:Map,wr=0,Xr=null,$n=null,Qn=0,Cr=0,ol=null,hf=!1,Im=!1,ew=!1,hh=0,Mi=0,ff=0,zd=0,tw=0,ll=0,Dm=0,Dg=null,jo=null,nw=!1,Mv=0,mN=0,Fv=1/0,Bv=null,df=null,Ps=0,mf=null,Rm=null,fh=0,rw=0,iw=null,pN=null,Rg=0,sw=null;function cl(){return(wr&2)!==0&&Qn!==0?Qn&-Qn:q.T!==null?hw():le()}function gN(){if(ll===0)if((Qn&536870912)===0||Wn){var l=tt;tt<<=1,(tt&3932160)===0&&(tt=262144),ll=l}else ll=536870912;return l=Ii.current,l!==null&&(l.flags|=32),ll}function Lo(l,h,m){(l===Xr&&(Cr===2||Cr===9)||l.cancelPendingCommit!==null)&&(Pm(l,0),pf(l,Qn,ll,!1)),Tr(l,m),((wr&2)===0||l!==Xr)&&(l===Xr&&((wr&2)===0&&(zd|=m),Mi===4&&pf(l,Qn,ll,!1)),du(l))}function xN(l,h,m){if((wr&6)!==0)throw Error(r(327));var y=!m&&(h&127)===0&&(h&l.expiredLanes)===0||jt(l,h),C=y?F7(l,h):ow(l,h,!0),L=y;do{if(C===0){Im&&!y&&pf(l,h,0,!1);break}else{if(m=l.current.alternate,L&&!O7(m)){C=ow(l,h,!1),L=!1;continue}if(C===2){if(L=h,l.errorRecoveryDisabledLanes&L)var ee=0;else ee=l.pendingLanes&-536870913,ee=ee!==0?ee:ee&536870912?536870912:0;if(ee!==0){h=ee;e:{var de=l;C=Dg;var Ie=de.current.memoizedState.isDehydrated;if(Ie&&(Pm(de,ee).flags|=256),ee=ow(de,ee,!1),ee!==2){if(ew&&!Ie){de.errorRecoveryDisabledLanes|=L,zd|=L,C=4;break e}L=jo,jo=C,L!==null&&(jo===null?jo=L:jo.push.apply(jo,L))}C=ee}if(L=!1,C!==2)continue}}if(C===1){Pm(l,0),pf(l,h,0,!0);break}e:{switch(y=l,L=C,L){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:pf(y,h,ll,!hf);break e;case 2:jo=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(C=Mv+300-Rt(),10<C)){if(pf(y,h,ll,!hf),St(y,0,!0)!==0)break e;fh=h,y.timeoutHandle=KN(vN.bind(null,y,m,jo,Bv,nw,h,ll,zd,Dm,hf,L,"Throttled",-0,0),C);break e}vN(y,m,jo,Bv,nw,h,ll,zd,Dm,hf,L,null,-0,0)}}break}while(!0);du(l)}function vN(l,h,m,y,C,L,ee,de,Ie,Ze,ht,xt,et,it){if(l.timeoutHandle=-1,xt=h.subtreeFlags,xt&8192||(xt&16785408)===16785408){xt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vr},uN(h,L,xt);var nn=(L&62914560)===L?Mv-Rt():(L&4194048)===L?mN-Rt():0;if(nn=b9(xt,nn),nn!==null){fh=L,l.cancelPendingCommit=nn(AN.bind(null,l,h,L,m,y,C,ee,de,Ie,ht,xt,null,et,it)),pf(l,L,ee,!Ze);return}}AN(l,h,L,m,y,C,ee,de,Ie)}function O7(l){for(var h=l;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var y=0;y<m.length;y++){var C=m[y],L=C.getSnapshot;C=C.value;try{if(!oa(L(),C))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===l)break;for(;h.sibling===null;){if(h.return===null||h.return===l)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function pf(l,h,m,y){h&=~tw,h&=~zd,l.suspendedLanes|=h,l.pingedLanes&=~h,y&&(l.warmLanes|=h),y=l.expirationTimes;for(var C=h;0<C;){var L=31-gt(C),ee=1<<L;y[L]=-1,C&=~ee}m!==0&&Br(l,m,h)}function Vv(){return(wr&6)===0?(Pg(0),!1):!0}function aw(){if($n!==null){if(Cr===0)var l=$n.return;else l=$n,Pl=iu=null,_m(l),ft=null,Yt=0,l=$n;for(;l!==null;)YA(l.alternate,l),l=l.return;$n=null}}function Pm(l,h){var m=l.timeoutHandle;m!==-1&&(l.timeoutHandle=-1,n9(m)),m=l.cancelPendingCommit,m!==null&&(l.cancelPendingCommit=null,m()),fh=0,aw(),Xr=l,$n=m=So(l.current,null),Qn=h,Cr=0,ol=null,hf=!1,Im=jt(l,h),ew=!1,Dm=ll=tw=zd=ff=Mi=0,jo=Dg=null,nw=!1,(h&8)!==0&&(h|=h&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=h;0<y;){var C=31-gt(y),L=1<<C;h|=l[C],y&=~L}return hh=h,Cd(),m}function yN(l,h){Cn=null,q.H=Sg,h===Re||h===Xe?(h=dt(),Cr=3):h===Qe?(h=dt(),Cr=4):Cr=h===F_?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,ol=h,$n===null&&(Mi=1,kv(l,To(h,l.current)))}function bN(){var l=Ii.current;return l===null?!0:(Qn&4194048)===Qn?ds===null:(Qn&62914560)===Qn||(Qn&536870912)!==0?l===ds:!1}function _N(){var l=q.H;return q.H=Sg,l===null?Sg:l}function wN(){var l=q.A;return q.A=j7,l}function zv(){Mi=4,hf||(Qn&4194048)!==Qn&&Ii.current!==null||(Im=!0),(ff&134217727)===0&&(zd&134217727)===0||Xr===null||pf(Xr,Qn,ll,!1)}function ow(l,h,m){var y=wr;wr|=2;var C=_N(),L=wN();(Xr!==l||Qn!==h)&&(Bv=null,Pm(l,h)),h=!1;var ee=Mi;e:do try{if(Cr!==0&&$n!==null){var de=$n,Ie=ol;switch(Cr){case 8:aw(),ee=6;break e;case 3:case 2:case 9:case 6:Ii.current===null&&(h=!0);var Ze=Cr;if(Cr=0,ol=null,jm(l,de,Ie,Ze),m&&Im){ee=0;break e}break;default:Ze=Cr,Cr=0,ol=null,jm(l,de,Ie,Ze)}}M7(),ee=Mi;break}catch(ht){yN(l,ht)}while(!0);return h&&l.shellSuspendCounter++,Pl=iu=null,wr=y,q.H=C,q.A=L,$n===null&&(Xr=null,Qn=0,Cd()),ee}function M7(){for(;$n!==null;)SN($n)}function F7(l,h){var m=wr;wr|=2;var y=_N(),C=wN();Xr!==l||Qn!==h?(Bv=null,Fv=Rt()+500,Pm(l,h)):Im=jt(l,h);e:do try{if(Cr!==0&&$n!==null){h=$n;var L=ol;t:switch(Cr){case 1:Cr=0,ol=null,jm(l,h,L,1);break;case 2:case 9:if(pt(L)){Cr=0,ol=null,TN(h);break}h=function(){Cr!==2&&Cr!==9||Xr!==l||(Cr=7),du(l)},L.then(h,h);break e;case 3:Cr=7;break e;case 4:Cr=5;break e;case 7:pt(L)?(Cr=0,ol=null,TN(h)):(Cr=0,ol=null,jm(l,h,L,7));break;case 5:var ee=null;switch($n.tag){case 26:ee=$n.memoizedState;case 5:case 27:var de=$n;if(ee?c3(ee):de.stateNode.complete){Cr=0,ol=null;var Ie=de.sibling;if(Ie!==null)$n=Ie;else{var Ze=de.return;Ze!==null?($n=Ze,Uv(Ze)):$n=null}break t}}Cr=0,ol=null,jm(l,h,L,5);break;case 6:Cr=0,ol=null,jm(l,h,L,6);break;case 8:aw(),Mi=6;break e;default:throw Error(r(462))}}B7();break}catch(ht){yN(l,ht)}while(!0);return Pl=iu=null,q.H=y,q.A=C,wr=m,$n!==null?0:(Xr=null,Qn=0,Cd(),Mi)}function B7(){for(;$n!==null&&!Oe();)SN($n)}function SN(l){var h=$A(l.alternate,l,hh);l.memoizedProps=l.pendingProps,h===null?Uv(l):$n=h}function TN(l){var h=l,m=h.alternate;switch(h.tag){case 15:case 0:h=zA(m,h,h.pendingProps,h.type,void 0,Qn);break;case 11:h=zA(m,h,h.pendingProps,h.type.render,h.ref,Qn);break;case 5:_m(h);default:YA(m,h),h=$n=Dd(h,hh),h=$A(m,h,hh)}l.memoizedProps=l.pendingProps,h===null?Uv(l):$n=h}function jm(l,h,m,y){Pl=iu=null,_m(h),ft=null,Yt=0;var C=h.return;try{if(N7(l,C,h,m,Qn)){Mi=1,kv(l,To(m,l.current)),$n=null;return}}catch(L){if(C!==null)throw $n=C,L;Mi=1,kv(l,To(m,l.current)),$n=null;return}h.flags&32768?(Wn||y===1?l=!0:Im||(Qn&536870912)!==0?l=!1:(hf=l=!0,(y===2||y===9||y===3||y===6)&&(y=Ii.current,y!==null&&y.tag===13&&(y.flags|=16384))),EN(h,l)):Uv(h)}function Uv(l){var h=l;do{if((h.flags&32768)!==0){EN(h,hf);return}l=h.return;var m=I7(h.alternate,h,hh);if(m!==null){$n=m;return}if(h=h.sibling,h!==null){$n=h;return}$n=h=l}while(h!==null);Mi===0&&(Mi=5)}function EN(l,h){do{var m=D7(l.alternate,l);if(m!==null){m.flags&=32767,$n=m;return}if(m=l.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(l=l.sibling,l!==null)){$n=l;return}$n=l=m}while(l!==null);Mi=6,$n=null}function AN(l,h,m,y,C,L,ee,de,Ie){l.cancelPendingCommit=null;do Hv();while(Ps!==0);if((wr&6)!==0)throw Error(r(327));if(h!==null){if(h===l.current)throw Error(r(177));if(L=h.lanes|h.childLanes,L|=om,sn(l,m,L,ee,de,Ie),l===Xr&&($n=Xr=null,Qn=0),Rm=h,mf=l,fh=m,rw=L,iw=C,pN=y,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,H7(ln,function(){return DN(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||y){y=q.T,q.T=null,C=Q.p,Q.p=2,ee=wr,wr|=4;try{R7(l,h,m)}finally{wr=ee,Q.p=C,q.T=y}}Ps=1,NN(),CN(),kN()}}function NN(){if(Ps===1){Ps=0;var l=mf,h=Rm,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=q.T,q.T=null;var y=Q.p;Q.p=2;var C=wr;wr|=4;try{oN(h,l);var L=yw,ee=il(l.containerInfo),de=L.focusedElem,Ie=L.selectionRange;if(ee!==de&&de&&de.ownerDocument&&uc(de.ownerDocument.documentElement,de)){if(Ie!==null&&sl(de)){var Ze=Ie.start,ht=Ie.end;if(ht===void 0&&(ht=Ze),"selectionStart"in de)de.selectionStart=Ze,de.selectionEnd=Math.min(ht,de.value.length);else{var xt=de.ownerDocument||document,et=xt&&xt.defaultView||window;if(et.getSelection){var it=et.getSelection(),nn=de.textContent.length,_n=Math.min(Ie.start,nn),Wr=Ie.end===void 0?_n:Math.min(Ie.end,nn);!it.extend&&_n>Wr&&(ee=Wr,Wr=_n,_n=ee);var ze=bo(de,_n),je=bo(de,Wr);if(ze&&je&&(it.rangeCount!==1||it.anchorNode!==ze.node||it.anchorOffset!==ze.offset||it.focusNode!==je.node||it.focusOffset!==je.offset)){var Je=xt.createRange();Je.setStart(ze.node,ze.offset),it.removeAllRanges(),_n>Wr?(it.addRange(Je),it.extend(je.node,je.offset)):(Je.setEnd(je.node,je.offset),it.addRange(Je))}}}}for(xt=[],it=de;it=it.parentNode;)it.nodeType===1&&xt.push({element:it,left:it.scrollLeft,top:it.scrollTop});for(typeof de.focus=="function"&&de.focus(),de=0;de<xt.length;de++){var mt=xt[de];mt.element.scrollLeft=mt.left,mt.element.scrollTop=mt.top}}t2=!!vw,yw=vw=null}finally{wr=C,Q.p=y,q.T=m}}l.current=h,Ps=2}}function CN(){if(Ps===2){Ps=0;var l=mf,h=Rm,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=q.T,q.T=null;var y=Q.p;Q.p=2;var C=wr;wr|=4;try{nN(l,h.alternate,h)}finally{wr=C,Q.p=y,q.T=m}}Ps=3}}function kN(){if(Ps===4||Ps===3){Ps=0,Dt();var l=mf,h=Rm,m=fh,y=pN;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ps=5:(Ps=0,Rm=mf=null,IN(l,l.pendingLanes));var C=l.pendingLanes;if(C===0&&(df=null),sr(m),h=h.stateNode,ct&&typeof ct.onCommitFiberRoot=="function")try{ct.onCommitFiberRoot(nt,h,void 0,(h.current.flags&128)===128)}catch{}if(y!==null){h=q.T,C=Q.p,Q.p=2,q.T=null;try{for(var L=l.onRecoverableError,ee=0;ee<y.length;ee++){var de=y[ee];L(de.value,{componentStack:de.stack})}}finally{q.T=h,Q.p=C}}(fh&3)!==0&&Hv(),du(l),C=l.pendingLanes,(m&261930)!==0&&(C&42)!==0?l===sw?Rg++:(Rg=0,sw=l):Rg=0,Pg(0)}}function IN(l,h){(l.pooledCacheLanes&=h)===0&&(h=l.pooledCache,h!=null&&(l.pooledCache=null,jd(h)))}function Hv(){return NN(),CN(),kN(),DN()}function DN(){if(Ps!==5)return!1;var l=mf,h=rw;rw=0;var m=sr(fh),y=q.T,C=Q.p;try{Q.p=32>m?32:m,q.T=null,m=iw,iw=null;var L=mf,ee=fh;if(Ps=0,Rm=mf=null,fh=0,(wr&6)!==0)throw Error(r(331));var de=wr;if(wr|=4,fN(L.current),cN(L,L.current,ee,m),wr=de,Pg(0,!1),ct&&typeof ct.onPostCommitFiberRoot=="function")try{ct.onPostCommitFiberRoot(nt,L)}catch{}return!0}finally{Q.p=C,q.T=y,IN(l,h)}}function RN(l,h,m){h=To(m,h),h=M_(l.stateNode,h,2),l=Nr(l,h,2),l!==null&&(Tr(l,2),du(l))}function kr(l,h,m){if(l.tag===3)RN(l,l,m);else for(;h!==null;){if(h.tag===3){RN(h,l,m);break}else if(h.tag===1){var y=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(df===null||!df.has(y))){l=To(m,l),m=PA(2),y=Nr(h,m,2),y!==null&&(jA(m,y,h,l),Tr(y,2),du(y));break}}h=h.return}}function lw(l,h,m){var y=l.pingCache;if(y===null){y=l.pingCache=new L7;var C=new Set;y.set(h,C)}else C=y.get(h),C===void 0&&(C=new Set,y.set(h,C));C.has(m)||(ew=!0,C.add(m),l=V7.bind(null,l,h,m),h.then(l,l))}function V7(l,h,m){var y=l.pingCache;y!==null&&y.delete(h),l.pingedLanes|=l.suspendedLanes&m,l.warmLanes&=~m,Xr===l&&(Qn&m)===m&&(Mi===4||Mi===3&&(Qn&62914560)===Qn&&300>Rt()-Mv?(wr&2)===0&&Pm(l,0):tw|=m,Dm===Qn&&(Dm=0)),du(l)}function PN(l,h){h===0&&(h=hn()),l=fc(l,h),l!==null&&(Tr(l,h),du(l))}function z7(l){var h=l.memoizedState,m=0;h!==null&&(m=h.retryLane),PN(l,m)}function U7(l,h){var m=0;switch(l.tag){case 31:case 13:var y=l.stateNode,C=l.memoizedState;C!==null&&(m=C.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(h),PN(l,m)}function H7(l,h){return We(l,h)}var qv=null,Lm=null,cw=!1,Wv=!1,uw=!1,gf=0;function du(l){l!==Lm&&l.next===null&&(Lm===null?qv=Lm=l:Lm=Lm.next=l),Wv=!0,cw||(cw=!0,W7())}function Pg(l,h){if(!uw&&Wv){uw=!0;do for(var m=!1,y=qv;y!==null;){if(l!==0){var C=y.pendingLanes;if(C===0)var L=0;else{var ee=y.suspendedLanes,de=y.pingedLanes;L=(1<<31-gt(42|l)+1)-1,L&=C&~(ee&~de),L=L&201326741?L&201326741|1:L?L|2:0}L!==0&&(m=!0,MN(y,L))}else L=Qn,L=St(y,y===Xr?L:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(L&3)===0||jt(y,L)||(m=!0,MN(y,L));y=y.next}while(m);uw=!1}}function q7(){jN()}function jN(){Wv=cw=!1;var l=0;gf!==0&&t9()&&(l=gf);for(var h=Rt(),m=null,y=qv;y!==null;){var C=y.next,L=LN(y,h);L===0?(y.next=null,m===null?qv=C:m.next=C,C===null&&(Lm=m)):(m=y,(l!==0||(L&3)!==0)&&(Wv=!0)),y=C}Ps!==0&&Ps!==5||Pg(l),gf!==0&&(gf=0)}function LN(l,h){for(var m=l.suspendedLanes,y=l.pingedLanes,C=l.expirationTimes,L=l.pendingLanes&-62914561;0<L;){var ee=31-gt(L),de=1<<ee,Ie=C[ee];Ie===-1?((de&m)===0||(de&y)!==0)&&(C[ee]=Fn(de,h)):Ie<=h&&(l.expiredLanes|=de),L&=~de}if(h=Xr,m=Qn,m=St(l,l===h?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,m===0||l===h&&(Cr===2||Cr===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Et(y),l.callbackNode=null,l.callbackPriority=0;if((m&3)===0||jt(l,m)){if(h=m&-m,h===l.callbackPriority)return h;switch(y!==null&&Et(y),sr(m)){case 2:case 8:m=yn;break;case 32:m=ln;break;case 268435456:m=Ft;break;default:m=ln}return y=ON.bind(null,l),m=We(m,y),l.callbackPriority=h,l.callbackNode=m,h}return y!==null&&y!==null&&Et(y),l.callbackPriority=2,l.callbackNode=null,2}function ON(l,h){if(Ps!==0&&Ps!==5)return l.callbackNode=null,l.callbackPriority=0,null;var m=l.callbackNode;if(Hv()&&l.callbackNode!==m)return null;var y=Qn;return y=St(l,l===Xr?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(xN(l,y,h),LN(l,Rt()),l.callbackNode!=null&&l.callbackNode===m?ON.bind(null,l):null)}function MN(l,h){if(Hv())return null;xN(l,h,!0)}function W7(){r9(function(){(wr&6)!==0?We(Jt,q7):jN()})}function hw(){if(gf===0){var l=w;l===0&&(l=Ne,Ne<<=1,(Ne&261888)===0&&(Ne=256)),gf=l}return gf}function FN(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ic(""+l)}function BN(l,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,l.id&&m.setAttribute("form",l.id),h.parentNode.insertBefore(m,h),l=new FormData(l),m.parentNode.removeChild(m),l}function G7(l,h,m,y,C){if(h==="submit"&&m&&m.stateNode===C){var L=FN((C[we]||null).action),ee=y.submitter;ee&&(h=(h=ee[we]||null)?FN(h.formAction):ee.getAttribute("formAction"),h!==null&&(L=h,ee=null));var de=new Ya("action","action",null,y,C);l.push({event:de,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(gf!==0){var Ie=ee?BN(C,ee):new FormData(C);D_(m,{pending:!0,data:Ie,method:C.method,action:L},null,Ie)}}else typeof L=="function"&&(de.preventDefault(),Ie=ee?BN(C,ee):new FormData(C),D_(m,{pending:!0,data:Ie,method:C.method,action:L},L,Ie))},currentTarget:C}]})}}for(var fw=0;fw<Rl.length;fw++){var dw=Rl[fw],$7=dw.toLowerCase(),K7=dw[0].toUpperCase()+dw.slice(1);qs($7,"on"+K7)}qs(Jh,"onAnimationEnd"),qs(eo,"onAnimationIteration"),qs(Il,"onAnimationStart"),qs("dblclick","onDoubleClick"),qs("focusin","onFocus"),qs("focusout","onBlur"),qs(zr,"onTransitionRun"),qs(Ur,"onTransitionStart"),qs(Ci,"onTransitionCancel"),qs(Li,"onTransitionEnd"),ti("onMouseEnter",["mouseout","mouseover"]),ti("onMouseLeave",["mouseout","mouseover"]),ti("onPointerEnter",["pointerout","pointerover"]),ti("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Y7=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(jg));function VN(l,h){h=(h&4)!==0;for(var m=0;m<l.length;m++){var y=l[m],C=y.event;y=y.listeners;e:{var L=void 0;if(h)for(var ee=y.length-1;0<=ee;ee--){var de=y[ee],Ie=de.instance,Ze=de.currentTarget;if(de=de.listener,Ie!==L&&C.isPropagationStopped())break e;L=de,C.currentTarget=Ze;try{L(C)}catch(ht){Yu(ht)}C.currentTarget=null,L=Ie}else for(ee=0;ee<y.length;ee++){if(de=y[ee],Ie=de.instance,Ze=de.currentTarget,de=de.listener,Ie!==L&&C.isPropagationStopped())break e;L=de,C.currentTarget=Ze;try{L(C)}catch(ht){Yu(ht)}C.currentTarget=null,L=Ie}}}}function Kn(l,h){var m=h[Ue];m===void 0&&(m=h[Ue]=new Set);var y=l+"__bubble";m.has(y)||(zN(h,l,2,!1),m.add(y))}function mw(l,h,m){var y=0;h&&(y|=4),zN(m,l,y,h)}var Gv="_reactListening"+Math.random().toString(36).slice(2);function pw(l){if(!l[Gv]){l[Gv]=!0,Un.forEach(function(m){m!=="selectionchange"&&(Y7.has(m)||mw(m,!1,l),mw(m,!0,l))});var h=l.nodeType===9?l:l.ownerDocument;h===null||h[Gv]||(h[Gv]=!0,mw("selectionchange",!1,h))}}function zN(l,h,m,y){switch(g3(h)){case 2:var C=S9;break;case 8:C=T9;break;default:C=Iw}m=C.bind(null,h,m,l),C=void 0,!Xo||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(C=!0),y?C!==void 0?l.addEventListener(h,m,{capture:!0,passive:C}):l.addEventListener(h,m,!0):C!==void 0?l.addEventListener(h,m,{passive:C}):l.addEventListener(h,m,!1)}function gw(l,h,m,y,C){var L=y;if((h&1)===0&&(h&2)===0&&y!==null)e:for(;;){if(y===null)return;var ee=y.tag;if(ee===3||ee===4){var de=y.stateNode.containerInfo;if(de===C)break;if(ee===4)for(ee=y.return;ee!==null;){var Ie=ee.tag;if((Ie===3||Ie===4)&&ee.stateNode.containerInfo===C)return;ee=ee.return}for(;de!==null;){if(ee=It(de),ee===null)return;if(Ie=ee.tag,Ie===5||Ie===6||Ie===26||Ie===27){y=L=ee;continue e}de=de.parentNode}}y=y.return}Yo(function(){var Ze=L,ht=na(m),xt=[];e:{var et=Dl.get(l);if(et!==void 0){var it=Ya,nn=l;switch(l){case"keypress":if(ba(m)===0)break e;case"keydown":case"keyup":it=Yc;break;case"focusin":nn="focus",it=ac;break;case"focusout":nn="blur",it=ac;break;case"beforeblur":case"afterblur":it=ac;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":it=vo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":it=Wc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":it=N;break;case Jh:case eo:case Il:it=Gh;break;case Li:it=Z;break;case"scroll":case"scrollend":it=Hc;break;case"wheel":it=Ae;break;case"copy":case"cut":case"paste":it=Gc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":it=Qa;break;case"toggle":case"beforetoggle":it=vt}var _n=(h&4)!==0,Wr=!_n&&(l==="scroll"||l==="scrollend"),ze=_n?et!==null?et+"Capture":null:et;_n=[];for(var je=Ze,Je;je!==null;){var mt=je;if(Je=mt.stateNode,mt=mt.tag,mt!==5&&mt!==26&&mt!==27||Je===null||ze===null||(mt=ya(je,ze),mt!=null&&_n.push(Lg(je,mt,Je))),Wr)break;je=je.return}0<_n.length&&(et=new it(et,nn,null,m,ht),xt.push({event:et,listeners:_n}))}}if((h&7)===0){e:{if(et=l==="mouseover"||l==="pointerover",it=l==="mouseout"||l==="pointerout",et&&m!==qu&&(nn=m.relatedTarget||m.fromElement)&&(It(nn)||nn[Ee]))break e;if((it||et)&&(et=ht.window===ht?ht:(et=ht.ownerDocument)?et.defaultView||et.parentWindow:window,it?(nn=m.relatedTarget||m.toElement,it=Ze,nn=nn?It(nn):null,nn!==null&&(Wr=s(nn),_n=nn.tag,nn!==Wr||_n!==5&&_n!==27&&_n!==6)&&(nn=null)):(it=null,nn=Ze),it!==nn)){if(_n=vo,mt="onMouseLeave",ze="onMouseEnter",je="mouse",(l==="pointerout"||l==="pointerover")&&(_n=Qa,mt="onPointerLeave",ze="onPointerEnter",je="pointer"),Wr=it==null?et:bt(it),Je=nn==null?et:bt(nn),et=new _n(mt,je+"leave",it,m,ht),et.target=Wr,et.relatedTarget=Je,mt=null,It(ht)===Ze&&(_n=new _n(ze,je+"enter",nn,m,ht),_n.target=Je,_n.relatedTarget=Wr,mt=_n),Wr=mt,it&&nn)t:{for(_n=X7,ze=it,je=nn,Je=0,mt=ze;mt;mt=_n(mt))Je++;mt=0;for(var dn=je;dn;dn=_n(dn))mt++;for(;0<Je-mt;)ze=_n(ze),Je--;for(;0<mt-Je;)je=_n(je),mt--;for(;Je--;){if(ze===je||je!==null&&ze===je.alternate){_n=ze;break t}ze=_n(ze),je=_n(je)}_n=null}else _n=null;it!==null&&UN(xt,et,it,_n,!1),nn!==null&&Wr!==null&&UN(xt,Wr,nn,_n,!0)}}e:{if(et=Ze?bt(Ze):window,it=et.nodeName&&et.nodeName.toLowerCase(),it==="select"||it==="input"&&et.type==="file")var xr=sa;else if(Kh(et))if(Ku)xr=Nd;else{xr=am;var on=Ad}else it=et.nodeName,!it||it.toLowerCase()!=="input"||et.type!=="checkbox"&&et.type!=="radio"?Ze&&va(Ze.elementType)&&(xr=sa):xr=rl;if(xr&&(xr=xr(l,Ze))){Yh(xt,xr,m,ht);break e}on&&on(l,et,Ze),l==="focusout"&&Ze&&et.type==="number"&&Ze.memoizedProps.value!=null&&Uc(et,"number",et.value)}switch(on=Ze?bt(Ze):window,l){case"focusin":(Kh(on)||on.contentEditable==="true")&&(Hs=on,Jc=Ze,hc=null);break;case"focusout":hc=Jc=Hs=null;break;case"mousedown":kl=!0;break;case"contextmenu":case"mouseup":case"dragend":kl=!1,_o(xt,m,ht);break;case"selectionchange":if(Qh)break;case"keydown":case"keyup":_o(xt,m,ht)}var On;if(Xt)e:{switch(l){case"compositionstart":var Jn="onCompositionStart";break e;case"compositionend":Jn="onCompositionEnd";break e;case"compositionupdate":Jn="onCompositionUpdate";break e}Jn=void 0}else Us?pi(l,m)&&(Jn="onCompositionEnd"):l==="keydown"&&m.keyCode===229&&(Jn="onCompositionStart");Jn&&(ar&&m.locale!=="ko"&&(Us||Jn!=="onCompositionStart"?Jn==="onCompositionEnd"&&Us&&(On=Jo()):(xo=ht,Wu="value"in xo?xo.value:xo.textContent,Us=!0)),on=$v(Ze,Jn),0<on.length&&(Jn=new ia(Jn,l,null,m,ht),xt.push({event:Jn,listeners:on}),On?Jn.data=On:(On=ai(m),On!==null&&(Jn.data=On)))),(On=Nn?Ja(l,m):oc(l,m))&&(Jn=$v(Ze,"onBeforeInput"),0<Jn.length&&(on=new ia("onBeforeInput","beforeinput",null,m,ht),xt.push({event:on,listeners:Jn}),on.data=On)),G7(xt,l,Ze,m,ht)}VN(xt,h)})}function Lg(l,h,m){return{instance:l,listener:h,currentTarget:m}}function $v(l,h){for(var m=h+"Capture",y=[];l!==null;){var C=l,L=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||L===null||(C=ya(l,m),C!=null&&y.unshift(Lg(l,C,L)),C=ya(l,h),C!=null&&y.push(Lg(l,C,L))),l.tag===3)return y;l=l.return}return[]}function X7(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function UN(l,h,m,y,C){for(var L=h._reactName,ee=[];m!==null&&m!==y;){var de=m,Ie=de.alternate,Ze=de.stateNode;if(de=de.tag,Ie!==null&&Ie===y)break;de!==5&&de!==26&&de!==27||Ze===null||(Ie=Ze,C?(Ze=ya(m,L),Ze!=null&&ee.unshift(Lg(m,Ze,Ie))):C||(Ze=ya(m,L),Ze!=null&&ee.push(Lg(m,Ze,Ie)))),m=m.return}ee.length!==0&&l.push({event:h,listeners:ee})}var Q7=/\r\n?/g,J7=/\u0000|\uFFFD/g;function HN(l){return(typeof l=="string"?l:""+l).replace(Q7,`
`).replace(J7,"")}function qN(l,h){return h=HN(h),HN(l)===h}function qr(l,h,m,y,C,L){switch(m){case"children":typeof y=="string"?h==="body"||h==="textarea"&&y===""||us(l,y):(typeof y=="number"||typeof y=="bigint")&&h!=="body"&&us(l,""+y);break;case"className":rr(l,"class",y);break;case"tabIndex":rr(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":rr(l,m,y);break;case"style":Hu(l,y,L);break;case"data":if(h!=="object"){rr(l,"data",y);break}case"src":case"href":if(y===""&&(h!=="a"||m!=="href")){l.removeAttribute(m);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(m);break}y=ic(""+y),l.setAttribute(m,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof L=="function"&&(m==="formAction"?(h!=="input"&&qr(l,h,"name",C.name,C,null),qr(l,h,"formEncType",C.formEncType,C,null),qr(l,h,"formMethod",C.formMethod,C,null),qr(l,h,"formTarget",C.formTarget,C,null)):(qr(l,h,"encType",C.encType,C,null),qr(l,h,"method",C.method,C,null),qr(l,h,"target",C.target,C,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(m);break}y=ic(""+y),l.setAttribute(m,y);break;case"onClick":y!=null&&(l.onclick=Vr);break;case"onScroll":y!=null&&Kn("scroll",l);break;case"onScrollEnd":y!=null&&Kn("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(C.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}m=ic(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(m,""+y):l.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(m,""):l.removeAttribute(m);break;case"capture":case"download":y===!0?l.setAttribute(m,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(m,y):l.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(m,y):l.removeAttribute(m);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(m):l.setAttribute(m,y);break;case"popover":Kn("beforetoggle",l),Kn("toggle",l),ls(l,"popover",y);break;case"xlinkActuate":si(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":si(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":si(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":si(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":si(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":si(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":si(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":si(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":si(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":ls(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=rc.get(m)||m,ls(l,m,y))}}function xw(l,h,m,y,C,L){switch(m){case"style":Hu(l,y,L);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(m=y.__html,m!=null){if(C.children!=null)throw Error(r(60));l.innerHTML=m}}break;case"children":typeof y=="string"?us(l,y):(typeof y=="number"||typeof y=="bigint")&&us(l,""+y);break;case"onScroll":y!=null&&Kn("scroll",l);break;case"onScrollEnd":y!=null&&Kn("scrollend",l);break;case"onClick":y!=null&&(l.onclick=Vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gn.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(C=m.endsWith("Capture"),h=m.slice(2,C?m.length-7:void 0),L=l[we]||null,L=L!=null?L[m]:null,typeof L=="function"&&l.removeEventListener(h,L,C),typeof y=="function")){typeof L!="function"&&L!==null&&(m in l?l[m]=null:l.hasAttribute(m)&&l.removeAttribute(m)),l.addEventListener(h,y,C);break e}m in l?l[m]=y:y===!0?l.setAttribute(m,""):ls(l,m,y)}}}function ha(l,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Kn("error",l),Kn("load",l);var y=!1,C=!1,L;for(L in m)if(m.hasOwnProperty(L)){var ee=m[L];if(ee!=null)switch(L){case"src":y=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:qr(l,h,L,ee,m,null)}}C&&qr(l,h,"srcSet",m.srcSet,m,null),y&&qr(l,h,"src",m.src,m,null);return;case"input":Kn("invalid",l);var de=L=ee=C=null,Ie=null,Ze=null;for(y in m)if(m.hasOwnProperty(y)){var ht=m[y];if(ht!=null)switch(y){case"name":C=ht;break;case"type":ee=ht;break;case"checked":Ie=ht;break;case"defaultChecked":Ze=ht;break;case"value":L=ht;break;case"defaultValue":de=ht;break;case"children":case"dangerouslySetInnerHTML":if(ht!=null)throw Error(r(137,h));break;default:qr(l,h,y,ht,m,null)}}qh(l,L,de,Ie,Ze,ee,C,!1);return;case"select":Kn("invalid",l),y=ee=L=null;for(C in m)if(m.hasOwnProperty(C)&&(de=m[C],de!=null))switch(C){case"value":L=de;break;case"defaultValue":ee=de;break;case"multiple":y=de;default:qr(l,h,C,de,m,null)}h=L,m=ee,l.multiple=!!y,h!=null?Sl(l,!!y,h,!1):m!=null&&Sl(l,!!y,m,!0);return;case"textarea":Kn("invalid",l),L=C=y=null;for(ee in m)if(m.hasOwnProperty(ee)&&(de=m[ee],de!=null))switch(ee){case"value":y=de;break;case"defaultValue":C=de;break;case"children":L=de;break;case"dangerouslySetInnerHTML":if(de!=null)throw Error(r(91));break;default:qr(l,h,ee,de,m,null)}Tl(l,y,C,L);return;case"option":for(Ie in m)if(m.hasOwnProperty(Ie)&&(y=m[Ie],y!=null))switch(Ie){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:qr(l,h,Ie,y,m,null)}return;case"dialog":Kn("beforetoggle",l),Kn("toggle",l),Kn("cancel",l),Kn("close",l);break;case"iframe":case"object":Kn("load",l);break;case"video":case"audio":for(y=0;y<jg.length;y++)Kn(jg[y],l);break;case"image":Kn("error",l),Kn("load",l);break;case"details":Kn("toggle",l);break;case"embed":case"source":case"link":Kn("error",l),Kn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ze in m)if(m.hasOwnProperty(Ze)&&(y=m[Ze],y!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:qr(l,h,Ze,y,m,null)}return;default:if(va(h)){for(ht in m)m.hasOwnProperty(ht)&&(y=m[ht],y!==void 0&&xw(l,h,ht,y,m,void 0));return}}for(de in m)m.hasOwnProperty(de)&&(y=m[de],y!=null&&qr(l,h,de,y,m,null))}function Z7(l,h,m,y){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,L=null,ee=null,de=null,Ie=null,Ze=null,ht=null;for(it in m){var xt=m[it];if(m.hasOwnProperty(it)&&xt!=null)switch(it){case"checked":break;case"value":break;case"defaultValue":Ie=xt;default:y.hasOwnProperty(it)||qr(l,h,it,null,y,xt)}}for(var et in y){var it=y[et];if(xt=m[et],y.hasOwnProperty(et)&&(it!=null||xt!=null))switch(et){case"type":L=it;break;case"name":C=it;break;case"checked":Ze=it;break;case"defaultChecked":ht=it;break;case"value":ee=it;break;case"defaultValue":de=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(r(137,h));break;default:it!==xt&&qr(l,h,et,it,y,xt)}}nc(l,ee,de,Ie,Ze,ht,L,C);return;case"select":it=ee=de=et=null;for(L in m)if(Ie=m[L],m.hasOwnProperty(L)&&Ie!=null)switch(L){case"value":break;case"multiple":it=Ie;default:y.hasOwnProperty(L)||qr(l,h,L,null,y,Ie)}for(C in y)if(L=y[C],Ie=m[C],y.hasOwnProperty(C)&&(L!=null||Ie!=null))switch(C){case"value":et=L;break;case"defaultValue":de=L;break;case"multiple":ee=L;default:L!==Ie&&qr(l,h,C,L,y,Ie)}h=de,m=ee,y=it,et!=null?Sl(l,!!m,et,!1):!!y!=!!m&&(h!=null?Sl(l,!!m,h,!0):Sl(l,!!m,m?[]:"",!1));return;case"textarea":it=et=null;for(de in m)if(C=m[de],m.hasOwnProperty(de)&&C!=null&&!y.hasOwnProperty(de))switch(de){case"value":break;case"children":break;default:qr(l,h,de,null,y,C)}for(ee in y)if(C=y[ee],L=m[ee],y.hasOwnProperty(ee)&&(C!=null||L!=null))switch(ee){case"value":et=C;break;case"defaultValue":it=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:C!==L&&qr(l,h,ee,C,y,L)}zu(l,et,it);return;case"option":for(var nn in m)if(et=m[nn],m.hasOwnProperty(nn)&&et!=null&&!y.hasOwnProperty(nn))switch(nn){case"selected":l.selected=!1;break;default:qr(l,h,nn,null,y,et)}for(Ie in y)if(et=y[Ie],it=m[Ie],y.hasOwnProperty(Ie)&&et!==it&&(et!=null||it!=null))switch(Ie){case"selected":l.selected=et&&typeof et!="function"&&typeof et!="symbol";break;default:qr(l,h,Ie,et,y,it)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var _n in m)et=m[_n],m.hasOwnProperty(_n)&&et!=null&&!y.hasOwnProperty(_n)&&qr(l,h,_n,null,y,et);for(Ze in y)if(et=y[Ze],it=m[Ze],y.hasOwnProperty(Ze)&&et!==it&&(et!=null||it!=null))switch(Ze){case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(r(137,h));break;default:qr(l,h,Ze,et,y,it)}return;default:if(va(h)){for(var Wr in m)et=m[Wr],m.hasOwnProperty(Wr)&&et!==void 0&&!y.hasOwnProperty(Wr)&&xw(l,h,Wr,void 0,y,et);for(ht in y)et=y[ht],it=m[ht],!y.hasOwnProperty(ht)||et===it||et===void 0&&it===void 0||xw(l,h,ht,et,y,it);return}}for(var ze in m)et=m[ze],m.hasOwnProperty(ze)&&et!=null&&!y.hasOwnProperty(ze)&&qr(l,h,ze,null,y,et);for(xt in y)et=y[xt],it=m[xt],!y.hasOwnProperty(xt)||et===it||et==null&&it==null||qr(l,h,xt,et,y,it)}function WN(l){switch(l){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function e9(){if(typeof performance.getEntriesByType=="function"){for(var l=0,h=0,m=performance.getEntriesByType("resource"),y=0;y<m.length;y++){var C=m[y],L=C.transferSize,ee=C.initiatorType,de=C.duration;if(L&&de&&WN(ee)){for(ee=0,de=C.responseEnd,y+=1;y<m.length;y++){var Ie=m[y],Ze=Ie.startTime;if(Ze>de)break;var ht=Ie.transferSize,xt=Ie.initiatorType;ht&&WN(xt)&&(Ie=Ie.responseEnd,ee+=ht*(Ie<de?1:(de-Ze)/(Ie-Ze)))}if(--y,h+=8*(L+ee)/(C.duration/1e3),l++,10<l)break}}if(0<l)return h/l/1e6}return navigator.connection&&(l=navigator.connection.downlink,typeof l=="number")?l:5}var vw=null,yw=null;function Kv(l){return l.nodeType===9?l:l.ownerDocument}function GN(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function $N(l,h){if(l===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&h==="foreignObject"?0:l}function bw(l,h){return l==="textarea"||l==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var _w=null;function t9(){var l=window.event;return l&&l.type==="popstate"?l===_w?!1:(_w=l,!0):(_w=null,!1)}var KN=typeof setTimeout=="function"?setTimeout:void 0,n9=typeof clearTimeout=="function"?clearTimeout:void 0,YN=typeof Promise=="function"?Promise:void 0,r9=typeof queueMicrotask=="function"?queueMicrotask:typeof YN<"u"?function(l){return YN.resolve(null).then(l).catch(i9)}:KN;function i9(l){setTimeout(function(){throw l})}function xf(l){return l==="head"}function XN(l,h){var m=h,y=0;do{var C=m.nextSibling;if(l.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"||m==="/&"){if(y===0){l.removeChild(C),Bm(h);return}y--}else if(m==="$"||m==="$?"||m==="$~"||m==="$!"||m==="&")y++;else if(m==="html")Og(l.ownerDocument.documentElement);else if(m==="head"){m=l.ownerDocument.head,Og(m);for(var L=m.firstChild;L;){var ee=L.nextSibling,de=L.nodeName;L[Ye]||de==="SCRIPT"||de==="STYLE"||de==="LINK"&&L.rel.toLowerCase()==="stylesheet"||m.removeChild(L),L=ee}}else m==="body"&&Og(l.ownerDocument.body);m=C}while(m);Bm(h)}function QN(l,h){var m=l;l=0;do{var y=m.nextSibling;if(m.nodeType===1?h?(m._stashedDisplay=m.style.display,m.style.display="none"):(m.style.display=m._stashedDisplay||"",m.getAttribute("style")===""&&m.removeAttribute("style")):m.nodeType===3&&(h?(m._stashedText=m.nodeValue,m.nodeValue=""):m.nodeValue=m._stashedText||""),y&&y.nodeType===8)if(m=y.data,m==="/$"){if(l===0)break;l--}else m!=="$"&&m!=="$?"&&m!=="$~"&&m!=="$!"||l++;m=y}while(m)}function ww(l){var h=l.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":ww(m),yt(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}l.removeChild(m)}}function s9(l,h,m,y){for(;l.nodeType===1;){var C=m;if(l.nodeName.toLowerCase()!==h.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[Ye])switch(h){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(L=l.getAttribute("rel"),L==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(L!==C.rel||l.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||l.getAttribute("title")!==(C.title==null?null:C.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(L=l.getAttribute("src"),(L!==(C.src==null?null:C.src)||l.getAttribute("type")!==(C.type==null?null:C.type)||l.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&L&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(h==="input"&&l.type==="hidden"){var L=C.name==null?null:""+C.name;if(C.type==="hidden"&&l.getAttribute("name")===L)return l}else return l;if(l=Bl(l.nextSibling),l===null)break}return null}function a9(l,h,m){if(h==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!m||(l=Bl(l.nextSibling),l===null))return null;return l}function JN(l,h){for(;l.nodeType!==8;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!h||(l=Bl(l.nextSibling),l===null))return null;return l}function Sw(l){return l.data==="$?"||l.data==="$~"}function Tw(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState!=="loading"}function o9(l,h){var m=l.ownerDocument;if(l.data==="$~")l._reactRetry=h;else if(l.data!=="$?"||m.readyState!=="loading")h();else{var y=function(){h(),m.removeEventListener("DOMContentLoaded",y)};m.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Bl(l){for(;l!=null;l=l.nextSibling){var h=l.nodeType;if(h===1||h===3)break;if(h===8){if(h=l.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return l}var Ew=null;function ZN(l){l=l.nextSibling;for(var h=0;l;){if(l.nodeType===8){var m=l.data;if(m==="/$"||m==="/&"){if(h===0)return Bl(l.nextSibling);h--}else m!=="$"&&m!=="$!"&&m!=="$?"&&m!=="$~"&&m!=="&"||h++}l=l.nextSibling}return null}function e3(l){l=l.previousSibling;for(var h=0;l;){if(l.nodeType===8){var m=l.data;if(m==="$"||m==="$!"||m==="$?"||m==="$~"||m==="&"){if(h===0)return l;h--}else m!=="/$"&&m!=="/&"||h++}l=l.previousSibling}return null}function t3(l,h,m){switch(h=Kv(m),l){case"html":if(l=h.documentElement,!l)throw Error(r(452));return l;case"head":if(l=h.head,!l)throw Error(r(453));return l;case"body":if(l=h.body,!l)throw Error(r(454));return l;default:throw Error(r(451))}}function Og(l){for(var h=l.attributes;h.length;)l.removeAttributeNode(h[0]);yt(l)}var Vl=new Map,n3=new Set;function Yv(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var dh=Q.d;Q.d={f:l9,r:c9,D:u9,C:h9,L:f9,m:d9,X:p9,S:m9,M:g9};function l9(){var l=dh.f(),h=Vv();return l||h}function c9(l){var h=Lt(l);h!==null&&h.tag===5&&h.type==="form"?yA(h):dh.r(l)}var Om=typeof document>"u"?null:document;function r3(l,h,m){var y=Om;if(y&&typeof h=="string"&&h){var C=cs(h);C='link[rel="'+l+'"][href="'+C+'"]',typeof m=="string"&&(C+='[crossorigin="'+m+'"]'),n3.has(C)||(n3.add(C),l={rel:l,crossOrigin:m,href:h},y.querySelector(C)===null&&(h=y.createElement("link"),ha(h,"link",l),Qt(h),y.head.appendChild(h)))}}function u9(l){dh.D(l),r3("dns-prefetch",l,null)}function h9(l,h){dh.C(l,h),r3("preconnect",l,h)}function f9(l,h,m){dh.L(l,h,m);var y=Om;if(y&&l&&h){var C='link[rel="preload"][as="'+cs(h)+'"]';h==="image"&&m&&m.imageSrcSet?(C+='[imagesrcset="'+cs(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(C+='[imagesizes="'+cs(m.imageSizes)+'"]')):C+='[href="'+cs(l)+'"]';var L=C;switch(h){case"style":L=Mm(l);break;case"script":L=Fm(l)}Vl.has(L)||(l=p({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:l,as:h},m),Vl.set(L,l),y.querySelector(C)!==null||h==="style"&&y.querySelector(Mg(L))||h==="script"&&y.querySelector(Fg(L))||(h=y.createElement("link"),ha(h,"link",l),Qt(h),y.head.appendChild(h)))}}function d9(l,h){dh.m(l,h);var m=Om;if(m&&l){var y=h&&typeof h.as=="string"?h.as:"script",C='link[rel="modulepreload"][as="'+cs(y)+'"][href="'+cs(l)+'"]',L=C;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":L=Fm(l)}if(!Vl.has(L)&&(l=p({rel:"modulepreload",href:l},h),Vl.set(L,l),m.querySelector(C)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Fg(L)))return}y=m.createElement("link"),ha(y,"link",l),Qt(y),m.head.appendChild(y)}}}function m9(l,h,m){dh.S(l,h,m);var y=Om;if(y&&l){var C=Ot(y).hoistableStyles,L=Mm(l);h=h||"default";var ee=C.get(L);if(!ee){var de={loading:0,preload:null};if(ee=y.querySelector(Mg(L)))de.loading=5;else{l=p({rel:"stylesheet",href:l,"data-precedence":h},m),(m=Vl.get(L))&&Aw(l,m);var Ie=ee=y.createElement("link");Qt(Ie),ha(Ie,"link",l),Ie._p=new Promise(function(Ze,ht){Ie.onload=Ze,Ie.onerror=ht}),Ie.addEventListener("load",function(){de.loading|=1}),Ie.addEventListener("error",function(){de.loading|=2}),de.loading|=4,Xv(ee,h,y)}ee={type:"stylesheet",instance:ee,count:1,state:de},C.set(L,ee)}}}function p9(l,h){dh.X(l,h);var m=Om;if(m&&l){var y=Ot(m).hoistableScripts,C=Fm(l),L=y.get(C);L||(L=m.querySelector(Fg(C)),L||(l=p({src:l,async:!0},h),(h=Vl.get(C))&&Nw(l,h),L=m.createElement("script"),Qt(L),ha(L,"link",l),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},y.set(C,L))}}function g9(l,h){dh.M(l,h);var m=Om;if(m&&l){var y=Ot(m).hoistableScripts,C=Fm(l),L=y.get(C);L||(L=m.querySelector(Fg(C)),L||(l=p({src:l,async:!0,type:"module"},h),(h=Vl.get(C))&&Nw(l,h),L=m.createElement("script"),Qt(L),ha(L,"link",l),m.head.appendChild(L)),L={type:"script",instance:L,count:1,state:null},y.set(C,L))}}function i3(l,h,m,y){var C=(C=te.current)?Yv(C):null;if(!C)throw Error(r(446));switch(l){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Mm(m.href),m=Ot(C).hoistableStyles,y=m.get(h),y||(y={type:"style",instance:null,count:0,state:null},m.set(h,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){l=Mm(m.href);var L=Ot(C).hoistableStyles,ee=L.get(l);if(ee||(C=C.ownerDocument||C,ee={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},L.set(l,ee),(L=C.querySelector(Mg(l)))&&!L._p&&(ee.instance=L,ee.state.loading=5),Vl.has(l)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Vl.set(l,m),L||x9(C,l,m,ee.state))),h&&y===null)throw Error(r(528,""));return ee}if(h&&y!==null)throw Error(r(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Fm(m),m=Ot(C).hoistableScripts,y=m.get(h),y||(y={type:"script",instance:null,count:0,state:null},m.set(h,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,l))}}function Mm(l){return'href="'+cs(l)+'"'}function Mg(l){return'link[rel="stylesheet"]['+l+"]"}function s3(l){return p({},l,{"data-precedence":l.precedence,precedence:null})}function x9(l,h,m,y){l.querySelector('link[rel="preload"][as="style"]['+h+"]")?y.loading=1:(h=l.createElement("link"),y.preload=h,h.addEventListener("load",function(){return y.loading|=1}),h.addEventListener("error",function(){return y.loading|=2}),ha(h,"link",m),Qt(h),l.head.appendChild(h))}function Fm(l){return'[src="'+cs(l)+'"]'}function Fg(l){return"script[async]"+l}function a3(l,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var y=l.querySelector('style[data-href~="'+cs(m.href)+'"]');if(y)return h.instance=y,Qt(y),y;var C=p({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Qt(y),ha(y,"style",C),Xv(y,m.precedence,l),h.instance=y;case"stylesheet":C=Mm(m.href);var L=l.querySelector(Mg(C));if(L)return h.state.loading|=4,h.instance=L,Qt(L),L;y=s3(m),(C=Vl.get(C))&&Aw(y,C),L=(l.ownerDocument||l).createElement("link"),Qt(L);var ee=L;return ee._p=new Promise(function(de,Ie){ee.onload=de,ee.onerror=Ie}),ha(L,"link",y),h.state.loading|=4,Xv(L,m.precedence,l),h.instance=L;case"script":return L=Fm(m.src),(C=l.querySelector(Fg(L)))?(h.instance=C,Qt(C),C):(y=m,(C=Vl.get(L))&&(y=p({},m),Nw(y,C)),l=l.ownerDocument||l,C=l.createElement("script"),Qt(C),ha(C,"link",y),l.head.appendChild(C),h.instance=C);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(y=h.instance,h.state.loading|=4,Xv(y,m.precedence,l));return h.instance}function Xv(l,h,m){for(var y=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=y.length?y[y.length-1]:null,L=C,ee=0;ee<y.length;ee++){var de=y[ee];if(de.dataset.precedence===h)L=de;else if(L!==C)break}L?L.parentNode.insertBefore(l,L.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(l,h.firstChild))}function Aw(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.title==null&&(l.title=h.title)}function Nw(l,h){l.crossOrigin==null&&(l.crossOrigin=h.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=h.referrerPolicy),l.integrity==null&&(l.integrity=h.integrity)}var Qv=null;function o3(l,h,m){if(Qv===null){var y=new Map,C=Qv=new Map;C.set(m,y)}else C=Qv,y=C.get(m),y||(y=new Map,C.set(m,y));if(y.has(l))return y;for(y.set(l,null),m=m.getElementsByTagName(l),C=0;C<m.length;C++){var L=m[C];if(!(L[Ye]||L[ve]||l==="link"&&L.getAttribute("rel")==="stylesheet")&&L.namespaceURI!=="http://www.w3.org/2000/svg"){var ee=L.getAttribute(h)||"";ee=l+ee;var de=y.get(ee);de?de.push(L):y.set(ee,[L])}}return y}function l3(l,h,m){l=l.ownerDocument||l,l.head.insertBefore(m,h==="title"?l.querySelector("head > title"):null)}function v9(l,h,m){if(m===1||h.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return l=h.disabled,typeof h.precedence=="string"&&l==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function c3(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}function y9(l,h,m,y){if(m.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(m.state.loading&4)===0){if(m.instance===null){var C=Mm(y.href),L=h.querySelector(Mg(C));if(L){h=L._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(l.count++,l=Jv.bind(l),h.then(l,l)),m.state.loading|=4,m.instance=L,Qt(L);return}L=h.ownerDocument||h,y=s3(y),(C=Vl.get(C))&&Aw(y,C),L=L.createElement("link"),Qt(L);var ee=L;ee._p=new Promise(function(de,Ie){ee.onload=de,ee.onerror=Ie}),ha(L,"link",y),m.instance=L}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(m,h),(h=m.state.preload)&&(m.state.loading&3)===0&&(l.count++,m=Jv.bind(l),h.addEventListener("load",m),h.addEventListener("error",m))}}var Cw=0;function b9(l,h){return l.stylesheets&&l.count===0&&e2(l,l.stylesheets),0<l.count||0<l.imgCount?function(m){var y=setTimeout(function(){if(l.stylesheets&&e2(l,l.stylesheets),l.unsuspend){var L=l.unsuspend;l.unsuspend=null,L()}},6e4+h);0<l.imgBytes&&Cw===0&&(Cw=62500*e9());var C=setTimeout(function(){if(l.waitingForImages=!1,l.count===0&&(l.stylesheets&&e2(l,l.stylesheets),l.unsuspend)){var L=l.unsuspend;l.unsuspend=null,L()}},(l.imgBytes>Cw?50:800)+h);return l.unsuspend=m,function(){l.unsuspend=null,clearTimeout(y),clearTimeout(C)}}:null}function Jv(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)e2(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Zv=null;function e2(l,h){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Zv=new Map,h.forEach(_9,l),Zv=null,Jv.call(l))}function _9(l,h){if(!(h.state.loading&4)){var m=Zv.get(l);if(m)var y=m.get(null);else{m=new Map,Zv.set(l,m);for(var C=l.querySelectorAll("link[data-precedence],style[data-precedence]"),L=0;L<C.length;L++){var ee=C[L];(ee.nodeName==="LINK"||ee.getAttribute("media")!=="not all")&&(m.set(ee.dataset.precedence,ee),y=ee)}y&&m.set(null,y)}C=h.instance,ee=C.getAttribute("data-precedence"),L=m.get(ee)||y,L===y&&m.set(null,C),m.set(ee,C),this.count++,y=Jv.bind(this),C.addEventListener("load",y),C.addEventListener("error",y),L?L.parentNode.insertBefore(C,L.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(C,l.firstChild)),h.state.loading|=4}}var Bg={$$typeof:E,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function w9(l,h,m,y,C,L,ee,de,Ie){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=nr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nr(0),this.hiddenUpdates=nr(null),this.identifierPrefix=y,this.onUncaughtError=C,this.onCaughtError=L,this.onRecoverableError=ee,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ie,this.incompleteTransitions=new Map}function u3(l,h,m,y,C,L,ee,de,Ie,Ze,ht,xt){return l=new w9(l,h,m,ee,Ie,Ze,ht,xt,de),h=1,L===!0&&(h|=24),L=Gs(3,null,null,h),l.current=L,L.stateNode=l,h=sf(),h.refCount++,l.pooledCache=h,h.refCount++,L.memoizedState={element:y,isDehydrated:m,cache:h},_r(L),l}function h3(l){return l?(l=Cs,l):Cs}function f3(l,h,m,y,C,L){C=h3(C),y.context===null?y.context=C:y.pendingContext=C,y=bn(h),y.payload={element:m},L=L===void 0?null:L,L!==null&&(y.callback=L),m=Nr(l,y,h),m!==null&&(Lo(m,l,h),hs(m,l,h))}function d3(l,h){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var m=l.retryLane;l.retryLane=m!==0&&m<h?m:h}}function kw(l,h){d3(l,h),(l=l.alternate)&&d3(l,h)}function m3(l){if(l.tag===13||l.tag===31){var h=fc(l,67108864);h!==null&&Lo(h,l,67108864),kw(l,67108864)}}function p3(l){if(l.tag===13||l.tag===31){var h=cl();h=Er(h);var m=fc(l,h);m!==null&&Lo(m,l,h),kw(l,h)}}var t2=!0;function S9(l,h,m,y){var C=q.T;q.T=null;var L=Q.p;try{Q.p=2,Iw(l,h,m,y)}finally{Q.p=L,q.T=C}}function T9(l,h,m,y){var C=q.T;q.T=null;var L=Q.p;try{Q.p=8,Iw(l,h,m,y)}finally{Q.p=L,q.T=C}}function Iw(l,h,m,y){if(t2){var C=Dw(y);if(C===null)gw(l,h,y,n2,m),x3(l,y);else if(A9(C,l,h,m,y))y.stopPropagation();else if(x3(l,y),h&4&&-1<E9.indexOf(l)){for(;C!==null;){var L=Lt(C);if(L!==null)switch(L.tag){case 3:if(L=L.stateNode,L.current.memoizedState.isDehydrated){var ee=kt(L.pendingLanes);if(ee!==0){var de=L;for(de.pendingLanes|=2,de.entangledLanes|=2;ee;){var Ie=1<<31-gt(ee);de.entanglements[1]|=Ie,ee&=~Ie}du(L),(wr&6)===0&&(Fv=Rt()+500,Pg(0))}}break;case 31:case 13:de=fc(L,2),de!==null&&Lo(de,L,2),Vv(),kw(L,2)}if(L=Dw(y),L===null&&gw(l,h,y,n2,m),L===C)break;C=L}C!==null&&y.stopPropagation()}else gw(l,h,y,null,m)}}function Dw(l){return l=na(l),Rw(l)}var n2=null;function Rw(l){if(n2=null,l=It(l),l!==null){var h=s(l);if(h===null)l=null;else{var m=h.tag;if(m===13){if(l=a(h),l!==null)return l;l=null}else if(m===31){if(l=o(h),l!==null)return l;l=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;l=null}else h!==l&&(l=null)}}return n2=l,null}function g3(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wt()){case Jt:return 2;case yn:return 8;case ln:case Zt:return 32;case Ft:return 268435456;default:return 32}default:return 32}}var Pw=!1,vf=null,yf=null,bf=null,Vg=new Map,zg=new Map,_f=[],E9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x3(l,h){switch(l){case"focusin":case"focusout":vf=null;break;case"dragenter":case"dragleave":yf=null;break;case"mouseover":case"mouseout":bf=null;break;case"pointerover":case"pointerout":Vg.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":zg.delete(h.pointerId)}}function Ug(l,h,m,y,C,L){return l===null||l.nativeEvent!==L?(l={blockedOn:h,domEventName:m,eventSystemFlags:y,nativeEvent:L,targetContainers:[C]},h!==null&&(h=Lt(h),h!==null&&m3(h)),l):(l.eventSystemFlags|=y,h=l.targetContainers,C!==null&&h.indexOf(C)===-1&&h.push(C),l)}function A9(l,h,m,y,C){switch(h){case"focusin":return vf=Ug(vf,l,h,m,y,C),!0;case"dragenter":return yf=Ug(yf,l,h,m,y,C),!0;case"mouseover":return bf=Ug(bf,l,h,m,y,C),!0;case"pointerover":var L=C.pointerId;return Vg.set(L,Ug(Vg.get(L)||null,l,h,m,y,C)),!0;case"gotpointercapture":return L=C.pointerId,zg.set(L,Ug(zg.get(L)||null,l,h,m,y,C)),!0}return!1}function v3(l){var h=It(l.target);if(h!==null){var m=s(h);if(m!==null){if(h=m.tag,h===13){if(h=a(m),h!==null){l.blockedOn=h,Te(l.priority,function(){p3(m)});return}}else if(h===31){if(h=o(m),h!==null){l.blockedOn=h,Te(l.priority,function(){p3(m)});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){l.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}l.blockedOn=null}function r2(l){if(l.blockedOn!==null)return!1;for(var h=l.targetContainers;0<h.length;){var m=Dw(l.nativeEvent);if(m===null){m=l.nativeEvent;var y=new m.constructor(m.type,m);qu=y,m.target.dispatchEvent(y),qu=null}else return h=Lt(m),h!==null&&m3(h),l.blockedOn=m,!1;h.shift()}return!0}function y3(l,h,m){r2(l)&&m.delete(h)}function N9(){Pw=!1,vf!==null&&r2(vf)&&(vf=null),yf!==null&&r2(yf)&&(yf=null),bf!==null&&r2(bf)&&(bf=null),Vg.forEach(y3),zg.forEach(y3)}function i2(l,h){l.blockedOn===h&&(l.blockedOn=null,Pw||(Pw=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,N9)))}var s2=null;function b3(l){s2!==l&&(s2=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){s2===l&&(s2=null);for(var h=0;h<l.length;h+=3){var m=l[h],y=l[h+1],C=l[h+2];if(typeof y!="function"){if(Rw(y||m)===null)continue;break}var L=Lt(m);L!==null&&(l.splice(h,3),h-=3,D_(L,{pending:!0,data:C,method:m.method,action:y},y,C))}}))}function Bm(l){function h(Ie){return i2(Ie,l)}vf!==null&&i2(vf,l),yf!==null&&i2(yf,l),bf!==null&&i2(bf,l),Vg.forEach(h),zg.forEach(h);for(var m=0;m<_f.length;m++){var y=_f[m];y.blockedOn===l&&(y.blockedOn=null)}for(;0<_f.length&&(m=_f[0],m.blockedOn===null);)v3(m),m.blockedOn===null&&_f.shift();if(m=(l.ownerDocument||l).$$reactFormReplay,m!=null)for(y=0;y<m.length;y+=3){var C=m[y],L=m[y+1],ee=C[we]||null;if(typeof L=="function")ee||b3(m);else if(ee){var de=null;if(L&&L.hasAttribute("formAction")){if(C=L,ee=L[we]||null)de=ee.formAction;else if(Rw(C)!==null)continue}else de=ee.action;typeof de=="function"?m[y+1]=de:(m.splice(y,3),y-=3),b3(m)}}}function _3(){function l(L){L.canIntercept&&L.info==="react-transition"&&L.intercept({handler:function(){return new Promise(function(ee){return C=ee})},focusReset:"manual",scroll:"manual"})}function h(){C!==null&&(C(),C=null),y||setTimeout(m,20)}function m(){if(!y&&!navigation.transition){var L=navigation.currentEntry;L&&L.url!=null&&navigation.navigate(L.url,{state:L.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,C=null;return navigation.addEventListener("navigate",l),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(m,100),function(){y=!0,navigation.removeEventListener("navigate",l),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),C!==null&&(C(),C=null)}}}function jw(l){this._internalRoot=l}a2.prototype.render=jw.prototype.render=function(l){var h=this._internalRoot;if(h===null)throw Error(r(409));var m=h.current,y=cl();f3(m,y,l,h,null,null)},a2.prototype.unmount=jw.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var h=l.containerInfo;f3(l.current,2,null,l,null,null),Vv(),h[Ee]=null}};function a2(l){this._internalRoot=l}a2.prototype.unstable_scheduleHydration=function(l){if(l){var h=le();l={blockedOn:null,target:l,priority:h};for(var m=0;m<_f.length&&h!==0&&h<_f[m].priority;m++);_f.splice(m,0,l),m===0&&v3(l)}};var w3=e.version;if(w3!=="19.2.3")throw Error(r(527,w3,"19.2.3"));Q.findDOMNode=function(l){var h=l._reactInternals;if(h===void 0)throw typeof l.render=="function"?Error(r(188)):(l=Object.keys(l).join(","),Error(r(268,l)));return l=u(h),l=l!==null?d(l):null,l=l===null?null:l.stateNode,l};var C9={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var o2=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!o2.isDisabled&&o2.supportsFiber)try{nt=o2.inject(C9),ct=o2}catch{}}return qg.createRoot=function(l,h){if(!i(l))throw Error(r(299));var m=!1,y="",C=kA,L=IA,ee=DA;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(y=h.identifierPrefix),h.onUncaughtError!==void 0&&(C=h.onUncaughtError),h.onCaughtError!==void 0&&(L=h.onCaughtError),h.onRecoverableError!==void 0&&(ee=h.onRecoverableError)),h=u3(l,1,!1,null,null,m,y,null,C,L,ee,_3),l[Ee]=h.current,pw(l),new jw(h)},qg.hydrateRoot=function(l,h,m){if(!i(l))throw Error(r(299));var y=!1,C="",L=kA,ee=IA,de=DA,Ie=null;return m!=null&&(m.unstable_strictMode===!0&&(y=!0),m.identifierPrefix!==void 0&&(C=m.identifierPrefix),m.onUncaughtError!==void 0&&(L=m.onUncaughtError),m.onCaughtError!==void 0&&(ee=m.onCaughtError),m.onRecoverableError!==void 0&&(de=m.onRecoverableError),m.formState!==void 0&&(Ie=m.formState)),h=u3(l,1,!0,h,m??null,y,C,Ie,L,ee,de,_3),h.context=h3(null),m=h.current,y=cl(),y=Er(y),C=bn(y),C.callback=null,Nr(m,C,y),m=y,h.current.lanes=m,Tr(h,m),du(h),l[Ee]=h.current,pw(l),new a2(h)},qg.version="19.2.3",qg}var R3;function z9(){if(R3)return Mw.exports;R3=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Mw.exports=V9(),Mw.exports}var U9=z9();const H9=DT(U9),q9=()=>{};var P3={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},W9=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},fR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,d=s>>2,p=(s&3)<<4|o>>4;let x=(o&15)<<2|u>>6,v=u&63;c||(v=64,a||(x=64)),r.push(t[d],t[p],t[x],t[v])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hR(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):W9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const p=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||p==null)throw new G9;const x=s<<2|o>>4;if(r.push(x),u!==64){const v=o<<4&240|u>>2;if(r.push(v),p!==64){const _=u<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class G9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $9=function(n){const e=hR(n);return fR.encodeByteArray(e,!0)},Ny=function(n){return $9(n).replace(/\./g,"")},dR=function(n){try{return fR.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K9=()=>mR().__FIREBASE_DEFAULTS__,Y9=()=>{if(typeof process>"u"||typeof P3>"u")return;const n=P3.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},X9=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dR(n[1]);return e&&JSON.parse(e)},Eb=()=>{try{return q9()||K9()||Y9()||X9()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},pR=n=>{var e,t;return(t=(e=Eb())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Q9=n=>{const e=pR(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},gR=()=>{var n;return(n=Eb())==null?void 0:n.config},xR=n=>{var e;return(e=Eb())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function PT(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Ny(JSON.stringify(t)),Ny(JSON.stringify(a)),""].join(".")}const w1={};function eB(){const n={prod:[],emulator:[]};for(const e of Object.keys(w1))w1[e]?n.emulator.push(e):n.prod.push(e);return n}function tB(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let j3=!1;function vR(n,e){if(typeof window>"u"||typeof document>"u"||!dd(window.location.host)||w1[n]===e||w1[n]||j3)return;w1[n]=e;function t(x){return`__firebase__banner__${x}`}const r="__firebase__banner",s=eB().prod.length>0;function a(){const x=document.getElementById(r);x&&x.remove()}function o(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function c(x,v){x.setAttribute("width","24"),x.setAttribute("id",v),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function u(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{j3=!0,a()},x}function d(x,v){x.setAttribute("id",v),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function p(){const x=tB(r),v=t("text"),_=document.getElementById(v)||document.createElement("span"),b=t("learnmore"),S=document.getElementById(b)||document.createElement("a"),T=t("preprendIcon"),k=document.getElementById(T)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const E=x.element;o(E),d(S,b);const j=u();c(k,T),E.append(k,_,S,j),document.body.appendChild(E)}s?(_.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nB(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fs())}function yR(){var e;const n=(e=Eb())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rB(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function iB(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sB(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aB(){const n=Fs();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bR(){return!yR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _R(){return!yR()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function jT(){try{return typeof indexedDB=="object"}catch{return!1}}function wR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(t){e(t)}})}function oB(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lB="FirebaseError";class Fc extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lB,Object.setPrototypeOf(this,Fc.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q0.prototype.create)}}class q0{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?cB(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Fc(i,o,r)}}function cB(n,e){return n.replace(uB,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uB=/\{\$([^}]+)}/g;function hB(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function S0(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(L3(s)&&L3(a)){if(!S0(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function L3(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function a1(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function o1(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function fB(n,e){const t=new dB(n,e);return t.subscribe.bind(t)}class dB{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mB(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zw),i.error===void 0&&(i.error=zw),i.complete===void 0&&(i.complete=zw);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mB(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n){return n&&n._delegate?n._delegate:n}class Ql{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new J9;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xB(e))try{this.getOrInitializeService({instanceIdentifier:$d})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=$d){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$d){return this.instances.has(e)}getOptions(e=$d){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:gB(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=$d){return this.component?this.component.multipleInstances?e:$d:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gB(n){return n===$d?void 0:n}function xB(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new pB(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Zn||(Zn={}));const yB={debug:Zn.DEBUG,verbose:Zn.VERBOSE,info:Zn.INFO,warn:Zn.WARN,error:Zn.ERROR,silent:Zn.SILENT},bB=Zn.INFO,_B={[Zn.DEBUG]:"log",[Zn.VERBOSE]:"log",[Zn.INFO]:"info",[Zn.WARN]:"warn",[Zn.ERROR]:"error"},wB=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=_B[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class LT{constructor(e){this.name=e,this._logLevel=bB,this._logHandler=wB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Zn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Zn.DEBUG,...e),this._logHandler(this,Zn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Zn.VERBOSE,...e),this._logHandler(this,Zn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Zn.INFO,...e),this._logHandler(this,Zn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Zn.WARN,...e),this._logHandler(this,Zn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Zn.ERROR,...e),this._logHandler(this,Zn.ERROR,...e)}}const SB=(n,e)=>e.some(t=>n instanceof t);let O3,M3;function TB(){return O3||(O3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EB(){return M3||(M3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SR=new WeakMap,X5=new WeakMap,TR=new WeakMap,Uw=new WeakMap,OT=new WeakMap;function AB(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Nh(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&SR.set(t,n)}).catch(()=>{}),OT.set(e,n),e}function NB(n){if(X5.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});X5.set(n,e)}let Q5={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return X5.get(n);if(e==="objectStoreNames")return n.objectStoreNames||TR.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Nh(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function CB(n){Q5=n(Q5)}function kB(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Hw(this),e,...t);return TR.set(r,e.sort?e.sort():[e]),Nh(r)}:EB().includes(n)?function(...e){return n.apply(Hw(this),e),Nh(SR.get(this))}:function(...e){return Nh(n.apply(Hw(this),e))}}function IB(n){return typeof n=="function"?kB(n):(n instanceof IDBTransaction&&NB(n),SB(n,TB())?new Proxy(n,Q5):n)}function Nh(n){if(n instanceof IDBRequest)return AB(n);if(Uw.has(n))return Uw.get(n);const e=IB(n);return e!==n&&(Uw.set(n,e),OT.set(e,n)),e}const Hw=n=>OT.get(n);function Ab(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Nh(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Nh(a.result),c.oldVersion,c.newVersion,Nh(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}function qw(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Nh(t).then(()=>{})}const DB=["get","getKey","getAll","getAllKeys","count"],RB=["put","add","delete","clear"],Ww=new Map;function F3(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ww.get(e))return Ww.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=RB.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||DB.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&c.done]))[0]};return Ww.set(e,s),s}CB(n=>({...n,get:(e,t,r)=>F3(e,t)||n.get(e,t,r),has:(e,t)=>!!F3(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(jB(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function jB(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const J5="@firebase/app",B3="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh=new LT("@firebase/app"),LB="@firebase/app-compat",OB="@firebase/analytics-compat",MB="@firebase/analytics",FB="@firebase/app-check-compat",BB="@firebase/app-check",VB="@firebase/auth",zB="@firebase/auth-compat",UB="@firebase/database",HB="@firebase/data-connect",qB="@firebase/database-compat",WB="@firebase/functions",GB="@firebase/functions-compat",$B="@firebase/installations",KB="@firebase/installations-compat",YB="@firebase/messaging",XB="@firebase/messaging-compat",QB="@firebase/performance",JB="@firebase/performance-compat",ZB="@firebase/remote-config",eV="@firebase/remote-config-compat",tV="@firebase/storage",nV="@firebase/storage-compat",rV="@firebase/firestore",iV="@firebase/ai",sV="@firebase/firestore-compat",aV="firebase",oV="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5="[DEFAULT]",lV={[J5]:"fire-core",[LB]:"fire-core-compat",[MB]:"fire-analytics",[OB]:"fire-analytics-compat",[BB]:"fire-app-check",[FB]:"fire-app-check-compat",[VB]:"fire-auth",[zB]:"fire-auth-compat",[UB]:"fire-rtdb",[HB]:"fire-data-connect",[qB]:"fire-rtdb-compat",[WB]:"fire-fn",[GB]:"fire-fn-compat",[$B]:"fire-iid",[KB]:"fire-iid-compat",[YB]:"fire-fcm",[XB]:"fire-fcm-compat",[QB]:"fire-perf",[JB]:"fire-perf-compat",[ZB]:"fire-rc",[eV]:"fire-rc-compat",[tV]:"fire-gcs",[nV]:"fire-gcs-compat",[rV]:"fire-fst",[sV]:"fire-fst-compat",[iV]:"fire-vertex","fire-js":"fire-js",[aV]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cy=new Map,cV=new Map,eS=new Map;function V3(n,e){try{n.container.addComponent(e)}catch(t){Dh.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jc(n){const e=n.name;if(eS.has(e))return Dh.debug(`There were multiple attempts to register component ${e}.`),!1;eS.set(e,n);for(const t of Cy.values())V3(t,n);for(const t of cV.values())V3(t,n);return!0}function W0(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Kl(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kf=new q0("app","Firebase",uV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ql("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kf.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0=oV;function ER(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Z5,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw Kf.create("bad-app-name",{appName:String(i)});if(t||(t=gR()),!t)throw Kf.create("no-options");const s=Cy.get(i);if(s){if(S0(t,s.options)&&S0(r,s.config))return s;throw Kf.create("duplicate-app",{appName:i})}const a=new vB(i);for(const c of eS.values())a.addComponent(c);const o=new hV(t,r,a);return Cy.set(i,o),o}function MT(n=Z5){const e=Cy.get(n);if(!e&&n===Z5&&gR())return ER();if(!e)throw Kf.create("no-app",{appName:n});return e}function vl(n,e,t){let r=lV[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const a=[`Unable to register library "${r}" with version "${e}":`];i&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dh.warn(a.join(" "));return}jc(new Ql(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fV="firebase-heartbeat-database",dV=1,Z1="firebase-heartbeat-store";let Gw=null;function AR(){return Gw||(Gw=Ab(fV,dV,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Z1)}catch(t){console.warn(t)}}}}).catch(n=>{throw Kf.create("idb-open",{originalErrorMessage:n.message})})),Gw}async function mV(n){try{const t=(await AR()).transaction(Z1),r=await t.objectStore(Z1).get(NR(n));return await t.done,r}catch(e){if(e instanceof Fc)Dh.warn(e.message);else{const t=Kf.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dh.warn(t.message)}}}async function z3(n,e){try{const r=(await AR()).transaction(Z1,"readwrite");await r.objectStore(Z1).put(e,NR(n)),await r.done}catch(t){if(t instanceof Fc)Dh.warn(t.message);else{const r=Kf.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Dh.warn(r.message)}}}function NR(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=1024,gV=30;class xV{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new yV(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=U3();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>gV){const a=bV(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dh.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=U3(),{heartbeatsToSend:r,unsentEntries:i}=vV(this._heartbeatsCache.heartbeats),s=Ny(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Dh.warn(t),""}}}function U3(){return new Date().toISOString().substring(0,10)}function vV(n,e=pV){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),H3(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),H3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class yV{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jT()?wR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mV(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return z3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return z3(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function H3(n){return Ny(JSON.stringify({version:2,heartbeats:n})).length}function bV(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(n){jc(new Ql("platform-logger",e=>new PB(e),"PRIVATE")),jc(new Ql("heartbeat",e=>new xV(e),"PRIVATE")),vl(J5,B3,n),vl(J5,B3,"esm2020"),vl("fire-js","")}_V("");function CR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wV=CR,kR=new q0("auth","Firebase",CR());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=new LT("@firebase/auth");function SV(n,...e){ky.logLevel<=Zn.WARN&&ky.warn(`Auth (${G0}): ${n}`,...e)}function X2(n,...e){ky.logLevel<=Zn.ERROR&&ky.error(`Auth (${G0}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(n,...e){throw FT(n,...e)}function Cu(n,...e){return FT(n,...e)}function IR(n,e,t){const r={...wV(),[e]:t};return new q0("auth","Firebase",r).create(e,{appName:n.name})}function Yf(n){return IR(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FT(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return kR.create(n,...e)}function En(n,e,...t){if(!n)throw FT(e,...t)}function bh(n){const e="INTERNAL ASSERTION FAILED: "+n;throw X2(e),new Error(e)}function Rh(n,e){n||bh(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function TV(){return q3()==="http:"||q3()==="https:"}function q3(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EV(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TV()||iB()||"connection"in navigator)?navigator.onLine:!0}function AV(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t){this.shortDelay=e,this.longDelay=t,Rh(t>e,"Short delay should be less than long delay!"),this.isMobile=nB()||sB()}get(){return EV()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(n,e){Rh(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bh("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bh("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bh("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],kV=new $x(3e4,6e4);function $0(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function md(n,e,t,r,i={}){return RR(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=Gx({key:n.config.apiKey,...a}).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:c,...s};return rB()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&dd(n.emulatorConfig.host)&&(u.credentials="include"),DR.fetch()(await PR(n,n.config.apiHost,t,o),u)})}async function RR(n,e,t){n._canInitEmulator=!1;const r={...NV,...e};try{const i=new DV(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw l2(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw l2(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw l2(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw l2(n,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw IR(n,d,u);Lc(n,d)}}catch(i){if(i instanceof Fc)throw i;Lc(n,"network-request-failed",{message:String(i)})}}async function Nb(n,e,t,r,i={}){const s=await md(n,e,t,r,i);return"mfaPendingCredential"in s&&Lc(n,"multi-factor-auth-required",{_serverResponse:s}),s}async function PR(n,e,t,r){const i=`${e}${t}?${r}`,s=n,a=s.config.emulator?BT(n.config,i):`${n.config.apiScheme}://${i}`;return CV.includes(t)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(a).toString():a}function IV(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class DV{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Cu(this.auth,"network-request-failed")),kV.get())})}}function l2(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Cu(n,e,r);return i.customData._tokenResponse=t,i}function W3(n){return n!==void 0&&n.enterprise!==void 0}class RV{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IV(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function PV(n,e){return md(n,"GET","/v2/recaptchaConfig",$0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jV(n,e){return md(n,"POST","/v1/accounts:delete",e)}async function Iy(n,e){return md(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S1(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LV(n,e=!1){const t=ri(n),r=await t.getIdToken(e),i=VT(r);En(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:S1($w(i.auth_time)),issuedAtTime:S1($w(i.iat)),expirationTime:S1($w(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $w(n){return Number(n)*1e3}function VT(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return X2("JWT malformed, contained fewer than 3 sections"),null;try{const i=dR(t);return i?JSON.parse(i):(X2("Failed to decode base64 JWT payload"),null)}catch(i){return X2("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function G3(n){const e=VT(n);return En(e,"internal-error"),En(typeof e.exp<"u","internal-error"),En(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Fc&&OV(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function OV({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=S1(this.lastLoginAt),this.creationTime=S1(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dy(n){var p;const e=n.auth,t=await n.getIdToken(),r=await ex(n,Iy(e,{idToken:t}));En(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const s=(p=i.providerUserInfo)!=null&&p.length?jR(i.providerUserInfo):[],a=BV(n.providerData,s),o=n.isAnonymous,c=!(n.email&&i.passwordHash)&&!(a!=null&&a.length),u=o?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new nS(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function FV(n){const e=ri(n);await Dy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function BV(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function jR(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VV(n,e){const t=await RR(n,{},async()=>{const r=Gx({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=await PR(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:r};return n.emulatorConfig&&dd(n.emulatorConfig.host)&&(c.credentials="include"),DR.fetch()(a,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zV(n,e){return md(n,"POST","/v2/accounts:revokeToken",$0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){En(e.idToken,"internal-error"),En(typeof e.idToken<"u","internal-error"),En(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):G3(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){En(e.length!==0,"internal-error");const t=G3(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(En(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await VV(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new hp;return r&&(En(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(En(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(En(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hp,this.toJSON())}_performRefresh(){return bh("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sf(n,e){En(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Nc{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new MV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new nS(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ex(this,this.stsTokenManager.getToken(this.auth,e));return En(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return LV(this,e)}reload(){return FV(this)}_assign(e){this!==e&&(En(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Nc({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){En(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Dy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kl(this.auth.app))return Promise.reject(Yf(this.auth));const e=await this.getIdToken();return await ex(this,jV(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,s=t.phoneNumber??void 0,a=t.photoURL??void 0,o=t.tenantId??void 0,c=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:x,isAnonymous:v,providerData:_,stsTokenManager:b}=t;En(p&&b,e,"internal-error");const S=hp.fromJSON(this.name,b);En(typeof p=="string",e,"internal-error"),Sf(r,e.name),Sf(i,e.name),En(typeof x=="boolean",e,"internal-error"),En(typeof v=="boolean",e,"internal-error"),Sf(s,e.name),Sf(a,e.name),Sf(o,e.name),Sf(c,e.name),Sf(u,e.name),Sf(d,e.name);const T=new Nc({uid:p,auth:e,email:i,emailVerified:x,displayName:r,isAnonymous:v,photoURL:a,phoneNumber:s,tenantId:o,stsTokenManager:S,createdAt:u,lastLoginAt:d});return _&&Array.isArray(_)&&(T.providerData=_.map(k=>({...k}))),c&&(T._redirectEventId=c),T}static async _fromIdTokenResponse(e,t,r=!1){const i=new hp;i.updateFromServerResponse(t);const s=new Nc({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Dy(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];En(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?jR(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new hp;o.updateFromIdToken(r);const c=new Nc({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new nS(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=new Map;function _h(n){Rh(n instanceof Function,"Expected a class definition");let e=$3.get(n);return e?(Rh(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$3.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}LR.type="NONE";const K3=LR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(n,e,t){return`firebase:${n}:${e}:${t}`}class fp{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Q2(this.userKey,i.apiKey,s),this.fullPersistenceKey=Q2("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Iy(this.auth,{idToken:e}).catch(()=>{});return t?Nc._fromGetAccountInfoResponse(this.auth,t,e):null}return Nc._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new fp(_h(K3),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||_h(K3);const a=Q2(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const d=await u._get(a);if(d){let p;if(typeof d=="string"){const x=await Iy(e,{idToken:d}).catch(()=>{});if(!x)break;p=await Nc._fromGetAccountInfoResponse(e,x,d)}else p=Nc._fromJSON(e,d);u!==s&&(o=p),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new fp(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new fp(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(BR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(OR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zR(e))return"Blackberry";if(UR(e))return"Webos";if(MR(e))return"Safari";if((e.includes("chrome/")||FR(e))&&!e.includes("edge/"))return"Chrome";if(VR(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function OR(n=Fs()){return/firefox\//i.test(n)}function MR(n=Fs()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function FR(n=Fs()){return/crios\//i.test(n)}function BR(n=Fs()){return/iemobile/i.test(n)}function VR(n=Fs()){return/android/i.test(n)}function zR(n=Fs()){return/blackberry/i.test(n)}function UR(n=Fs()){return/webos/i.test(n)}function zT(n=Fs()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function UV(n=Fs()){var e;return zT(n)&&!!((e=window.navigator)!=null&&e.standalone)}function HV(){return aB()&&document.documentMode===10}function HR(n=Fs()){return zT(n)||VR(n)||UR(n)||zR(n)||/windows phone/i.test(n)||BR(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n,e=[]){let t;switch(n){case"Browser":t=Y3(Fs());break;case"Worker":t=`${Y3(Fs())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${G0}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WV(n,e={}){return md(n,"GET","/v2/passwordPolicy",$0(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GV=6;class $V{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??GV,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new X3(this),this.idTokenSubscription=new X3(this),this.beforeStateQueue=new qV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=kR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=_h(t)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await fp.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Iy(this,{idToken:e}),r=await Nc._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(Kl(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(s=this.redirectUser)==null?void 0:s._redirectEventId,o=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(r=c.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return En(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Dy(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AV()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kl(this.app))return Promise.reject(Yf(this));const t=e?ri(e):null;return t&&En(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&En(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kl(this.app)?Promise.reject(Yf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kl(this.app)?Promise.reject(Yf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_h(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await WV(this),t=new $V(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new q0("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&_h(e)||this._popupRedirectResolver;En(t,this,"argument-error"),this.redirectPersistenceManager=await fp.create(this,[_h(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(En(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return En(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qR(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Kl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&SV(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Xp(n){return ri(n)}class X3{constructor(e){this.auth=e,this.observer=null,this.addObserver=fB(t=>this.observer=t)}get next(){return En(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cb={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YV(n){Cb=n}function WR(n){return Cb.loadJS(n)}function XV(){return Cb.recaptchaEnterpriseScript}function QV(){return Cb.gapiScript}function JV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class ZV{constructor(){this.enterprise=new ez}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ez{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const tz="recaptcha-enterprise",GR="NO_RECAPTCHA";class nz{constructor(e){this.type=tz,this.auth=Xp(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{PV(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new RV(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;W3(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(GR)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new ZV().execute("siteKey",{action:"verify"}):new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&W3(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=XV();c.length!==0&&(c+=o),WR(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Q3(n,e,t,r=!1,i=!1){const s=new nz(n);let a;if(i)a=GR;else try{a=await s.verify(t)}catch{a=await s.verify(t,!0)}const o={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in o){const c=o.phoneEnrollmentInfo.phoneNumber,u=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const c=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function J3(n,e,t,r,i){var s;if((s=n._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Q3(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Q3(n,e,t,t==="getOobCode");return r(n,o)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rz(n,e){const t=W0(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),s=t.getOptions();if(S0(s,e??{}))return i;Lc(i,"already-initialized")}return t.initialize({options:e})}function iz(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(_h);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sz(n,e,t){const r=Xp(n);En(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=$R(e),{host:a,port:o}=az(e),c=o===null?"":`:${o}`,u={url:`${s}//${a}${c}/`},d=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){En(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),En(S0(u,r.config.emulator)&&S0(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,dd(a)?(PT(`${s}//${a}${c}`),vR("Auth",!0)):oz()}function $R(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function az(n){const e=$R(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Z3(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:Z3(a)}}}function Z3(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function oz(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bh("not implemented")}_getIdTokenResponse(e){return bh("not implemented")}_linkToIdToken(e,t){return bh("not implemented")}_getReauthenticationResolver(e){return bh("not implemented")}}async function lz(n,e){return md(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cz(n,e){return Nb(n,"POST","/v1/accounts:signInWithPassword",$0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uz(n,e){return Nb(n,"POST","/v1/accounts:signInWithEmailLink",$0(n,e))}async function hz(n,e){return Nb(n,"POST","/v1/accounts:signInWithEmailLink",$0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx extends UT{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new tx(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new tx(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return J3(e,t,"signInWithPassword",cz);case"emailLink":return uz(e,{email:this._email,oobCode:this._password});default:Lc(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return J3(e,r,"signUpPassword",lz);case"emailLink":return hz(e,{idToken:t,email:this._email,oobCode:this._password});default:Lc(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dp(n,e){return Nb(n,"POST","/v1/accounts:signInWithIdp",$0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fz="http://localhost";class T0 extends UT{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new T0(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lc("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=t;if(!r||!i)return null;const a=new T0(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return dp(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,dp(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,dp(e,t)}buildRequest(){const e={requestUri:fz,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Gx(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dz(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mz(n){const e=a1(o1(n)).link,t=e?a1(o1(e)).deep_link_id:null,r=a1(o1(n)).deep_link_id;return(r?a1(o1(r)).link:null)||r||t||e||n}class HT{constructor(e){const t=a1(o1(e)),r=t.apiKey??null,i=t.oobCode??null,s=dz(t.mode??null);En(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=mz(e);try{return new HT(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.providerId=Qp.PROVIDER_ID}static credential(e,t){return tx._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=HT.parseLink(t);return En(r,"argument-error"),tx._fromEmailAndCode(e,r.code,r.tenantId)}}Qp.PROVIDER_ID="password";Qp.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx extends KR{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends Kx{constructor(){super("facebook.com")}static credential(e){return T0._fromParams({providerId:Df.PROVIDER_ID,signInMethod:Df.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Df.credentialFromTaggedObject(e)}static credentialFromError(e){return Df.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Df.credential(e.oauthAccessToken)}catch{return null}}}Df.FACEBOOK_SIGN_IN_METHOD="facebook.com";Df.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends Kx{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return T0._fromParams({providerId:Rf.PROVIDER_ID,signInMethod:Rf.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Rf.credentialFromTaggedObject(e)}static credentialFromError(e){return Rf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Rf.credential(t,r)}catch{return null}}}Rf.GOOGLE_SIGN_IN_METHOD="google.com";Rf.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends Kx{constructor(){super("github.com")}static credential(e){return T0._fromParams({providerId:Pf.PROVIDER_ID,signInMethod:Pf.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pf.credentialFromTaggedObject(e)}static credentialFromError(e){return Pf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pf.credential(e.oauthAccessToken)}catch{return null}}}Pf.GITHUB_SIGN_IN_METHOD="github.com";Pf.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends Kx{constructor(){super("twitter.com")}static credential(e,t){return T0._fromParams({providerId:jf.PROVIDER_ID,signInMethod:jf.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return jf.credentialFromTaggedObject(e)}static credentialFromError(e){return jf.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return jf.credential(t,r)}catch{return null}}}jf.TWITTER_SIGN_IN_METHOD="twitter.com";jf.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Nc._fromIdTokenResponse(e,r,i),a=eC(r);return new Sp({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=eC(r);return new Sp({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function eC(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry extends Fc{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ry.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Ry(e,t,r,i)}}function YR(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ry._fromErrorAndOperation(n,s,e,r):s})}async function pz(n,e,t=!1){const r=await ex(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sp._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gz(n,e,t=!1){const{auth:r}=n;if(Kl(r.app))return Promise.reject(Yf(r));const i="reauthenticate";try{const s=await ex(n,YR(r,i,e,n),t);En(s.idToken,r,"internal-error");const a=VT(s.idToken);En(a,r,"internal-error");const{sub:o}=a;return En(n.uid===o,r,"user-mismatch"),Sp._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Lc(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XR(n,e,t=!1){if(Kl(n.app))return Promise.reject(Yf(n));const r="signIn",i=await YR(n,r,e),s=await Sp._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function xz(n,e){return XR(Xp(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vz(n){const e=Xp(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function yz(n,e,t){return Kl(n.app)?Promise.reject(Yf(n)):xz(ri(n),Qp.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&vz(n),r})}function bz(n,e,t,r){return ri(n).onIdTokenChanged(e,t,r)}function _z(n,e,t){return ri(n).beforeAuthStateChanged(e,t)}function wz(n,e,t,r){return ri(n).onAuthStateChanged(e,t,r)}function Sz(n){return ri(n).signOut()}const Py="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Py,"1"),this.storage.removeItem(Py),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tz=1e3,Ez=10;class JR extends QR{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=HR(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);HV()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Ez):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},Tz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}JR.type="LOCAL";const Az=JR;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR extends QR{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ZR.type="SESSION";const e8=ZR;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nz(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new kb(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),c=await Nz(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cz{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=qT("",20);i.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(p){const x=p;if(x.data.eventId===u)switch(x.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(x.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(){return window}function kz(n){ku().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t8(){return typeof ku().WorkerGlobalScope<"u"&&typeof ku().importScripts=="function"}async function Iz(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Dz(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function Rz(){return t8()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="firebaseLocalStorageDb",Pz=1,jy="firebaseLocalStorage",r8="fbase_key";class Yx{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ib(n,e){return n.transaction([jy],e?"readwrite":"readonly").objectStore(jy)}function jz(){const n=indexedDB.deleteDatabase(n8);return new Yx(n).toPromise()}function rS(){const n=indexedDB.open(n8,Pz);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(jy,{keyPath:r8})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(jy)?e(r):(r.close(),await jz(),e(await rS()))})})}async function tC(n,e,t){const r=Ib(n,!0).put({[r8]:e,value:t});return new Yx(r).toPromise()}async function Lz(n,e){const t=Ib(n,!1).get(e),r=await new Yx(t).toPromise();return r===void 0?null:r.value}function nC(n,e){const t=Ib(n,!0).delete(e);return new Yx(t).toPromise()}const Oz=800,Mz=3;class i8{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rS(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Mz)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t8()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kb._getInstance(Rz()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await Iz(),!this.activeServiceWorker)return;this.sender=new Cz(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Dz()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rS();return await tC(e,Py,"1"),await nC(e,Py),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>tC(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Lz(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>nC(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ib(i,!1).getAll();return new Yx(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Oz)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i8.type="LOCAL";const Fz=i8;new $x(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bz(n,e){return e?_h(e):(En(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends UT{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return dp(e,this._buildIdpRequest())}_linkToIdToken(e,t){return dp(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return dp(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vz(n){return XR(n.auth,new WT(n),n.bypassAuthState)}function zz(n){const{auth:e,user:t}=n;return En(t,e,"internal-error"),gz(t,new WT(n),n.bypassAuthState)}async function Uz(n){const{auth:e,user:t}=n;return En(t,e,"internal-error"),pz(t,new WT(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s8{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vz;case"linkViaPopup":case"linkViaRedirect":return Uz;case"reauthViaPopup":case"reauthViaRedirect":return zz;default:Lc(this.auth,"internal-error")}}resolve(e){Rh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Rh(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hz=new $x(2e3,1e4);class lp extends s8{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,lp.currentPopupAction&&lp.currentPopupAction.cancel(),lp.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return En(e,this.auth,"internal-error"),e}async onExecution(){Rh(this.filter.length===1,"Popup operations only handle one event");const e=qT();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cu(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cu(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lp.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cu(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hz.get())};e()}}lp.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qz="pendingRedirect",J2=new Map;class Wz extends s8{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=J2.get(this.auth._key());if(!e){try{const r=await Gz(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}J2.set(this.auth._key(),e)}return this.bypassAuthState||J2.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gz(n,e){const t=Yz(e),r=Kz(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function $z(n,e){J2.set(n._key(),e)}function Kz(n){return _h(n._redirectPersistence)}function Yz(n){return Q2(qz,n.config.apiKey,n.name)}async function Xz(n,e,t=!1){if(Kl(n.app))return Promise.reject(Yf(n));const r=Xp(n),i=Bz(r,e),a=await new Wz(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qz=600*1e3;class Jz{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Zz(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!a8(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Cu(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qz&&this.cachedEventUids.clear(),this.cachedEventUids.has(rC(e))}saveEventToCache(e){this.cachedEventUids.add(rC(e)),this.lastProcessedEventTime=Date.now()}}function rC(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function a8({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Zz(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return a8(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(n,e={}){return md(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nU=/^https?/;async function rU(n){if(n.config.emulator)return;const{authorizedDomains:e}=await eU(n);for(const t of e)try{if(iU(t))return}catch{}Lc(n,"unauthorized-domain")}function iU(n){const e=tS(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!nU.test(t))return!1;if(tU.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sU=new $x(3e4,6e4);function iC(){const n=ku().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function aU(n){return new Promise((e,t)=>{var i,s,a;function r(){iC(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iC(),t(Cu(n,"network-request-failed"))},timeout:sU.get()})}if((s=(i=ku().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((a=ku().gapi)!=null&&a.load)r();else{const o=JV("iframefcb");return ku()[o]=()=>{gapi.load?r():t(Cu(n,"network-request-failed"))},WR(`${QV()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw Z2=null,e})}let Z2=null;function oU(n){return Z2=Z2||aU(n),Z2}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=new $x(5e3,15e3),cU="__/auth/iframe",uU="emulator/auth/iframe",hU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dU(n){const e=n.config;En(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?BT(e,uU):`https://${n.config.authDomain}/${cU}`,r={apiKey:e.apiKey,appName:n.name,v:G0},i=fU.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${Gx(r).slice(1)}`}async function mU(n){const e=await oU(n),t=ku().gapi;return En(t,n,"internal-error"),e.open({where:document.body,url:dU(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hU,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Cu(n,"network-request-failed"),o=ku().setTimeout(()=>{s(a)},lU.get());function c(){ku().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gU=500,xU=600,vU="_blank",yU="http://localhost";class sC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bU(n,e,t,r=gU,i=xU){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c={...pU,width:r.toString(),height:i.toString(),top:s,left:a},u=Fs().toLowerCase();t&&(o=FR(u)?vU:t),OR(u)&&(e=e||yU,c.scrollbars="yes");const d=Object.entries(c).reduce((x,[v,_])=>`${x}${v}=${_},`,"");if(UV(u)&&o!=="_self")return _U(e||"",o),new sC(null);const p=window.open(e||"",o,d);En(p,n,"popup-blocked");try{p.focus()}catch{}return new sC(p)}function _U(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wU="__/auth/handler",SU="emulator/auth/handler",TU=encodeURIComponent("fac");async function aC(n,e,t,r,i,s){En(n.config.authDomain,n,"auth-domain-config-required"),En(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:G0,eventId:i};if(e instanceof KR){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",hB(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))a[d]=p}if(e instanceof Kx){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(a.scopes=d.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const d of Object.keys(o))o[d]===void 0&&delete o[d];const c=await n._getAppCheckToken(),u=c?`#${TU}=${encodeURIComponent(c)}`:"";return`${EU(n)}?${Gx(o).slice(1)}${u}`}function EU({config:n}){return n.emulator?BT(n,SU):`https://${n.authDomain}/${wU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="webStorageSupport";class AU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e8,this._completeRedirectFn=Xz,this._overrideRedirectResult=$z}async _openPopup(e,t,r,i){var a;Rh((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const s=await aC(e,t,r,tS(),i);return bU(e,s,qT())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await aC(e,t,r,tS(),i);return kz(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Rh(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await mU(e),r=new Jz(e);return t.register("authEvent",i=>(En(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Kw,{type:Kw},i=>{var a;const s=(a=i==null?void 0:i[0])==null?void 0:a[Kw];s!==void 0&&t(!!s),Lc(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=rU(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return HR()||MR()||zT()}}const NU=AU;var oC="@firebase/auth",lC="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){En(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function IU(n){jc(new Ql("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;En(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qR(n)},u=new KV(r,i,s,c);return iz(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),jc(new Ql("auth-internal",e=>{const t=Xp(e.getProvider("auth").getImmediate());return(r=>new CU(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),vl(oC,lC,kU(n)),vl(oC,lC,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DU=300,RU=xR("authIdTokenMaxAge")||DU;let cC=null;const PU=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>RU)return;const i=t==null?void 0:t.token;cC!==i&&(cC=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jU(n=MT()){const e=W0(n,"auth");if(e.isInitialized())return e.getImmediate();const t=rz(n,{popupRedirectResolver:NU,persistence:[Fz,Az,e8]}),r=xR("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const a=PU(s.toString());_z(t,a,()=>a(t.currentUser)),bz(t,o=>a(o))}}const i=pR("auth");return i&&sz(t,`http://${i}`),t}function LU(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}YV({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Cu("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",LU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});IU("Browser");var uC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xf,o8;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,I){function O(){}O.prototype=I.prototype,A.F=I.prototype,A.prototype=new O,A.prototype.constructor=A,A.D=function(B,R,P){for(var V=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)V[Y-2]=arguments[Y];return I.prototype[R].apply(B,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(A,I,O){O||(O=0);const B=Array(16);if(typeof I=="string")for(var R=0;R<16;++R)B[R]=I.charCodeAt(O++)|I.charCodeAt(O++)<<8|I.charCodeAt(O++)<<16|I.charCodeAt(O++)<<24;else for(R=0;R<16;++R)B[R]=I[O++]|I[O++]<<8|I[O++]<<16|I[O++]<<24;I=A.g[0],O=A.g[1],R=A.g[2];let P=A.g[3],V;V=I+(P^O&(R^P))+B[0]+3614090360&4294967295,I=O+(V<<7&4294967295|V>>>25),V=P+(R^I&(O^R))+B[1]+3905402710&4294967295,P=I+(V<<12&4294967295|V>>>20),V=R+(O^P&(I^O))+B[2]+606105819&4294967295,R=P+(V<<17&4294967295|V>>>15),V=O+(I^R&(P^I))+B[3]+3250441966&4294967295,O=R+(V<<22&4294967295|V>>>10),V=I+(P^O&(R^P))+B[4]+4118548399&4294967295,I=O+(V<<7&4294967295|V>>>25),V=P+(R^I&(O^R))+B[5]+1200080426&4294967295,P=I+(V<<12&4294967295|V>>>20),V=R+(O^P&(I^O))+B[6]+2821735955&4294967295,R=P+(V<<17&4294967295|V>>>15),V=O+(I^R&(P^I))+B[7]+4249261313&4294967295,O=R+(V<<22&4294967295|V>>>10),V=I+(P^O&(R^P))+B[8]+1770035416&4294967295,I=O+(V<<7&4294967295|V>>>25),V=P+(R^I&(O^R))+B[9]+2336552879&4294967295,P=I+(V<<12&4294967295|V>>>20),V=R+(O^P&(I^O))+B[10]+4294925233&4294967295,R=P+(V<<17&4294967295|V>>>15),V=O+(I^R&(P^I))+B[11]+2304563134&4294967295,O=R+(V<<22&4294967295|V>>>10),V=I+(P^O&(R^P))+B[12]+1804603682&4294967295,I=O+(V<<7&4294967295|V>>>25),V=P+(R^I&(O^R))+B[13]+4254626195&4294967295,P=I+(V<<12&4294967295|V>>>20),V=R+(O^P&(I^O))+B[14]+2792965006&4294967295,R=P+(V<<17&4294967295|V>>>15),V=O+(I^R&(P^I))+B[15]+1236535329&4294967295,O=R+(V<<22&4294967295|V>>>10),V=I+(R^P&(O^R))+B[1]+4129170786&4294967295,I=O+(V<<5&4294967295|V>>>27),V=P+(O^R&(I^O))+B[6]+3225465664&4294967295,P=I+(V<<9&4294967295|V>>>23),V=R+(I^O&(P^I))+B[11]+643717713&4294967295,R=P+(V<<14&4294967295|V>>>18),V=O+(P^I&(R^P))+B[0]+3921069994&4294967295,O=R+(V<<20&4294967295|V>>>12),V=I+(R^P&(O^R))+B[5]+3593408605&4294967295,I=O+(V<<5&4294967295|V>>>27),V=P+(O^R&(I^O))+B[10]+38016083&4294967295,P=I+(V<<9&4294967295|V>>>23),V=R+(I^O&(P^I))+B[15]+3634488961&4294967295,R=P+(V<<14&4294967295|V>>>18),V=O+(P^I&(R^P))+B[4]+3889429448&4294967295,O=R+(V<<20&4294967295|V>>>12),V=I+(R^P&(O^R))+B[9]+568446438&4294967295,I=O+(V<<5&4294967295|V>>>27),V=P+(O^R&(I^O))+B[14]+3275163606&4294967295,P=I+(V<<9&4294967295|V>>>23),V=R+(I^O&(P^I))+B[3]+4107603335&4294967295,R=P+(V<<14&4294967295|V>>>18),V=O+(P^I&(R^P))+B[8]+1163531501&4294967295,O=R+(V<<20&4294967295|V>>>12),V=I+(R^P&(O^R))+B[13]+2850285829&4294967295,I=O+(V<<5&4294967295|V>>>27),V=P+(O^R&(I^O))+B[2]+4243563512&4294967295,P=I+(V<<9&4294967295|V>>>23),V=R+(I^O&(P^I))+B[7]+1735328473&4294967295,R=P+(V<<14&4294967295|V>>>18),V=O+(P^I&(R^P))+B[12]+2368359562&4294967295,O=R+(V<<20&4294967295|V>>>12),V=I+(O^R^P)+B[5]+4294588738&4294967295,I=O+(V<<4&4294967295|V>>>28),V=P+(I^O^R)+B[8]+2272392833&4294967295,P=I+(V<<11&4294967295|V>>>21),V=R+(P^I^O)+B[11]+1839030562&4294967295,R=P+(V<<16&4294967295|V>>>16),V=O+(R^P^I)+B[14]+4259657740&4294967295,O=R+(V<<23&4294967295|V>>>9),V=I+(O^R^P)+B[1]+2763975236&4294967295,I=O+(V<<4&4294967295|V>>>28),V=P+(I^O^R)+B[4]+1272893353&4294967295,P=I+(V<<11&4294967295|V>>>21),V=R+(P^I^O)+B[7]+4139469664&4294967295,R=P+(V<<16&4294967295|V>>>16),V=O+(R^P^I)+B[10]+3200236656&4294967295,O=R+(V<<23&4294967295|V>>>9),V=I+(O^R^P)+B[13]+681279174&4294967295,I=O+(V<<4&4294967295|V>>>28),V=P+(I^O^R)+B[0]+3936430074&4294967295,P=I+(V<<11&4294967295|V>>>21),V=R+(P^I^O)+B[3]+3572445317&4294967295,R=P+(V<<16&4294967295|V>>>16),V=O+(R^P^I)+B[6]+76029189&4294967295,O=R+(V<<23&4294967295|V>>>9),V=I+(O^R^P)+B[9]+3654602809&4294967295,I=O+(V<<4&4294967295|V>>>28),V=P+(I^O^R)+B[12]+3873151461&4294967295,P=I+(V<<11&4294967295|V>>>21),V=R+(P^I^O)+B[15]+530742520&4294967295,R=P+(V<<16&4294967295|V>>>16),V=O+(R^P^I)+B[2]+3299628645&4294967295,O=R+(V<<23&4294967295|V>>>9),V=I+(R^(O|~P))+B[0]+4096336452&4294967295,I=O+(V<<6&4294967295|V>>>26),V=P+(O^(I|~R))+B[7]+1126891415&4294967295,P=I+(V<<10&4294967295|V>>>22),V=R+(I^(P|~O))+B[14]+2878612391&4294967295,R=P+(V<<15&4294967295|V>>>17),V=O+(P^(R|~I))+B[5]+4237533241&4294967295,O=R+(V<<21&4294967295|V>>>11),V=I+(R^(O|~P))+B[12]+1700485571&4294967295,I=O+(V<<6&4294967295|V>>>26),V=P+(O^(I|~R))+B[3]+2399980690&4294967295,P=I+(V<<10&4294967295|V>>>22),V=R+(I^(P|~O))+B[10]+4293915773&4294967295,R=P+(V<<15&4294967295|V>>>17),V=O+(P^(R|~I))+B[1]+2240044497&4294967295,O=R+(V<<21&4294967295|V>>>11),V=I+(R^(O|~P))+B[8]+1873313359&4294967295,I=O+(V<<6&4294967295|V>>>26),V=P+(O^(I|~R))+B[15]+4264355552&4294967295,P=I+(V<<10&4294967295|V>>>22),V=R+(I^(P|~O))+B[6]+2734768916&4294967295,R=P+(V<<15&4294967295|V>>>17),V=O+(P^(R|~I))+B[13]+1309151649&4294967295,O=R+(V<<21&4294967295|V>>>11),V=I+(R^(O|~P))+B[4]+4149444226&4294967295,I=O+(V<<6&4294967295|V>>>26),V=P+(O^(I|~R))+B[11]+3174756917&4294967295,P=I+(V<<10&4294967295|V>>>22),V=R+(I^(P|~O))+B[2]+718787259&4294967295,R=P+(V<<15&4294967295|V>>>17),V=O+(P^(R|~I))+B[9]+3951481745&4294967295,A.g[0]=A.g[0]+I&4294967295,A.g[1]=A.g[1]+(R+(V<<21&4294967295|V>>>11))&4294967295,A.g[2]=A.g[2]+R&4294967295,A.g[3]=A.g[3]+P&4294967295}r.prototype.v=function(A,I){I===void 0&&(I=A.length);const O=I-this.blockSize,B=this.C;let R=this.h,P=0;for(;P<I;){if(R==0)for(;P<=O;)i(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<I;)if(B[R++]=A.charCodeAt(P++),R==this.blockSize){i(this,B),R=0;break}}else for(;P<I;)if(B[R++]=A[P++],R==this.blockSize){i(this,B),R=0;break}}this.h=R,this.o+=I},r.prototype.A=function(){var A=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);A[0]=128;for(var I=1;I<A.length-8;++I)A[I]=0;I=this.o*8;for(var O=A.length-8;O<A.length;++O)A[O]=I&255,I/=256;for(this.v(A),A=Array(16),I=0,O=0;O<4;++O)for(let B=0;B<32;B+=8)A[I++]=this.g[O]>>>B&255;return A};function s(A,I){var O=o;return Object.prototype.hasOwnProperty.call(O,A)?O[A]:O[A]=I(A)}function a(A,I){this.h=I;const O=[];let B=!0;for(let R=A.length-1;R>=0;R--){const P=A[R]|0;B&&P==I||(O[R]=P,B=!1)}this.g=O}var o={};function c(A){return-128<=A&&A<128?s(A,function(I){return new a([I|0],I<0?-1:0)}):new a([A|0],A<0?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return p;if(A<0)return S(u(-A));const I=[];let O=1;for(let B=0;A>=O;B++)I[B]=A/O|0,O*=4294967296;return new a(I,0)}function d(A,I){if(A.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(A.charAt(0)=="-")return S(d(A.substring(1),I));if(A.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=u(Math.pow(I,8));let B=p;for(let P=0;P<A.length;P+=8){var R=Math.min(8,A.length-P);const V=parseInt(A.substring(P,P+R),I);R<8?(R=u(Math.pow(I,R)),B=B.j(R).add(u(V))):(B=B.j(O),B=B.add(u(V)))}return B}var p=c(0),x=c(1),v=c(16777216);n=a.prototype,n.m=function(){if(b(this))return-S(this).m();let A=0,I=1;for(let O=0;O<this.g.length;O++){const B=this.i(O);A+=(B>=0?B:4294967296+B)*I,I*=4294967296}return A},n.toString=function(A){if(A=A||10,A<2||36<A)throw Error("radix out of range: "+A);if(_(this))return"0";if(b(this))return"-"+S(this).toString(A);const I=u(Math.pow(A,6));var O=this;let B="";for(;;){const R=j(O,I).g;O=T(O,R.j(I));let P=((O.g.length>0?O.g[0]:O.h)>>>0).toString(A);if(O=R,_(O))return P+B;for(;P.length<6;)P="0"+P;B=P+B}},n.i=function(A){return A<0?0:A<this.g.length?this.g[A]:this.h};function _(A){if(A.h!=0)return!1;for(let I=0;I<A.g.length;I++)if(A.g[I]!=0)return!1;return!0}function b(A){return A.h==-1}n.l=function(A){return A=T(this,A),b(A)?-1:_(A)?0:1};function S(A){const I=A.g.length,O=[];for(let B=0;B<I;B++)O[B]=~A.g[B];return new a(O,~A.h).add(x)}n.abs=function(){return b(this)?S(this):this},n.add=function(A){const I=Math.max(this.g.length,A.g.length),O=[];let B=0;for(let R=0;R<=I;R++){let P=B+(this.i(R)&65535)+(A.i(R)&65535),V=(P>>>16)+(this.i(R)>>>16)+(A.i(R)>>>16);B=V>>>16,P&=65535,V&=65535,O[R]=V<<16|P}return new a(O,O[O.length-1]&-2147483648?-1:0)};function T(A,I){return A.add(S(I))}n.j=function(A){if(_(this)||_(A))return p;if(b(this))return b(A)?S(this).j(S(A)):S(S(this).j(A));if(b(A))return S(this.j(S(A)));if(this.l(v)<0&&A.l(v)<0)return u(this.m()*A.m());const I=this.g.length+A.g.length,O=[];for(var B=0;B<2*I;B++)O[B]=0;for(B=0;B<this.g.length;B++)for(let R=0;R<A.g.length;R++){const P=this.i(B)>>>16,V=this.i(B)&65535,Y=A.i(R)>>>16,ie=A.i(R)&65535;O[2*B+2*R]+=V*ie,k(O,2*B+2*R),O[2*B+2*R+1]+=P*ie,k(O,2*B+2*R+1),O[2*B+2*R+1]+=V*Y,k(O,2*B+2*R+1),O[2*B+2*R+2]+=P*Y,k(O,2*B+2*R+2)}for(A=0;A<I;A++)O[A]=O[2*A+1]<<16|O[2*A];for(A=I;A<2*I;A++)O[A]=0;return new a(O,0)};function k(A,I){for(;(A[I]&65535)!=A[I];)A[I+1]+=A[I]>>>16,A[I]&=65535,I++}function E(A,I){this.g=A,this.h=I}function j(A,I){if(_(I))throw Error("division by zero");if(_(A))return new E(p,p);if(b(A))return I=j(S(A),I),new E(S(I.g),S(I.h));if(b(I))return I=j(A,S(I)),new E(S(I.g),I.h);if(A.g.length>30){if(b(A)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var O=x,B=I;B.l(A)<=0;)O=F(O),B=F(B);var R=z(O,1),P=z(B,1);for(B=z(B,2),O=z(O,2);!_(B);){var V=P.add(B);V.l(A)<=0&&(R=R.add(O),P=V),B=z(B,1),O=z(O,1)}return I=T(A,R.j(I)),new E(R,I)}for(R=p;A.l(I)>=0;){for(O=Math.max(1,Math.floor(A.m()/I.m())),B=Math.ceil(Math.log(O)/Math.LN2),B=B<=48?1:Math.pow(2,B-48),P=u(O),V=P.j(I);b(V)||V.l(A)>0;)O-=B,P=u(O),V=P.j(I);_(P)&&(P=x),R=R.add(P),A=T(A,V)}return new E(R,A)}n.B=function(A){return j(this,A).h},n.and=function(A){const I=Math.max(this.g.length,A.g.length),O=[];for(let B=0;B<I;B++)O[B]=this.i(B)&A.i(B);return new a(O,this.h&A.h)},n.or=function(A){const I=Math.max(this.g.length,A.g.length),O=[];for(let B=0;B<I;B++)O[B]=this.i(B)|A.i(B);return new a(O,this.h|A.h)},n.xor=function(A){const I=Math.max(this.g.length,A.g.length),O=[];for(let B=0;B<I;B++)O[B]=this.i(B)^A.i(B);return new a(O,this.h^A.h)};function F(A){const I=A.g.length+1,O=[];for(let B=0;B<I;B++)O[B]=A.i(B)<<1|A.i(B-1)>>>31;return new a(O,A.h)}function z(A,I){const O=I>>5;I%=32;const B=A.g.length-O,R=[];for(let P=0;P<B;P++)R[P]=I>0?A.i(P+O)>>>I|A.i(P+O+1)<<32-I:A.i(P+O);return new a(R,A.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,o8=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,Xf=a}).apply(typeof uC<"u"?uC:typeof self<"u"?self:typeof window<"u"?window:{});var c2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var l8,l1,c8,ey,iS,u8,h8,f8;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof c2=="object"&&c2];for(var N=0;N<g.length;++N){var U=g[N];if(U&&U.Math==Math)return U}throw Error("Cannot find global object")}var r=t(this);function i(g,N){if(N)e:{var U=r;g=g.split(".");for(var Z=0;Z<g.length-1;Z++){var pe=g[Z];if(!(pe in U))break e;U=U[pe]}g=g[g.length-1],Z=U[g],N=N(Z),N!=Z&&N!=null&&e(U,g,{configurable:!0,writable:!0,value:N})}}i("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(g){return g||function(N){var U=[],Z;for(Z in N)Object.prototype.hasOwnProperty.call(N,Z)&&U.push([Z,N[Z]]);return U}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function o(g){var N=typeof g;return N=="object"&&g!=null||N=="function"}function c(g,N,U){return g.call.apply(g.bind,arguments)}function u(g,N,U){return u=c,u.apply(null,arguments)}function d(g,N){var U=Array.prototype.slice.call(arguments,1);return function(){var Z=U.slice();return Z.push.apply(Z,arguments),g.apply(this,Z)}}function p(g,N){function U(){}U.prototype=N.prototype,g.Z=N.prototype,g.prototype=new U,g.prototype.constructor=g,g.Ob=function(Z,pe,Ae){for(var Ve=Array(arguments.length-2),vt=2;vt<arguments.length;vt++)Ve[vt-2]=arguments[vt];return N.prototype[pe].apply(Z,Ve)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function v(g){const N=g.length;if(N>0){const U=Array(N);for(let Z=0;Z<N;Z++)U[Z]=g[Z];return U}return[]}function _(g,N){for(let Z=1;Z<arguments.length;Z++){const pe=arguments[Z];var U=typeof pe;if(U=U!="object"?U:pe?Array.isArray(pe)?"array":U:"null",U=="array"||U=="object"&&typeof pe.length=="number"){U=g.length||0;const Ae=pe.length||0;g.length=U+Ae;for(let Ve=0;Ve<Ae;Ve++)g[U+Ve]=pe[Ve]}else g.push(pe)}}class b{constructor(N,U){this.i=N,this.j=U,this.h=0,this.g=null}get(){let N;return this.h>0?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function S(g){a.setTimeout(()=>{throw g},0)}function T(){var g=A;let N=null;return g.g&&(N=g.g,g.g=g.g.next,g.g||(g.h=null),N.next=null),N}class k{constructor(){this.h=this.g=null}add(N,U){const Z=E.get();Z.set(N,U),this.h?this.h.next=Z:this.g=Z,this.h=Z}}var E=new b(()=>new j,g=>g.reset());class j{constructor(){this.next=this.g=this.h=null}set(N,U){this.h=N,this.g=U,this.next=null}reset(){this.next=this.g=this.h=null}}let F,z=!1,A=new k,I=()=>{const g=Promise.resolve(void 0);F=()=>{g.then(O)}};function O(){for(var g;g=T();){try{g.h.call(g.g)}catch(U){S(U)}var N=E;N.j(g),N.h<100&&(N.h++,g.next=N.g,N.g=g)}z=!1}function B(){this.u=this.u,this.C=this.C}B.prototype.u=!1,B.prototype.dispose=function(){this.u||(this.u=!0,this.N())},B.prototype[Symbol.dispose]=function(){this.dispose()},B.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(g,N){this.type=g,this.g=this.target=N,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var g=!1,N=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const U=()=>{};a.addEventListener("test",U,N),a.removeEventListener("test",U,N)}catch{}return g})();function V(g){return/^[\s\xa0]*$/.test(g)}function Y(g,N){R.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,N)}p(Y,R),Y.prototype.init=function(g,N){const U=this.type=g.type,Z=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=N,N=g.relatedTarget,N||(U=="mouseover"?N=g.fromElement:U=="mouseout"&&(N=g.toElement)),this.relatedTarget=N,Z?(this.clientX=Z.clientX!==void 0?Z.clientX:Z.pageX,this.clientY=Z.clientY!==void 0?Z.clientY:Z.pageY,this.screenX=Z.screenX||0,this.screenY=Z.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Y.Z.h.call(this)},Y.prototype.h=function(){Y.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),q=0;function Q(g,N,U,Z,pe){this.listener=g,this.proxy=null,this.src=N,this.type=U,this.capture=!!Z,this.ha=pe,this.key=++q,this.da=this.fa=!1}function se(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function J(g,N,U){for(const Z in g)N.call(U,g[Z],Z,g)}function me(g,N){for(const U in g)N.call(void 0,g[U],U,g)}function re(g){const N={};for(const U in g)N[U]=g[U];return N}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(g,N){let U,Z;for(let pe=1;pe<arguments.length;pe++){Z=arguments[pe];for(U in Z)g[U]=Z[U];for(let Ae=0;Ae<M.length;Ae++)U=M[Ae],Object.prototype.hasOwnProperty.call(Z,U)&&(g[U]=Z[U])}}function K(g){this.src=g,this.g={},this.h=0}K.prototype.add=function(g,N,U,Z,pe){const Ae=g.toString();g=this.g[Ae],g||(g=this.g[Ae]=[],this.h++);const Ve=te(g,N,Z,pe);return Ve>-1?(N=g[Ve],U||(N.fa=!1)):(N=new Q(N,this.src,Ae,!!Z,pe),N.fa=U,g.push(N)),N};function G(g,N){const U=N.type;if(U in g.g){var Z=g.g[U],pe=Array.prototype.indexOf.call(Z,N,void 0),Ae;(Ae=pe>=0)&&Array.prototype.splice.call(Z,pe,1),Ae&&(se(N),g.g[U].length==0&&(delete g.g[U],g.h--))}}function te(g,N,U,Z){for(let pe=0;pe<g.length;++pe){const Ae=g[pe];if(!Ae.da&&Ae.listener==N&&Ae.capture==!!U&&Ae.ha==Z)return pe}return-1}var he="closure_lm_"+(Math.random()*1e6|0),ye={};function be(g,N,U,Z,pe){if(Array.isArray(N)){for(let Ae=0;Ae<N.length;Ae++)be(g,N[Ae],U,Z,pe);return null}return U=lt(U),g&&g[ie]?g.J(N,U,o(Z)?!!Z.capture:!1,pe):Ce(g,N,U,!1,Z,pe)}function Ce(g,N,U,Z,pe,Ae){if(!N)throw Error("Invalid event type");const Ve=o(pe)?!!pe.capture:!!pe;let vt=_e(g);if(vt||(g[he]=vt=new K(g)),U=vt.add(N,U,Z,Ve,Ae),U.proxy)return U;if(Z=ke(),U.proxy=Z,Z.src=g,Z.listener=U,g.addEventListener)P||(pe=Ve),pe===void 0&&(pe=!1),g.addEventListener(N.toString(),Z,pe);else if(g.attachEvent)g.attachEvent(at(N.toString()),Z);else if(g.addListener&&g.removeListener)g.addListener(Z);else throw Error("addEventListener and attachEvent are unavailable.");return U}function ke(){function g(U){return N.call(g.src,g.listener,U)}const N=Fe;return g}function oe(g,N,U,Z,pe){if(Array.isArray(N))for(var Ae=0;Ae<N.length;Ae++)oe(g,N[Ae],U,Z,pe);else Z=o(Z)?!!Z.capture:!!Z,U=lt(U),g&&g[ie]?(g=g.i,Ae=String(N).toString(),Ae in g.g&&(N=g.g[Ae],U=te(N,U,Z,pe),U>-1&&(se(N[U]),Array.prototype.splice.call(N,U,1),N.length==0&&(delete g.g[Ae],g.h--)))):g&&(g=_e(g))&&(N=g.g[N.toString()],g=-1,N&&(g=te(N,U,Z,pe)),(U=g>-1?N[g]:null)&&qe(U))}function qe(g){if(typeof g!="number"&&g&&!g.da){var N=g.src;if(N&&N[ie])G(N.i,g);else{var U=g.type,Z=g.proxy;N.removeEventListener?N.removeEventListener(U,Z,g.capture):N.detachEvent?N.detachEvent(at(U),Z):N.addListener&&N.removeListener&&N.removeListener(Z),(U=_e(N))?(G(U,g),U.h==0&&(U.src=null,N[he]=null)):se(g)}}}function at(g){return g in ye?ye[g]:ye[g]="on"+g}function Fe(g,N){if(g.da)g=!0;else{N=new Y(N,this);const U=g.listener,Z=g.ha||g.src;g.fa&&qe(g),g=U.call(Z,N)}return g}function _e(g){return g=g[he],g instanceof K?g:null}var Be="__closure_events_fn_"+(Math.random()*1e9>>>0);function lt(g){return typeof g=="function"?g:(g[Be]||(g[Be]=function(N){return g.handleEvent(N)}),g[Be])}function Ke(){B.call(this),this.i=new K(this),this.M=this,this.G=null}p(Ke,B),Ke.prototype[ie]=!0,Ke.prototype.removeEventListener=function(g,N,U,Z){oe(this,g,N,U,Z)};function We(g,N){var U,Z=g.G;if(Z)for(U=[];Z;Z=Z.G)U.push(Z);if(g=g.M,Z=N.type||N,typeof N=="string")N=new R(N,g);else if(N instanceof R)N.target=N.target||g;else{var pe=N;N=new R(Z,g),W(N,pe)}pe=!0;let Ae,Ve;if(U)for(Ve=U.length-1;Ve>=0;Ve--)Ae=N.g=U[Ve],pe=Et(Ae,Z,!0,N)&&pe;if(Ae=N.g=g,pe=Et(Ae,Z,!0,N)&&pe,pe=Et(Ae,Z,!1,N)&&pe,U)for(Ve=0;Ve<U.length;Ve++)Ae=N.g=U[Ve],pe=Et(Ae,Z,!1,N)&&pe}Ke.prototype.N=function(){if(Ke.Z.N.call(this),this.i){var g=this.i;for(const N in g.g){const U=g.g[N];for(let Z=0;Z<U.length;Z++)se(U[Z]);delete g.g[N],g.h--}}this.G=null},Ke.prototype.J=function(g,N,U,Z){return this.i.add(String(g),N,!1,U,Z)},Ke.prototype.K=function(g,N,U,Z){return this.i.add(String(g),N,!0,U,Z)};function Et(g,N,U,Z){if(N=g.i.g[String(N)],!N)return!0;N=N.concat();let pe=!0;for(let Ae=0;Ae<N.length;++Ae){const Ve=N[Ae];if(Ve&&!Ve.da&&Ve.capture==U){const vt=Ve.listener,Kt=Ve.ha||Ve.src;Ve.fa&&G(g.i,Ve),pe=vt.call(Kt,Z)!==!1&&pe}}return pe&&!Z.defaultPrevented}function Oe(g,N){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=u(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(N)>2147483647?-1:a.setTimeout(g,N||0)}function Dt(g){g.g=Oe(()=>{g.g=null,g.i&&(g.i=!1,Dt(g))},g.l);const N=g.h;g.h=null,g.m.apply(null,N)}class Rt extends B{constructor(N,U){super(),this.m=N,this.l=U,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Dt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Wt(g){B.call(this),this.h=g,this.g={}}p(Wt,B);var Jt=[];function yn(g){J(g.g,function(N,U){this.g.hasOwnProperty(U)&&qe(N)},g),g.g={}}Wt.prototype.N=function(){Wt.Z.N.call(this),yn(this)},Wt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ln=a.JSON.stringify,Zt=a.JSON.parse,Ft=class{stringify(g){return a.JSON.stringify(g,void 0)}parse(g){return a.JSON.parse(g,void 0)}};function At(){}function De(){}var nt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ct(){R.call(this,"d")}p(ct,R);function Nt(){R.call(this,"c")}p(Nt,R);var gt={},$t=null;function wt(){return $t=$t||new Ke}gt.Ia="serverreachability";function In(g){R.call(this,gt.Ia,g)}p(In,R);function Ne(g){const N=wt();We(N,new In(N))}gt.STAT_EVENT="statevent";function tt(g,N){R.call(this,gt.STAT_EVENT,g),this.stat=N}p(tt,R);function Pt(g){const N=wt();We(N,new tt(N,g))}gt.Ja="timingevent";function kt(g,N){R.call(this,gt.Ja,g),this.size=N}p(kt,R);function St(g,N){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){g()},N)}function jt(){this.g=!0}jt.prototype.ua=function(){this.g=!1};function Fn(g,N,U,Z,pe,Ae){g.info(function(){if(g.g)if(Ae){var Ve="",vt=Ae.split("&");for(let Xt=0;Xt<vt.length;Xt++){var Kt=vt[Xt].split("=");if(Kt.length>1){const tn=Kt[0];Kt=Kt[1];const Nn=tn.split("_");Ve=Nn.length>=2&&Nn[1]=="type"?Ve+(tn+"="+Kt+"&"):Ve+(tn+"=redacted&")}}}else Ve=null;else Ve=Ae;return"XMLHTTP REQ ("+Z+") [attempt "+pe+"]: "+N+`
`+U+`
`+Ve})}function hn(g,N,U,Z,pe,Ae,Ve){g.info(function(){return"XMLHTTP RESP ("+Z+") [ attempt "+pe+"]: "+N+`
`+U+`
`+Ae+" "+Ve})}function nr(g,N,U,Z){g.info(function(){return"XMLHTTP TEXT ("+N+"): "+sn(g,U)+(Z?" "+Z:"")})}function Tr(g,N){g.info(function(){return"TIMEOUT: "+N})}jt.prototype.info=function(){};function sn(g,N){if(!g.g)return N;if(!N)return null;try{const Ae=JSON.parse(N);if(Ae){for(g=0;g<Ae.length;g++)if(Array.isArray(Ae[g])){var U=Ae[g];if(!(U.length<2)){var Z=U[1];if(Array.isArray(Z)&&!(Z.length<1)){var pe=Z[0];if(pe!="noop"&&pe!="stop"&&pe!="close")for(let Ve=1;Ve<Z.length;Ve++)Z[Ve]=""}}}}return ln(Ae)}catch{return N}}var Br={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ar={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ei;function Er(){}p(Er,At),Er.prototype.g=function(){return new XMLHttpRequest},ei=new Er;function sr(g){return encodeURIComponent(String(g))}function le(g){var N=1;g=g.split(":");const U=[];for(;N>0&&g.length;)U.push(g.shift()),N--;return g.length&&U.push(g.join(":")),U}function Te(g,N,U,Z){this.j=g,this.i=N,this.l=U,this.S=Z||1,this.V=new Wt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var ve={},we={};function Ee(g,N,U){g.M=1,g.A=Ss(si(N)),g.u=U,g.R=!0,Ue(g,null)}function Ue(g,N){g.F=Date.now(),Ye(g),g.B=si(g.A);var U=g.B,Z=g.S;Array.isArray(Z)||(Z=[String(Z)]),va(U.i,"t",Z),g.C=0,U=g.j.L,g.h=new xe,g.g=$u(g.j,U?N:null,!g.u),g.P>0&&(g.O=new Rt(u(g.Y,g,g.g),g.P)),N=g.V,U=g.g,Z=g.ba;var pe="readystatechange";Array.isArray(pe)||(pe&&(Jt[0]=pe.toString()),pe=Jt);for(let Ae=0;Ae<pe.length;Ae++){const Ve=be(U,pe[Ae],Z||N.handleEvent,!1,N.h||N);if(!Ve)break;N.g[Ve.key]=Ve}N=g.J?re(g.J):{},g.u?(g.v||(g.v="POST"),N["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,N)):(g.v="GET",g.g.ea(g.B,g.v,null,N)),Ne(),Fn(g.i,g.v,g.B,g.l,g.S,g.u)}Te.prototype.ba=function(g){g=g.target;const N=this.O;N&&Es(g)==3?N.j():this.Y(g)},Te.prototype.Y=function(g){try{if(g==this.g)e:{const vt=Es(this.g),Kt=this.g.ya(),Xt=this.g.ca();if(!(vt<3)&&(vt!=3||this.g&&(this.h.h||this.g.la()||Ai(this.g)))){this.K||vt!=4||Kt==7||(Kt==8||Xt<=0?Ne(3):Ne(2)),It(this);var N=this.g.ca();this.X=N;var U=rt(this);if(this.o=N==200,hn(this.i,this.v,this.B,this.l,this.S,vt,N),this.o){if(this.U&&!this.L){t:{if(this.g){var Z,pe=this.g;if((Z=pe.g?pe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(Z)){var Ae=Z;break t}}Ae=null}if(g=Ae)nr(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ot(this,g);else{this.o=!1,this.m=3,Pt(12),bt(this),Lt(this);break e}}if(this.R){g=!0;let tn;for(;!this.K&&this.C<U.length;)if(tn=$e(this,U),tn==we){vt==4&&(this.m=4,Pt(14),g=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==ve){this.m=4,Pt(15),nr(this.i,this.l,U,"[Invalid Chunk]"),g=!1;break}else nr(this.i,this.l,tn,null),Ot(this,tn);if(He(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||U.length!=0||this.h.h||(this.m=1,Pt(16),g=!1),this.o=this.o&&g,!g)nr(this.i,this.l,U,"[Invalid Chunked Response]"),bt(this),Lt(this);else if(U.length>0&&!this.W){this.W=!0;var Ve=this.j;Ve.g==this&&Ve.aa&&!Ve.P&&(Ve.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Al(Ve),Ve.P=!0,Pt(11))}}else nr(this.i,this.l,U,null),Ot(this,U);vt==4&&bt(this),this.o&&!this.K&&(vt==4?Gc(this.j,this):(this.o=!1,Ye(this)))}else _a(this.g),N==400&&U.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),bt(this),Lt(this)}}}catch{}finally{}};function rt(g){if(!He(g))return g.g.la();const N=Ai(g.g);if(N==="")return"";let U="";const Z=N.length,pe=Es(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return bt(g),Lt(g),"";g.h.i=new a.TextDecoder}for(let Ae=0;Ae<Z;Ae++)g.h.h=!0,U+=g.h.i.decode(N[Ae],{stream:!(pe&&Ae==Z-1)});return N.length=0,g.h.g+=U,g.C=0,g.h.g}function He(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function $e(g,N){var U=g.C,Z=N.indexOf(`
`,U);return Z==-1?we:(U=Number(N.substring(U,Z)),isNaN(U)?ve:(Z+=1,Z+U>N.length?we:(N=N.slice(Z,Z+U),g.C=Z+U,N)))}Te.prototype.cancel=function(){this.K=!0,bt(this)};function Ye(g){g.T=Date.now()+g.H,yt(g,g.H)}function yt(g,N){if(g.D!=null)throw Error("WatchDog timer not null");g.D=St(u(g.aa,g),N)}function It(g){g.D&&(a.clearTimeout(g.D),g.D=null)}Te.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(Tr(this.i,this.B),this.M!=2&&(Ne(),Pt(17)),bt(this),this.m=2,Lt(this)):yt(this,this.T-g)};function Lt(g){g.j.I==0||g.K||Gc(g.j,g)}function bt(g){It(g);var N=g.O;N&&typeof N.dispose=="function"&&N.dispose(),g.O=null,yn(g.V),g.g&&(N=g.g,g.g=null,N.abort(),N.dispose())}function Ot(g,N){try{var U=g.j;if(U.I!=0&&(U.g==g||ti(U.h,g))){if(!g.L&&ti(U.h,g)&&U.I==3){try{var Z=U.Ba.g.parse(N)}catch{Z=null}if(Array.isArray(Z)&&Z.length==3){var pe=Z;if(pe[0]==0){e:if(!U.v){if(U.g)if(U.g.F+3e3<g.F)Nl(U),tl(U);else break e;ac(U),Pt(18)}}else U.xa=pe[1],0<U.xa-U.K&&pe[2]<37500&&U.F&&U.A==0&&!U.C&&(U.C=St(u(U.Va,U),6e3));Hn(U.h)<=1&&U.ta&&(U.ta=void 0)}else ia(U,11)}else if((g.L||U.g==g)&&Nl(U),!V(N))for(pe=U.Ba.g.parse(N),N=0;N<pe.length;N++){let Xt=pe[N];const tn=Xt[0];if(!(tn<=U.K))if(U.K=tn,Xt=Xt[1],U.I==2)if(Xt[0]=="c"){U.M=Xt[1],U.ba=Xt[2];const Nn=Xt[3];Nn!=null&&(U.ka=Nn,U.j.info("VER="+U.ka));const ar=Xt[4];ar!=null&&(U.za=ar,U.j.info("SVER="+U.za));const or=Xt[5];or!=null&&typeof or=="number"&&or>0&&(Z=1.5*or,U.O=Z,U.j.info("backChannelRequestTimeoutMs_="+Z)),Z=U;const pr=g.g;if(pr){const pi=pr.g?pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(pi){var Ae=Z.h;Ae.g||pi.indexOf("spdy")==-1&&pi.indexOf("quic")==-1&&pi.indexOf("h2")==-1||(Ae.j=Ae.l,Ae.g=new Set,Ae.h&&(xa(Ae,Ae.h),Ae.h=null))}if(Z.G){const ai=pr.g?pr.g.getResponseHeader("X-HTTP-Session-Id"):null;ai&&(Z.wa=ai,hr(Z.J,Z.G,ai))}}U.I=3,U.l&&U.l.ra(),U.aa&&(U.T=Date.now()-g.F,U.j.info("Handshake RTT: "+U.T+"ms")),Z=U;var Ve=g;if(Z.na=Kc(Z,Z.L?Z.ba:null,Z.W),Ve.L){zs(Z.h,Ve);var vt=Ve,Kt=Z.O;Kt&&(vt.H=Kt),vt.D&&(It(vt),Ye(vt)),Z.g=Ve}else El(Z);U.i.length>0&&As(U)}else Xt[0]!="stop"&&Xt[0]!="close"||ia(U,7);else U.I==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?ia(U,7):Hc(U):Xt[0]!="noop"&&U.l&&U.l.qa(Xt),U.A=0)}}Ne(4)}catch{}}var Qt=class{constructor(g,N){this.g=g,this.map=N}};function Un(g){this.l=g||10,a.PerformanceNavigationTiming?(g=a.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function gn(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Hn(g){return g.h?1:g.g?g.g.size:0}function ti(g,N){return g.h?g.h==N:g.g?g.g.has(N):!1}function xa(g,N){g.g?g.g.add(N):g.h=N}function zs(g,N){g.h&&g.h==N?g.h=null:g.g&&g.g.has(N)&&g.g.delete(N)}Un.prototype.cancel=function(){if(this.i=Ki(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function Ki(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let N=g.i;for(const U of g.g.values())N=N.concat(U.G);return N}return v(g.i)}var ea=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ls(g,N){if(g){g=g.split("&");for(let U=0;U<g.length;U++){const Z=g[U].indexOf("=");let pe,Ae=null;Z>=0?(pe=g[U].substring(0,Z),Ae=g[U].substring(Z+1)):pe=g[U],N(pe,Ae?decodeURIComponent(Ae.replace(/\+/g," ")):"")}}}function rr(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let N;g instanceof rr?(this.l=g.l,Ei(this,g.j),this.o=g.o,this.g=g.g,Ko(this,g.u),this.h=g.h,tc(this,rc(g.i)),this.m=g.m):g&&(N=String(g).match(ea))?(this.l=!1,Ei(this,N[1]||"",!0),this.o=ta(N[2]||""),this.g=ta(N[3]||"",!0),Ko(this,N[4]),this.h=ta(N[5]||"",!0),tc(this,N[6]||"",!0),this.m=ta(N[7]||"")):(this.l=!1,this.i=new Tl(null,this.l))}rr.prototype.toString=function(){const g=[];var N=this.j;N&&g.push(ji(N,nc,!0),":");var U=this.g;return(U||N=="file")&&(g.push("//"),(N=this.o)&&g.push(ji(N,nc,!0),"@"),g.push(sr(U).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),U=this.u,U!=null&&g.push(":",String(U))),(U=this.h)&&(this.g&&U.charAt(0)!="/"&&g.push("/"),g.push(ji(U,U.charAt(0)=="/"?Uc:qh,!0))),(U=this.i.toString())&&g.push("?",U),(U=this.m)&&g.push("#",ji(U,zu)),g.join("")},rr.prototype.resolve=function(g){const N=si(this);let U=!!g.j;U?Ei(N,g.j):U=!!g.o,U?N.o=g.o:U=!!g.g,U?N.g=g.g:U=g.u!=null;var Z=g.h;if(U)Ko(N,g.u);else if(U=!!g.h){if(Z.charAt(0)!="/")if(this.g&&!this.h)Z="/"+Z;else{var pe=N.h.lastIndexOf("/");pe!=-1&&(Z=N.h.slice(0,pe+1)+Z)}if(pe=Z,pe==".."||pe==".")Z="";else if(pe.indexOf("./")!=-1||pe.indexOf("/.")!=-1){Z=pe.lastIndexOf("/",0)==0,pe=pe.split("/");const Ae=[];for(let Ve=0;Ve<pe.length;){const vt=pe[Ve++];vt=="."?Z&&Ve==pe.length&&Ae.push(""):vt==".."?((Ae.length>1||Ae.length==1&&Ae[0]!="")&&Ae.pop(),Z&&Ve==pe.length&&Ae.push("")):(Ae.push(vt),Z=!0)}Z=Ae.join("/")}else Z=pe}return U?N.h=Z:U=g.i.toString()!=="",U?tc(N,rc(g.i)):U=!!g.m,U&&(N.m=g.m),N};function si(g){return new rr(g)}function Ei(g,N,U){g.j=U?ta(N,!0):N,g.j&&(g.j=g.j.replace(/:$/,""))}function Ko(g,N){if(N){if(N=Number(N),isNaN(N)||N<0)throw Error("Bad port number "+N);g.u=N}else g.u=null}function tc(g,N,U){N instanceof Tl?(g.i=N,ic(g.i,g.l)):(U||(N=ji(N,Sl)),g.i=new Tl(N,g.l))}function hr(g,N,U){g.i.set(N,U)}function Ss(g){return hr(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function ta(g,N){return g?N?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function ji(g,N,U){return typeof g=="string"?(g=encodeURI(g).replace(N,cs),U&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function cs(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var nc=/[#\/\?@]/g,qh=/[#\?:]/g,Uc=/[#\?]/g,Sl=/[#\?@]/g,zu=/#/g;function Tl(g,N){this.h=this.g=null,this.i=g||null,this.j=!!N}function us(g){g.g||(g.g=new Map,g.h=0,g.i&&ls(g.i,function(N,U){g.add(decodeURIComponent(N.replace(/\+/g," ")),U)}))}n=Tl.prototype,n.add=function(g,N){us(this),this.i=null,g=Ka(this,g);let U=this.g.get(g);return U||this.g.set(g,U=[]),U.push(N),this.h+=1,this};function Wh(g,N){us(g),N=Ka(g,N),g.g.has(N)&&(g.i=null,g.h-=g.g.get(N).length,g.g.delete(N))}function Uu(g,N){return us(g),N=Ka(g,N),g.g.has(N)}n.forEach=function(g,N){us(this),this.g.forEach(function(U,Z){U.forEach(function(pe){g.call(N,pe,Z,this)},this)},this)};function Hu(g,N){us(g);let U=[];if(typeof N=="string")Uu(g,N)&&(U=U.concat(g.g.get(Ka(g,N))));else for(g=Array.from(g.g.values()),N=0;N<g.length;N++)U=U.concat(g[N]);return U}n.set=function(g,N){return us(this),this.i=null,g=Ka(this,g),Uu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[N]),this.h+=1,this},n.get=function(g,N){return g?(g=Hu(this,g),g.length>0?String(g[0]):N):N};function va(g,N,U){Wh(g,N),U.length>0&&(g.i=null,g.g.set(Ka(g,N),v(U)),g.h+=U.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],N=Array.from(this.g.keys());for(let Z=0;Z<N.length;Z++){var U=N[Z];const pe=sr(U);U=Hu(this,U);for(let Ae=0;Ae<U.length;Ae++){let Ve=pe;U[Ae]!==""&&(Ve+="="+sr(U[Ae])),g.push(Ve)}}return this.i=g.join("&")};function rc(g){const N=new Tl;return N.i=g.i,g.g&&(N.g=new Map(g.g),N.h=g.h),N}function Ka(g,N){return N=String(N),g.j&&(N=N.toLowerCase()),N}function ic(g,N){N&&!g.j&&(us(g),g.i=null,g.g.forEach(function(U,Z){const pe=Z.toLowerCase();Z!=pe&&(Wh(this,Z),va(this,pe,U))},g)),g.j=N}function Vr(g,N){const U=new jt;if(a.Image){const Z=new Image;Z.onload=d(na,U,"TestLoadImage: loaded",!0,N,Z),Z.onerror=d(na,U,"TestLoadImage: error",!1,N,Z),Z.onabort=d(na,U,"TestLoadImage: abort",!1,N,Z),Z.ontimeout=d(na,U,"TestLoadImage: timeout",!1,N,Z),a.setTimeout(function(){Z.ontimeout&&Z.ontimeout()},1e4),Z.src=g}else N(!1)}function qu(g,N){const U=new jt,Z=new AbortController,pe=setTimeout(()=>{Z.abort(),na(U,"TestPingServer: timeout",!1,N)},1e4);fetch(g,{signal:Z.signal}).then(Ae=>{clearTimeout(pe),Ae.ok?na(U,"TestPingServer: ok",!0,N):na(U,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(pe),na(U,"TestPingServer: error",!1,N)})}function na(g,N,U,Z,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),Z(U)}catch{}}function xn(){this.g=new Ft}function go(g){this.i=g.Sb||null,this.h=g.ab||!1}p(go,At),go.prototype.g=function(){return new sc(this.i,this.h)};function sc(g,N){Ke.call(this),this.H=g,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(sc,Ke),n=sc.prototype,n.open=function(g,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=N,this.readyState=1,ya(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const N={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(N.body=g),(this.H||a).fetch(new Request(this.D,N)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Yo(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ya(this)),this.g&&(this.readyState=3,ya(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ra(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function ra(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var N=g.value?g.value:new Uint8Array(0);(N=this.B.decode(N,{stream:!g.done}))&&(this.response=this.responseText+=N)}g.done?Yo(this):ya(this),this.readyState==3&&ra(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,Yo(this))},n.Na=function(g){this.g&&(this.response=g,Yo(this))},n.ga=function(){this.g&&Yo(this)};function Yo(g){g.readyState=4,g.l=null,g.j=null,g.B=null,ya(g)}n.setRequestHeader=function(g,N){this.A.append(g,N)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],N=this.h.entries();for(var U=N.next();!U.done;)U=U.value,g.push(U[0]+": "+U[1]),U=N.next();return g.join(`\r
`)};function ya(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(sc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Ts(g){let N="";return J(g,function(U,Z){N+=Z,N+=":",N+=U,N+=`\r
`}),N}function Xo(g,N,U){e:{for(Z in U){var Z=!1;break e}Z=!0}Z||(U=Ts(U),typeof g=="string"?U!=null&&sr(U):hr(g,N,U))}function mr(g){Ke.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(mr,Ke);var xo=/^https?$/i,Wu=["POST","PUT"];n=mr.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,N,U,Z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);N=N?N.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ei.g(),this.g.onreadystatechange=x(u(this.Ca,this));try{this.B=!0,this.g.open(N,String(g),!0),this.B=!1}catch(Ae){Qo(this,Ae);return}if(g=U||"",U=new Map(this.headers),Z)if(Object.getPrototypeOf(Z)===Object.prototype)for(var pe in Z)U.set(pe,Z[pe]);else if(typeof Z.keys=="function"&&typeof Z.get=="function")for(const Ae of Z.keys())U.set(Ae,Z.get(Ae));else throw Error("Unknown input type for opt_headers: "+String(Z));Z=Array.from(U.keys()).find(Ae=>Ae.toLowerCase()=="content-type"),pe=a.FormData&&g instanceof a.FormData,!(Array.prototype.indexOf.call(Wu,N,void 0)>=0)||Z||pe||U.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ae,Ve]of U)this.g.setRequestHeader(Ae,Ve);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(Ae){Qo(this,Ae)}};function Qo(g,N){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=N,g.o=5,Jo(g),Zo(g)}function Jo(g){g.A||(g.A=!0,We(g,"complete"),We(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,We(this,"complete"),We(this,"abort"),Zo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zo(this,!0)),mr.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ba(this):this.Xa())},n.Xa=function(){ba(this)};function ba(g){if(g.h&&typeof s<"u"){if(g.v&&Es(g)==4)setTimeout(g.Ca.bind(g),0);else if(We(g,"readystatechange"),Es(g)==4){g.h=!1;try{const Ae=g.ca();e:switch(Ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var U;if(!(U=N)){var Z;if(Z=Ae===0){let Ve=String(g.D).match(ea)[1]||null;!Ve&&a.self&&a.self.location&&(Ve=a.self.location.protocol.slice(0,-1)),Z=!xo.test(Ve?Ve.toLowerCase():"")}U=Z}if(U)We(g,"complete"),We(g,"success");else{g.o=6;try{var pe=Es(g)>2?g.g.statusText:""}catch{pe=""}g.l=pe+" ["+g.ca()+"]",Jo(g)}}finally{Zo(g)}}}}function Zo(g,N){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const U=g.g;g.g=null,N||We(g,"ready");try{U.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Es(g){return g.g?g.g.readyState:0}n.ca=function(){try{return Es(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var N=this.g.responseText;return g&&N.indexOf(g)==0&&(N=N.substring(g.length)),Zt(N)}};function Ai(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function _a(g){const N={};g=(g.g&&Es(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let Z=0;Z<g.length;Z++){if(V(g[Z]))continue;var U=le(g[Z]);const pe=U[0];if(U=U[1],typeof U!="string")continue;U=U.trim();const Ae=N[pe]||[];N[pe]=Ae,Ae.push(U)}me(N,function(Z){return Z.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ya(g,N,U){return U&&U.internalChannelParams&&U.internalChannelParams[g]||N}function el(g){this.za=0,this.i=[],this.j=new jt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ya("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ya("baseRetryDelayMs",5e3,g),this.Za=Ya("retryDelaySeedMs",1e4,g),this.Ta=Ya("forwardChannelMaxRetries",2,g),this.va=Ya("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new Un(g&&g.concurrentRequestLimit),this.Ba=new xn,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=el.prototype,n.ka=8,n.I=1,n.connect=function(g,N,U,Z){Pt(0),this.W=g,this.H=N||{},U&&Z!==void 0&&(this.H.OSID=U,this.H.OAID=Z),this.F=this.X,this.J=Kc(this,null,this.W),As(this)};function Hc(g){if(wa(g),g.I==3){var N=g.V++,U=si(g.J);if(hr(U,"SID",g.M),hr(U,"RID",N),hr(U,"TYPE","terminate"),Ns(g,U),N=new Te(g,g.j,N),N.M=2,N.A=Ss(si(U)),U=!1,a.navigator&&a.navigator.sendBeacon)try{U=a.navigator.sendBeacon(N.A.toString(),"")}catch{}!U&&a.Image&&(new Image().src=N.A,U=!0),U||(N.g=$u(N.j,null),N.g.ea(N.A)),N.F=Date.now(),Ye(N)}$c(g)}function tl(g){g.g&&(Al(g),g.g.cancel(),g.g=null)}function wa(g){tl(g),g.v&&(a.clearTimeout(g.v),g.v=null),Nl(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&a.clearTimeout(g.m),g.m=null)}function As(g){if(!gn(g.h)&&!g.m){g.m=!0;var N=g.Ea;F||I(),z||(F(),z=!0),A.add(N,g),g.D=0}}function qc(g,N){return Hn(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=N.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=St(u(g.Ea,g,N),Gu(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const pe=new Te(this,this.j,g);let Ae=this.o;if(this.U&&(Ae?(Ae=re(Ae),W(Ae,this.U)):Ae=this.U),this.u!==null||this.R||(pe.J=Ae,Ae=null),this.S)e:{for(var N=0,U=0;U<this.i.length;U++){t:{var Z=this.i[U];if("__data__"in Z.map&&(Z=Z.map.__data__,typeof Z=="string")){Z=Z.length;break t}Z=void 0}if(Z===void 0)break;if(N+=Z,N>4096){N=U;break e}if(N===4096||U===this.i.length-1){N=U+1;break e}}N=1e3}else N=1e3;N=Wc(this,pe,N),U=si(this.J),hr(U,"RID",g),hr(U,"CVER",22),this.G&&hr(U,"X-HTTP-Session-Id",this.G),Ns(this,U),Ae&&(this.R?N="headers="+sr(Ts(Ae))+"&"+N:this.u&&Xo(U,this.u,Ae)),xa(this.h,pe),this.Ra&&hr(U,"TYPE","init"),this.S?(hr(U,"$req",N),hr(U,"SID","null"),pe.U=!0,Ee(pe,U,null)):Ee(pe,U,N),this.I=2}}else this.I==3&&(g?vo(this,g):this.i.length==0||gn(this.h)||vo(this))};function vo(g,N){var U;N?U=N.l:U=g.V++;const Z=si(g.J);hr(Z,"SID",g.M),hr(Z,"RID",U),hr(Z,"AID",g.K),Ns(g,Z),g.u&&g.o&&Xo(Z,g.u,g.o),U=new Te(g,g.j,U,g.D+1),g.u===null&&(U.J=g.o),N&&(g.i=N.G.concat(g.i)),N=Wc(g,U,1e3),U.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),xa(g.h,U),Ee(U,Z,N)}function Ns(g,N){g.H&&J(g.H,function(U,Z){hr(N,Z,U)}),g.l&&J({},function(U,Z){hr(N,Z,U)})}function Wc(g,N,U){U=Math.min(g.i.length,U);const Z=g.l?u(g.l.Ka,g.l,g):null;e:{var pe=g.i;let vt=-1;for(;;){const Kt=["count="+U];vt==-1?U>0?(vt=pe[0].g,Kt.push("ofs="+vt)):vt=0:Kt.push("ofs="+vt);let Xt=!0;for(let tn=0;tn<U;tn++){var Ae=pe[tn].g;const Nn=pe[tn].map;if(Ae-=vt,Ae<0)vt=Math.max(0,pe[tn].g-100),Xt=!1;else try{Ae="req"+Ae+"_"||"";try{var Ve=Nn instanceof Map?Nn:Object.entries(Nn);for(const[ar,or]of Ve){let pr=or;o(or)&&(pr=ln(or)),Kt.push(Ae+ar+"="+encodeURIComponent(pr))}}catch(ar){throw Kt.push(Ae+"type="+encodeURIComponent("_badmap")),ar}}catch{Z&&Z(Nn)}}if(Xt){Ve=Kt.join("&");break e}}Ve=void 0}return g=g.i.splice(0,U),N.G=g,Ve}function El(g){if(!g.g&&!g.v){g.Y=1;var N=g.Da;F||I(),z||(F(),z=!0),A.add(N,g),g.A=0}}function ac(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=St(u(g.Da,g),Gu(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Gh(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=St(u(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),tl(this),Gh(this))};function Al(g){g.B!=null&&(a.clearTimeout(g.B),g.B=null)}function Gh(g){g.g=new Te(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var N=si(g.na);hr(N,"RID","rpc"),hr(N,"SID",g.M),hr(N,"AID",g.K),hr(N,"CI",g.F?"0":"1"),!g.F&&g.ia&&hr(N,"TO",g.ia),hr(N,"TYPE","xmlhttp"),Ns(g,N),g.u&&g.o&&Xo(N,g.u,g.o),g.O&&(g.g.H=g.O);var U=g.g;g=g.ba,U.M=1,U.A=Ss(si(N)),U.u=null,U.R=!0,Ue(U,g)}n.Va=function(){this.C!=null&&(this.C=null,tl(this),ac(this),Pt(19))};function Nl(g){g.C!=null&&(a.clearTimeout(g.C),g.C=null)}function Gc(g,N){var U=null;if(g.g==N){Nl(g),Al(g),g.g=null;var Z=2}else if(ti(g.h,N))U=N.G,zs(g.h,N),Z=1;else return;if(g.I!=0){if(N.o)if(Z==1){U=N.u?N.u.length:0,N=Date.now()-N.F;var pe=g.D;Z=wt(),We(Z,new kt(Z,U)),As(g)}else El(g);else if(pe=N.m,pe==3||pe==0&&N.X>0||!(Z==1&&qc(g,N)||Z==2&&ac(g)))switch(U&&U.length>0&&(N=g.h,N.i=N.i.concat(U)),pe){case 1:ia(g,5);break;case 4:ia(g,10);break;case 3:ia(g,6);break;default:ia(g,2)}}}function Gu(g,N){let U=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(U*=2),U*N}function ia(g,N){if(g.j.info("Error code "+N),N==2){var U=u(g.bb,g),Z=g.Ua;const pe=!Z;Z=new rr(Z||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ei(Z,"https"),Ss(Z),pe?Vr(Z.toString(),U):qu(Z.toString(),U)}else Pt(2);g.I=0,g.l&&g.l.pa(N),$c(g),wa(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function $c(g){if(g.I=0,g.ja=[],g.l){const N=Ki(g.h);(N.length!=0||g.i.length!=0)&&(_(g.ja,N),_(g.ja,g.i),g.h.i.length=0,v(g.i),g.i.length=0),g.l.oa()}}function Kc(g,N,U){var Z=U instanceof rr?si(U):new rr(U);if(Z.g!="")N&&(Z.g=N+"."+Z.g),Ko(Z,Z.u);else{var pe=a.location;Z=pe.protocol,N=N?N+"."+pe.hostname:pe.hostname,pe=+pe.port;const Ae=new rr(null);Z&&Ei(Ae,Z),N&&(Ae.g=N),pe&&Ko(Ae,pe),U&&(Ae.h=U),Z=Ae}return U=g.G,N=g.wa,U&&N&&hr(Z,U,N),hr(Z,"VER",g.ka),Ns(g,Z),Z}function $u(g,N,U){if(N&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return N=g.Aa&&!g.ma?new mr(new go({ab:U})):new mr(g.ma),N.Fa(g.L),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $h(){}n=$h.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Xa(){}Xa.prototype.g=function(g,N){return new Ni(g,N)};function Ni(g,N){Ke.call(this),this.g=new el(N),this.l=g,this.h=N&&N.messageUrlParams||null,g=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(g?g["X-WebChannel-Content-Type"]=N.messageContentType:g={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.sa&&(g?g["X-WebChannel-Client-Profile"]=N.sa:g={"X-WebChannel-Client-Profile":N.sa}),this.g.U=g,(g=N&&N.Qb)&&!V(g)&&(this.g.u=g),this.A=N&&N.supportsCrossDomainXhr||!1,this.v=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!V(N)&&(this.g.G=N,g=this.h,g!==null&&N in g&&(g=this.h,N in g&&delete g[N])),this.j=new Qa(this)}p(Ni,Ke),Ni.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ni.prototype.close=function(){Hc(this.g)},Ni.prototype.o=function(g){var N=this.g;if(typeof g=="string"){var U={};U.__data__=g,g=U}else this.v&&(U={},U.__data__=ln(g),g=U);N.i.push(new Qt(N.Ya++,g)),N.I==3&&As(N)},Ni.prototype.N=function(){this.g.l=null,delete this.j,Hc(this.g),delete this.g,Ni.Z.N.call(this)};function Yc(g){ct.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var N=g.__sm__;if(N){e:{for(const U in N){g=U;break e}g=void 0}(this.i=g)&&(g=this.i,N=N!==null&&g in N?N[g]:void 0),this.data=N}else this.data=g}p(Yc,ct);function nl(){Nt.call(this),this.status=1}p(nl,Nt);function Qa(g){this.g=g}p(Qa,$h),Qa.prototype.ra=function(){We(this.g,"a")},Qa.prototype.qa=function(g){We(this.g,new Yc(g))},Qa.prototype.pa=function(g){We(this.g,new nl)},Qa.prototype.oa=function(){We(this.g,"b")},Xa.prototype.createWebChannel=Xa.prototype.g,Ni.prototype.send=Ni.prototype.o,Ni.prototype.open=Ni.prototype.m,Ni.prototype.close=Ni.prototype.close,f8=function(){return new Xa},h8=function(){return wt()},u8=gt,iS={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Br.NO_ERROR=0,Br.TIMEOUT=8,Br.HTTP_ERROR=6,ey=Br,Ar.COMPLETE="complete",c8=Ar,De.EventType=nt,nt.OPEN="a",nt.CLOSE="b",nt.ERROR="c",nt.MESSAGE="d",Ke.prototype.listen=Ke.prototype.J,l1=De,mr.prototype.listenOnce=mr.prototype.K,mr.prototype.getLastError=mr.prototype.Ha,mr.prototype.getLastErrorCode=mr.prototype.ya,mr.prototype.getStatus=mr.prototype.ca,mr.prototype.getResponseJson=mr.prototype.La,mr.prototype.getResponseText=mr.prototype.la,mr.prototype.send=mr.prototype.ea,mr.prototype.setWithCredentials=mr.prototype.Fa,l8=mr}).apply(typeof c2<"u"?c2:typeof self<"u"?self:typeof window<"u"?window:{});const hC="@firebase/firestore",fC="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ja.UNAUTHENTICATED=new ja(null),ja.GOOGLE_CREDENTIALS=new ja("google-credentials-uid"),ja.FIRST_PARTY=new ja("first-party-uid"),ja.MOCK_USER=new ja("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Jp="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new LT("@firebase/firestore");function ep(){return E0.logLevel}function Ct(n,...e){if(E0.logLevel<=Zn.DEBUG){const t=e.map(GT);E0.debug(`Firestore (${Jp}): ${n}`,...t)}}function es(n,...e){if(E0.logLevel<=Zn.ERROR){const t=e.map(GT);E0.error(`Firestore (${Jp}): ${n}`,...t)}}function nx(n,...e){if(E0.logLevel<=Zn.WARN){const t=e.map(GT);E0.warn(`Firestore (${Jp}): ${n}`,...t)}}function GT(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,d8(n,r,t)}function d8(n,e,t){let r=`FIRESTORE (${Jp}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw es(r),new Error(r)}function cn(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||d8(e,i,r)}function an(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mt extends Fc{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(ja.UNAUTHENTICATED)))}shutdown(){}}class FU{constructor(e){this.t=e,this.currentUser=ja.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){cn(this.o===void 0,42304);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new Iu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Iu,e.enqueueRetryable((()=>i(this.currentUser)))};const a=()=>{const c=s;e.enqueueRetryable((async()=>{await c.promise,await i(this.currentUser)}))},o=c=>{Ct("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>o(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Ct("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Iu)}}),0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Ct("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(cn(typeof r.accessToken=="string",31837,{l:r}),new OU(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cn(e===null||typeof e=="string",2055,{h:e}),new ja(e)}}class BU{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=ja.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class VU{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new BU(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(ja.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class dC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zU{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kl(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){cn(this.o===void 0,3512);const r=s=>{s.error!=null&&Ct("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.m;return this.m=s.token,Ct("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Ct("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Ct("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new dC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(cn(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UU(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=UU(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%62))}return r}}function kn(n,e){return n<e?-1:n>e?1:0}function sS(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),s=e.charAt(r);if(i!==s)return Yw(i)===Yw(s)?kn(i,s):Yw(i)?1:-1}return kn(n.length,e.length)}const HU=55296,qU=57343;function Yw(n){const e=n.charCodeAt(0);return e>=HU&&e<=qU}function Tp(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}function m8(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="__name__";class bu{constructor(e,t,r){t===void 0?t=0:t>e.length&&en(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&en(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return bu.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof bu?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=bu.compareSegments(e.get(i),t.get(i));if(s!==0)return s}return kn(e.length,t.length)}static compareSegments(e,t){const r=bu.isNumericId(e),i=bu.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?bu.extractNumericId(e).compare(bu.extractNumericId(t)):sS(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xf.fromString(e.substring(4,e.length-2))}}class Sr extends bu{construct(e,t,r){return new Sr(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Mt(ot.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new Sr(t)}static emptyPath(){return new Sr([])}}const WU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Di extends bu{construct(e,t,r){return new Di(e,t,r)}static isValidIdentifier(e){return WU.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Di.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mC}static keyField(){return new Di([mC])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Mt(ot.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Mt(ot.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Mt(ot.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Mt(ot.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Di(t)}static emptyPath(){return new Di([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.path=e}static fromPath(e){return new Gt(Sr.fromString(e))}static fromName(e){return new Gt(Sr.fromString(e).popFirst(5))}static empty(){return new Gt(Sr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Sr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Sr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Gt(new Sr(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(n,e,t){if(!t)throw new Mt(ot.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function GU(n,e,t,r){if(e===!0&&r===!0)throw new Mt(ot.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pC(n){if(!Gt.isDocumentKey(n))throw new Mt(ot.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gC(n){if(Gt.isDocumentKey(n))throw new Mt(ot.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function g8(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Db(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":en(12329,{type:typeof n})}function Oc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Mt(ot.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Db(n);throw new Mt(ot.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(n,e){const t={typeString:n};return e&&(t.value=e),t}function Xx(n,e){if(!g8(n))throw new Mt(ot.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const a=n[r];if(i&&typeof a!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&a!==s.value){t=`Expected '${r}' field to equal '${s.value}'`;break}}if(t)throw new Mt(ot.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=-62135596800,vC=1e6;class jr{static now(){return jr.fromMillis(Date.now())}static fromDate(e){return jr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*vC);return new jr(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<xC)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mt(ot.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vC}_compareTo(e){return this.seconds===e.seconds?kn(this.nanoseconds,e.nanoseconds):kn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:jr._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Xx(e,jr._jsonSchema))return new jr(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-xC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}jr._jsonSchemaVersion="firestore/timestamp/1.0",jr._jsonSchema={type:ws("string",jr._jsonSchemaVersion),seconds:ws("number"),nanoseconds:ws("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{static fromTimestamp(e){return new mn(e)}static min(){return new mn(new jr(0,0))}static max(){return new mn(new jr(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=-1;class Ly{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function aS(n){return n.fields.find((e=>e.kind===2))}function Kd(n){return n.fields.filter((e=>e.kind!==2))}Ly.UNKNOWN_ID=-1;class ty{constructor(e,t){this.fieldPath=e,this.kind=t}}class rx{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new rx(0,bl.min())}}function x8(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=mn.fromTimestamp(r===1e9?new jr(t+1,0):new jr(t,r));return new bl(i,Gt.empty(),e)}function v8(n){return new bl(n.readTime,n.key,Ep)}class bl{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new bl(mn.min(),Gt.empty(),Ep)}static max(){return new bl(mn.max(),Gt.empty(),Ep)}}function KT(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Gt.comparator(n.documentKey,e.documentKey),t!==0?t:kn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y8="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b8{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pd(n){if(n.code!==ot.FAILED_PRECONDITION||n.message!==y8)throw n;Ct("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&en(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ge(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Ge?t:Ge.resolve(t)}catch(t){return Ge.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Ge.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Ge.reject(t)}static resolve(e){return new Ge(((t,r)=>{t(e)}))}static reject(e){return new Ge(((t,r)=>{r(e)}))}static waitFor(e){return new Ge(((t,r)=>{let i=0,s=0,a=!1;e.forEach((o=>{++i,o.next((()=>{++s,a&&s===i&&t()}),(c=>r(c)))})),a=!0,s===i&&t()}))}static or(e){let t=Ge.resolve(!1);for(const r of e)t=t.next((i=>i?Ge.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,s)=>{r.push(t.call(this,i,s))})),this.waitFor(r)}static mapArray(e,t){return new Ge(((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next((d=>{a[u]=d,++o,o===s&&r(a)}),(d=>i(d)))}}))}static doWhile(e,t){return new Ge(((r,i)=>{const s=()=>{e()===!0?t().next((()=>{s()}),i):r()};s()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl="SimpleDb";class Rb{static open(e,t,r,i){try{return new Rb(t,e.transaction(i,r))}catch(s){throw new T1(t,s)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new Iu,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new T1(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const i=YT(r.target.error);this.S.reject(new T1(e,i))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(Ct(hl,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new KU(t)}}class Qf{static delete(e){return Ct(hl,"Removing database:",e),Zd(mR().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!jT())return!1;if(Qf.F())return!0;const e=Fs(),t=Qf.M(e),r=0<t&&t<10,i=_8(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,Qf.M(Fs())===12.2&&es("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(Ct(hl,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new T1(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new Mt(ot.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Mt(ot.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new T1(e,a))},i.onupgradeneeded=s=>{Ct(hl,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.N.k(a,i.transaction,s.oldVersion,this.version).next((()=>{Ct(hl,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.L(e);const o=Rb.open(this.db,e,s?"readonly":"readwrite",r),c=i(o).next((u=>(o.C(),u))).catch((u=>(o.abort(u),Ge.reject(u)))).toPromise();return c.catch((()=>{})),await o.D,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(Ct(hl,"Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _8(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class $U{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Zd(this.U.delete())}}class T1 extends Mt{constructor(e,t){super(ot.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function gd(n){return n.name==="IndexedDbTransactionError"}class KU{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Ct(hl,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ct(hl,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Zd(r)}add(e){return Ct(hl,"ADD",this.store.name,e,e),Zd(this.store.add(e))}get(e){return Zd(this.store.get(e)).next((t=>(t===void 0&&(t=null),Ct(hl,"GET",this.store.name,e,t),t)))}delete(e){return Ct(hl,"DELETE",this.store.name,e),Zd(this.store.delete(e))}count(){return Ct(hl,"COUNT",this.store.name),Zd(this.store.count())}J(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Ge(((a,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{a(c.target.result)}}))}{const s=this.cursor(r),a=[];return this.H(s,((o,c)=>{a.push(c)})).next((()=>a))}}Y(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Ge(((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}}))}Z(e,t){Ct(hl,"DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,((s,a,o)=>o.delete()))}ee(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}te(e){const t=this.cursor({});return new Ge(((r,i)=>{t.onerror=s=>{const a=YT(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next((o=>{o?a.continue():r()})):r()}}))}H(e,t){const r=[];return new Ge(((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new $U(o),u=t(o.primaryKey,o.value,c);if(u instanceof Ge){const d=u.catch((p=>(c.done(),Ge.reject(p))));r.push(d)}c.isDone?i():c.G===null?o.continue():o.continue(c.G)}})).next((()=>Ge.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Zd(n){return new Ge(((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=YT(r.target.error);t(i)}}))}let yC=!1;function YT(n){const e=Qf.M(Fs());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Mt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return yC||(yC=!0,setTimeout((()=>{throw r}),0)),r}}return n}const E1="IndexBackfiller";class YU{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){Ct(E1,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();Ct(E1,`Documents written: ${t}`)}catch(t){gd(t)?Ct(E1,"Ignoring IndexedDB error during index backfill: ",t):await pd(t)}await this.re(6e4)}))}}class XU{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const r=new Set;let i=t,s=!0;return Ge.doWhile((()=>s===!0&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((a=>{if(a!==null&&!r.has(a))return Ct(E1,`Processing collection: ${a}`),this.oe(e,a,i).next((o=>{i-=o,r.add(a)}));s=!1})))).next((()=>t-i))}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next((s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next((()=>this._e(i,s))).next((o=>(Ct(E1,`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o)))).next((()=>a.size))}))))}_e(e,t){let r=e;return t.changes.forEach(((i,s)=>{const a=v8(s);KT(a,r)>0&&(r=a)})),new bl(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bo.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-1;function Pb(n){return n==null}function ix(n){return n===0&&1/n==-1/0}function w8(n){return typeof n=="number"&&Number.isInteger(n)&&!ix(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="";function Ha(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=bC(e)),e=QU(n.get(t),e);return bC(e)}function QU(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case Oy:t+="";break;default:t+=s}}return t}function bC(n){return n+Oy+""}function wu(n){const e=n.length;if(cn(e>=2,64408,{path:n}),e===2)return cn(n.charAt(0)===Oy&&n.charAt(1)==="",56145,{path:n}),Sr.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf(Oy,s);switch((a<0||a>t)&&en(50515,{path:n}),n.charAt(a+1)){case"":const o=n.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:en(61167,{path:n})}s=a+2}return new Sr(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yd="remoteDocuments",Qx="owner",Vm="owner",sx="mutationQueues",JU="userId",Ec="mutations",_C="batchId",i0="userMutationsIndex",wC=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n,e){return[n,Ha(e)]}function S8(n,e,t){return[n,Ha(e),t]}const ZU={},Ap="documentMutations",My="remoteDocumentsV14",eH=["prefixPath","collectionGroup","readTime","documentId"],ry="documentKeyIndex",tH=["prefixPath","collectionGroup","documentId"],T8="collectionGroupIndex",nH=["collectionGroup","readTime","prefixPath","documentId"],ax="remoteDocumentGlobal",oS="remoteDocumentGlobalKey",Np="targets",E8="queryTargetsIndex",rH=["canonicalId","targetId"],Cp="targetDocuments",iH=["targetId","path"],XT="documentTargetsIndex",sH=["path","targetId"],Fy="targetGlobalKey",c0="targetGlobal",ox="collectionParents",aH=["collectionId","parent"],kp="clientMetadata",oH="clientId",jb="bundles",lH="bundleId",Lb="namedQueries",cH="name",QT="indexConfiguration",uH="indexId",lS="collectionGroupIndex",hH="collectionGroup",A1="indexState",fH=["indexId","uid"],A8="sequenceNumberIndex",dH=["uid","sequenceNumber"],N1="indexEntries",mH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],N8="documentKeyIndex",pH=["indexId","uid","orderedDocumentKey"],Ob="documentOverlays",gH=["userId","collectionPath","documentId"],cS="collectionPathOverlayIndex",xH=["userId","collectionPath","largestBatchId"],C8="collectionGroupOverlayIndex",vH=["userId","collectionGroup","largestBatchId"],JT="globals",yH="name",k8=[sx,Ec,Ap,Yd,Np,Qx,c0,Cp,kp,ax,ox,jb,Lb],bH=[...k8,Ob],I8=[sx,Ec,Ap,My,Np,Qx,c0,Cp,kp,ax,ox,jb,Lb,Ob],D8=I8,ZT=[...D8,QT,A1,N1],_H=ZT,R8=[...ZT,JT],wH=R8;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS extends b8{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Vs(n,e){const t=an(n);return Qf.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xd(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function P8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t){this.comparator=e,this.root=t||da.EMPTY}insert(e,t){return new ii(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,da.BLACK,null,null))}remove(e){return new ii(this.comparator,this.root.remove(e,this.comparator).copy(null,null,da.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new u2(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new u2(this.root,e,this.comparator,!1)}getReverseIterator(){return new u2(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new u2(this.root,e,this.comparator,!0)}}class u2{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class da{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??da.RED,this.left=i??da.EMPTY,this.right=s??da.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new da(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return da.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return da.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,da.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,da.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw en(43730,{key:this.key,value:this.value});if(this.right.isRed())throw en(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw en(27949);return e+(this.isRed()?0:1)}}da.EMPTY=null,da.RED=!0,da.BLACK=!1;da.EMPTY=new class{constructor(){this.size=0}get key(){throw en(57766)}get value(){throw en(16141)}get color(){throw en(16727)}get left(){throw en(29726)}get right(){throw en(36894)}copy(e,t,r,i,s){return this}insert(e,t,r){return new da(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.comparator=e,this.data=new ii(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new TC(this.data.getIterator())}getIteratorFrom(e){return new TC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Fr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Fr(this.comparator);return t.data=e,t}}class TC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zm(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.fields=e,e.sort(Di.comparator)}static empty(){return new Vo([])}unionWith(e){let t=new Fr(Di.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Vo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tp(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new j8("Invalid base64 string: "+s):s}})(e);return new is(t)}static fromUint8Array(e){const t=(function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s})(e);return new is(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}is.EMPTY_BYTE_STRING=new is("");const SH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ph(n){if(cn(!!n,39018),typeof n=="string"){let e=0;const t=SH.exec(n);if(cn(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Si(n.seconds),nanos:Si(n.nanos)}}function Si(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function jh(n){return typeof n=="string"?is.fromBase64String(n):is.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L8="server_timestamp",O8="__type__",M8="__previous_value__",F8="__local_write_time__";function e4(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[O8])==null?void 0:r.stringValue)===L8}function Mb(n){const e=n.mapValue.fields[M8];return e4(e)?Mb(e):e}function lx(n){const e=Ph(n.mapValue.fields[F8].timestampValue);return new jr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TH{constructor(e,t,r,i,s,a,o,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const By="(default)";class A0{constructor(e,t){this.projectId=e,this.database=t||By}static empty(){return new A0("","")}get isDefaultDatabase(){return this.database===By}isEqual(e){return e instanceof A0&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="__type__",B8="__max__",Ff={mapValue:{fields:{__type__:{stringValue:B8}}}},n4="__vector__",Ip="value",iy={nullValue:"NULL_VALUE"};function td(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?e4(n)?4:V8(n)?9007199254740991:Fb(n)?10:11:en(28295,{value:n})}function Lu(n,e){if(n===e)return!0;const t=td(n);if(t!==td(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return lx(n).isEqual(lx(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=Ph(i.timestampValue),o=Ph(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,s){return jh(i.bytesValue).isEqual(jh(s.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,s){return Si(i.geoPointValue.latitude)===Si(s.geoPointValue.latitude)&&Si(i.geoPointValue.longitude)===Si(s.geoPointValue.longitude)})(n,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return Si(i.integerValue)===Si(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Si(i.doubleValue),o=Si(s.doubleValue);return a===o?ix(a)===ix(o):isNaN(a)&&isNaN(o)}return!1})(n,e);case 9:return Tp(n.arrayValue.values||[],e.arrayValue.values||[],Lu);case 10:case 11:return(function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(SC(a)!==SC(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Lu(a[c],o[c])))return!1;return!0})(n,e);default:return en(52216,{left:n})}}function cx(n,e){return(n.values||[]).find((t=>Lu(t,e)))!==void 0}function nd(n,e){if(n===e)return 0;const t=td(n),r=td(e);if(t!==r)return kn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kn(n.booleanValue,e.booleanValue);case 2:return(function(s,a){const o=Si(s.integerValue||s.doubleValue),c=Si(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1})(n,e);case 3:return EC(n.timestampValue,e.timestampValue);case 4:return EC(lx(n),lx(e));case 5:return sS(n.stringValue,e.stringValue);case 6:return(function(s,a){const o=jh(s),c=jh(a);return o.compareTo(c)})(n.bytesValue,e.bytesValue);case 7:return(function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const d=kn(o[u],c[u]);if(d!==0)return d}return kn(o.length,c.length)})(n.referenceValue,e.referenceValue);case 8:return(function(s,a){const o=kn(Si(s.latitude),Si(a.latitude));return o!==0?o:kn(Si(s.longitude),Si(a.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return AC(n.arrayValue,e.arrayValue);case 10:return(function(s,a){var x,v,_,b;const o=s.fields||{},c=a.fields||{},u=(x=o[Ip])==null?void 0:x.arrayValue,d=(v=c[Ip])==null?void 0:v.arrayValue,p=kn(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return p!==0?p:AC(u,d)})(n.mapValue,e.mapValue);case 11:return(function(s,a){if(s===Ff.mapValue&&a===Ff.mapValue)return 0;if(s===Ff.mapValue)return 1;if(a===Ff.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const x=sS(c[p],d[p]);if(x!==0)return x;const v=nd(o[c[p]],u[d[p]]);if(v!==0)return v}return kn(c.length,d.length)})(n.mapValue,e.mapValue);default:throw en(23264,{he:t})}}function EC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return kn(n,e);const t=Ph(n),r=Ph(e),i=kn(t.seconds,r.seconds);return i!==0?i:kn(t.nanos,r.nanos)}function AC(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=nd(t[i],r[i]);if(s)return s}return kn(t.length,r.length)}function Dp(n){return hS(n)}function hS(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Ph(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return jh(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Gt.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=hS(s);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${hS(t.fields[a])}`;return i+"}"})(n.mapValue):en(61005,{value:n})}function sy(n){switch(td(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Mb(n);return e?16+sy(e):16;case 5:return 2*n.stringValue.length;case 6:return jh(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+sy(s)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return xd(r.fields,((s,a)=>{i+=s.length+sy(a)})),i})(n.mapValue);default:throw en(13486,{value:n})}}function ux(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function fS(n){return!!n&&"integerValue"in n}function hx(n){return!!n&&"arrayValue"in n}function NC(n){return!!n&&"nullValue"in n}function CC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ay(n){return!!n&&"mapValue"in n}function Fb(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[t4])==null?void 0:r.stringValue)===n4}function C1(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xd(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=C1(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=C1(n.arrayValue.values[t]);return e}return{...n}}function V8(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===B8}const z8={mapValue:{fields:{[t4]:{stringValue:n4},[Ip]:{arrayValue:{}}}}};function EH(n){return"nullValue"in n?iy:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ux(A0.empty(),Gt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Fb(n)?z8:{mapValue:{}}:en(35942,{value:n})}function AH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ux(A0.empty(),Gt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?z8:"mapValue"in n?Fb(n)?{mapValue:{}}:Ff:en(61959,{value:n})}function kC(n,e){const t=nd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function IC(n,e){const t=nd(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e){this.value=e}static empty(){return new Va({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ay(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=C1(t)}setAll(e){let t=Di.emptyPath(),r={},i=[];e.forEach(((a,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=C1(a):i.push(o.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());ay(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Lu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ay(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xd(t,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Va(C1(this.value))}}function U8(n){const e=[];return xd(n.fields,((t,r)=>{const i=new Di([t]);if(ay(r)){const s=U8(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)})),new Vo(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new zi(e,0,mn.min(),mn.min(),mn.min(),Va.empty(),0)}static newFoundDocument(e,t,r,i){return new zi(e,1,t,mn.min(),r,i,0)}static newNoDocument(e,t){return new zi(e,2,t,mn.min(),mn.min(),Va.empty(),0)}static newUnknownDocument(e,t){return new zi(e,3,t,mn.min(),mn.min(),Va.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(mn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Va.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Va.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof zi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){this.position=e,this.inclusive=t}}function DC(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=Gt.comparator(Gt.fromName(a.referenceValue),t.key):r=nd(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function RC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Lu(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t="asc"){this.field=e,this.dir=t}}function NH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{}class er extends H8{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new CH(e,t,r):t==="array-contains"?new DH(e,r):t==="in"?new Y8(e,r):t==="not-in"?new RH(e,r):t==="array-contains-any"?new PH(e,r):new er(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new kH(e,r):new IH(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nd(t,this.value)):t!==null&&td(this.value)===td(t)&&this.matchesComparison(nd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return en(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends H8{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Lr(e,t)}matches(e){return Pp(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Pp(n){return n.op==="and"}function dS(n){return n.op==="or"}function r4(n){return q8(n)&&Pp(n)}function q8(n){for(const e of n.filters)if(e instanceof Lr)return!1;return!0}function mS(n){if(n instanceof er)return n.field.canonicalString()+n.op.toString()+Dp(n.value);if(r4(n))return n.filters.map((e=>mS(e))).join(",");{const e=n.filters.map((t=>mS(t))).join(",");return`${n.op}(${e})`}}function W8(n,e){return n instanceof er?(function(r,i){return i instanceof er&&r.op===i.op&&r.field.isEqual(i.field)&&Lu(r.value,i.value)})(n,e):n instanceof Lr?(function(r,i){return i instanceof Lr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,a,o)=>s&&W8(a,i.filters[o])),!0):!1})(n,e):void en(19439)}function G8(n,e){const t=n.filters.concat(e);return Lr.create(t,n.op)}function $8(n){return n instanceof er?(function(t){return`${t.field.canonicalString()} ${t.op} ${Dp(t.value)}`})(n):n instanceof Lr?(function(t){return t.op.toString()+" {"+t.getFilters().map($8).join(" ,")+"}"})(n):"Filter"}class CH extends er{constructor(e,t,r){super(e,t,r),this.key=Gt.fromName(r.referenceValue)}matches(e){const t=Gt.comparator(e.key,this.key);return this.matchesComparison(t)}}class kH extends er{constructor(e,t){super(e,"in",t),this.keys=K8("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class IH extends er{constructor(e,t){super(e,"not-in",t),this.keys=K8("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function K8(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Gt.fromName(r.referenceValue)))}class DH extends er{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return hx(t)&&cx(t.arrayValue,this.value)}}class Y8 extends er{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&cx(this.value.arrayValue,t)}}class RH extends er{constructor(e,t){super(e,"not-in",t)}matches(e){if(cx(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!cx(this.value.arrayValue,t)}}class PH extends er{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!hx(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>cx(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.Te=null}}function pS(n,e=null,t=[],r=[],i=null,s=null,a=null){return new jH(n,e,t,r,i,s,a)}function N0(n){const e=an(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>mS(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Pb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>Dp(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>Dp(r))).join(",")),e.Te=t}return e.Te}function Jx(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!NH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!W8(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!RC(n.startAt,e.startAt)&&RC(n.endAt,e.endAt)}function Vy(n){return Gt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function zy(n,e){return n.filters.filter((t=>t instanceof er&&t.field.isEqual(e)))}function PC(n,e,t){let r=iy,i=!0;for(const s of zy(n,e)){let a=iy,o=!0;switch(s.op){case"<":case"<=":a=EH(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=iy}kC({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];kC({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function jC(n,e,t){let r=Ff,i=!0;for(const s of zy(n,e)){let a=Ff,o=!0;switch(s.op){case">=":case">":a=AH(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Ff}IC({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];IC({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function X8(n,e,t,r,i,s,a,o){return new Zp(n,e,t,r,i,s,a,o)}function Bb(n){return new Zp(n)}function LC(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Q8(n){return n.collectionGroup!==null}function k1(n){const e=an(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Fr(Di.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((u=>{u.isInequality()&&(o=o.add(u.field))}))})),o})(e).forEach((s=>{t.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new fx(s,r))})),t.has(Di.keyField().canonicalString())||e.Ie.push(new fx(Di.keyField(),r))}return e.Ie}function yl(n){const e=an(n);return e.Ee||(e.Ee=LH(e,k1(n))),e.Ee}function LH(n,e){if(n.limitType==="F")return pS(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new fx(i.field,s)}));const t=n.endAt?new Rp(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Rp(n.startAt.position,n.startAt.inclusive):null;return pS(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function gS(n,e){const t=n.filters.concat([e]);return new Zp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Uy(n,e,t){return new Zp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vb(n,e){return Jx(yl(n),yl(e))&&n.limitType===e.limitType}function J8(n){return`${N0(yl(n))}|lt:${n.limitType}`}function tp(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>$8(i))).join(", ")}]`),Pb(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>Dp(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>Dp(i))).join(",")),`Target(${r})`})(yl(n))}; limitType=${n.limitType})`}function Zx(n,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Gt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(n,e)&&(function(r,i){for(const s of k1(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(a,o,c){const u=DC(a,o,c);return a.inclusive?u<=0:u<0})(r.startAt,k1(r),i)||r.endAt&&!(function(a,o,c){const u=DC(a,o,c);return a.inclusive?u>=0:u>0})(r.endAt,k1(r),i))})(n,e)}function Z8(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function eP(n){return(e,t)=>{let r=!1;for(const i of k1(n)){const s=OH(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function OH(n,e,t){const r=n.field.isKeyField()?Gt.comparator(e.key,t.key):(function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?nd(c,u):en(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return en(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xd(this.inner,((t,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return P8(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH=new ii(Gt.comparator);function gl(){return MH}const tP=new ii(Gt.comparator);function c1(...n){let e=tP;for(const t of n)e=e.insert(t.key,t);return e}function nP(n){let e=tP;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Su(){return I1()}function rP(){return I1()}function I1(){return new Fh((n=>n.toString()),((n,e)=>n.isEqual(e)))}const FH=new ii(Gt.comparator),BH=new Fr(Gt.comparator);function zn(...n){let e=BH;for(const t of n)e=e.add(t);return e}const VH=new Fr(kn);function i4(){return VH}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s4(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ix(e)?"-0":e}}function iP(n){return{integerValue:""+n}}function zH(n,e){return w8(e)?iP(e):s4(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(){this._=void 0}}function UH(n,e,t){return n instanceof jp?(function(i,s){const a={fields:{[O8]:{stringValue:L8},[F8]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&e4(s)&&(s=Mb(s)),s&&(a.fields[M8]=s),{mapValue:a}})(t,e):n instanceof Lp?aP(n,e):n instanceof Op?oP(n,e):(function(i,s){const a=sP(i,s),o=OC(a)+OC(i.Ae);return fS(a)&&fS(i.Ae)?iP(o):s4(i.serializer,o)})(n,e)}function HH(n,e,t){return n instanceof Lp?aP(n,e):n instanceof Op?oP(n,e):t}function sP(n,e){return n instanceof dx?(function(r){return fS(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class jp extends zb{}class Lp extends zb{constructor(e){super(),this.elements=e}}function aP(n,e){const t=lP(e);for(const r of n.elements)t.some((i=>Lu(i,r)))||t.push(r);return{arrayValue:{values:t}}}class Op extends zb{constructor(e){super(),this.elements=e}}function oP(n,e){let t=lP(e);for(const r of n.elements)t=t.filter((i=>!Lu(i,r)));return{arrayValue:{values:t}}}class dx extends zb{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function OC(n){return Si(n.integerValue||n.doubleValue)}function lP(n){return hx(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cP{constructor(e,t){this.field=e,this.transform=t}}function qH(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Lp&&i instanceof Lp||r instanceof Op&&i instanceof Op?Tp(r.elements,i.elements,Lu):r instanceof dx&&i instanceof dx?Lu(r.Ae,i.Ae):r instanceof jp&&i instanceof jp})(n.transform,e.transform)}class WH{constructor(e,t){this.version=e,this.transformResults=t}}class Os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function oy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ub{}function uP(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ev(n.key,Os.none()):new eg(n.key,n.data,Os.none());{const t=n.data,r=Va.empty();let i=new Fr(Di.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new Bh(n.key,r,new Vo(i.toArray()),Os.none())}}function GH(n,e,t){n instanceof eg?(function(i,s,a){const o=i.value.clone(),c=FC(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()})(n,e,t):n instanceof Bh?(function(i,s,a){if(!oy(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=FC(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(hP(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(n,e,t):(function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,t)}function D1(n,e,t,r){return n instanceof eg?(function(s,a,o,c){if(!oy(s.precondition,a))return o;const u=s.value.clone(),d=BC(s.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null})(n,e,t,r):n instanceof Bh?(function(s,a,o,c){if(!oy(s.precondition,a))return o;const u=BC(s.fieldTransforms,c,a),d=a.data;return d.setAll(hP(s)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((p=>p.field)))})(n,e,t,r):(function(s,a,o){return oy(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o})(n,e,t)}function $H(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=sP(r.transform,i||null);s!=null&&(t===null&&(t=Va.empty()),t.set(r.field,s))}return t||null}function MC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tp(r,i,((s,a)=>qH(s,a)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class eg extends Ub{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Bh extends Ub{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function hP(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function FC(n,e,t){const r=new Map;cn(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,HH(a,o,t[i]))}return r}function BC(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,UH(s,a,e))}return r}class ev extends Ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fP extends Ub{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&GH(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=D1(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=D1(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=rP();return this.mutations.forEach((i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const c=uP(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(mn.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),zn())}isEqual(e){return this.batchId===e.batchId&&Tp(this.mutations,e.mutations,((t,r)=>MC(t,r)))&&Tp(this.baseMutations,e.baseMutations,((t,r)=>MC(t,r)))}}class o4{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){cn(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return FH})();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new o4(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vs,cr;function YH(n){switch(n){case ot.OK:return en(64938);case ot.CANCELLED:case ot.UNKNOWN:case ot.DEADLINE_EXCEEDED:case ot.RESOURCE_EXHAUSTED:case ot.INTERNAL:case ot.UNAVAILABLE:case ot.UNAUTHENTICATED:return!1;case ot.INVALID_ARGUMENT:case ot.NOT_FOUND:case ot.ALREADY_EXISTS:case ot.PERMISSION_DENIED:case ot.FAILED_PRECONDITION:case ot.ABORTED:case ot.OUT_OF_RANGE:case ot.UNIMPLEMENTED:case ot.DATA_LOSS:return!0;default:return en(15467,{code:n})}}function dP(n){if(n===void 0)return es("GRPC error has no .code"),ot.UNKNOWN;switch(n){case vs.OK:return ot.OK;case vs.CANCELLED:return ot.CANCELLED;case vs.UNKNOWN:return ot.UNKNOWN;case vs.DEADLINE_EXCEEDED:return ot.DEADLINE_EXCEEDED;case vs.RESOURCE_EXHAUSTED:return ot.RESOURCE_EXHAUSTED;case vs.INTERNAL:return ot.INTERNAL;case vs.UNAVAILABLE:return ot.UNAVAILABLE;case vs.UNAUTHENTICATED:return ot.UNAUTHENTICATED;case vs.INVALID_ARGUMENT:return ot.INVALID_ARGUMENT;case vs.NOT_FOUND:return ot.NOT_FOUND;case vs.ALREADY_EXISTS:return ot.ALREADY_EXISTS;case vs.PERMISSION_DENIED:return ot.PERMISSION_DENIED;case vs.FAILED_PRECONDITION:return ot.FAILED_PRECONDITION;case vs.ABORTED:return ot.ABORTED;case vs.OUT_OF_RANGE:return ot.OUT_OF_RANGE;case vs.UNIMPLEMENTED:return ot.UNIMPLEMENTED;case vs.DATA_LOSS:return ot.DATA_LOSS;default:return en(39323,{code:n})}}(cr=vs||(vs={}))[cr.OK=0]="OK",cr[cr.CANCELLED=1]="CANCELLED",cr[cr.UNKNOWN=2]="UNKNOWN",cr[cr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",cr[cr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",cr[cr.NOT_FOUND=5]="NOT_FOUND",cr[cr.ALREADY_EXISTS=6]="ALREADY_EXISTS",cr[cr.PERMISSION_DENIED=7]="PERMISSION_DENIED",cr[cr.UNAUTHENTICATED=16]="UNAUTHENTICATED",cr[cr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",cr[cr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",cr[cr.ABORTED=10]="ABORTED",cr[cr.OUT_OF_RANGE=11]="OUT_OF_RANGE",cr[cr.UNIMPLEMENTED=12]="UNIMPLEMENTED",cr[cr.INTERNAL=13]="INTERNAL",cr[cr.UNAVAILABLE=14]="UNAVAILABLE",cr[cr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XH(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QH=new Xf([4294967295,4294967295],0);function VC(n){const e=XH().encode(n),t=new o8;return t.update(e),new Uint8Array(t.digest())}function zC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Xf([t,r],0),new Xf([i,s],0)]}class c4{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new u1(`Invalid padding: ${t}`);if(r<0)throw new u1(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new u1(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new u1(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xf.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(Xf.fromNumber(r)));return i.compare(QH)===1&&(i=new Xf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=VC(e),[r,i]=zC(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);if(!this.we(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new c4(s,i,t);return r.forEach((o=>a.insert(o))),a}insert(e){if(this.ge===0)return;const t=VC(e),[r,i]=zC(t);for(let s=0;s<this.hashCount;s++){const a=this.ye(r,i,s);this.Se(a)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class u1 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,nv.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new tv(mn.min(),i,new ii(kn),gl(),zn())}}class nv{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new nv(r,t,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ly{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class mP{constructor(e,t){this.targetId=e,this.Ce=t}}class pP{constructor(e,t,r=is.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UC{constructor(){this.ve=0,this.Fe=HC(),this.Me=is.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=zn(),t=zn(),r=zn();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:en(38017,{changeType:s})}})),new nv(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=HC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,cn(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class JH{constructor(e){this.Ge=e,this.ze=new Map,this.je=gl(),this.Je=h2(),this.He=h2(),this.Ye=new ii(kn)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:en(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const s=i.target;if(Vy(s))if(r===0){const a=new Gt(s.path);this.et(t,a,zi.newNoDocument(a,mn.min()))}else cn(r===1,20013,{expectedCount:r});else{const a=this._t(t);if(a!==r){const o=this.ut(e),c=o?this.ct(o,e,a):1;if(c!==0){this.it(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=jh(r).toUint8Array()}catch(c){if(c instanceof j8)return nx("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new c4(a,i,s)}catch(c){return nx(c instanceof u1?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.ge===0?null:o}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((s=>{const a=this.Ge.ht(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.et(t,s,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((s,a)=>{const o=this.ot(a);if(o){if(s.current&&Vy(o.target)){const c=new Gt(o.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,zi.newNoDocument(c,e))}s.Be&&(t.set(a,s.ke()),s.qe())}}));let r=zn();this.He.forEach(((s,a)=>{let o=!0;a.forEachWhile((c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)})),o&&(r=r.add(s))})),this.je.forEach(((s,a)=>a.setReadTime(e)));const i=new tv(e,t,this.Ye,this.je,r);return this.je=gl(),this.Je=h2(),this.He=h2(),this.Ye=new ii(kn),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new UC,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Fr(kn),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Fr(kn),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ct("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new UC),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function h2(){return new ii(Gt.comparator)}function HC(){return new ii(Gt.comparator)}const ZH={asc:"ASCENDING",desc:"DESCENDING"},eq={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tq={and:"AND",or:"OR"};class nq{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function xS(n,e){return n.useProto3Json||Pb(e)?e:{value:e}}function Mp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gP(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function rq(n,e){return Mp(n,e.toTimestamp())}function uo(n){return cn(!!n,49232),mn.fromTimestamp((function(t){const r=Ph(t);return new jr(r.seconds,r.nanos)})(n))}function u4(n,e){return vS(n,e).canonicalString()}function vS(n,e){const t=(function(i){return new Sr(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function xP(n){const e=Sr.fromString(n);return cn(AP(e),10190,{key:e.toString()}),e}function Hy(n,e){return u4(n.databaseId,e.path)}function u0(n,e){const t=xP(e);if(t.get(1)!==n.databaseId.projectId)throw new Mt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Mt(ot.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Gt(bP(t))}function vP(n,e){return u4(n.databaseId,e)}function yP(n){const e=xP(n);return e.length===4?Sr.emptyPath():bP(e)}function yS(n){return new Sr(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bP(n){return cn(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qC(n,e,t){return{name:Hy(n,e),fields:t.value.mapValue.fields}}function iq(n,e,t){const r=u0(n,e.name),i=uo(e.updateTime),s=e.createTime?uo(e.createTime):mn.min(),a=new Va({mapValue:{fields:e.fields}}),o=zi.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function sq(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:en(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(u,d){return u.useProto3Json?(cn(d===void 0||typeof d=="string",58123),is.fromBase64String(d||"")):(cn(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),is.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&(function(u){const d=u.code===void 0?ot.UNKNOWN:dP(u.code);return new Mt(d,u.message||"")})(a);t=new pP(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=u0(n,r.document.name),s=uo(r.document.updateTime),a=r.document.createTime?uo(r.document.createTime):mn.min(),o=new Va({mapValue:{fields:r.document.fields}}),c=zi.newFoundDocument(i,s,a,o),u=r.targetIds||[],d=r.removedTargetIds||[];t=new ly(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=u0(n,r.document),s=r.readTime?uo(r.readTime):mn.min(),a=zi.newNoDocument(i,s),o=r.removedTargetIds||[];t=new ly([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=u0(n,r.document),s=r.removedTargetIds||[];t=new ly([],s,i,null)}else{if(!("filter"in e))return en(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new KH(i,s),o=r.targetId;t=new mP(o,a)}}return t}function qy(n,e){let t;if(e instanceof eg)t={update:qC(n,e.key,e.value)};else if(e instanceof ev)t={delete:Hy(n,e.key)};else if(e instanceof Bh)t={update:qC(n,e.key,e.data),updateMask:hq(e.fieldMask)};else{if(!(e instanceof fP))return en(16599,{Vt:e.type});t={verify:Hy(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(s,a){const o=a.transform;if(o instanceof jp)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Lp)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Op)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof dx)return{fieldPath:a.field.canonicalString(),increment:o.Ae};throw en(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:rq(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:en(27497)})(n,e.precondition)),t}function bS(n,e){const t=e.currentDocument?(function(s){return s.updateTime!==void 0?Os.updateTime(uo(s.updateTime)):s.exists!==void 0?Os.exists(s.exists):Os.none()})(e.currentDocument):Os.none(),r=e.updateTransforms?e.updateTransforms.map((i=>(function(a,o){let c=null;if("setToServerValue"in o)cn(o.setToServerValue==="REQUEST_TIME",16630,{proto:o}),c=new jp;else if("appendMissingElements"in o){const d=o.appendMissingElements.values||[];c=new Lp(d)}else if("removeAllFromArray"in o){const d=o.removeAllFromArray.values||[];c=new Op(d)}else"increment"in o?c=new dx(a,o.increment):en(16584,{proto:o});const u=Di.fromServerFormat(o.fieldPath);return new cP(u,c)})(n,i))):[];if(e.update){e.update.name;const i=u0(n,e.update.name),s=new Va({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=(function(c){const u=c.fieldPaths||[];return new Vo(u.map((d=>Di.fromServerFormat(d))))})(e.updateMask);return new Bh(i,s,a,t,r)}return new eg(i,s,t,r)}if(e.delete){const i=u0(n,e.delete);return new ev(i,t)}if(e.verify){const i=u0(n,e.verify);return new fP(i,t)}return en(1463,{proto:e})}function aq(n,e){return n&&n.length>0?(cn(e!==void 0,14353),n.map((t=>(function(i,s){let a=i.updateTime?uo(i.updateTime):uo(s);return a.isEqual(mn.min())&&(a=uo(s)),new WH(a,i.transformResults||[])})(t,e)))):[]}function _P(n,e){return{documents:[vP(n,e.path)]}}function wP(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=vP(n,i);const s=(function(u){if(u.length!==0)return EP(Lr.create(u,"and"))})(e.filters);s&&(t.structuredQuery.where=s);const a=(function(u){if(u.length!==0)return u.map((d=>(function(x){return{field:np(x.field),direction:lq(x.dir)}})(d)))})(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=xS(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:i}}function SP(n){let e=yP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){cn(r===1,65062);const d=t.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];t.where&&(s=(function(p){const x=TP(p);return x instanceof Lr&&r4(x)?x.getFilters():[x]})(t.where));let a=[];t.orderBy&&(a=(function(p){return p.map((x=>(function(_){return new fx(rp(_.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(_.direction))})(x)))})(t.orderBy));let o=null;t.limit&&(o=(function(p){let x;return x=typeof p=="object"?p.value:p,Pb(x)?null:x})(t.limit));let c=null;t.startAt&&(c=(function(p){const x=!!p.before,v=p.values||[];return new Rp(v,x)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){const x=!p.before,v=p.values||[];return new Rp(v,x)})(t.endAt)),X8(e,i,a,s,o,"F",c,u)}function oq(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return en(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function TP(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=rp(t.unaryFilter.field);return er.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=rp(t.unaryFilter.field);return er.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=rp(t.unaryFilter.field);return er.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=rp(t.unaryFilter.field);return er.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return en(61313);default:return en(60726)}})(n):n.fieldFilter!==void 0?(function(t){return er.create(rp(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return en(58110);default:return en(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Lr.create(t.compositeFilter.filters.map((r=>TP(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return en(1026)}})(t.compositeFilter.op))})(n):en(30097,{filter:n})}function lq(n){return ZH[n]}function cq(n){return eq[n]}function uq(n){return tq[n]}function np(n){return{fieldPath:n.canonicalString()}}function rp(n){return Di.fromServerFormat(n.fieldPath)}function EP(n){return n instanceof er?(function(t){if(t.op==="=="){if(CC(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NAN"}};if(NC(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(CC(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NOT_NAN"}};if(NC(t.value))return{unaryFilter:{field:np(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:np(t.field),op:cq(t.op),value:t.value}}})(n):n instanceof Lr?(function(t){const r=t.getFilters().map((i=>EP(i)));return r.length===1?r[0]:{compositeFilter:{op:uq(t.op),filters:r}}})(n):en(54877,{filter:n})}function hq(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function AP(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,r,i,s=mn.min(),a=mn.min(),o=is.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new wh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e){this.yt=e}}function fq(n,e){let t;if(e.document)t=iq(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Gt.fromSegments(e.noDocument.path),i=k0(e.noDocument.readTime);t=zi.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return en(56709);{const r=Gt.fromSegments(e.unknownDocument.path),i=k0(e.unknownDocument.version);t=zi.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime((function(i){const s=new jr(i[0],i[1]);return mn.fromTimestamp(s)})(e.readTime)),t}function WC(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wy(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(s,a){return{name:Hy(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Mp(s,a.version.toTimestamp()),createTime:Mp(s,a.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:C0(e.version)};else{if(!e.isUnknownDocument())return en(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:C0(e.version)}}return r}function Wy(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function C0(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function k0(n){const e=new jr(n.seconds,n.nanoseconds);return mn.fromTimestamp(e)}function e0(n,e){const t=(e.baseMutations||[]).map((s=>bS(n.yt,s)));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map((s=>bS(n.yt,s))),i=jr.fromMillis(e.localWriteTimeMs);return new a4(e.batchId,i,t,r)}function h1(n){const e=k0(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?k0(n.lastLimboFreeSnapshotVersion):mn.min();let r;return r=(function(s){return s.documents!==void 0})(n.query)?(function(s){const a=s.documents.length;return cn(a===1,1966,{count:a}),yl(Bb(yP(s.documents[0])))})(n.query):(function(s){return yl(SP(s))})(n.query),new wh(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,is.fromBase64String(n.resumeToken))}function CP(n,e){const t=C0(e.snapshotVersion),r=C0(e.lastLimboFreeSnapshotVersion);let i;i=Vy(e.target)?_P(n.yt,e.target):wP(n.yt,e.target).ft;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:N0(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function kP(n){const e=SP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Uy(e,e.limit,"L"):e}function Xw(n,e){return new l4(e.largestBatchId,bS(n.yt,e.overlayMutation))}function GC(n,e){const t=e.path.lastSegment();return[n,Ha(e.path.popLast()),t]}function $C(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:C0(r.readTime),documentKey:Ha(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dq{getBundleMetadata(e,t){return KC(e).get(t).next((r=>{if(r)return(function(s){return{id:s.bundleId,createTime:k0(s.createTime),version:s.version}})(r)}))}saveBundleMetadata(e,t){return KC(e).put((function(i){return{bundleId:i.id,createTime:C0(uo(i.createTime)),version:i.version}})(t))}getNamedQuery(e,t){return YC(e).get(t).next((r=>{if(r)return(function(s){return{name:s.name,query:kP(s.bundledQuery),readTime:k0(s.readTime)}})(r)}))}saveNamedQuery(e,t){return YC(e).put((function(i){return{name:i.name,readTime:C0(uo(i.readTime)),bundledQuery:i.bundledQuery}})(t))}}function KC(n){return Vs(n,jb)}function YC(n){return Vs(n,Lb)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const r=t.uid||"";return new Hb(e,r)}getOverlay(e,t){return Wg(e).get(GC(this.userId,t)).next((r=>r?Xw(this.serializer,r):null))}getOverlays(e,t){const r=Su();return Ge.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){const i=[];return r.forEach(((s,a)=>{const o=new l4(t,a);i.push(this.St(e,o))})),Ge.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach((a=>i.add(Ha(a.getCollectionPath()))));const s=[];return i.forEach((a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Wg(e).Z(cS,o))})),Ge.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Su(),s=Ha(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Wg(e).J(cS,a).next((o=>{for(const c of o){const u=Xw(this.serializer,c);i.set(u.getKey(),u)}return i}))}getOverlaysForCollectionGroup(e,t,r,i){const s=Su();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wg(e).ee({index:C8,range:o},((c,u,d)=>{const p=Xw(this.serializer,u);s.size()<i||p.largestBatchId===a?(s.set(p.getKey(),p),a=p.largestBatchId):d.done()})).next((()=>s))}St(e,t){return Wg(e).put((function(i,s,a){const[o,c,u]=GC(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:qy(i.yt,a.mutation)}})(this.serializer,this.userId,t))}}function Wg(n){return Vs(n,Ob)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mq{bt(e){return Vs(e,JT)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?is.fromUint8Array(r):is.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Si(e.integerValue));else if("doubleValue"in e){const r=Si(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),ix(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),typeof r=="string"&&(r=Ph(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(jh(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?V8(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Fb(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):en(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const r=e.fields||{};this.Ft(t,55);for(const i of Object.keys(r))this.Ot(i,t),this.Ct(r[i],t)}kt(e,t){var a,o;const r=e.fields||{};this.Ft(t,53);const i=Ip,s=((o=(a=r[i].arrayValue)==null?void 0:a.values)==null?void 0:o.length)||0;this.Ft(t,15),t.Mt(Si(s)),this.Ot(i,t),this.Ct(r[i],t)}Qt(e,t){const r=e.values||[];this.Ft(t,50);for(const i of r)this.Ct(i,t)}Lt(e,t){this.Ft(t,37),Gt.fromName(e).path.forEach((r=>{this.Ft(t,60),this.Ut(r,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}t0.Kt=new t0;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=255;function pq(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function XC(n){const e=64-(function(r){let i=0;for(let s=0;s<8;++s){const a=pq(255&r[s]);if(i+=a,a!==8)break}return i})(n);return Math.ceil(e/8)}class gq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Jt(r.value),r=t.next();this.Ht()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const i=t.codePointAt(0);this.Gt(240|i>>>18),this.Gt(128|63&i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i)}}this.zt()}Zt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const i=t.codePointAt(0);this.Jt(240|i>>>18),this.Jt(128|63&i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i)}}this.Ht()}Xt(e){const t=this.en(e),r=XC(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}nn(e){const t=this.en(e),r=XC(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}rn(){this.sn(Um),this.sn(255)}_n(){this.an(Um),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===Um?(this.sn(Um),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===Um?(this.an(Um),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class xq{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class vq{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class Gg{constructor(){this.cn=new gq,this.ln=new xq(this.cn),this.hn=new vq(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,t,r,i){this.Tn=e,this.In=t,this.En=r,this.dn=i}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new n0(this.Tn,this.In,this.En,r)}Rn(e,t,r){return{indexId:this.Tn,uid:e,arrayValue:cy(this.En),directionalValue:cy(this.dn),orderedDocumentKey:cy(t),documentKey:r.path.toArray()}}Vn(e,t,r){const i=this.Rn(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function Tf(n,e){let t=n.Tn-e.Tn;return t!==0?t:(t=QC(n.En,e.En),t!==0?t:(t=QC(n.dn,e.dn),t!==0?t:Gt.comparator(n.In,e.In)))}function QC(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}function cy(n){return _R()?(function(t){let r="";for(let i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return r})(n):n}function JC(n){return typeof n!="string"?n:(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(n)}class ZC{constructor(e){this.mn=new Fr(((t,r)=>Di.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const r=t;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(e){if(cn(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=aS(e);if(t!==void 0&&!this.wn(t))return!1;const r=Kd(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.wn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.mn.size>0){const o=this.mn.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[s];if(!this.Sn(o,c)||!this.bn(this.fn[a++],c))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.fn.length||!this.bn(this.fn[a++],o))return!1}return!0}Dn(){if(this.pn)return null;let e=new Fr(Di.comparator);const t=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new ty(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new ty(r.field,0))}for(const r of this.fn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new ty(r.field,r.dir==="asc"?0:1)));return new Ly(Ly.UNKNOWN_ID,this.collectionId,t,rx.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IP(n){var t,r;if(cn(n instanceof er||n instanceof Lr,20012),n instanceof er){if(n instanceof Y8){const i=((r=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:r.map((s=>er.create(n.field,"==",s))))||[];return Lr.create(i,"or")}return n}const e=n.filters.map((i=>IP(i)));return Lr.create(e,n.op)}function yq(n){if(n.getFilters().length===0)return[];const e=SS(IP(n));return cn(DP(e),7391),_S(e)||wS(e)?[e]:e.getFilters()}function _S(n){return n instanceof er}function wS(n){return n instanceof Lr&&r4(n)}function DP(n){return _S(n)||wS(n)||(function(t){if(t instanceof Lr&&dS(t)){for(const r of t.getFilters())if(!_S(r)&&!wS(r))return!1;return!0}return!1})(n)}function SS(n){if(cn(n instanceof er||n instanceof Lr,34018),n instanceof er)return n;if(n.filters.length===1)return SS(n.filters[0]);const e=n.filters.map((r=>SS(r)));let t=Lr.create(e,n.op);return t=Gy(t),DP(t)?t:(cn(t instanceof Lr,64498),cn(Pp(t),40251),cn(t.filters.length>1,57927),t.filters.reduce(((r,i)=>h4(r,i))))}function h4(n,e){let t;return cn(n instanceof er||n instanceof Lr,38388),cn(e instanceof er||e instanceof Lr,25473),t=n instanceof er?e instanceof er?(function(i,s){return Lr.create([i,s],"and")})(n,e):ek(n,e):e instanceof er?ek(e,n):(function(i,s){if(cn(i.filters.length>0&&s.filters.length>0,48005),Pp(i)&&Pp(s))return G8(i,s.getFilters());const a=dS(i)?i:s,o=dS(i)?s:i,c=a.filters.map((u=>h4(u,o)));return Lr.create(c,"or")})(n,e),Gy(t)}function ek(n,e){if(Pp(e))return G8(e,n.getFilters());{const t=e.filters.map((r=>h4(n,r)));return Lr.create(t,"or")}}function Gy(n){if(cn(n instanceof er||n instanceof Lr,11850),n instanceof er)return n;const e=n.getFilters();if(e.length===1)return Gy(e[0]);if(q8(n))return n;const t=e.map((i=>Gy(i))),r=[];return t.forEach((i=>{i instanceof er?r.push(i):i instanceof Lr&&(i.op===n.op?r.push(...i.filters):r.push(i))})),r.length===1?r[0]:Lr.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bq{constructor(){this.Cn=new f4}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ge.resolve()}getCollectionParents(e,t){return Ge.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ge.resolve()}deleteFieldIndex(e,t){return Ge.resolve()}deleteAllFieldIndexes(e){return Ge.resolve()}createTargetIndexes(e,t){return Ge.resolve()}getDocumentsMatchingTarget(e,t){return Ge.resolve(null)}getIndexType(e,t){return Ge.resolve(0)}getFieldIndexes(e,t){return Ge.resolve([])}getNextCollectionGroupToUpdate(e){return Ge.resolve(null)}getMinOffset(e,t){return Ge.resolve(bl.min())}getMinOffsetFromCollectionGroup(e,t){return Ge.resolve(bl.min())}updateCollectionGroup(e,t,r){return Ge.resolve()}updateIndexEntries(e,t){return Ge.resolve()}}class f4{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fr(Sr.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fr(Sr.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk="IndexedDbIndexManager",f2=new Uint8Array(0);class _q{constructor(e,t){this.databaseId=t,this.vn=new f4,this.Fn=new Fh((r=>N0(r)),((r,i)=>Jx(r,i))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const s={collectionId:r,parent:Ha(i)};return nk(e).put(s)}return Ge.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[m8(t),""],!1,!0);return nk(e).J(i).next((s=>{for(const a of s){if(a.collectionId!==t)break;r.push(wu(a.parent))}return r}))}addFieldIndex(e,t){const r=$g(e),i=(function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map((c=>[c.fieldPath.canonicalString(),c.kind]))}})(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=qm(e);return s.next((o=>{a.put($C(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const r=$g(e),i=qm(e),s=Hm(e);return r.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=$g(e),r=Hm(e),i=qm(e);return t.Z().next((()=>r.Z())).next((()=>i.Z()))}createTargetIndexes(e,t){return Ge.forEach(this.Mn(t),(r=>this.getIndexType(e,r).next((i=>{if(i===0||i===1){const s=new ZC(r).Dn();if(s!=null)return this.addFieldIndex(e,s)}}))))}getDocumentsMatchingTarget(e,t){const r=Hm(e);let i=!0;const s=new Map;return Ge.forEach(this.Mn(t),(a=>this.xn(e,a).next((o=>{i&&(i=!!o),s.set(a,o)})))).next((()=>{if(i){let a=zn();const o=[];return Ge.forEach(s,((c,u)=>{Ct(tk,`Using index ${(function(E){return`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map((j=>`${j.fieldPath}:${j.kind}`)).join(",")}`})(c)} to execute ${N0(t)}`);const d=(function(E,j){const F=aS(j);if(F===void 0)return null;for(const z of zy(E,F.fieldPath))switch(z.op){case"array-contains-any":return z.value.arrayValue.values||[];case"array-contains":return[z.value]}return null})(u,c),p=(function(E,j){const F=new Map;for(const z of Kd(j))for(const A of zy(E,z.fieldPath))switch(A.op){case"==":case"in":F.set(z.fieldPath.canonicalString(),A.value);break;case"not-in":case"!=":return F.set(z.fieldPath.canonicalString(),A.value),Array.from(F.values())}return null})(u,c),x=(function(E,j){const F=[];let z=!0;for(const A of Kd(j)){const I=A.kind===0?PC(E,A.fieldPath,E.startAt):jC(E,A.fieldPath,E.startAt);F.push(I.value),z&&(z=I.inclusive)}return new Rp(F,z)})(u,c),v=(function(E,j){const F=[];let z=!0;for(const A of Kd(j)){const I=A.kind===0?jC(E,A.fieldPath,E.endAt):PC(E,A.fieldPath,E.endAt);F.push(I.value),z&&(z=I.inclusive)}return new Rp(F,z)})(u,c),_=this.On(c,u,x),b=this.On(c,u,v),S=this.Nn(c,u,p),T=this.Bn(c.indexId,d,_,x.inclusive,b,v.inclusive,S);return Ge.forEach(T,(k=>r.Y(k,t.limit).next((E=>{E.forEach((j=>{const F=Gt.fromSegments(j.documentKey);a.has(F)||(a=a.add(F),o.push(F))}))}))))})).next((()=>o))}return Ge.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=yq(Lr.create(e.filters,"and")).map((r=>pS(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,r,i,s,a,o){const c=(t!=null?t.length:1)*Math.max(r.length,s.length),u=c/(t!=null?t.length:1),d=[];for(let p=0;p<c;++p){const x=t?this.Ln(t[p/u]):f2,v=this.kn(e,x,r[p%u],i),_=this.qn(e,x,s[p%u],a),b=o.map((S=>this.kn(e,x,S,!0)));d.push(...this.createRange(v,_,b))}return d}kn(e,t,r,i){const s=new n0(e,Gt.empty(),t,r);return i?s:s.An()}qn(e,t,r,i){const s=new n0(e,Gt.empty(),t,r);return i?s.An():s}xn(e,t){const r=new ZC(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((s=>{let a=null;for(const o of s)r.yn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a}))}getIndexType(e,t){let r=2;const i=this.Mn(t);return Ge.forEach(i,(s=>this.xn(e,s).next((a=>{a?r!==0&&a.fields.length<(function(c){let u=new Fr(Di.comparator),d=!1;for(const p of c.filters)for(const x of p.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?d=!0:u=u.add(x.field));for(const p of c.orderBy)p.field.isKeyField()||(u=u.add(p.field));return u.size+(d?1:0)})(s)&&(r=1):r=0})))).next((()=>(function(a){return a.limit!==null})(t)&&i.length>1&&r===2?1:r))}Qn(e,t){const r=new Gg;for(const i of Kd(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Pn(i.kind);t0.Kt.Dt(s,a)}return r.un()}Ln(e){const t=new Gg;return t0.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const r=new Gg;return t0.Kt.Dt(ux(this.databaseId,t),r.Pn((function(s){const a=Kd(s);return a.length===0?0:a[a.length-1].kind})(e))),r.un()}Nn(e,t,r){if(r===null)return[];let i=[];i.push(new Gg);let s=0;for(const a of Kd(e)){const o=r[s++];for(const c of i)if(this.Un(t,a.fieldPath)&&hx(o))i=this.Kn(i,a,o);else{const u=c.Pn(a.kind);t0.Kt.Dt(o,u)}}return this.Wn(i)}On(e,t,r){return this.Nn(e,t,r.position)}Wn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Kn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const c=new Gg;c.seed(o.un()),t0.Kt.Dt(a,c.Pn(t.kind)),s.push(c)}return s}Un(e,t){return!!e.filters.find((r=>r instanceof er&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=$g(e),i=qm(e);return(t?r.J(lS,IDBKeyRange.bound(t,t)):r.J()).next((s=>{const a=[];return Ge.forEach(s,(o=>i.get([o.indexId,this.uid]).next((c=>{a.push((function(d,p){const x=p?new rx(p.sequenceNumber,new bl(k0(p.readTime),new Gt(wu(p.documentKey)),p.largestBatchId)):rx.empty(),v=d.fields.map((([_,b])=>new ty(Di.fromServerFormat(_),b)));return new Ly(d.indexId,d.collectionGroup,v,x)})(o,c))})))).next((()=>a))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:kn(r.collectionGroup,i.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const i=$g(e),s=qm(e);return this.Gn(e).next((a=>i.J(lS,IDBKeyRange.bound(t,t)).next((o=>Ge.forEach(o,(c=>s.put($C(c.indexId,this.uid,a,r))))))))}updateIndexEntries(e,t){const r=new Map;return Ge.forEach(t,((i,s)=>{const a=r.get(i.collectionGroup);return(a?Ge.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next((o=>(r.set(i.collectionGroup,o),Ge.forEach(o,(c=>this.zn(e,i,c).next((u=>{const d=this.jn(s,c);return u.isEqual(d)?Ge.resolve():this.Jn(e,s,c,u,d)})))))))}))}Hn(e,t,r,i){return Hm(e).put(i.Rn(this.uid,this.$n(r,t.key),t.key))}Yn(e,t,r,i){return Hm(e).delete(i.Vn(this.uid,this.$n(r,t.key),t.key))}zn(e,t,r){const i=Hm(e);let s=new Fr(Tf);return i.ee({index:N8,range:IDBKeyRange.only([r.indexId,this.uid,cy(this.$n(r,t))])},((a,o)=>{s=s.add(new n0(r.indexId,t,JC(o.arrayValue),JC(o.directionalValue)))})).next((()=>s))}jn(e,t){let r=new Fr(Tf);const i=this.Qn(t,e);if(i==null)return r;const s=aS(t);if(s!=null){const a=e.data.field(s.fieldPath);if(hx(a))for(const o of a.arrayValue.values||[])r=r.add(new n0(t.indexId,e.key,this.Ln(o),i))}else r=r.add(new n0(t.indexId,e.key,f2,i));return r}Jn(e,t,r,i,s){Ct(tk,"Updating index entries for document '%s'",t.key);const a=[];return(function(c,u,d,p,x){const v=c.getIterator(),_=u.getIterator();let b=zm(v),S=zm(_);for(;b||S;){let T=!1,k=!1;if(b&&S){const E=d(b,S);E<0?k=!0:E>0&&(T=!0)}else b!=null?k=!0:T=!0;T?(p(S),S=zm(_)):k?(x(b),b=zm(v)):(b=zm(v),S=zm(_))}})(i,s,Tf,(o=>{a.push(this.Hn(e,t,r,o))}),(o=>{a.push(this.Yn(e,t,r,o))})),Ge.waitFor(a)}Gn(e){let t=1;return qm(e).ee({index:A8,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,i,s)=>{s.done(),t=i.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((a,o)=>Tf(a,o))).filter(((a,o,c)=>!o||Tf(a,c[o-1])!==0));const i=[];i.push(e);for(const a of r){const o=Tf(a,e),c=Tf(a,t);if(o===0)i[0]=e.An();else if(o>0&&c<0)i.push(a),i.push(a.An());else if(c>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Zn(i[a],i[a+1]))return[];const o=i[a].Vn(this.uid,f2,Gt.empty()),c=i[a+1].Vn(this.uid,f2,Gt.empty());s.push(IDBKeyRange.bound(o,c))}return s}Zn(e,t){return Tf(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(rk)}getMinOffset(e,t){return Ge.mapArray(this.Mn(t),(r=>this.xn(e,r).next((i=>i||en(44426))))).next(rk)}}function nk(n){return Vs(n,ox)}function Hm(n){return Vs(n,N1)}function $g(n){return Vs(n,QT)}function qm(n){return Vs(n,A1)}function rk(n){cn(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;KT(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new bl(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},RP=41943040;class La{static withCacheSize(e){return new La(e,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PP(n,e,t){const r=n.store(Ec),i=n.store(Ap),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const c=r.ee({range:a},((d,p,x)=>(o++,x.delete())));s.push(c.next((()=>{cn(o===1,47070,{batchId:t.batchId})})));const u=[];for(const d of t.mutations){const p=S8(e,d.key.path,t.batchId);s.push(i.delete(p)),u.push(d.key)}return Ge.waitFor(s).next((()=>u))}function $y(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw en(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */La.DEFAULT_COLLECTION_PERCENTILE=10,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,La.DEFAULT=new La(RP,La.DEFAULT_COLLECTION_PERCENTILE,La.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),La.DISABLED=new La(-1,0,0);class qb{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Xn={}}static wt(e,t,r,i){cn(e.uid!=="",64387);const s=e.isAuthenticated()?e.uid:"";return new qb(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ef(e).ee({index:i0,range:r},((i,s,a)=>{t=!1,a.done()})).next((()=>t))}addMutationBatch(e,t,r,i){const s=ip(e),a=Ef(e);return a.add({}).next((o=>{cn(typeof o=="number",49019);const c=new a4(o,t,r,i),u=(function(v,_,b){const S=b.baseMutations.map((k=>qy(v.yt,k))),T=b.mutations.map((k=>qy(v.yt,k)));return{userId:_,batchId:b.batchId,localWriteTimeMs:b.localWriteTime.toMillis(),baseMutations:S,mutations:T}})(this.serializer,this.userId,c),d=[];let p=new Fr(((x,v)=>kn(x.canonicalString(),v.canonicalString())));for(const x of i){const v=S8(this.userId,x.key.path,o);p=p.add(x.key.path.popLast()),d.push(a.put(u)),d.push(s.put(v,ZU))}return p.forEach((x=>{d.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Xn[o]=c.keys()})),Ge.waitFor(d).next((()=>c))}))}lookupMutationBatch(e,t){return Ef(e).get(t).next((r=>r?(cn(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),e0(this.serializer,r)):null))}er(e,t){return this.Xn[t]?Ge.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const i=r.keys();return this.Xn[t]=i,i}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Ef(e).ee({index:i0,range:i},((a,o,c)=>{o.userId===this.userId&&(cn(o.batchId>=r,47524,{tr:r}),s=e0(this.serializer,o)),c.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=l0;return Ef(e).ee({index:i0,range:t,reverse:!0},((i,s,a)=>{r=s.batchId,a.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,l0],[this.userId,Number.POSITIVE_INFINITY]);return Ef(e).J(i0,t).next((r=>r.map((i=>e0(this.serializer,i)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ny(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ip(e).ee({range:i},((a,o,c)=>{const[u,d,p]=a,x=wu(d);if(u===this.userId&&t.path.isEqual(x))return Ef(e).get(p).next((v=>{if(!v)throw en(61480,{nr:a,batchId:p});cn(v.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:v.userId,batchId:p}),s.push(e0(this.serializer,v))}));c.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fr(kn);const i=[];return t.forEach((s=>{const a=ny(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=ip(e).ee({range:o},((u,d,p)=>{const[x,v,_]=u,b=wu(v);x===this.userId&&s.path.isEqual(b)?r=r.add(_):p.done()}));i.push(c)})),Ge.waitFor(i).next((()=>this.rr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=ny(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Fr(kn);return ip(e).ee({range:a},((c,u,d)=>{const[p,x,v]=c,_=wu(x);p===this.userId&&r.isPrefixOf(_)?_.length===i&&(o=o.add(v)):d.done()})).next((()=>this.rr(e,o)))}rr(e,t){const r=[],i=[];return t.forEach((s=>{i.push(Ef(e).get(s).next((a=>{if(a===null)throw en(35274,{batchId:s});cn(a.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:a.userId,batchId:s}),r.push(e0(this.serializer,a))})))})),Ge.waitFor(i).next((()=>r))}removeMutationBatch(e,t){return PP(e.le,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),Ge.forEach(r,(i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Ge.resolve();const r=IDBKeyRange.lowerBound((function(a){return[a]})(this.userId)),i=[];return ip(e).ee({range:r},((s,a,o)=>{if(s[0]===this.userId){const c=wu(s[1]);i.push(c)}else o.done()})).next((()=>{cn(i.length===0,56720,{sr:i.map((s=>s.canonicalString()))})}))}))}containsKey(e,t){return jP(e,this.userId,t)}_r(e){return LP(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:l0,lastStreamToken:""}))}}function jP(n,e,t){const r=ny(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return ip(n).ee({range:s,X:!0},((o,c,u)=>{const[d,p,x]=o;d===e&&p===i&&(a=!0),u.done()})).next((()=>a))}function Ef(n){return Vs(n,Ec)}function ip(n){return Vs(n,Ap)}function LP(n){return Vs(n,sx)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new I0(0)}static cr(){return new I0(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wq{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const r=new I0(t.highestTargetId);return t.highestTargetId=r.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>mn.fromTimestamp(new jr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.lr(e).next((i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.hr(e,i))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((r=>(r.targetCount+=1,this.Tr(t,r),this.hr(e,r))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Wm(e).delete(t.targetId))).next((()=>this.lr(e))).next((r=>(cn(r.targetCount>0,8065),r.targetCount-=1,this.hr(e,r))))}removeTargets(e,t,r){let i=0;const s=[];return Wm(e).ee(((a,o)=>{const c=h1(o);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))})).next((()=>Ge.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Wm(e).ee(((r,i)=>{const s=h1(i);t(s)}))}lr(e){return sk(e).get(Fy).next((t=>(cn(t!==null,2888),t)))}hr(e,t){return sk(e).put(Fy,t)}Pr(e,t){return Wm(e).put(CP(this.serializer,t))}Tr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=N0(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Wm(e).ee({range:i,index:E8},((a,o,c)=>{const u=h1(o);Jx(t,u.target)&&(s=u,c.done())})).next((()=>s))}addMatchingKeys(e,t,r){const i=[],s=Lf(e);return t.forEach((a=>{const o=Ha(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))})),Ge.waitFor(i)}removeMatchingKeys(e,t,r){const i=Lf(e);return Ge.forEach(t,(s=>{const a=Ha(s.path);return Ge.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])}))}removeMatchingKeysForTargetId(e,t){const r=Lf(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Lf(e);let s=zn();return i.ee({range:r,X:!0},((a,o,c)=>{const u=wu(a[1]),d=new Gt(u);s=s.add(d)})).next((()=>s))}containsKey(e,t){const r=Ha(t.path),i=IDBKeyRange.bound([r],[m8(r)],!1,!0);let s=0;return Lf(e).ee({index:XT,X:!0,range:i},(([a,o],c,u)=>{a!==0&&(s++,u.done())})).next((()=>s>0))}At(e,t){return Wm(e).get(t).next((r=>r?h1(r):null))}}function Wm(n){return Vs(n,Np)}function sk(n){return Vs(n,c0)}function Lf(n){return Vs(n,Cp)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="LruGarbageCollector",OP=1048576;function ok([n,e],[t,r]){const i=kn(n,t);return i===0?kn(e,r):i}class Sq{constructor(e){this.Ir=e,this.buffer=new Fr(ok),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ok(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class MP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ct(ak,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){gd(t)?Ct(ak,"Ignoring IndexedDB error during garbage collection: ",t):await pd(t)}await this.Vr(3e5)}))}}class Tq{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return Ge.resolve(Bo.ce);const r=new Sq(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ct("LruGarbageCollector","Garbage collection skipped; disabled"),Ge.resolve(ik)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Ct("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ik):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,s,a,o,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Ct("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,a=Date.now(),this.nthSequenceNumber(e,i)))).next((p=>(r=p,o=Date.now(),this.removeTargets(e,r,t)))).next((p=>(s=p,c=Date.now(),this.removeOrphanedDocuments(e,r)))).next((p=>(u=Date.now(),ep()<=Zn.DEBUG&&Ct("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${p} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),Ge.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p}))))}}function FP(n,e){return new Tq(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eq{constructor(e,t){this.db=e,this.garbageCollector=FP(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((r,i)=>t(i)))}addReference(e,t,r){return d2(e,r)}removeReference(e,t,r){return d2(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return d2(e,t)}br(e,t){return(function(i,s){let a=!1;return LP(i).te((o=>jP(i,o,s).next((c=>(c&&(a=!0),Ge.resolve(!c)))))).next((()=>a))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Sr(e,((a,o)=>{if(o<=t){const c=this.br(e,a).next((u=>{if(!u)return s++,r.getEntry(e,a).next((()=>(r.removeEntry(a,mn.min()),Lf(e).delete((function(p){return[0,Ha(p.path)]})(a)))))}));i.push(c)}})).next((()=>Ge.waitFor(i))).next((()=>r.apply(e))).next((()=>s))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return d2(e,t)}Sr(e,t){const r=Lf(e);let i,s=Bo.ce;return r.ee({index:XT},(([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==Bo.ce&&t(new Gt(wu(i)),s),s=u,i=c):s=Bo.ce})).next((()=>{s!==Bo.ce&&t(new Gt(wu(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function d2(n,e){return Lf(n).put((function(r,i){return{targetId:0,path:Ha(r.path),sequenceNumber:i}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.changes=new Fh((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Ge.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aq{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ud(e).put(r)}removeEntry(e,t,r){return Ud(e).delete((function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Wy(a),o[o.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.Dr(e,r))))}getEntry(e,t){let r=zi.newInvalidDocument(t);return Ud(e).ee({index:ry,range:IDBKeyRange.only(Kg(t))},((i,s)=>{r=this.Cr(t,s)})).next((()=>r))}vr(e,t){let r={size:0,document:zi.newInvalidDocument(t)};return Ud(e).ee({index:ry,range:IDBKeyRange.only(Kg(t))},((i,s)=>{r={document:this.Cr(t,s),size:$y(s)}})).next((()=>r))}getEntries(e,t){let r=gl();return this.Fr(e,t,((i,s)=>{const a=this.Cr(i,s);r=r.insert(i,a)})).next((()=>r))}Mr(e,t){let r=gl(),i=new ii(Gt.comparator);return this.Fr(e,t,((s,a)=>{const o=this.Cr(s,a);r=r.insert(s,o),i=i.insert(s,$y(a))})).next((()=>({documents:r,Or:i})))}Fr(e,t,r){if(t.isEmpty())return Ge.resolve();let i=new Fr(uk);t.forEach((c=>i=i.add(c)));const s=IDBKeyRange.bound(Kg(i.first()),Kg(i.last())),a=i.getIterator();let o=a.getNext();return Ud(e).ee({index:ry,range:s},((c,u,d)=>{const p=Gt.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&uk(o,p)<0;)r(o,null),o=a.getNext();o&&o.isEqual(p)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?d.j(Kg(o)):d.done()})).next((()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null}))}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Wy(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ud(e).J(IDBKeyRange.bound(o,c,!0)).next((u=>{s==null||s.incrementDocumentReadCount(u.length);let d=gl();for(const p of u){const x=this.Cr(Gt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);x.isFoundDocument()&&(Zx(t,x)||i.has(x.key))&&(d=d.insert(x.key,x))}return d}))}getAllFromCollectionGroup(e,t,r,i){let s=gl();const a=ck(t,r),o=ck(t,bl.max());return Ud(e).ee({index:T8,range:IDBKeyRange.bound(a,o,!0)},((c,u,d)=>{const p=this.Cr(Gt.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(p.key,p),s.size===i&&d.done()})).next((()=>s))}newChangeBuffer(e){return new Nq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return lk(e).get(oS).next((t=>(cn(!!t,20021),t)))}Dr(e,t){return lk(e).put(oS,t)}Cr(e,t){if(t){const r=fq(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(mn.min())))return r}return zi.newInvalidDocument(e)}}function VP(n){return new Aq(n)}class Nq extends BP{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new Fh((r=>r.toString()),((r,i)=>r.isEqual(i)))}applyChanges(e){const t=[];let r=0,i=new Fr(((s,a)=>kn(s.canonicalString(),a.canonicalString())));return this.changes.forEach(((s,a)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=WC(this.Nr.serializer,a);i=i.add(s.path.popLast());const u=$y(c);r+=u-o.size,t.push(this.Nr.addEntry(e,s,c))}else if(r-=o.size,this.trackRemovals){const c=WC(this.Nr.serializer,a.convertToNoDocument(mn.min()));t.push(this.Nr.addEntry(e,s,c))}})),i.forEach((s=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,s))})),t.push(this.Nr.updateMetadata(e,r)),Ge.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((r=>(this.Br.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:r,Or:i})=>(i.forEach(((s,a)=>{this.Br.set(s,{size:a,readTime:r.get(s).readTime})})),r)))}}function lk(n){return Vs(n,ax)}function Ud(n){return Vs(n,My)}function Kg(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ck(n,e){const t=e.documentKey.path.toArray();return[n,Wy(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uk(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=kn(t[s],r[s]),i)return i;return i=kn(t.length,r.length),i||(i=kn(t[t.length-2],r[r.length-2]),i||kn(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cq{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&D1(r.mutation,i,Vo.empty(),jr.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,zn()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=zn()){const i=Su();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((s=>{let a=c1();return s.forEach(((o,c)=>{a=a.insert(o,c.overlayedDocument)})),a}))))}getOverlayedDocuments(e,t){const r=Su();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,zn())))}populateOverlays(e,t,r){const i=[];return r.forEach((s=>{t.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((a,o)=>{t.set(a,o)}))}))}computeViews(e,t,r,i){let s=gl();const a=I1(),o=(function(){return I1()})();return t.forEach(((c,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Bh)?s=s.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),D1(d.mutation,u,d.mutation.getFieldMask(),jr.now())):a.set(u.key,Vo.empty())})),this.recalculateAndSaveOverlays(e,s).next((c=>(c.forEach(((u,d)=>a.set(u,d))),t.forEach(((u,d)=>o.set(u,new Cq(d,a.get(u)??null)))),o)))}recalculateAndSaveOverlays(e,t){const r=I1();let i=new ii(((a,o)=>a-o)),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((a=>{for(const o of a)o.keys().forEach((c=>{const u=t.get(c);if(u===null)return;let d=r.get(c)||Vo.empty();d=o.applyToLocalView(u,d),r.set(c,d);const p=(i.get(o.batchId)||zn()).add(c);i=i.insert(o.batchId,p)}))})).next((()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,d=c.value,p=rP();d.forEach((x=>{if(!s.has(x)){const v=uP(t.get(x),r.get(x));v!==null&&p.set(x,v),s=s.add(x)}})),a.push(this.documentOverlayCache.saveOverlays(e,u,p))}return Ge.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(a){return Gt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Q8(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Ge.resolve(Su());let o=Ep,c=s;return a.next((u=>Ge.forEach(u,((d,p)=>(o<p.largestBatchId&&(o=p.largestBatchId),s.get(d)?Ge.resolve():this.remoteDocumentCache.getEntry(e,d).next((x=>{c=c.insert(d,x)}))))).next((()=>this.populateOverlays(e,u,s))).next((()=>this.computeViews(e,c,u,zn()))).next((d=>({batchId:o,changes:nP(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Gt(t)).next((r=>{let i=c1();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=c1();return this.indexManager.getCollectionParents(e,s).next((o=>Ge.forEach(o,(c=>{const u=(function(p,x){return new Zp(x,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next((d=>{d.forEach(((p,x)=>{a=a.insert(p,x)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i)))).next((a=>{s.forEach(((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,zi.newInvalidDocument(d)))}));let o=c1();return a.forEach(((c,u)=>{const d=s.get(c);d!==void 0&&D1(d.mutation,u,Vo.empty(),jr.now()),Zx(t,u)&&(o=o.insert(c,u))})),o}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kq{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ge.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:uo(i.createTime)}})(t)),Ge.resolve()}getNamedQuery(e,t){return Ge.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:kP(i.bundledQuery),readTime:uo(i.readTime)}})(t)),Ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iq{constructor(){this.overlays=new ii(Gt.comparator),this.qr=new Map}getOverlay(e,t){return Ge.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Su();return Ge.forEach(t,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,s)=>{this.St(e,t,s)})),Ge.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.qr.delete(r)),Ge.resolve()}getOverlaysForCollection(e,t,r){const i=Su(),s=t.length+1,a=new Gt(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Ge.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ii(((u,d)=>u-d));const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=s.get(u.largestBatchId);d===null&&(d=Su(),s=s.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const o=Su(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((u,d)=>o.set(u,d))),!(o.size()>=i)););return Ge.resolve(o)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new l4(t,r));let s=this.qr.get(t);s===void 0&&(s=zn(),this.qr.set(t,s)),this.qr.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dq{constructor(){this.sessionToken=is.EMPTY_BYTE_STRING}getSessionToken(e){return Ge.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.Qr=new Fr(Ys.$r),this.Ur=new Fr(Ys.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new Ys(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new Ys(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Gt(new Sr([])),r=new Ys(t,e),i=new Ys(t,e+1),s=[];return this.Ur.forEachInRange([r,i],(a=>{this.Gr(a),s.push(a.key)})),s}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Gt(new Sr([])),r=new Ys(t,e),i=new Ys(t,e+1);let s=zn();return this.Ur.forEachInRange([r,i],(a=>{s=s.add(a.key)})),s}containsKey(e){const t=new Ys(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ys{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Gt.comparator(e.key,t.key)||kn(e.Yr,t.Yr)}static Kr(e,t){return kn(e.Yr,t.Yr)||Gt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rq{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Fr(Ys.$r)}checkEmpty(e){return Ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new a4(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.Zr=this.Zr.add(new Ys(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ge.resolve(a)}lookupMutationBatch(e,t){return Ge.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),s=i<0?0:i;return Ge.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ge.resolve(this.mutationQueue.length===0?l0:this.tr-1)}getAllMutationBatches(e){return Ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ys(t,0),i=new Ys(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],(a=>{const o=this.Xr(a.Yr);s.push(o)})),Ge.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fr(kn);return t.forEach((i=>{const s=new Ys(i,0),a=new Ys(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,a],(o=>{r=r.add(o.Yr)}))})),Ge.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;Gt.isDocumentKey(s)||(s=s.child(""));const a=new Ys(new Gt(s),0);let o=new Fr(kn);return this.Zr.forEachWhile((c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.Yr)),!0)}),a),Ge.resolve(this.ti(o))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){cn(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return Ge.forEach(t.mutations,(i=>{const s=new Ys(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new Ys(t,0),i=this.Zr.firstAfterOrEqual(r);return Ge.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ge.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pq{constructor(e){this.ri=e,this.docs=(function(){return new ii(Gt.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ge.resolve(r?r.document.mutableCopy():zi.newInvalidDocument(t))}getEntries(e,t){let r=gl();return t.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():zi.newInvalidDocument(i))})),Ge.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=gl();const a=t.path,o=new Gt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||KT(v8(d),r)<=0||(i.has(d.key)||Zx(t,d))&&(s=s.insert(d.key,d.mutableCopy()))}return Ge.resolve(s)}getAllFromCollectionGroup(e,t,r,i){en(9500)}ii(e,t){return Ge.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new jq(this)}getSize(e){return Ge.resolve(this.size)}}class jq extends BP{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),Ge.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lq{constructor(e){this.persistence=e,this.si=new Fh((t=>N0(t)),Jx),this.lastRemoteSnapshotVersion=mn.min(),this.highestTargetId=0,this.oi=0,this._i=new d4,this.targetCount=0,this.ai=I0.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),Ge.resolve()}getLastRemoteSnapshotVersion(e){return Ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ge.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ge.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),Ge.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new I0(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ge.resolve()}updateTargetData(e,t){return this.Pr(t),Ge.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ge.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.si.forEach(((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.si.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),Ge.waitFor(s).next((()=>i))}getTargetCount(e){return Ge.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return Ge.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),Ge.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((a=>{s.push(i.markPotentiallyOrphaned(e,a))})),Ge.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ge.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return Ge.resolve(r)}containsKey(e,t){return Ge.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bo(0),this.li=!1,this.li=!0,this.hi=new Dq,this.referenceDelegate=e(this),this.Pi=new Lq(this),this.indexManager=new bq,this.remoteDocumentCache=(function(i){return new Pq(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new NP(t),this.Ii=new kq(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Iq,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new Rq(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ct("MemoryPersistence","Starting transaction:",e);const i=new Oq(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((s=>this.referenceDelegate.di(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ai(e,t){return Ge.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class Oq extends b8{constructor(e){super(),this.currentSequenceNumber=e}}class Wb{constructor(e){this.persistence=e,this.Ri=new d4,this.Vi=null}static mi(e){return new Wb(e)}get fi(){if(this.Vi)return this.Vi;throw en(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),Ge.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),Ge.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ge.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((s=>this.fi.add(s.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ge.forEach(this.fi,(r=>{const i=Gt.fromPath(r);return this.gi(e,i).next((s=>{s||t.removeEntry(i,mn.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return Ge.or([()=>Ge.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ky{constructor(e,t){this.persistence=e,this.pi=new Fh((r=>Ha(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=FP(this,t)}static mi(e,t){return new Ky(e,t)}Ei(){}di(e){return Ge.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return Ge.forEach(this.pi,((r,i)=>this.br(e,r,i).next((s=>s?Ge.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,(a=>this.br(e,a,t).next((o=>{o||(r++,s.removeEntry(a,mn.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ge.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Ge.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),Ge.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ge.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sy(e.data.value)),t}br(e,t,r){return Ge.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return Ge.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mq{constructor(e){this.serializer=e}k(e,t,r,i){const s=new Rb("createOrUpgrade",t);r<1&&i>=1&&((function(c){c.createObjectStore(Qx)})(e),(function(c){c.createObjectStore(sx,{keyPath:JU}),c.createObjectStore(Ec,{keyPath:_C,autoIncrement:!0}).createIndex(i0,wC,{unique:!0}),c.createObjectStore(Ap)})(e),hk(e),(function(c){c.createObjectStore(Yd)})(e));let a=Ge.resolve();return r<3&&i>=3&&(r!==0&&((function(c){c.deleteObjectStore(Cp),c.deleteObjectStore(Np),c.deleteObjectStore(c0)})(e),hk(e)),a=a.next((()=>(function(c){const u=c.store(c0),d={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mn.min().toTimestamp(),targetCount:0};return u.put(Fy,d)})(s)))),r<4&&i>=4&&(r!==0&&(a=a.next((()=>(function(c,u){return u.store(Ec).J().next((p=>{c.deleteObjectStore(Ec),c.createObjectStore(Ec,{keyPath:_C,autoIncrement:!0}).createIndex(i0,wC,{unique:!0});const x=u.store(Ec),v=p.map((_=>x.put(_)));return Ge.waitFor(v)}))})(e,s)))),a=a.next((()=>{(function(c){c.createObjectStore(kp,{keyPath:oH})})(e)}))),r<5&&i>=5&&(a=a.next((()=>this.yi(s)))),r<6&&i>=6&&(a=a.next((()=>((function(c){c.createObjectStore(ax)})(e),this.wi(s))))),r<7&&i>=7&&(a=a.next((()=>this.Si(s)))),r<8&&i>=8&&(a=a.next((()=>this.bi(e,s)))),r<9&&i>=9&&(a=a.next((()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&i>=10&&(a=a.next((()=>this.Di(s)))),r<11&&i>=11&&(a=a.next((()=>{(function(c){c.createObjectStore(jb,{keyPath:lH})})(e),(function(c){c.createObjectStore(Lb,{keyPath:cH})})(e)}))),r<12&&i>=12&&(a=a.next((()=>{(function(c){const u=c.createObjectStore(Ob,{keyPath:gH});u.createIndex(cS,xH,{unique:!1}),u.createIndex(C8,vH,{unique:!1})})(e)}))),r<13&&i>=13&&(a=a.next((()=>(function(c){const u=c.createObjectStore(My,{keyPath:eH});u.createIndex(ry,tH),u.createIndex(T8,nH)})(e))).next((()=>this.Ci(e,s))).next((()=>e.deleteObjectStore(Yd)))),r<14&&i>=14&&(a=a.next((()=>this.Fi(e,s)))),r<15&&i>=15&&(a=a.next((()=>(function(c){c.createObjectStore(QT,{keyPath:uH,autoIncrement:!0}).createIndex(lS,hH,{unique:!1}),c.createObjectStore(A1,{keyPath:fH}).createIndex(A8,dH,{unique:!1}),c.createObjectStore(N1,{keyPath:mH}).createIndex(N8,pH,{unique:!1})})(e)))),r<16&&i>=16&&(a=a.next((()=>{t.objectStore(A1).clear()})).next((()=>{t.objectStore(N1).clear()}))),r<17&&i>=17&&(a=a.next((()=>{(function(c){c.createObjectStore(JT,{keyPath:yH})})(e)}))),r<18&&i>=18&&_R()&&(a=a.next((()=>{t.objectStore(A1).clear()})).next((()=>{t.objectStore(N1).clear()}))),a}wi(e){let t=0;return e.store(Yd).ee(((r,i)=>{t+=$y(i)})).next((()=>{const r={byteSize:t};return e.store(ax).put(oS,r)}))}yi(e){const t=e.store(sx),r=e.store(Ec);return t.J().next((i=>Ge.forEach(i,(s=>{const a=IDBKeyRange.bound([s.userId,l0],[s.userId,s.lastAcknowledgedBatchId]);return r.J(i0,a).next((o=>Ge.forEach(o,(c=>{cn(c.userId===s.userId,18650,"Cannot process batch from unexpected user",{batchId:c.batchId});const u=e0(this.serializer,c);return PP(e,s.userId,u).next((()=>{}))}))))}))))}Si(e){const t=e.store(Cp),r=e.store(Yd);return e.store(c0).get(Fy).next((i=>{const s=[];return r.ee(((a,o)=>{const c=new Sr(a),u=(function(p){return[0,Ha(p)]})(c);s.push(t.get(u).next((d=>d?Ge.resolve():(p=>t.put({targetId:0,path:Ha(p),sequenceNumber:i.highestListenSequenceNumber}))(c))))})).next((()=>Ge.waitFor(s)))}))}bi(e,t){e.createObjectStore(ox,{keyPath:aH});const r=t.store(ox),i=new f4,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return r.put({collectionId:o,parent:Ha(c)})}};return t.store(Yd).ee({X:!0},((a,o)=>{const c=new Sr(a);return s(c.popLast())})).next((()=>t.store(Ap).ee({X:!0},(([a,o,c],u)=>{const d=wu(o);return s(d.popLast())}))))}Di(e){const t=e.store(Np);return t.ee(((r,i)=>{const s=h1(i),a=CP(this.serializer,s);return t.put(a)}))}Ci(e,t){const r=t.store(Yd),i=[];return r.ee(((s,a)=>{const o=t.store(My),c=(function(p){return p.document?new Gt(Sr.fromString(p.document.name).popFirst(5)):p.noDocument?Gt.fromSegments(p.noDocument.path):p.unknownDocument?Gt.fromSegments(p.unknownDocument.path):en(36783)})(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))})).next((()=>Ge.waitFor(i)))}Fi(e,t){const r=t.store(Ec),i=VP(this.serializer),s=new m4(Wb.mi,this.serializer.yt);return r.J().next((a=>{const o=new Map;return a.forEach((c=>{let u=o.get(c.userId)??zn();e0(this.serializer,c).keys().forEach((d=>u=u.add(d))),o.set(c.userId,u)})),Ge.forEach(o,((c,u)=>{const d=new ja(u),p=Hb.wt(this.serializer,d),x=s.getIndexManager(d),v=qb.wt(d,this.serializer,x,s.referenceDelegate);return new zP(i,v,p,x).recalculateAndSaveOverlaysForDocumentKeys(new uS(t,Bo.ce),c).next()}))}))}}function hk(n){n.createObjectStore(Cp,{keyPath:iH}).createIndex(XT,sH,{unique:!0}),n.createObjectStore(Np,{keyPath:"targetId"}).createIndex(E8,rH,{unique:!0}),n.createObjectStore(c0)}const Af="IndexedDbPersistence",Qw=18e5,Jw=5e3,Zw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Fq="main";class p4{constructor(e,t,r,i,s,a,o,c,u,d,p=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Mi=s,this.window=a,this.document=o,this.xi=u,this.Oi=d,this.Ni=p,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=x=>Promise.resolve(),!p4.v())throw new Mt(ot.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Eq(this,i),this.$i=t+Fq,this.serializer=new NP(c),this.Ui=new Qf(this.$i,this.Ni,new Mq(this.serializer)),this.hi=new mq,this.Pi=new wq(this.referenceDelegate,this.serializer),this.remoteDocumentCache=VP(this.serializer),this.Ii=new dq,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,d===!1&&es(Af,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Mt(ot.FAILED_PRECONDITION,Zw);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new Bo(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>m2(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(gd(e))return Ct(Af,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ct(Af,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Yg(e).get(Vm).next((t=>Ge.resolve(this.es(t))))}ts(e){return m2(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Qw)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Vs(t,kp);return r.J().next((i=>{const s=this.ss(i,Qw),a=i.filter((o=>s.indexOf(o)===-1));return Ge.forEach(a,(o=>r.delete(o.clientId))).next((()=>a))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Ge.resolve(!0):Yg(e).get(Vm).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Jw)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new Mt(ot.FAILED_PRECONDITION,Zw);return!1}}return!(!this.networkEnabled||!this.inForeground)||m2(e).J().next((r=>this.ss(r,Jw).find((i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&Ct(Af,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Qx,kp],(e=>{const t=new uS(e,Bo.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((r=>this.rs(r.updateTimeMs,t)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>m2(e).J().next((t=>this.ss(t,Qw).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return qb.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new _q(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Hb.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,r){Ct(Af,"Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=(function(c){return c===18?wH:c===17?R8:c===16?_H:c===15?ZT:c===14?D8:c===13?I8:c===12?bH:c===11?k8:void en(60245)})(this.Ni);let a;return this.Ui.runTransaction(e,i,s,(o=>(a=new uS(o,this.ci?this.ci.next():Bo.ce),t==="readwrite-primary"?this.Hi(a).next((c=>!!c||this.Yi(a))).next((c=>{if(!c)throw es(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new Mt(ot.FAILED_PRECONDITION,y8);return r(a)})).next((c=>this.Xi(a).next((()=>c)))):this.Is(a).next((()=>r(a)))))).then((o=>(a.raiseOnCommittedEvent(),o)))}Is(e){return Yg(e).get(Vm).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Jw)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Mt(ot.FAILED_PRECONDITION,Zw)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Yg(e).put(Vm,t)}static v(){return Qf.v()}Zi(e){const t=Yg(e);return t.get(Vm).next((r=>this.es(r)?(Ct(Af,"Releasing primary lease."),t.delete(Vm)):Ge.resolve()))}rs(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(es(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const t=/(?:Version|Mobile)\/1[456]/;bR()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){var t;try{const r=((t=this.Ki)==null?void 0:t.getItem(this._s(e)))!==null;return Ct(Af,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return es(Af,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){es("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Yg(n){return Vs(n,Qx)}function m2(n){return Vs(n,kp)}function UP(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=zn(),i=zn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new g4(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bq{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return bR()?8:_8(Fs())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ys(e,t).next((a=>{s.result=a})).next((()=>{if(!s.result)return this.ws(e,t,i,r).next((a=>{s.result=a}))})).next((()=>{if(s.result)return;const a=new Bq;return this.Ss(e,t,a).next((o=>{if(s.result=o,this.Vs)return this.bs(e,t,a,o.size)}))})).next((()=>s.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(ep()<=Zn.DEBUG&&Ct("QueryEngine","SDK will not create cache indexes for query:",tp(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ge.resolve()):(ep()<=Zn.DEBUG&&Ct("QueryEngine","Query:",tp(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(ep()<=Zn.DEBUG&&Ct("QueryEngine","The SDK decides to create cache indexes for query:",tp(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yl(t))):Ge.resolve())}ys(e,t){if(LC(t))return Ge.resolve(null);let r=yl(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=Uy(t,null,"F"),r=yl(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const a=zn(...s);return this.ps.getDocuments(e,a).next((o=>this.indexManager.getMinOffset(e,r).next((c=>{const u=this.Ds(t,o);return this.Cs(t,u,a,c.readTime)?this.ys(e,Uy(t,null,"F")):this.vs(e,u,t,c)}))))})))))}ws(e,t,r,i){return LC(t)||i.isEqual(mn.min())?Ge.resolve(null):this.ps.getDocuments(e,r).next((s=>{const a=this.Ds(t,s);return this.Cs(t,a,r,i)?Ge.resolve(null):(ep()<=Zn.DEBUG&&Ct("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),tp(t)),this.vs(e,a,t,x8(i,Ep)).next((o=>o)))}))}Ds(e,t){let r=new Fr(eP(e));return t.forEach(((i,s)=>{Zx(e,s)&&(r=r.add(s))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,t,r){return ep()<=Zn.DEBUG&&Ct("QueryEngine","Using full collection scan to execute query:",tp(t)),this.ps.getDocumentsMatchingQuery(e,t,bl.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((s=>(t.forEach((a=>{s=s.insert(a.key,a)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x4="LocalStore",Vq=3e8;class zq{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new ii(kn),this.xs=new Fh((s=>N0(s)),Jx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new zP(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function qP(n,e,t,r){return new zq(n,e,t,r)}async function WP(n,e){const t=an(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((s=>{const a=[],o=[];let c=zn();for(const u of i){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next((u=>({Ls:u,removedBatchIds:a,addedBatchIds:o})))}))}))}function Uq(n,e){const t=an(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(o,c,u,d){const p=u.batch,x=p.keys();let v=Ge.resolve();return x.forEach((_=>{v=v.next((()=>d.getEntry(c,_))).next((b=>{const S=u.docVersions.get(_);cn(S!==null,48541),b.version.compareTo(S)<0&&(p.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),d.addEntry(b)))}))})),v.next((()=>o.mutationQueue.removeMutationBatch(c,p)))})(t,r,e,s).next((()=>s.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(o){let c=zn();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function GP(n){const e=an(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function Hq(n,e){const t=an(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const a=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const o=[];e.targetChanges.forEach(((d,p)=>{const x=i.get(p);if(!x)return;o.push(t.Pi.removeMatchingKeys(s,d.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(s,d.addedDocuments,p))));let v=x.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(is.EMPTY_BYTE_STRING,mn.min()).withLastLimboFreeSnapshotVersion(mn.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),i=i.insert(p,v),(function(b,S,T){return b.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=Vq?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0})(x,v,d)&&o.push(t.Pi.updateTargetData(s,v))}));let c=gl(),u=zn();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,d))})),o.push(qq(s,a,e.documentUpdates).next((d=>{c=d.ks,u=d.qs}))),!r.isEqual(mn.min())){const d=t.Pi.getLastRemoteSnapshotVersion(s).next((p=>t.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r)));o.push(d)}return Ge.waitFor(o).next((()=>a.apply(s))).next((()=>t.localDocuments.getLocalViewOfDocuments(s,c,u))).next((()=>c))})).then((s=>(t.Ms=i,s)))}function qq(n,e,t){let r=zn(),i=zn();return t.forEach((s=>r=r.add(s))),e.getEntries(n,r).next((s=>{let a=gl();return t.forEach(((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(mn.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Ct(x4,"Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)})),{ks:a,qs:i}}))}function Wq(n,e){const t=an(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=l0),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Yy(n,e){const t=an(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((s=>s?(i=s,Ge.resolve(i)):t.Pi.allocateTargetId(r).next((a=>(i=new wh(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Fp(n,e,t){const r=an(n),i=r.Ms.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,(a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!gd(a))throw a;Ct(x4,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function TS(n,e,t){const r=an(n);let i=mn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,u,d){const p=an(c),x=p.xs.get(d);return x!==void 0?Ge.resolve(p.Ms.get(x)):p.Pi.getTargetData(u,d)})(r,a,yl(e)).next((o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,o.targetId).next((c=>{s=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,e,t?i:mn.min(),t?s:zn()))).next((o=>(YP(r,Z8(e),o),{documents:o,Qs:s})))))}function $P(n,e){const t=an(n),r=an(t.Pi),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",(s=>r.At(s,e).next((a=>a?a.target:null))))}function KP(n,e){const t=an(n),r=t.Os.get(e)||mn.min();return t.persistence.runTransaction("Get new document changes","readonly",(i=>t.Ns.getAllFromCollectionGroup(i,e,x8(r,Ep),Number.MAX_SAFE_INTEGER))).then((i=>(YP(t,e,i),i)))}function YP(n,e,t){let r=n.Os.get(e)||mn.min();t.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),n.Os.set(e,r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP="firestore_clients";function fk(n,e){return`${XP}_${n}_${e}`}const QP="firestore_mutations";function dk(n,e,t){let r=`${QP}_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const JP="firestore_targets";function e5(n,e){return`${JP}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u="SharedClientState";class Xy{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Ws(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Mt(i.error.code,i.error.message))),a?new Xy(e,t,i.state,s):(es(_u,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class R1{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ws(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Mt(r.error.code,r.error.message))),s?new R1(e,r.state,i):(es(_u,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Qy{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=i4();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=w8(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new Qy(e,s):(es(_u,`Failed to parse client data for instance '${e}': ${t}`),null)}}class v4{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new v4(t.clientId,t.onlineState):(es(_u,`Failed to parse online state: ${e}`),null)}}class ES{constructor(){this.activeTargetIds=i4()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class t5{constructor(e,t,r,i,s){this.window=e,this.Mi=t,this.persistenceKey=r,this.Js=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new ii(kn),this.started=!1,this.Xs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=fk(this.persistenceKey,this.Js),this.no=(function(c){return`firestore_sequence_number_${c}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new ES),this.ro=new RegExp(`^${XP}_${a}_([^_]*)$`),this.io=new RegExp(`^${QP}_${a}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${JP}_${a}_(\\d+)$`),this.oo=(function(c){return`firestore_online_state_${c}`})(this.persistenceKey),this._o=(function(c){return`firestore_bundle_loaded_v2_${c}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const r of e){if(r===this.Js)continue;const i=this.getItem(fk(this.persistenceKey,r));if(i){const s=Qy.Ws(r,i);s&&(this.Zs=this.Zs.insert(s.clientId,s))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const r=this.uo(t);r&&this.co(r)}for(const r of this.Xs)this.Ys(r);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,r){this.ho(e,t,r),this.Po(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(e5(this.persistenceKey,e));if(i){const s=R1.Ws(e,i);s&&(r=s.state)}}return t&&this.To.zs(e),this.ao(),r}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(e5(this.persistenceKey,e))}updateQueryState(e,t,r){this.Io(e,t,r)}handleUserChange(e,t,r){t.forEach((i=>{this.Po(i)})),this.currentUser=e,r.forEach((i=>{this.addPendingMutation(i)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ct(_u,"READ",e,t),t}setItem(e,t){Ct(_u,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ct(_u,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(Ct(_u,"EVENT",t.key,t.newValue),t.key===this.eo)return void es("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const r=this.Ro(t.key);return this.Vo(r,null)}{const r=this.mo(t.key,t.newValue);if(r)return this.Vo(r.clientId,r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.fo(t.key,t.newValue);if(r)return this.po(r)}}else if(this.so.test(t.key)){if(t.newValue!==null){const r=this.yo(t.key,t.newValue);if(r)return this.wo(r)}}else if(t.key===this.oo){if(t.newValue!==null){const r=this.uo(t.newValue);if(r)return this.co(r)}}else if(t.key===this.no){const r=(function(s){let a=Bo.ce;if(s!=null)try{const o=JSON.parse(s);cn(typeof o=="number",30636,{So:s}),a=o}catch(o){es(_u,"Failed to read sequence number from WebStorage",o)}return a})(t.newValue);r!==Bo.ce&&this.sequenceNumberHandler(r)}else if(t.key===this._o){const r=this.bo(t.newValue);await Promise.all(r.map((i=>this.syncEngine.Do(i))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,r){const i=new Xy(this.currentUser,e,t,r),s=dk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Gs())}Po(e){const t=dk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,r){const i=e5(this.persistenceKey,e),s=new R1(e,t,r);this.setItem(i,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const r=this.Ro(e);return Qy.Ws(r,t)}fo(e,t){const r=this.io.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Xy.Ws(new ja(s),i,t)}yo(e,t){const r=this.so.exec(e),i=Number(r[1]);return R1.Ws(i,t)}uo(e){return v4.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);Ct(_u,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const r=t?this.Zs.insert(e,t):this.Zs.remove(e),i=this.lo(this.Zs),s=this.lo(r),a=[],o=[];return s.forEach((c=>{i.has(c)||a.push(c)})),i.forEach((c=>{s.has(c)||o.push(c)})),this.syncEngine.Fo(a,o).then((()=>{this.Zs=r}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=i4();return e.forEach(((r,i)=>{t=t.unionWith(i.activeTargetIds)})),t}}class ZP{constructor(){this.Mo=new ES,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new ES,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gq{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk="ConnectivityMonitor";class pk{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ct(mk,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ct(mk,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p2=null;function AS(){return p2===null?p2=(function(){return 268435456+Math.round(2147483648*Math.random())})():p2++,"0x"+p2.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5="RestConnection",$q={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Kq{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===By?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,s){const a=AS(),o=this.zo(e,t.toUriEncodedString());Ct(n5,`Sending RPC '${e}' ${a}:`,o,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,i,s);const{host:u}=new URL(o),d=dd(u);return this.Jo(e,o,c,r,d).then((p=>(Ct(n5,`Received RPC '${e}' ${a}: `,p),p)),(p=>{throw nx(n5,`RPC '${e}' ${a} failed with error: `,p,"url: ",o,"request:",r),p}))}Ho(e,t,r,i,s,a){return this.Go(e,t,r,i,s)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Jp})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}zo(e,t){const r=$q[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yq{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="WebChannelConnection";class Xq extends Kq{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,s){const a=AS();return new Promise(((o,c)=>{const u=new l8;u.setWithCredentials(!0),u.listenOnce(c8.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case ey.NO_ERROR:const p=u.getResponseJson();Ct(Na,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(p)),o(p);break;case ey.TIMEOUT:Ct(Na,`RPC '${e}' ${a} timed out`),c(new Mt(ot.DEADLINE_EXCEEDED,"Request time out"));break;case ey.HTTP_ERROR:const x=u.getStatus();if(Ct(Na,`RPC '${e}' ${a} failed with status:`,x,"response text:",u.getResponseText()),x>0){let v=u.getResponseJson();Array.isArray(v)&&(v=v[0]);const _=v==null?void 0:v.error;if(_&&_.status&&_.message){const b=(function(T){const k=T.toLowerCase().replace(/_/g,"-");return Object.values(ot).indexOf(k)>=0?k:ot.UNKNOWN})(_.status);c(new Mt(b,_.message))}else c(new Mt(ot.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Mt(ot.UNAVAILABLE,"Connection failed."));break;default:en(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ct(Na,`RPC '${e}' ${a} completed.`)}}));const d=JSON.stringify(i);Ct(Na,`RPC '${e}' ${a} sending request:`,i),u.send(t,"POST",d,r,15)}))}T_(e,t,r){const i=AS(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=f8(),o=h8(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=s.join("");Ct(Na,`Creating RPC '${e}' stream ${i}: ${d}`,c);const p=a.createWebChannel(d,c);this.I_(p);let x=!1,v=!1;const _=new Yq({Yo:S=>{v?Ct(Na,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(x||(Ct(Na,`Opening RPC '${e}' stream ${i} transport.`),p.open(),x=!0),Ct(Na,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),b=(S,T,k)=>{S.listen(T,(E=>{try{k(E)}catch(j){setTimeout((()=>{throw j}),0)}}))};return b(p,l1.EventType.OPEN,(()=>{v||(Ct(Na,`RPC '${e}' stream ${i} transport opened.`),_.o_())})),b(p,l1.EventType.CLOSE,(()=>{v||(v=!0,Ct(Na,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(p))})),b(p,l1.EventType.ERROR,(S=>{v||(v=!0,nx(Na,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),_.a_(new Mt(ot.UNAVAILABLE,"The operation could not be completed")))})),b(p,l1.EventType.MESSAGE,(S=>{var T;if(!v){const k=S.data[0];cn(!!k,16349);const E=k,j=(E==null?void 0:E.error)||((T=E[0])==null?void 0:T.error);if(j){Ct(Na,`RPC '${e}' stream ${i} received error:`,j);const F=j.status;let z=(function(O){const B=vs[O];if(B!==void 0)return dP(B)})(F),A=j.message;z===void 0&&(z=ot.INTERNAL,A="Unknown error status: "+F+" with message "+j.message),v=!0,_.a_(new Mt(z,A)),p.close()}else Ct(Na,`RPC '${e}' stream ${i} received:`,k),_.u_(k)}})),b(o,u8.STAT_EVENT,(S=>{S.stat===iS.PROXY?Ct(Na,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===iS.NOPROXY&&Ct(Na,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{_.__()}),0),_}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(){return typeof window<"u"?window:null}function uy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gb(n){return new nq(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tj{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Ct("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="PersistentStream";class nj{constructor(e,t,r,i,s,a,o,c){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new tj(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ot.RESOURCE_EXHAUSTED?(es(t.toString()),es("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ot.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new Mt(ot.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ct(gk,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Ct(gk,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Qq extends nj{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=sq(this.serializer,e),r=(function(s){if(!("targetChange"in s))return mn.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?mn.min():a.readTime?uo(a.readTime):mn.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=yS(this.serializer),t.addTarget=(function(s,a){let o;const c=a.target;if(o=Vy(c)?{documents:_P(s,c)}:{query:wP(s,c).ft},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=gP(s,a.resumeToken);const u=xS(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(mn.min())>0){o.readTime=Mp(s,a.snapshotVersion.toTimestamp());const u=xS(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o})(this.serializer,e);const r=oq(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=yS(this.serializer),t.removeTarget=e,this.q_(t)}}class Jq extends nj{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return cn(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,cn(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){cn(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=aq(e.writeResults,e.commitTime),r=uo(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=yS(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>qy(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zq{}class eW extends Zq{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Mt(ot.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,a])=>this.connection.Go(e,vS(t,r),i,s,a))).catch((s=>{throw s.name==="FirebaseError"?(s.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Mt(ot.UNKNOWN,s.toString())}))}Ho(e,t,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,o])=>this.connection.Ho(e,vS(t,r),i,a,o,s))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ot.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Mt(ot.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class tW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(es(t),this.aa=!1):Ct("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="RemoteStore";class nW{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{K0(this)&&(Ct(D0,"Restarting streams for network reachability change."),await(async function(c){const u=an(c);u.Ea.add(4),await rv(u),u.Ra.set("Unknown"),u.Ea.delete(4),await $b(u)})(this))}))})),this.Ra=new tW(r,i)}}async function $b(n){if(K0(n))for(const e of n.da)await e(!0)}async function rv(n){for(const e of n.da)await e(!1)}function Kb(n,e){const t=an(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),_4(t)?b4(t):ng(t).O_()&&y4(t,e))}function Bp(n,e){const t=an(n),r=ng(t);t.Ia.delete(e),r.O_()&&rj(t,e),t.Ia.size===0&&(r.O_()?r.L_():K0(t)&&t.Ra.set("Unknown"))}function y4(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(mn.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ng(n).Y_(e)}function rj(n,e){n.Va.Ue(e),ng(n).Z_(e)}function b4(n){n.Va=new JH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ng(n).start(),n.Ra.ua()}function _4(n){return K0(n)&&!ng(n).x_()&&n.Ia.size>0}function K0(n){return an(n).Ea.size===0}function ij(n){n.Va=void 0}async function rW(n){n.Ra.set("Online")}async function iW(n){n.Ia.forEach(((e,t)=>{y4(n,e)}))}async function sW(n,e){ij(n),_4(n)?(n.Ra.ha(e),b4(n)):n.Ra.set("Unknown")}async function aW(n,e,t){if(n.Ra.set("Online"),e instanceof pP&&e.state===2&&e.cause)try{await(async function(i,s){const a=s.cause;for(const o of s.targetIds)i.Ia.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.Ia.delete(o),i.Va.removeTarget(o))})(n,e)}catch(r){Ct(D0,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jy(n,r)}else if(e instanceof ly?n.Va.Ze(e):e instanceof mP?n.Va.st(e):n.Va.tt(e),!t.isEqual(mn.min()))try{const r=await GP(n.localStore);t.compareTo(r)>=0&&await(function(s,a){const o=s.Va.Tt(a);return o.targetChanges.forEach(((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=s.Ia.get(u);d&&s.Ia.set(u,d.withResumeToken(c.resumeToken,a))}})),o.targetMismatches.forEach(((c,u)=>{const d=s.Ia.get(c);if(!d)return;s.Ia.set(c,d.withResumeToken(is.EMPTY_BYTE_STRING,d.snapshotVersion)),rj(s,c);const p=new wh(d.target,c,u,d.sequenceNumber);y4(s,p)})),s.remoteSyncer.applyRemoteEvent(o)})(n,t)}catch(r){Ct(D0,"Failed to raise snapshot:",r),await Jy(n,r)}}async function Jy(n,e,t){if(!gd(e))throw e;n.Ea.add(1),await rv(n),n.Ra.set("Offline"),t||(t=()=>GP(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ct(D0,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await $b(n)}))}function sj(n,e){return e().catch((t=>Jy(n,t,e)))}async function tg(n){const e=an(n),t=rd(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:l0;for(;oW(e);)try{const i=await Wq(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,lW(e,i)}catch(i){await Jy(e,i)}aj(e)&&oj(e)}function oW(n){return K0(n)&&n.Ta.length<10}function lW(n,e){n.Ta.push(e);const t=rd(n);t.O_()&&t.X_&&t.ea(e.mutations)}function aj(n){return K0(n)&&!rd(n).x_()&&n.Ta.length>0}function oj(n){rd(n).start()}async function cW(n){rd(n).ra()}async function uW(n){const e=rd(n);for(const t of n.Ta)e.ea(t.mutations)}async function hW(n,e,t){const r=n.Ta.shift(),i=o4.from(r,e,t);await sj(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await tg(n)}async function fW(n,e){e&&rd(n).X_&&await(async function(r,i){if((function(a){return YH(a)&&a!==ot.ABORTED})(i.code)){const s=r.Ta.shift();rd(r).B_(),await sj(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await tg(r)}})(n,e),aj(n)&&oj(n)}async function xk(n,e){const t=an(n);t.asyncQueue.verifyOperationInProgress(),Ct(D0,"RemoteStore received new credentials");const r=K0(t);t.Ea.add(3),await rv(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await $b(t)}async function NS(n,e){const t=an(n);e?(t.Ea.delete(2),await $b(t)):e||(t.Ea.add(2),await rv(t),t.Ra.set("Unknown"))}function ng(n){return n.ma||(n.ma=(function(t,r,i){const s=an(t);return s.sa(),new Qq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:rW.bind(null,n),t_:iW.bind(null,n),r_:sW.bind(null,n),H_:aW.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),_4(n)?b4(n):n.Ra.set("Unknown")):(await n.ma.stop(),ij(n))}))),n.ma}function rd(n){return n.fa||(n.fa=(function(t,r,i){const s=an(t);return s.sa(),new Jq(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:cW.bind(null,n),r_:fW.bind(null,n),ta:uW.bind(null,n),na:hW.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await tg(n)):(await n.fa.stop(),n.Ta.length>0&&(Ct(D0,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Iu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new w4(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Mt(ot.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function S4(n,e){if(es("AsyncQueue",`${e}: ${n}`),gd(n))return new Mt(ot.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{static emptySet(e){return new mp(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Gt.comparator(t.key,r.key):(t,r)=>Gt.comparator(t.key,r.key),this.keyedMap=c1(),this.sortedSet=new ii(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof mp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new mp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.ga=new ii(Gt.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):en(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Vp{constructor(e,t,r,i,s,a,o,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach((o=>{a.push({type:0,doc:o})})),new Vp(e,t,mp.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vb(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dW{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class mW{constructor(){this.queries=yk(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=an(t),s=i.queries;i.queries=yk(),s.forEach(((a,o)=>{for(const c of o.Sa)c.onError(r)}))})(this,new Mt(ot.ABORTED,"Firestore shutting down"))}}function yk(){return new Fh((n=>J8(n)),Vb)}async function lj(n,e){const t=an(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new dW,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await t.onListen(i,!0);break;case 1:s.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=S4(a,`Initialization of query '${tp(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.Sa.push(e),e.va(t.onlineState),s.wa&&e.Fa(s.wa)&&T4(t)}async function cj(n,e){const t=an(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.Sa.indexOf(e);a>=0&&(s.Sa.splice(a,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function pW(n,e){const t=an(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.Sa)o.Fa(i)&&(r=!0);a.wa=i}}r&&T4(t)}function gW(n,e,t){const r=an(n),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(t);r.queries.delete(e)}function T4(n){n.Ca.forEach((e=>{e.next()}))}var CS,bk;(bk=CS||(CS={})).Ma="default",bk.Cache="cache";class uj{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Vp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Vp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==CS.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.key=e}}class fj{constructor(e){this.key=e}}class xW{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zn(),this.mutatedKeys=zn(),this.eu=eP(e),this.tu=new mp(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new vk,i=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((d,p)=>{const x=i.get(d),v=Zx(this.query,p)?p:null,_=!!x&&this.mutatedKeys.has(x.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;x&&v?x.data.isEqual(v.data)?_!==b&&(r.track({type:3,doc:v}),S=!0):this.su(x,v)||(r.track({type:2,doc:v}),S=!0,(c&&this.eu(v,c)>0||u&&this.eu(v,u)<0)&&(o=!0)):!x&&v?(r.track({type:0,doc:v}),S=!0):x&&!v&&(r.track({type:1,doc:x}),S=!0,(c||u)&&(o=!0)),S&&(v?(a=a.add(v),s=b?s.add(d):s.delete(d)):(a=a.delete(d),s=s.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort(((d,p)=>(function(v,_){const b=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return en(20277,{Rt:S})}};return b(v)-b(_)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),i=i??!1;const o=t&&!i?this._u():[],c=this.Xa.size===0&&this.current&&!i?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new Vp(this.query,e.tu,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new vk,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=zn(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new fj(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new hj(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=zn();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vp.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const rg="SyncEngine";class vW{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yW{constructor(e){this.key=e,this.hu=!1}}class bW{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Fh((o=>J8(o)),Vb),this.Iu=new Map,this.Eu=new Set,this.du=new ii(Gt.comparator),this.Au=new Map,this.Ru=new d4,this.Vu={},this.mu=new Map,this.fu=I0.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _W(n,e,t=!0){const r=Yb(n);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await dj(r,e,t,!0),i}async function wW(n,e){const t=Yb(n);await dj(t,e,!0,!1)}async function dj(n,e,t,r){const i=await Yy(n.localStore,yl(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await E4(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Kb(n.remoteStore,i),o}async function E4(n,e,t,r,i){n.pu=(p,x,v)=>(async function(b,S,T,k){let E=S.view.ru(T);E.Cs&&(E=await TS(b.localStore,S.query,!1).then((({documents:A})=>S.view.ru(A,E))));const j=k&&k.targetChanges.get(S.targetId),F=k&&k.targetMismatches.get(S.targetId)!=null,z=S.view.applyChanges(E,b.isPrimaryClient,j,F);return kS(b,S.targetId,z.au),z.snapshot})(n,p,x,v);const s=await TS(n.localStore,e,!0),a=new xW(e,s.Qs),o=a.ru(s.documents),c=nv.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,c);kS(n,t,u.au);const d=new vW(e,t,a);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function SW(n,e,t){const r=an(n),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((a=>!Vb(a,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Fp(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Bp(r.remoteStore,i.targetId),zp(r,i.targetId)})).catch(pd)):(zp(r,i.targetId),await Fp(r.localStore,i.targetId,!0))}async function TW(n,e){const t=an(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Bp(t.remoteStore,r.targetId))}async function EW(n,e,t){const r=k4(n);try{const i=await(function(a,o){const c=an(a),u=jr.now(),d=o.reduce(((v,_)=>v.add(_.key)),zn());let p,x;return c.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let _=gl(),b=zn();return c.Ns.getEntries(v,d).next((S=>{_=S,_.forEach(((T,k)=>{k.isValidDocument()||(b=b.add(T))}))})).next((()=>c.localDocuments.getOverlayedDocuments(v,_))).next((S=>{p=S;const T=[];for(const k of o){const E=$H(k,p.get(k.key).overlayedDocument);E!=null&&T.push(new Bh(k.key,E,U8(E.value.mapValue),Os.exists(!0)))}return c.mutationQueue.addMutationBatch(v,u,T,o)})).next((S=>{x=S;const T=S.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(v,S.batchId,T)}))})).then((()=>({batchId:x.batchId,changes:nP(p)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(a,o,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new ii(kn)),u=u.insert(o,c),a.Vu[a.currentUser.toKey()]=u})(r,i.batchId,t),await vd(r,i.changes),await tg(r.remoteStore)}catch(i){const s=S4(i,"Failed to persist write");t.reject(s)}}async function mj(n,e){const t=an(n);try{const r=await Hq(t.localStore,e);e.targetChanges.forEach(((i,s)=>{const a=t.Au.get(s);a&&(cn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?a.hu=!0:i.modifiedDocuments.size>0?cn(a.hu,14607):i.removedDocuments.size>0&&(cn(a.hu,42227),a.hu=!1))})),await vd(t,r,e)}catch(r){await pd(r)}}function _k(n,e,t){const r=an(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((s,a)=>{const o=a.view.va(e);o.snapshot&&i.push(o.snapshot)})),(function(a,o){const c=an(a);c.onlineState=o;let u=!1;c.queries.forEach(((d,p)=>{for(const x of p.Sa)x.va(o)&&(u=!0)})),u&&T4(c)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AW(n,e,t){const r=an(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),s=i&&i.key;if(s){let a=new ii(Gt.comparator);a=a.insert(s,zi.newNoDocument(s,mn.min()));const o=zn().add(s),c=new tv(mn.min(),new Map,new ii(kn),a,o);await mj(r,c),r.du=r.du.remove(s),r.Au.delete(e),C4(r)}else await Fp(r.localStore,e,!1).then((()=>zp(r,e,t))).catch(pd)}async function NW(n,e){const t=an(n),r=e.batch.batchId;try{const i=await Uq(t.localStore,e);N4(t,r,null),A4(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await vd(t,i)}catch(i){await pd(i)}}async function CW(n,e,t){const r=an(n);try{const i=await(function(a,o){const c=an(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let d;return c.mutationQueue.lookupMutationBatch(u,o).next((p=>(cn(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(u,p)))).next((()=>c.mutationQueue.performConsistencyCheck(u))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,o))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d))).next((()=>c.localDocuments.getDocuments(u,d)))}))})(r.localStore,e);N4(r,e,t),A4(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await vd(r,i)}catch(i){await pd(i)}}function A4(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function N4(n,e,t){const r=an(n);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function zp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||pj(n,r)}))}function pj(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Bp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),C4(n))}function kS(n,e,t){for(const r of t)r instanceof hj?(n.Ru.addReference(r.key,e),kW(n,r)):r instanceof fj?(Ct(rg,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||pj(n,r.key)):en(19791,{wu:r})}function kW(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Ct(rg,"New document in limbo: "+t),n.Eu.add(r),C4(n))}function C4(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Gt(Sr.fromString(e)),r=n.fu.next();n.Au.set(r,new yW(t)),n.du=n.du.insert(t,r),Kb(n.remoteStore,new wh(yl(Bb(t.path)),r,"TargetPurposeLimboResolution",Bo.ce))}}async function vd(n,e,t){const r=an(n),i=[],s=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((o,c)=>{a.push(r.pu(c,e,t).then((u=>{var d;if((u||t)&&r.isPrimaryClient){const p=u?!u.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(u){i.push(u);const p=g4.As(c.targetId,u);s.push(p)}})))})),await Promise.all(a),r.Pu.H_(i),await(async function(c,u){const d=an(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>Ge.forEach(u,(x=>Ge.forEach(x.Es,(v=>d.persistence.referenceDelegate.addReference(p,x.targetId,v))).next((()=>Ge.forEach(x.ds,(v=>d.persistence.referenceDelegate.removeReference(p,x.targetId,v)))))))))}catch(p){if(!gd(p))throw p;Ct(x4,"Failed to update sequence numbers: "+p)}for(const p of u){const x=p.targetId;if(!p.fromCache){const v=d.Ms.get(x),_=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(x,b)}}})(r.localStore,s))}async function IW(n,e){const t=an(n);if(!t.currentUser.isEqual(e)){Ct(rg,"User change. New user:",e.toKey());const r=await WP(t.localStore,e);t.currentUser=e,(function(s,a){s.mu.forEach((o=>{o.forEach((c=>{c.reject(new Mt(ot.CANCELLED,a))}))})),s.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await vd(t,r.Ls)}}function DW(n,e){const t=an(n),r=t.Au.get(e);if(r&&r.hu)return zn().add(r.key);{let i=zn();const s=t.Iu.get(e);if(!s)return i;for(const a of s){const o=t.Tu.get(a);i=i.unionWith(o.view.nu)}return i}}async function RW(n,e){const t=an(n),r=await TS(t.localStore,e.query,!0),i=e.view.cu(r);return t.isPrimaryClient&&kS(t,e.targetId,i.au),i}async function PW(n,e){const t=an(n);return KP(t.localStore,e).then((r=>vd(t,r)))}async function jW(n,e,t,r){const i=an(n),s=await(function(o,c){const u=an(o),d=an(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",(p=>d.er(p,c).next((x=>x?u.localDocuments.getDocuments(p,x):Ge.resolve(null)))))})(i.localStore,e);s!==null?(t==="pending"?await tg(i.remoteStore):t==="acknowledged"||t==="rejected"?(N4(i,e,r||null),A4(i,e),(function(o,c){an(an(o).mutationQueue).ir(c)})(i.localStore,e)):en(6720,"Unknown batchState",{Su:t}),await vd(i,s)):Ct(rg,"Cannot apply mutation batch with id: "+e)}async function LW(n,e){const t=an(n);if(Yb(t),k4(t),e===!0&&t.gu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await wk(t,r.toArray());t.gu=!0,await NS(t.remoteStore,!0);for(const s of i)Kb(t.remoteStore,s)}else if(e===!1&&t.gu!==!1){const r=[];let i=Promise.resolve();t.Iu.forEach(((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then((()=>(zp(t,a),Fp(t.localStore,a,!0)))),Bp(t.remoteStore,a)})),await i,await wk(t,r),(function(a){const o=an(a);o.Au.forEach(((c,u)=>{Bp(o.remoteStore,u)})),o.Ru.Jr(),o.Au=new Map,o.du=new ii(Gt.comparator)})(t),t.gu=!1,await NS(t.remoteStore,!1)}}async function wk(n,e,t){const r=an(n),i=[],s=[];for(const a of e){let o;const c=r.Iu.get(a);if(c&&c.length!==0){o=await Yy(r.localStore,yl(c[0]));for(const u of c){const d=r.Tu.get(u),p=await RW(r,d);p.snapshot&&s.push(p.snapshot)}}else{const u=await $P(r.localStore,a);o=await Yy(r.localStore,u),await E4(r,gj(u),a,!1,o.resumeToken)}i.push(o)}return r.Pu.H_(s),i}function gj(n){return X8(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function OW(n){return(function(t){return an(an(t).persistence).Ts()})(an(n).localStore)}async function MW(n,e,t,r){const i=an(n);if(i.gu)return void Ct(rg,"Ignoring unexpected query state notification.");const s=i.Iu.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await KP(i.localStore,Z8(s[0])),o=tv.createSynthesizedRemoteEventForCurrentChange(e,t==="current",is.EMPTY_BYTE_STRING);await vd(i,a,o);break}case"rejected":await Fp(i.localStore,e,!0),zp(i,e,r);break;default:en(64155,t)}}async function FW(n,e,t){const r=Yb(n);if(r.gu){for(const i of e){if(r.Iu.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Ct(rg,"Adding an already active target "+i);continue}const s=await $P(r.localStore,i),a=await Yy(r.localStore,s);await E4(r,gj(s),a.targetId,!1,a.resumeToken),Kb(r.remoteStore,a)}for(const i of t)r.Iu.has(i)&&await Fp(r.localStore,i,!1).then((()=>{Bp(r.remoteStore,i),zp(r,i)})).catch(pd)}}function Yb(n){const e=an(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=mj.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AW.bind(null,e),e.Pu.H_=pW.bind(null,e.eventManager),e.Pu.yu=gW.bind(null,e.eventManager),e}function k4(n){const e=an(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=NW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CW.bind(null,e),e}class mx{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gb(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return qP(this.persistence,new HP,e.initialUser,this.serializer)}Cu(e){return new m4(Wb.mi,this.serializer)}Du(e){return new ZP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}mx.provider={build:()=>new mx};class BW extends mx{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){cn(this.persistence.referenceDelegate instanceof Ky,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MP(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?La.withCacheSize(this.cacheSizeBytes):La.DEFAULT;return new m4((r=>Ky.mi(r,t)),this.serializer)}}class xj extends mx{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await k4(this.xu.syncEngine),await tg(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return qP(this.persistence,new HP,e.initialUser,this.serializer)}Fu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new MP(r,e.asyncQueue,t)}Mu(e,t){const r=new XU(t,this.persistence);return new YU(e.asyncQueue,r)}Cu(e){const t=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?La.withCacheSize(this.cacheSizeBytes):La.DEFAULT;return new p4(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ej(),uy(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new ZP}}class VW extends xj{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof t5&&(this.sharedClientState.syncEngine={Co:jW.bind(null,t),vo:MW.bind(null,t),Fo:FW.bind(null,t),Ts:OW.bind(null,t),Do:PW.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async r=>{await LW(this.xu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}Du(e){const t=ej();if(!t5.v(t))throw new Mt(ot.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=UP(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new t5(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class px{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_k(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IW.bind(null,this.syncEngine),await NS(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new mW})()}createDatastore(e){const t=Gb(e.databaseInfo.databaseId),r=(function(s){return new Xq(s)})(e.databaseInfo);return(function(s,a,o,c){return new eW(s,a,o,c)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,s,a,o){return new nW(r,i,s,a,o)})(this.localStore,this.datastore,e.asyncQueue,(t=>_k(this.syncEngine,t,0)),(function(){return pk.v()?new pk:new Gq})())}createSyncEngine(e,t){return(function(i,s,a,o,c,u,d){const p=new bW(i,s,a,o,c,u);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const s=an(i);Ct(D0,"RemoteStore shutting down."),s.Ea.add(5),await rv(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}px.provider={build:()=>new px};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):es("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="FirestoreClient";class zW{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ja.UNAUTHENTICATED,this.clientId=$T.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async a=>{Ct(id,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Ct(id,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Iu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=S4(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function r5(n,e){n.asyncQueue.verifyOperationInProgress(),Ct(id,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await WP(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Sk(n,e){n.asyncQueue.verifyOperationInProgress();const t=await UW(n);Ct(id,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>xk(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>xk(e.remoteStore,i))),n._onlineComponents=e}async function UW(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ct(id,"Using user provided OfflineComponentProvider");try{await r5(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===ot.FAILED_PRECONDITION||i.code===ot.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;nx("Error using user provided cache. Falling back to memory cache: "+t),await r5(n,new mx)}}else Ct(id,"Using default OfflineComponentProvider"),await r5(n,new BW(void 0));return n._offlineComponents}async function yj(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ct(id,"Using user provided OnlineComponentProvider"),await Sk(n,n._uninitializedComponentsProvider._online)):(Ct(id,"Using default OnlineComponentProvider"),await Sk(n,new px))),n._onlineComponents}function HW(n){return yj(n).then((e=>e.syncEngine))}async function bj(n){const e=await yj(n),t=e.eventManager;return t.onListen=_W.bind(null,e.syncEngine),t.onUnlisten=SW.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wW.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=TW.bind(null,e.syncEngine),t}function qW(n,e,t={}){const r=new Iu;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,c,u){const d=new vj({next:x=>{d.Nu(),a.enqueueAndForget((()=>cj(s,p)));const v=x.docs.has(o);!v&&x.fromCache?u.reject(new Mt(ot.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&x.fromCache&&c&&c.source==="server"?u.reject(new Mt(ot.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(x)},error:x=>u.reject(x)}),p=new uj(Bb(o.path),d,{includeMetadataChanges:!0,qa:!0});return lj(s,p)})(await bj(n),n.asyncQueue,e,t,r))),r.promise}function WW(n,e,t={}){const r=new Iu;return n.asyncQueue.enqueueAndForget((async()=>(function(s,a,o,c,u){const d=new vj({next:x=>{d.Nu(),a.enqueueAndForget((()=>cj(s,p))),x.fromCache&&c.source==="server"?u.reject(new Mt(ot.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(x)},error:x=>u.reject(x)}),p=new uj(o,d,{includeMetadataChanges:!0,qa:!0});return lj(s,p)})(await bj(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _j(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GW="firestore.googleapis.com",Ek=!0;class Ak{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Mt(ot.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=GW,this.ssl=Ek}else this.host=e.host,this.ssl=e.ssl??Ek;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=RP;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OP)throw new Mt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_j(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Mt(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Mt(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Mt(ot.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class I4{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ak({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mt(ot.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Mt(ot.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ak(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new MU;switch(r.type){case"firstParty":return new VU(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Mt(ot.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=Tk.get(t);r&&(Ct("ComponentProvider","Removing Datastore"),Tk.delete(t),r.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yd(this.firestore,e,this._query)}}class ts{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ts(this.firestore,e,this._key)}toJSON(){return{type:ts._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Xx(t,ts._jsonSchema))return new ts(e,r||null,new Gt(Sr.fromString(t.referencePath)))}}ts._jsonSchemaVersion="firestore/documentReference/1.0",ts._jsonSchema={type:ws("string",ts._jsonSchemaVersion),referencePath:ws("string")};class Jf extends yd{constructor(e,t,r){super(e,t,Bb(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ts(this.firestore,null,new Gt(e))}withConverter(e){return new Jf(this.firestore,e,this._path)}}function ss(n,e,...t){if(n=ri(n),p8("collection","path",e),n instanceof I4){const r=Sr.fromString(e,...t);return gC(r),new Jf(n,null,r)}{if(!(n instanceof ts||n instanceof Jf))throw new Mt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return gC(r),new Jf(n.firestore,null,r)}}function fn(n,e,...t){if(n=ri(n),arguments.length===1&&(e=$T.newId()),p8("doc","path",e),n instanceof I4){const r=Sr.fromString(e,...t);return pC(r),new ts(n,null,new Gt(r))}{if(!(n instanceof ts||n instanceof Jf))throw new Mt(ot.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Sr.fromString(e,...t));return pC(r),new ts(n.firestore,n instanceof Jf?n.converter:null,new Gt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk="AsyncQueue";class Ck{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new tj(this,"async_queue_retry"),this._c=()=>{const r=uy();r&&Ct(Nk,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=uy();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=uy();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Iu;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!gd(e))throw e;Ct(Nk,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,es("INTERNAL UNHANDLED ERROR: ",kk(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=w4.createAndSchedule(this,e,t,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&en(47125,{Pc:kk(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function kk(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class bd extends I4{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Ck,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ck(e),this._firestoreClient=void 0,await e}}}function $W(n,e,t){t||(t=By);const r=W0(n,"firestore");if(r.isInitialized(t)){const i=r.getImmediate({identifier:t}),s=r.getOptions(t);if(S0(s,e))return i;throw new Mt(ot.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new Mt(ot.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OP)throw new Mt(ot.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&dd(e.host)&&PT(e.host),r.initialize({options:e,instanceIdentifier:t})}function Xb(n){if(n._terminated)throw new Mt(ot.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||KW(n),n._firestoreClient}function KW(n){var r,i,s;const e=n._freezeSettings(),t=(function(o,c,u,d){return new TH(o,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_j(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new zW(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yl(is.fromBase64String(e))}catch(t){throw new Mt(ot.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Yl(is.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yl._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Xx(e,Yl._jsonSchema))return Yl.fromBase64String(e.bytes)}}Yl._jsonSchemaVersion="firestore/bytes/1.0",Yl._jsonSchema={type:ws("string",Yl._jsonSchemaVersion),bytes:ws("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Mt(ot.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Di(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mt(ot.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mt(ot.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return kn(this._lat,e._lat)||kn(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Du._jsonSchemaVersion}}static fromJSON(e){if(Xx(e,Du._jsonSchema))return new Du(e.latitude,e.longitude)}}Du._jsonSchemaVersion="firestore/geoPoint/1.0",Du._jsonSchema={type:ws("string",Du._jsonSchemaVersion),latitude:ws("number"),longitude:ws("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ru._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Xx(e,Ru._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ru(e.vectorValues);throw new Mt(ot.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ru._jsonSchemaVersion="firestore/vectorValue/1.0",Ru._jsonSchema={type:ws("string",Ru._jsonSchemaVersion),vectorValues:ws("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YW=/^__.*__$/;class XW{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Bh(e,this.data,this.fieldMask,t,this.fieldTransforms):new eg(e,this.data,t,this.fieldTransforms)}}class wj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Bh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sj(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw en(40011,{Ac:n})}}class D4{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new D4({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Zy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Sj(this.Ac)&&YW.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class QW{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Gb(e)}Cc(e,t,r,i=!1){return new D4({Ac:e,methodName:t,Dc:r,path:Di.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sv(n){const e=n._freezeSettings(),t=Gb(n._databaseId);return new QW(n._databaseId,!!e.ignoreUndefinedProperties,t)}function R4(n,e,t,r,i,s={}){const a=n.Cc(s.merge||s.mergeFields?2:0,e,t,i);j4("Data must be an object, but it was:",a,r);const o=Aj(r,a);let c,u;if(s.merge)c=new Vo(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const d=[];for(const p of s.mergeFields){const x=IS(e,p,t);if(!a.contains(x))throw new Mt(ot.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Cj(d,x)||d.push(x)}c=new Vo(d),u=a.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,u=a.fieldTransforms;return new XW(new Va(o),c,u)}class Jb extends Qb{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Jb}}class P4 extends Qb{_toFieldTransform(e){return new cP(e.path,new jp)}isEqual(e){return e instanceof P4}}function Tj(n,e,t,r){const i=n.Cc(1,e,t);j4("Data must be an object, but it was:",i,r);const s=[],a=Va.empty();xd(r,((c,u)=>{const d=L4(e,c,t);u=ri(u);const p=i.yc(d);if(u instanceof Jb)s.push(d);else{const x=av(u,p);x!=null&&(s.push(d),a.set(d,x))}}));const o=new Vo(s);return new wj(a,o,i.fieldTransforms)}function Ej(n,e,t,r,i,s){const a=n.Cc(1,e,t),o=[IS(e,r,t)],c=[i];if(s.length%2!=0)throw new Mt(ot.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)o.push(IS(e,s[x])),c.push(s[x+1]);const u=[],d=Va.empty();for(let x=o.length-1;x>=0;--x)if(!Cj(u,o[x])){const v=o[x];let _=c[x];_=ri(_);const b=a.yc(v);if(_ instanceof Jb)u.push(v);else{const S=av(_,b);S!=null&&(u.push(v),d.set(v,S))}}const p=new Vo(u);return new wj(d,p,a.fieldTransforms)}function JW(n,e,t,r=!1){return av(t,n.Cc(r?4:3,e))}function av(n,e){if(Nj(n=ri(n)))return j4("Unsupported field value:",e,n),Aj(n,e);if(n instanceof Qb)return(function(r,i){if(!Sj(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const s=[];let a=0;for(const o of r){let c=av(o,i.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}})(n,e)}return(function(r,i){if((r=ri(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zH(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=jr.fromDate(r);return{timestampValue:Mp(i.serializer,s)}}if(r instanceof jr){const s=new jr(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Mp(i.serializer,s)}}if(r instanceof Du)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Yl)return{bytesValue:gP(i.serializer,r._byteString)};if(r instanceof ts){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:u4(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ru)return(function(a,o){return{mapValue:{fields:{[t4]:{stringValue:n4},[Ip]:{arrayValue:{values:a.toArray().map((u=>{if(typeof u!="number")throw o.Sc("VectorValues must only contain numeric values.");return s4(o.serializer,u)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Db(r)}`)})(n,e)}function Aj(n,e){const t={};return P8(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xd(n,((r,i)=>{const s=av(i,e.mc(r));s!=null&&(t[r]=s)})),{mapValue:{fields:t}}}function Nj(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof jr||n instanceof Du||n instanceof Yl||n instanceof ts||n instanceof Qb||n instanceof Ru)}function j4(n,e,t){if(!Nj(t)||!g8(t)){const r=Db(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function IS(n,e,t){if((e=ri(e))instanceof iv)return e._internalPath;if(typeof e=="string")return L4(n,e);throw Zy("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZW=new RegExp("[~\\*/\\[\\]]");function L4(n,e,t){if(e.search(ZW)>=0)throw Zy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new iv(...e.split("."))._internalPath}catch{throw Zy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Zy(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Mt(ot.INVALID_ARGUMENT,o+n+c)}function Cj(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ts(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new eG(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class eG extends kj{data(){return super.data()}}function Zb(n,e){return typeof e=="string"?L4(n,e):e instanceof iv?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tG(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Mt(ot.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class O4{}class M4 extends O4{}function ga(n,e,...t){let r=[];e instanceof O4&&r.push(e),r=r.concat(t),(function(s){const a=s.filter((c=>c instanceof F4)).length,o=s.filter((c=>c instanceof e_)).length;if(a>1||a>0&&o>0)throw new Mt(ot.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class e_ extends M4{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new e_(e,t,r)}_apply(e){const t=this._parse(e);return Ij(e._query,t),new yd(e.firestore,e.converter,gS(e._query,t))}_parse(e){const t=sv(e.firestore);return(function(s,a,o,c,u,d,p){let x;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Mt(ot.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Dk(p,d);const _=[];for(const b of p)_.push(Ik(c,s,b));x={arrayValue:{values:_}}}else x=Ik(c,s,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Dk(p,d),x=JW(o,a,p,d==="in"||d==="not-in");return er.create(u,d,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function R0(n,e,t){const r=e,i=Zb("where",n);return e_._create(i,r,t)}class F4 extends O4{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new F4(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Lr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)Ij(a,c),a=gS(a,c)})(e._query,t),new yd(e.firestore,e.converter,gS(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class B4 extends M4{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new B4(e,t)}_apply(e){const t=(function(i,s,a){if(i.startAt!==null)throw new Mt(ot.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Mt(ot.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fx(s,a)})(e._query,this._field,this._direction);return new yd(e.firestore,e.converter,(function(i,s){const a=i.explicitOrderBy.concat([s]);return new Zp(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function Ou(n,e="asc"){const t=e,r=Zb("orderBy",n);return B4._create(r,t)}class V4 extends M4{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new V4(e,t,r)}_apply(e){return new yd(e.firestore,e.converter,Uy(e._query,this._limit,this._limitType))}}function nG(n){return V4._create("limit",n,"F")}function Ik(n,e,t){if(typeof(t=ri(t))=="string"){if(t==="")throw new Mt(ot.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Q8(e)&&t.indexOf("/")!==-1)throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Sr.fromString(t));if(!Gt.isDocumentKey(r))throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ux(n,new Gt(r))}if(t instanceof ts)return ux(n,t._key);throw new Mt(ot.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Db(t)}.`)}function Dk(n,e){if(!Array.isArray(n)||n.length===0)throw new Mt(ot.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Ij(n,e){const t=(function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new Mt(ot.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Mt(ot.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class rG{convertValue(e,t="none"){switch(td(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Si(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jh(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw en(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xd(e,((i,s)=>{r[i]=this.convertValue(s,t)})),r}convertVectorValue(e){var r,i,s;const t=(s=(i=(r=e.fields)==null?void 0:r[Ip].arrayValue)==null?void 0:i.values)==null?void 0:s.map((a=>Si(a.doubleValue)));return new Ru(t)}convertGeoPoint(e){return new Du(Si(e.latitude),Si(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Mb(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(lx(e));default:return null}}convertTimestamp(e){const t=Ph(e);return new jr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Sr.fromString(e);cn(AP(r),9688,{name:e});const i=new A0(r.get(1),r.get(3)),s=new Gt(r.popFirst(5));return i.isEqual(t)||es(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class f1{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class h0 extends kj{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Zb("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(ot.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=h0._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}h0._jsonSchemaVersion="firestore/documentSnapshot/1.0",h0._jsonSchema={type:ws("string",h0._jsonSchemaVersion),bundleSource:ws("string","DocumentSnapshot"),bundleName:ws("string"),bundle:ws("string")};class hy extends h0{data(e={}){return super.data(e)}}class pp{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new f1(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new hy(this._firestore,this._userDataWriter,r.key,r,new f1(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Mt(ot.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map((o=>{const c=new hy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new f1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((o=>s||o.type!==3)).map((o=>{const c=new hy(i._firestore,i._userDataWriter,o.doc.key,o.doc,new f1(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),d=a.indexOf(o.doc.key)),{type:iG(o.type),doc:c,oldIndex:u,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Mt(ot.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$T.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(t.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function iG(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return en(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(n){n=Oc(n,ts);const e=Oc(n.firestore,bd);return qW(Xb(e),n._key).then((t=>sG(e,n,t)))}pp._jsonSchemaVersion="firestore/querySnapshot/1.0",pp._jsonSchema={type:ws("string",pp._jsonSchemaVersion),bundleSource:ws("string","QuerySnapshot"),bundleName:ws("string"),bundle:ws("string")};class Dj extends rG{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ts(this.firestore,null,t)}}function Jr(n){n=Oc(n,yd);const e=Oc(n.firestore,bd),t=Xb(e),r=new Dj(e);return tG(n._query),WW(t,n._query).then((i=>new pp(e,r,n,i)))}function ov(n,e,t){n=Oc(n,ts);const r=Oc(n.firestore,bd),i=z4(n.converter,e,t);return lv(r,[R4(sv(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Os.none())])}function Zr(n,e,t,...r){n=Oc(n,ts);const i=Oc(n.firestore,bd),s=sv(i);let a;return a=typeof(e=ri(e))=="string"||e instanceof iv?Ej(s,"updateDoc",n._key,e,t,r):Tj(s,"updateDoc",n._key,e),lv(i,[a.toMutation(n._key,Os.exists(!0))])}function Wo(n){return lv(Oc(n.firestore,bd),[new ev(n._key,Os.none())])}function Go(n,e){const t=Oc(n.firestore,bd),r=fn(n),i=z4(n.converter,e);return lv(t,[R4(sv(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Os.exists(!1))]).then((()=>r))}function lv(n,e){return(function(r,i){const s=new Iu;return r.asyncQueue.enqueueAndForget((async()=>EW(await HW(r),i,s))),s.promise})(Xb(n),e)}function sG(n,e,t){const r=t.docs.get(e._key),i=new Dj(n);return new h0(n,i,e._key,r,new f1(t.hasPendingWrites,t.fromCache),e.converter)}class aG{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=uG(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function oG(n){return new aG(n)}class lG{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=px.provider,this._offlineComponentProvider={build:t=>new xj(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class cG{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=px.provider,this._offlineComponentProvider={build:t=>new VW(t,e==null?void 0:e.cacheSizeBytes)}}}function uG(n){return new lG(n==null?void 0:n.forceOwnership)}function hG(){return new cG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sv(e)}set(e,t,r){this._verifyNotCommitted();const i=i5(e,this._firestore),s=z4(i.converter,t,r),a=R4(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Os.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=i5(e,this._firestore);let a;return a=typeof(t=ri(t))=="string"||t instanceof iv?Ej(this._dataReader,"WriteBatch.update",s._key,t,r,i):Tj(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Os.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=i5(e,this._firestore);return this._mutations=this._mutations.concat(new ev(t._key,Os.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Mt(ot.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function i5(n,e){if((n=ri(n)).firestore!==e)throw new Mt(ot.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function dG(){return new P4("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(n){return Xb(n=Oc(n,bd)),new fG(n,(e=>lv(n,e)))}(function(e,t=!0){(function(i){Jp=i})(G0),jc(new Ql("firestore",((r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new bd(new FU(r.getProvider("auth-internal")),new zU(a,r.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Mt(ot.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new A0(u.options.projectId,d)})(a,i),a);return s={useFetchStreams:t,...s},o._setSettings(s),o}),"PUBLIC").setMultipleInstances(!0)),vl(hC,fC,e),vl(hC,fC,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rj="firebasestorage.googleapis.com",Pj="storageBucket",mG=120*1e3,pG=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Fc{constructor(e,t,r=0){super(s5(e),`Firebase Storage: ${t} (${s5(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$i.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return s5(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Wi;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Wi||(Wi={}));function s5(n){return"storage/"+n}function U4(){const n="An unknown error occurred, please check the error payload for server response.";return new $i(Wi.UNKNOWN,n)}function gG(n){return new $i(Wi.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function xG(n){return new $i(Wi.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function vG(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new $i(Wi.UNAUTHENTICATED,n)}function yG(){return new $i(Wi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bG(n){return new $i(Wi.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function _G(){return new $i(Wi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wG(){return new $i(Wi.CANCELED,"User canceled the upload/download.")}function SG(n){return new $i(Wi.INVALID_URL,"Invalid URL '"+n+"'.")}function TG(n){return new $i(Wi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function EG(){return new $i(Wi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Pj+"' property when initializing the app?")}function AG(){return new $i(Wi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function NG(){return new $i(Wi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function CG(n){return new $i(Wi.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function DS(n){return new $i(Wi.INVALID_ARGUMENT,n)}function jj(){return new $i(Wi.APP_DELETED,"The Firebase app was deleted.")}function kG(n){return new $i(Wi.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function P1(n,e){return new $i(Wi.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Xg(n){throw new $i(Wi.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=xl.makeFromUrl(e,t)}catch{return new xl(e,"")}if(r.path==="")return r;throw TG(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const a="(/(.*))?$",o=new RegExp("^gs://"+i+a,"i"),c={bucket:1,path:3};function u(j){j.path_=decodeURIComponent(j.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",v=new RegExp(`^https?://${p}/${d}/b/${i}/o${x}`,"i"),_={bucket:1,path:3},b=t===Rj?"(?:storage.googleapis.com|storage.cloud.google.com)":t,S="([^?#]*)",T=new RegExp(`^https?://${b}/${i}/${S}`,"i"),E=[{regex:o,indices:c,postModify:s},{regex:v,indices:_,postModify:u},{regex:T,indices:{bucket:1,path:2},postModify:u}];for(let j=0;j<E.length;j++){const F=E[j],z=F.regex.exec(e);if(z){const A=z[F.indices.bucket];let I=z[F.indices.path];I||(I=""),r=new xl(A,I),F.postModify(r);break}}if(r==null)throw SG(e);return r}}class IG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DG(n,e,t){let r=1,i=null,s=null,a=!1,o=0;function c(){return o===2}let u=!1;function d(...S){u||(u=!0,e.apply(null,S))}function p(S){i=setTimeout(()=>{i=null,n(v,c())},S)}function x(){s&&clearTimeout(s)}function v(S,...T){if(u){x();return}if(S){x(),d.call(null,S,...T);return}if(c()||a){x(),d.call(null,S,...T);return}r<64&&(r*=2);let E;o===1?(o=2,E=0):E=(r+Math.random())*1e3,p(E)}let _=!1;function b(S){_||(_=!0,x(),!u&&(i!==null?(S||(o=2),clearTimeout(i),p(0)):S||(o=1)))}return p(0),s=setTimeout(()=>{a=!0,b(!0)},t),b}function RG(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PG(n){return n!==void 0}function jG(n){return typeof n=="object"&&!Array.isArray(n)}function H4(n){return typeof n=="string"||n instanceof String}function Rk(n){return q4()&&n instanceof Blob}function q4(){return typeof Blob<"u"}function Pk(n,e,t,r){if(r<e)throw DS(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw DS(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Lj(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var f0;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(f0||(f0={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LG(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,s=e.indexOf(n)!==-1;return t||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OG{constructor(e,t,r,i,s,a,o,c,u,d,p,x=!0,v=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=a,this.callback_=o,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=p,this.retry=x,this.isUsingEmulator=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new g2(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const a=o=>{const c=o.loaded,u=o.lengthComputable?o.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(a),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(a),this.pendingConnection_=null;const o=s.getErrorCode()===f0.NO_ERROR,c=s.getStatus();if(!o||LG(c,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===f0.ABORT;r(!1,new g2(!1,null,d));return}const u=this.successCodes_.indexOf(c)!==-1;r(!0,new g2(u,s))})},t=(r,i)=>{const s=this.resolve_,a=this.reject_,o=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(o,o.getResponse());PG(c)?s(c):s()}catch(c){a(c)}else if(o!==null){const c=U4();c.serverResponse=o.getErrorText(),this.errorCallback_?a(this.errorCallback_(o,c)):a(c)}else if(i.canceled){const c=this.appDelete_?jj():wG();a(c)}else{const c=_G();a(c)}};this.canceled_?t(!1,new g2(!1,null,!0)):this.backoffId_=DG(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RG(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class g2{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function MG(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function FG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BG(n,e){e&&(n["X-Firebase-GMPID"]=e)}function VG(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function zG(n,e,t,r,i,s,a=!0,o=!1){const c=Lj(n.urlParams),u=n.url+c,d=Object.assign({},n.headers);return BG(d,e),MG(d,t),FG(d,s),VG(d,r),new OG(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function HG(...n){const e=UG();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(q4())return new Blob(n);throw new $i(Wi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function qG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WG(n){if(typeof atob>"u")throw CG("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a5{constructor(e,t){this.data=e,this.contentType=t||null}}function GG(n,e){switch(n){case Tu.RAW:return new a5(Oj(e));case Tu.BASE64:case Tu.BASE64URL:return new a5(Mj(n,e));case Tu.DATA_URL:return new a5(KG(e),YG(e))}throw U4()}function Oj(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const s=r,a=n.charCodeAt(++t);r=65536|(s&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function $G(n){let e;try{e=decodeURIComponent(n)}catch{throw P1(Tu.DATA_URL,"Malformed data URL.")}return Oj(e)}function Mj(n,e){switch(n){case Tu.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw P1(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Tu.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw P1(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=WG(e)}catch(i){throw i.message.includes("polyfill")?i:P1(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Fj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw P1(Tu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=XG(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function KG(n){const e=new Fj(n);return e.base64?Mj(Tu.BASE64,e.rest):$G(e.rest)}function YG(n){return new Fj(n).contentType}function XG(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,t){let r=0,i="";Rk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Rk(this.data_)){const r=this.data_,i=qG(r,e,t);return i===null?null:new Of(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Of(r,!0)}}static getBlob(...e){if(q4()){const t=e.map(r=>r instanceof Of?r.data_:r);return new Of(HG.apply(null,t))}else{const t=e.map(a=>H4(a)?GG(Tu.RAW,a).data:a.data_);let r=0;t.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(a=>{for(let o=0;o<a.length;o++)i[s++]=a[o]}),new Of(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(n){let e;try{e=JSON.parse(n)}catch{return null}return jG(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QG(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function JG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function Vj(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZG(n,e){return e}class ao{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ZG}}let x2=null;function e$(n){return!H4(n)||n.length<2?n:Vj(n)}function zj(){if(x2)return x2;const n=[];n.push(new ao("bucket")),n.push(new ao("generation")),n.push(new ao("metageneration")),n.push(new ao("name","fullPath",!0));function e(s,a){return e$(a)}const t=new ao("name");t.xform=e,n.push(t);function r(s,a){return a!==void 0?Number(a):a}const i=new ao("size");return i.xform=r,n.push(i),n.push(new ao("timeCreated")),n.push(new ao("updated")),n.push(new ao("md5Hash",null,!0)),n.push(new ao("cacheControl",null,!0)),n.push(new ao("contentDisposition",null,!0)),n.push(new ao("contentEncoding",null,!0)),n.push(new ao("contentLanguage",null,!0)),n.push(new ao("contentType",null,!0)),n.push(new ao("metadata","customMetadata",!0)),x2=n,x2}function t$(n,e){function t(){const r=n.bucket,i=n.fullPath,s=new xl(r,i);return e._makeStorageReference(s)}Object.defineProperty(n,"ref",{get:t})}function n$(n,e,t){const r={};r.type="file";const i=t.length;for(let s=0;s<i;s++){const a=t[s];r[a.local]=a.xform(r,e[a.server])}return t$(r,n),r}function Uj(n,e,t){const r=Bj(e);return r===null?null:n$(n,r,t)}function r$(n,e,t,r){const i=Bj(e);if(i===null||!H4(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const a=encodeURIComponent;return s.split(",").map(u=>{const d=n.bucket,p=n.fullPath,x="/b/"+a(d)+"/o/"+a(p),v=W4(x,t,r),_=Lj({alt:"media",token:u});return v+_})[0]}function i$(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}class Hj{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qj(n){if(!n)throw U4()}function s$(n,e){function t(r,i){const s=Uj(n,i,e);return qj(s!==null),s}return t}function a$(n,e){function t(r,i){const s=Uj(n,i,e);return qj(s!==null),r$(s,i,n.host,n._protocol)}return t}function Wj(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=yG():i=vG():t.getStatus()===402?i=xG(n.bucket):t.getStatus()===403?i=bG(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function o$(n){const e=Wj(n);function t(r,i){let s=e(r,i);return r.getStatus()===404&&(s=gG(n.path)),s.serverResponse=i.serverResponse,s}return t}function l$(n,e,t){const r=e.fullServerUrl(),i=W4(r,n.host,n._protocol),s="GET",a=n.maxOperationRetryTime,o=new Hj(i,s,a$(n,t),a);return o.errorHandler=o$(e),o}function c$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function u$(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=c$(null,e)),r}function h$(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function o(){let E="";for(let j=0;j<2;j++)E=E+Math.random().toString().slice(2);return E}const c=o();a["Content-Type"]="multipart/related; boundary="+c;const u=u$(e,r,i),d=i$(u,t),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+c+`\r
Content-Type: `+u.contentType+`\r
\r
`,x=`\r
--`+c+"--",v=Of.getBlob(p,r,x);if(v===null)throw AG();const _={name:u.fullPath},b=W4(s,n.host,n._protocol),S="POST",T=n.maxUploadRetryTime,k=new Hj(b,S,s$(n,t),T);return k.urlParams=_,k.headers=a,k.body=v.uploadData(),k.errorHandler=Wj(e),k}class f${constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=f0.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=f0.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=f0.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i,s){if(this.sent_)throw Xg("cannot .send() more than once");if(dd(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const a in s)s.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,s[a].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xg("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xg("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xg("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xg("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class d$ extends f${initXhr(){this.xhr_.responseType="text"}}function Gj(){return new d$}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e,t){this._service=e,t instanceof xl?this._location=t:this._location=xl.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new P0(e,t)}get root(){const e=new xl(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Vj(this._location.path)}get storage(){return this._service}get parent(){const e=QG(this._location.path);if(e===null)return null;const t=new xl(this._location.bucket,e);return new P0(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw kG(e)}}function m$(n,e,t){n._throwIfRoot("uploadBytes");const r=h$(n.storage,n._location,zj(),new Of(e,!0),t);return n.storage.makeRequestWithTokens(r,Gj).then(i=>({metadata:i,ref:n}))}function p$(n){n._throwIfRoot("getDownloadURL");const e=l$(n.storage,n._location,zj());return n.storage.makeRequestWithTokens(e,Gj).then(t=>{if(t===null)throw NG();return t})}function g$(n,e){const t=JG(n._location.path,e),r=new xl(n._location.bucket,t);return new P0(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(n){return/^[A-Za-z]+:\/\//.test(n)}function v$(n,e){return new P0(n,e)}function $j(n,e){if(n instanceof G4){const t=n;if(t._bucket==null)throw EG();const r=new P0(t,t._bucket);return e!=null?$j(r,e):r}else return e!==void 0?g$(n,e):n}function y$(n,e){if(e&&x$(e)){if(n instanceof G4)return v$(n,e);throw DS("To use ref(service, url), the first argument must be a Storage instance.")}else return $j(n,e)}function jk(n,e){const t=e==null?void 0:e[Pj];return t==null?null:xl.makeFromBucketSpec(t,n)}function b$(n,e,t,r={}){n.host=`${e}:${t}`;const i=dd(e);i&&(PT(`https://${n.host}/b`),vR("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Z9(s,n.app.options.projectId))}class G4{constructor(e,t,r,i,s,a=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=a,this._bucket=null,this._host=Rj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=mG,this._maxUploadRetryTime=pG,this._requests=new Set,i!=null?this._bucket=xl.makeFromBucketSpec(i,this._host):this._bucket=jk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=xl.makeFromBucketSpec(this._url,e):this._bucket=jk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pk("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pk("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Kl(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new P0(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new IG(jj());{const a=zG(e,this._appId,r,i,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const Lk="@firebase/storage",Ok="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="storage";function Yj(n,e,t){return n=ri(n),m$(n,e,t)}function Xj(n){return n=ri(n),p$(n)}function Qj(n,e){return n=ri(n),y$(n,e)}function _$(n=MT(),e){n=ri(n);const r=W0(n,Kj).getImmediate({identifier:e}),i=Q9("storage");return i&&w$(r,...i),r}function w$(n,e,t,r={}){b$(n,e,t,r)}function S$(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new G4(t,r,i,e,G0)}function T$(){jc(new Ql(Kj,S$,"PUBLIC").setMultipleInstances(!0)),vl(Lk,Ok,""),vl(Lk,Ok,"esm2020")}T$();const Jj="@firebase/installations",$4="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zj=1e4,eL=`w:${$4}`,tL="FIS_v2",E$="https://firebaseinstallations.googleapis.com/v1",A$=3600*1e3,N$="installations",C$="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k$={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},j0=new q0(N$,C$,k$);function nL(n){return n instanceof Fc&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rL({projectId:n}){return`${E$}/projects/${n}/installations`}function iL(n){return{token:n.token,requestStatus:2,expiresIn:D$(n.expiresIn),creationTime:Date.now()}}async function sL(n,e){const r=(await e.json()).error;return j0.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function aL({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function I$(n,{refreshToken:e}){const t=aL(n);return t.append("Authorization",R$(e)),t}async function oL(n){const e=await n();return e.status>=500&&e.status<600?n():e}function D$(n){return Number(n.replace("s","000"))}function R$(n){return`${tL} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P$({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=rL(n),i=aL(n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={fid:t,authVersion:tL,appId:n.appId,sdkVersion:eL},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await oL(()=>fetch(r,o));if(c.ok){const u=await c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:iL(u.authToken)}}else throw await sL("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lL(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$=/^[cdef][\w-]{21}$/,RS="";function O$(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=M$(n);return L$.test(t)?t:RS}catch{return RS}}function M$(n){return j$(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Map;function uL(n,e){const t=t_(n);hL(t,e),F$(t,e)}function hL(n,e){const t=cL.get(n);if(t)for(const r of t)r(e)}function F$(n,e){const t=B$();t&&t.postMessage({key:n,fid:e}),V$()}let s0=null;function B$(){return!s0&&"BroadcastChannel"in self&&(s0=new BroadcastChannel("[Firebase] FID Change"),s0.onmessage=n=>{hL(n.data.key,n.data.fid)}),s0}function V$(){cL.size===0&&s0&&(s0.close(),s0=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$="firebase-installations-database",U$=1,L0="firebase-installations-store";let o5=null;function K4(){return o5||(o5=Ab(z$,U$,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(L0)}}})),o5}async function eb(n,e){const t=t_(n),i=(await K4()).transaction(L0,"readwrite"),s=i.objectStore(L0),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&uL(n,e.fid),e}async function fL(n){const e=t_(n),r=(await K4()).transaction(L0,"readwrite");await r.objectStore(L0).delete(e),await r.done}async function n_(n,e){const t=t_(n),i=(await K4()).transaction(L0,"readwrite"),s=i.objectStore(L0),a=await s.get(t),o=e(a);return o===void 0?await s.delete(t):await s.put(o,t),await i.done,o&&(!a||a.fid!==o.fid)&&uL(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(n){let e;const t=await n_(n.appConfig,r=>{const i=H$(r),s=q$(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===RS?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function H$(n){const e=n||{fid:O$(),registrationStatus:0};return dL(e)}function q$(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(j0.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=W$(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:G$(n)}:{installationEntry:e}}async function W$(n,e){try{const t=await P$(n,e);return eb(n.appConfig,t)}catch(t){throw nL(t)&&t.customData.serverCode===409?await fL(n.appConfig):await eb(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function G$(n){let e=await Mk(n.appConfig);for(;e.registrationStatus===1;)await lL(100),e=await Mk(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await Y4(n);return r||t}return e}function Mk(n){return n_(n,e=>{if(!e)throw j0.create("installation-not-found");return dL(e)})}function dL(n){return $$(n)?{fid:n.fid,registrationStatus:0}:n}function $$(n){return n.registrationStatus===1&&n.registrationTime+Zj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K$({appConfig:n,heartbeatServiceProvider:e},t){const r=Y$(n,t),i=I$(n,t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={installation:{sdkVersion:eL,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await oL(()=>fetch(r,o));if(c.ok){const u=await c.json();return iL(u)}else throw await sL("Generate Auth Token",c)}function Y$(n,{fid:e}){return`${rL(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X4(n,e=!1){let t;const r=await n_(n.appConfig,s=>{if(!mL(s))throw j0.create("not-registered");const a=s.authToken;if(!e&&J$(a))return s;if(a.requestStatus===1)return t=X$(n,e),s;{if(!navigator.onLine)throw j0.create("app-offline");const o=eK(s);return t=Q$(n,o),o}});return t?await t:r.authToken}async function X$(n,e){let t=await Fk(n.appConfig);for(;t.authToken.requestStatus===1;)await lL(100),t=await Fk(n.appConfig);const r=t.authToken;return r.requestStatus===0?X4(n,e):r}function Fk(n){return n_(n,e=>{if(!mL(e))throw j0.create("not-registered");const t=e.authToken;return tK(t)?{...e,authToken:{requestStatus:0}}:e})}async function Q$(n,e){try{const t=await K$(n,e),r={...e,authToken:t};return await eb(n.appConfig,r),t}catch(t){if(nL(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await fL(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await eb(n.appConfig,r)}throw t}}function mL(n){return n!==void 0&&n.registrationStatus===2}function J$(n){return n.requestStatus===2&&!Z$(n)}function Z$(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+A$}function eK(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function tK(n){return n.requestStatus===1&&n.requestTime+Zj<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nK(n){const e=n,{installationEntry:t,registrationPromise:r}=await Y4(e);return r?r.catch(console.error):X4(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rK(n,e=!1){const t=n;return await iK(t),(await X4(t,e)).token}async function iK(n){const{registrationPromise:e}=await Y4(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sK(n){if(!n||!n.options)throw l5("App Configuration");if(!n.name)throw l5("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw l5(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function l5(n){return j0.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="installations",aK="installations-internal",oK=n=>{const e=n.getProvider("app").getImmediate(),t=sK(e),r=W0(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},lK=n=>{const e=n.getProvider("app").getImmediate(),t=W0(e,pL).getImmediate();return{getId:()=>nK(t),getToken:i=>rK(t,i)}};function cK(){jc(new Ql(pL,oK,"PUBLIC")),jc(new Ql(aK,lK,"PRIVATE"))}cK();vl(Jj,$4);vl(Jj,$4,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK="/firebase-messaging-sw.js",hK="/firebase-cloud-messaging-push-scope",gL="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",fK="https://fcmregistrations.googleapis.com/v1",xL="google.c.a.c_id",dK="google.c.a.c_l",mK="google.c.a.ts",pK="google.c.a.e",Bk=1e4;var Vk;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Vk||(Vk={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var gx;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(gx||(gx={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gK(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="fcm_token_details_db",xK=5,zk="fcm_token_object_Store";async function vK(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(c5))return null;let e=null;return(await Ab(c5,xK,{upgrade:async(r,i,s,a)=>{if(i<2||!r.objectStoreNames.contains(zk))return;const o=a.objectStore(zk),c=await o.index("fcmSenderId").get(n);if(await o.clear(),!!c){if(i===2){const u=c;if(!u.auth||!u.p256dh||!u.endpoint)return;e={token:u.fcmToken,createTime:u.createTime??Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:typeof u.vapidKey=="string"?u.vapidKey:vh(u.vapidKey)}}}else if(i===3){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:vh(u.auth),p256dh:vh(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:vh(u.vapidKey)}}}else if(i===4){const u=c;e={token:u.fcmToken,createTime:u.createTime,subscriptionOptions:{auth:vh(u.auth),p256dh:vh(u.p256dh),endpoint:u.endpoint,swScope:u.swScope,vapidKey:vh(u.vapidKey)}}}}}})).close(),await qw(c5),await qw("fcm_vapid_details_db"),await qw("undefined"),yK(e)?e:null}function yK(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK="firebase-messaging-database",_K=1,xx="firebase-messaging-store";let u5=null;function vL(){return u5||(u5=Ab(bK,_K,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(xx)}}})),u5}async function wK(n){const e=yL(n),r=await(await vL()).transaction(xx).objectStore(xx).get(e);if(r)return r;{const i=await vK(n.appConfig.senderId);if(i)return await Q4(n,i),i}}async function Q4(n,e){const t=yL(n),i=(await vL()).transaction(xx,"readwrite");return await i.objectStore(xx).put(e,t),await i.done,e}function yL({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SK={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ho=new q0("messaging","Messaging",SK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TK(n,e){const t=await Z4(n),r=bL(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(J4(n.appConfig),i)).json()}catch(a){throw ho.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ho.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw ho.create("token-subscribe-no-token");return s.token}async function EK(n,e){const t=await Z4(n),r=bL(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${J4(n.appConfig)}/${e.token}`,i)).json()}catch(a){throw ho.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ho.create("token-update-failed",{errorInfo:a})}if(!s.token)throw ho.create("token-update-no-token");return s.token}async function AK(n,e){const r={method:"DELETE",headers:await Z4(n)};try{const s=await(await fetch(`${J4(n.appConfig)}/${e}`,r)).json();if(s.error){const a=s.error.message;throw ho.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw ho.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function J4({projectId:n}){return`${fK}/projects/${n}/registrations`}async function Z4({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function bL({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==gL&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=10080*60*1e3;async function CK(n){const e=await IK(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:vh(e.getKey("auth")),p256dh:vh(e.getKey("p256dh"))},r=await wK(n.firebaseDependencies);if(r){if(DK(r.subscriptionOptions,t))return Date.now()>=r.createTime+NK?kK(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await AK(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Uk(n.firebaseDependencies,t)}else return Uk(n.firebaseDependencies,t)}async function kK(n,e){try{const t=await EK(n.firebaseDependencies,e),r={...e,token:t,createTime:Date.now()};return await Q4(n.firebaseDependencies,r),t}catch(t){throw t}}async function Uk(n,e){const r={token:await TK(n,e),createTime:Date.now(),subscriptionOptions:e};return await Q4(n,r),r.token}async function IK(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gK(e)})}function DK(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return RK(e,n),PK(e,n),jK(e,n),e}function RK(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}function PK(n,e){e.data&&(n.data=e.data)}function jK(n,e){var i,s,a,o;if(!e.fcmOptions&&!((i=e.notification)!=null&&i.click_action))return;n.fcmOptions={};const t=((s=e.fcmOptions)==null?void 0:s.link)??((a=e.notification)==null?void 0:a.click_action);t&&(n.fcmOptions.link=t);const r=(o=e.fcmOptions)==null?void 0:o.analytics_label;r&&(n.fcmOptions.analyticsLabel=r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LK(n){return typeof n=="object"&&!!n&&xL in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(n){if(!n||!n.options)throw h5("App Configuration Object");if(!n.name)throw h5("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw h5(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function h5(n){return ho.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=OK(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FK(n){try{n.swRegistration=await navigator.serviceWorker.register(uK,{scope:hK}),n.swRegistration.update().catch(()=>{}),await BK(n.swRegistration)}catch(e){throw ho.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}async function BK(n){return new Promise((e,t)=>{const r=setTimeout(()=>t(new Error(`Service worker not registered after ${Bk} ms`)),Bk),i=n.installing||n.waiting;n.active?(clearTimeout(r),e()):i?i.onstatechange=s=>{var a;((a=s.target)==null?void 0:a.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),t(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VK(n,e){if(!e&&!n.swRegistration&&await FK(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ho.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zK(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=gL)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(n,e){if(!navigator)throw ho.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ho.create("permission-blocked");return await zK(n,e==null?void 0:e.vapidKey),await VK(n,e==null?void 0:e.serviceWorkerRegistration),CK(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UK(n,e,t){const r=HK(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[xL],message_name:t[dK],message_time:t[mK],message_device_time:Math.floor(Date.now()/1e3)})}function HK(n){switch(n){case gx.NOTIFICATION_CLICKED:return"notification_open";case gx.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qK(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===gx.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(Hk(t)):n.onMessageHandler.next(Hk(t)));const r=t.data;LK(r)&&r[pK]==="1"&&await UK(n,t.messageType,r)}const qk="@firebase/messaging",Wk="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK=n=>{const e=new MK(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>qK(e,t)),e},GK=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>_L(e,r)}};function $K(){jc(new Ql("messaging",WK,"PUBLIC")),jc(new Ql("messaging-internal",GK,"PRIVATE")),vl(qk,Wk),vl(qk,Wk,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KK(){try{await wR()}catch{return!1}return typeof window<"u"&&jT()&&oB()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YK(n=MT()){return KK().then(e=>{if(!e)throw ho.create("unsupported-browser")},e=>{throw ho.create("indexed-db-unsupported")}),W0(ri(n),"messaging").getImmediate()}async function XK(n,e){return n=ri(n),_L(n,e)}$K();const QK={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:""},r_=ER(QK),Ut=$W(r_,{localCache:oG({tabManager:hG()}),experimentalForceLongPolling:!0}),ig=jU(r_),wL=_$(r_),JK=YK(r_),ZK=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})}),PS=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),jS=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),eY=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),vx=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),tY=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 8h6m-5 4h4m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),LS=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),nY=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),rY=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),SL=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),OS=fn(Ut,"settings","companyInfo"),TL="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAgMTAwIj48cGF0aCBkPSJNODUgNDUgQzg1IDY3IDY3IDg1IDQ1IDg1IEMyMyA4NSA1IDY3IDUgNDUgQzUgMjMgMjMgNSA0NSA1IEM1NSA1IDY1IDkgNzMgMTUgTDg1IDUgWiIgZmlsbD0iI0ZERDgzbSIvPjxwYXRoIGQ9Ik03MyAxNSBMODUgNSBMODUgMjAgWiIgZmlsbD0iIzQzQTA0NyIvPjx0ZXh0IHg9IjQ1IiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjMwIiBmb250LXdlaWdodD0iYm9sZCIgZmlsbD0iI0ZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RVA8L3RleHQ+PC9zdmc+",v2={denomination:"EASY PEASY",name:"ILARIA TAVANI",vatNumber:"IT 09038130721",address:"VIA CHIANCARO 2 N, 70010 ADELFIA (BARI)",email:"labeasypeasy@gmail.com",phone:"+39 3405234353",logoBase64:TL,carFuelConsumption:16.5},Up=async()=>{try{const n=await Mu(OS);if(n.exists()){const e=n.data();return{...e,id:n.id,logoBase64:e.logoBase64||TL,carFuelConsumption:e.carFuelConsumption||16.5}}else try{return await ov(OS,v2),{id:"companyInfo",...v2}}catch(e){return console.warn("Impossibile creare company info default:",e),{id:"companyInfo",...v2}}}catch(n){return console.warn("Errore caricamento Company Info (possibile offline):",n),{id:"companyInfo",...v2}}},iY=async n=>{const{id:e,...t}=n;await ov(OS,t)},EL=ss(Ut,"subscriptionTypes"),sY=n=>({id:n.id,...n.data()}),AL=async()=>{const n=ga(EL,Ou("price"));return(await Jr(n)).docs.map(sY)},aY=async n=>(await Go(EL,n)).id,oY=async(n,e)=>{const t=fn(Ut,"subscriptionTypes",n);await Zr(t,e)},lY=async n=>{const e=fn(Ut,"subscriptionTypes",n);await Wo(e)},NL=fn(Ut,"settings","recoverySettings"),cY=async()=>{try{const n=await Mu(NL);return n.exists()?n.data().policies||{}:{}}catch(n){return console.warn("Error fetching recovery policies",n),{}}},uY=async n=>{await ov(NL,{policies:n})},CL=ss(Ut,"periodicChecks"),hY=n=>({id:n.id,...n.data()}),kL=async()=>{const n=ga(CL,Ou("category"));return(await Jr(n)).docs.map(hY)},fY=async n=>(await Go(CL,n)).id,dY=async(n,e)=>{const t=fn(Ut,"periodicChecks",n);await Zr(t,e)},mY=async n=>{const e=fn(Ut,"periodicChecks",n);await Wo(e)},pY=ss(Ut,"communicationTemplates"),gY=[{id:"expiry",label:"Scadenza Iscrizione",subject:"Rinnovo Iscrizione in scadenza - {{bambino}}",body:`Gentile {{cliente}},

Ti ricordiamo che l'iscrizione di {{bambino}} scadr il {{data}}.
Per confermare il posto per il prossimo periodo, ti preghiamo di effettuare il rinnovo.`,signature:`A presto,
Easy Peasy`},{id:"lessons",label:"Esaurimento Lezioni",subject:"Avviso esaurimento lezioni - {{bambino}}",body:`Gentile {{cliente}},

Le lezioni del pacchetto di {{bambino}} stanno per terminare.
Ti invitiamo a rinnovare l'iscrizione per non perdere la continuit didattica.`,signature:`A presto,
Easy Peasy`},{id:"payment",label:"Pagamento Fornitore",subject:"Avviso Pagamento Nolo - {{descrizione}}",body:`Spett.le {{fornitore}},

Vi informiamo che abbiamo preso in carico il pagamento per: {{descrizione}}.
Il bonifico verr effettuato nei prossimi giorni.`,signature:`Cordiali saluti,
Amministrazione Easy Peasy`}],xY=async()=>{const e=(await Jr(pY)).docs.map(r=>({id:r.id,...r.data()})),t=[...gY];return e.forEach(r=>{const i=t.findIndex(s=>s.id===r.id);i>=0?t[i]=r:t.push(r)}),t},vY=async n=>{const e=fn(Ut,"communicationTemplates",n.id);await ov(e,n)},yY=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16l-4-3 1.5-4.5h5l1.5 4.5-4 3z"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16v6"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 13l-6 2"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 13l6 2"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.5 8.5L5 4"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.5 8.5L19 4"})]}),bY=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[f.jsx("circle",{cx:"12",cy:"12",r:"10"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.121 15.536c-1.171 1.952-3.07 1.952-4.242 0-1.172-1.953-1.172-5.119 0-7.072 1.171-1.952 3.07-1.952 4.242 0M8 10.5h4m-4 3h4"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 10.5a3.5 3.5 0 0 1 3.5 -3.5h1"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 13.5a3.5 3.5 0 0 0 3.5 3.5h1"}),f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h5"})]}),_Y=({currentPage:n,setCurrentPage:e,user:t,isOpen:r,setIsOpen:i})=>{const[s,a]=ne.useState(""),[o,c]=ne.useState(null);ne.useEffect(()=>{const x=async()=>{try{const _=await Up();_.logoBase64&&a(_.logoBase64)}catch(_){console.error("Error loading logo",_)}};x();const v=()=>x();return window.addEventListener("EP_DataUpdated",v),()=>window.removeEventListener("EP_DataUpdated",v)},[]),ne.useEffect(()=>{n==="Attendance"||n==="AttendanceArchive"?c("Presenze"):n==="ActivityLog"||n==="Homeworks"?c("Registro Elettronico"):(n==="Activities"||n==="Initiatives")&&c("Attivit")},[n]);const u=[{page:"Dashboard",label:"Dashboard",icon:f.jsx(ZK,{})},{page:"Calendar",label:"Calendario",icon:f.jsx(vx,{})},{page:"Enrollments",label:"Iscrizioni",icon:f.jsx(LS,{})},{label:"Registro Elettronico",icon:f.jsx(rY,{}),subItems:[{page:"ActivityLog",label:"Lezioni"},{page:"Homeworks",label:"Compiti"}]},{label:"Presenze",icon:f.jsx(nY,{}),subItems:[{page:"Attendance",label:"Registro"},{page:"AttendanceArchive",label:"Archivio"}]},{page:"Finance",label:"Finanza",icon:f.jsx(bY,{})},{page:"CRM",label:"CRM",icon:f.jsx(tY,{})},{page:"Clients",label:"Clienti",icon:f.jsx(PS,{})},{page:"Suppliers",label:"Fornitori",icon:f.jsx(jS,{})},{label:"Attivit",icon:f.jsx(yY,{}),subItems:[{page:"Activities",label:"Activities"},{page:"Initiatives",label:"Iniziative"}]},{page:"Settings",label:"Impostazioni",icon:f.jsx(eY,{})}],d=x=>{console.log("[DEBUG 1] Sidebar: Click su menu",x),e(x),i(!1)},p=x=>{console.log("[DEBUG 2] Sidebar: Toggle sottomenu",x),c(v=>v===x?null:x)};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:`fixed inset-0 bg-slate-900/50 z-30 transition-opacity backdrop-blur-sm md:hidden ${r?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>i(!1),"aria-hidden":"true"}),f.jsxs("nav",{className:`w-64 bg-white border-r border-gray-200 flex-shrink-0 flex flex-col fixed md:relative h-full z-40 transition-transform transform md:translate-x-0 duration-300 ease-in-out ${r?"translate-x-0":"-translate-x-full"}`,children:[f.jsx("div",{className:"h-20 flex items-center px-6 border-b border-gray-100",children:f.jsxs("div",{className:"flex items-center gap-3",children:[s?f.jsx("img",{src:s,alt:"EP Logo",className:"w-10 h-10 object-contain"}):f.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 animate-pulse"}),f.jsxs("div",{children:[f.jsx("h1",{className:"text-lg font-bold tracking-tight text-gray-800 leading-tight",children:"EP v1"}),f.jsx("p",{className:"text-[10px] text-gray-400 font-medium uppercase tracking-wider",children:"Gestionale"})]})]})}),f.jsx("ul",{className:"flex-1 px-3 py-6 space-y-1 overflow-y-auto custom-scrollbar",children:u.map((x,v)=>{if(x.subItems){const b=o===x.label,S=x.subItems.some(T=>T.page===n);return f.jsxs("li",{className:"mb-1",children:[f.jsxs("button",{onClick:()=>p(x.label),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 ease-in-out group
                                ${S?"bg-indigo-50 text-indigo-700":"text-gray-500 hover:bg-gray-50 hover:text-gray-900"}`,children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:`mr-3 transition-colors ${S?"text-indigo-600":"text-gray-400 group-hover:text-gray-600"}`,children:x.icon}),x.label]}),f.jsx("span",{className:`transition-transform duration-200 ${b?"rotate-180":""}`,children:f.jsx(SL,{})})]}),f.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${b?"max-h-40 opacity-100 mt-1":"max-h-0 opacity-0"}`,children:f.jsx("ul",{className:"space-y-1 pl-11 pr-2",children:x.subItems.map(T=>{const k=n===T.page;return f.jsx("li",{children:f.jsx("button",{onClick:()=>d(T.page),className:`w-full text-left px-3 py-2 rounded-lg text-sm font-medium transition-all
                                                    ${k?"bg-white text-indigo-600 shadow-sm border border-gray-100":"text-gray-500 hover:text-gray-800 hover:bg-gray-50"}`,children:T.label})},T.page)})})})]},`group-${v}`)}const _=n===x.page;return f.jsx("li",{children:f.jsxs("button",{onClick:()=>x.page&&d(x.page),className:`w-full flex items-center px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-200 ease-in-out group relative
                      ${_?"bg-indigo-50 text-indigo-700":"text-gray-500 hover:bg-gray-50 hover:text-gray-900"}`,children:[f.jsx("span",{className:`mr-3 transition-colors ${_?"text-indigo-600":"text-gray-400 group-hover:text-gray-600"}`,children:x.icon}),x.label,_&&f.jsx("div",{className:"absolute right-3 w-1.5 h-1.5 rounded-full bg-indigo-600"})]})},x.page)})}),f.jsx("div",{className:"p-4 border-t border-gray-100 bg-gray-50/30",children:f.jsxs("div",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-white hover:shadow-sm transition-all cursor-pointer",onClick:()=>d("Profile"),children:[f.jsx("div",{className:"w-9 h-9 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-bold text-sm border border-indigo-200",children:t.email?t.email.charAt(0).toUpperCase():"U"}),f.jsxs("div",{className:"overflow-hidden flex-1",children:[f.jsx("p",{className:"font-medium text-xs text-gray-900 truncate",title:t.email||"",children:t.email}),f.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-wider font-semibold",children:"Admin"})]})]})})]})]})};var ur=(n=>(n.Parent="parent",n.Institutional="institutional",n))(ur||{}),Pr=(n=>(n.Pending="pending",n.Active="active",n.Completed="completed",n.Expired="expired",n))(Pr||{}),Fi=(n=>(n.Income="income",n.Expense="expense",n))(Fi||{}),_s=(n=>(n.Sales="Vendite",n.Rent="Nolo Sedi",n.Taxes="Imposte e Tasse",n.Fuel="Carburante",n.Materials="Materiali",n.ProfessionalServices="Servizi Professionali",n.Software="Software",n.Marketing="Marketing",n.OtherExpense="Altre Spese",n.OtherIncome="Altri Ricavi",n))(_s||{}),Eu=(n=>(n.BankTransfer="Bonifico",n.Cash="Contanti",n.CreditCard="Carta di Credito",n.PayPal="PayPal",n.Check="Assegno",n))(Eu||{}),Lh=(n=>(n.Pending="pending",n.Completed="completed",n.Cancelled="cancelled",n))(Lh||{}),wi=(n=>(n.Draft="draft",n.Sent="sent",n.Paid="paid",n.Overdue="overdue",n.PendingSDI="pending_sdi",n.SealedSDI="sealed_sdi",n.Void="void",n))(wi||{}),MS=(n=>(n.Payments="Pagamenti",n.Documents="Documenti",n.Materials="Materiali",n.Maintenance="Manutenzione",n.Appointments="Appuntamenti",n))(MS||{});const eE=ss(Ut,"enrollments"),IL=n=>({id:n.id,...n.data()}),FS=async n=>{const e=ga(eE,R0("clientId","==",n));return(await Jr(e)).docs.map(IL)},_l=async()=>(await Jr(eE)).docs.map(IL),wY=async n=>(await Go(eE,n)).id,f5=async(n,e)=>{const t=fn(Ut,"enrollments",n);await Zr(t,e)},j1=async n=>{const e=fn(Ut,"enrollments",n);await Wo(e)},SY=n=>{const e=n.getDate(),t=n.getMonth()+1;return n.getFullYear(),e===1&&t===1||e===6&&t===1||e===25&&t===4||e===1&&t===5||e===2&&t===6||e===15&&t===8||e===1&&t===11||e===8&&t===12||e===25&&t===12||e===26&&t===12},Gk=async(n,e,t)=>{const r=fn(Ut,"enrollments",n),i=await Mu(r);if(!i.exists())throw new Error("Iscrizione non trovata");const a=[...i.data().appointments||[]],o=a.findIndex(u=>u.lessonId===e);if(o===-1)throw new Error("Lezione non trovata");a[o].status="Absent";let c={appointments:a};{const u=[...a].sort((p,x)=>new Date(p.date).getTime()-new Date(x.date).getTime()),d=u[u.length-1];if(d){let p=new Date(d.date);const x=p.getDay();let v=!1,_=0;for(;!v&&_<52;)p.setDate(p.getDate()+1),p.getDay()===x&&!SY(p)&&(v=!0),_++;if(v){const b={lessonId:Date.now().toString()+Math.random().toString(36).substr(2,9),date:p.toISOString(),startTime:d.startTime,endTime:d.endTime,locationName:d.locationName,locationColor:d.locationColor,childName:d.childName,status:"Scheduled"};a.push(b)}else console.warn(`[ENROLLMENT] Recupero automatico fallito per iscrizione ${n}: nessuna data disponibile trovata entro 52 settimane. Lezione ${e} rimane 'Absent'.`)}}c.appointments=a,await Zr(r,c)},$k=async(n,e)=>{const t=fn(Ut,"enrollments",n),r=await Mu(t);if(!r.exists())throw new Error("Iscrizione non trovata");const i=r.data(),s=[...i.appointments||[]],a=s.findIndex(u=>u.lessonId===e);if(a===-1)throw new Error("Lezione non trovata");if(s[a].status==="Present")return;s[a].status="Present",s[a].actualLocationId=i.locationId,s[a].actualLocationName=i.locationName,s[a].actualLocationColor=i.locationColor;const o=Math.max(0,i.lessonsRemaining-1);let c={appointments:s,lessonsRemaining:o};o===0&&(c.status=Pr.Completed,console.log(`[ENROLLMENT] Iscrizione ${n} esaurita automaticamente (lessonsRemaining = 0)`)),await Zr(t,c)},TY=async(n,e)=>{const t=fn(Ut,"enrollments",n),r=await Mu(t);if(!r.exists())throw new Error("Iscrizione non trovata");const i=r.data(),s=[...i.appointments||[]],a=s.findIndex(u=>u.lessonId===e);if(a===-1)throw new Error("Lezione non trovata");const o=s[a].status;s[a].status="Scheduled";let c=i.lessonsRemaining;o==="Present"&&(c=Math.min(i.lessonsTotal,i.lessonsRemaining+1)),await Zr(t,{appointments:s,lessonsRemaining:c})},EY=async(n,e)=>{const t=fn(Ut,"enrollments",n),r=await Mu(t);if(!r.exists())throw new Error("Iscrizione non trovata");const i=r.data(),s=[...i.appointments||[]],a=s.findIndex(u=>u.lessonId===e);if(a===-1)throw new Error("Lezione non trovata");const o=s[a].status;let c=i.lessonsRemaining;o==="Present"?(s[a].status="Absent",c=Math.min(i.lessonsTotal,i.lessonsRemaining+1)):o==="Absent"&&(s[a].status="Present",s[a].actualLocationId=i.locationId,s[a].actualLocationName=i.locationName,s[a].actualLocationColor=i.locationColor,c=Math.max(0,i.lessonsRemaining-1)),await Zr(t,{appointments:s,lessonsRemaining:c})},AY=async(n,e,t,r,i,s,a)=>{const o=fn(Ut,"enrollments",n),c=await Mu(o);if(!c.exists())throw new Error("Iscrizione non trovata");const u=c.data(),d=[...u.appointments||[]],p=u.childName;let x=new Date(e);for(let v=0;v<i;v++){const _={lessonId:`REC-${Date.now()}-${v}`,date:x.toISOString(),startTime:t,endTime:r,locationName:s,locationColor:a,childName:p,status:"Scheduled"};d.push(_),x.setDate(x.getDate()+7)}d.sort((v,_)=>new Date(v.date).getTime()-new Date(_.date).getTime()),await Zr(o,{appointments:d})},NY=async(n,e,t,r,i,s,a,o,c)=>{var b;const u=fn(Ut,"enrollments",n),d=await Mu(u);if(!d.exists())throw new Error("Iscrizione non trovata");const p=d.data();let x=new Date(p.startDate);for(;x.getDay()!==a;)x.setDate(x.getDate()+1);const v=[],_=p.lessonsTotal;for(let S=0;S<_;S++)v.push({lessonId:Date.now().toString()+Math.random().toString(36).substr(2,9),date:x.toISOString(),startTime:o,endTime:c,locationName:i,locationColor:s,childName:p.childName,status:"Scheduled"}),x.setDate(x.getDate()+7);await Zr(u,{supplierId:e,supplierName:t,locationId:r,locationName:i,locationColor:s,appointments:v,startDate:((b=v[0])==null?void 0:b.date)||p.startDate,status:Pr.Active})},CY=async(n,e,t,r,i,s,a)=>{const o=Bc(Ut),c=new Date(e);c.setHours(0,0,0,0);for(const u of n){const d=fn(Ut,"enrollments",u),p=await Mu(d);if(p.exists()){const v=(p.data().appointments||[]).map(_=>new Date(_.date)>=c&&_.status!=="Present"&&_.status!=="Absent"?{..._,locationName:r,locationColor:i,startTime:s||_.startTime,endTime:a||_.endTime}:_);o.update(d,{locationId:t,locationName:r,locationColor:i,appointments:v})}}await o.commit()},DL=ss(Ut,"clients"),kY=n=>{const e=n.data(),t={id:n.id,...e};if(t.clientType||(t.type==="parent"||t.type==="institutional"?t.clientType=t.type:t.firstName||t.lastName||t.taxCode||t.children&&t.children.length>0?t.clientType=ur.Parent:t.companyName||t.vatNumber?t.clientType=ur.Institutional:t.clientType=ur.Parent),t.clientType===ur.Parent){const r=t;r.firstName=r.firstName||e.name||"",r.lastName=r.lastName||"",r.email=r.email||"",r.phone=r.phone||"",r.address=r.address||"",Array.isArray(r.children)?r.children=r.children.map(i=>({id:i.id||Date.now().toString()+Math.random(),name:i.name||"Senza Nome",age:i.age||"",notes:i.notes||"",notesHistory:Array.isArray(i.notesHistory)?i.notesHistory:[],tags:Array.isArray(i.tags)?i.tags:[],rating:i.rating||{learning:0,behavior:0,attendance:0,hygiene:0}})):r.children=[],r.rating||(r.rating={availability:0,complaints:0,churnRate:0,distance:0})}else{const r=t;r.companyName=r.companyName||e.name||"Ente Senza Nome",r.vatNumber=r.vatNumber||"",r.email=r.email||"",r.phone=r.phone||""}return t.notesHistory=Array.isArray(t.notesHistory)?t.notesHistory:[],t.tags=Array.isArray(t.tags)?t.tags:[],t},Oh=async()=>(await Jr(DL)).docs.map(kY),IY=async n=>(await Go(DL,{...n,isDeleted:!1})).id,DY=async(n,e)=>{const t=fn(Ut,"clients",n);await Zr(t,e)},RY=async n=>{const e=fn(Ut,"clients",n);await Zr(e,{isDeleted:!0})},PY=async n=>{const e=fn(Ut,"clients",n);await Zr(e,{isDeleted:!1})},Kk=async n=>{const e=fn(Ut,"clients",n);await Wo(e)},sg=ss(Ut,"transactions"),jY=n=>{const e=n.data();return{id:n.id,...e,status:e.status||Lh.Completed,isDeleted:e.isDeleted||!1}},Hp=async()=>{const n=ga(sg,Ou("date","desc"));return(await Jr(n)).docs.map(jY)},BS=async n=>{const e={...n,status:n.status||Lh.Completed,isDeleted:!1};return(await Go(sg,e)).id},LY=async(n,e)=>{const t=fn(Ut,"transactions",n);await Zr(t,e)},OY=async n=>{const e=fn(Ut,"transactions",n);await Zr(e,{isDeleted:!0})},RL=async n=>{const e=fn(Ut,"transactions",n);await Wo(e)},MY=async n=>{const e=ga(sg,R0("relatedDocumentId","==",n)),t=await Jr(e),r=Bc(Ut);t.docs.forEach(i=>{r.delete(i.ref)}),await r.commit()},gp=async n=>{const e=ga(sg,R0("category","==",_s.Rent),R0("allocationId","==",n)),t=await Jr(e),r=Bc(Ut);let i=0;t.docs.forEach(s=>{const a=s.data();a.relatedDocumentId&&String(a.relatedDocumentId).startsWith("AUTO-RENT")&&(r.delete(s.ref),i++)}),i>0&&(await r.commit(),console.log(`Eliminate ${i} transazioni di nolo automatico per la sede ${n}`))},FY=async n=>{const e=Bc(Ut);n.forEach(t=>{const r=fn(sg);e.set(r,{...t,isDeleted:!1})}),await e.commit()},BY=(n,e,t)=>{const r=[],i=new Map;e.forEach(a=>{a.locations.forEach(o=>{i.set(o.id,{cost:o.rentalCost||0,name:o.name})})});const s=new Map;return n.forEach(a=>{a.appointments&&a.appointments.forEach(o=>{if(o.status==="Present"){const c=new Date(o.date),u=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`,d=o.actualLocationId||a.locationId,p=`${u}|${d}`,x=s.get(p)||0;s.set(p,x+1)}})}),s.forEach((a,o)=>{const[c,u]=o.split("|"),[d,p]=c.split("-"),x=i.get(u);if(x||u!=="unassigned"){const v=((x==null?void 0:x.cost)||0)*a,_=(x==null?void 0:x.name)||`Sede [${u}]`,b=`Nolo Sede: ${_} - ${p}/${d}`;if(!t.some(T=>!T.isDeleted&&T.type===Fi.Expense&&T.category===_s.Rent&&T.description===b)&&v>0){const T=new Date(parseInt(d),parseInt(p),0);r.push({date:T.toISOString(),description:b,amount:v,type:Fi.Expense,category:_s.Rent,paymentMethod:Eu.BankTransfer,status:Lh.Pending,relatedDocumentId:`AUTO-RENT-${o}`,allocationType:"location",allocationId:u,allocationName:_})}}}),r},PL=async(n,e,t=3)=>{const r=ss(Ut,n),i=ga(r,Ou("issueDate","desc"),nG(50)),s=await Jr(i),a=new Date().getFullYear().toString();let o=0;s.empty||s.docs.forEach(u=>{const d=u.data(),p=n==="invoices"?d.invoiceNumber:d.quoteNumber;if(p&&p.includes(a)){const x=p.split("-"),v=x[x.length-1],_=parseInt(v,10);!isNaN(_)&&_>o&&(o=_)}});const c=(o+1).toString().padStart(t,"0");return`${e}-${a}-${c}`},tE=ss(Ut,"invoices"),VY=n=>({id:n.id,...n.data(),isDeleted:n.data().isDeleted||!1}),yx=async()=>{const n=ga(tE,Ou("issueDate","desc"));return(await Jr(n)).docs.map(VY)},zY=async()=>{const n=ga(tE,R0("status","==",wi.Sent)),e=await Jr(n),t=Bc(Ut),r=new Date;r.setHours(0,0,0,0);let i=0;e.docs.forEach(s=>{const a=s.data();a.isDeleted||new Date(a.dueDate)<r&&(t.update(s.ref,{status:wi.Overdue}),i++)}),i>0&&await t.commit()},VS=async n=>{const e=n.invoiceNumber||await PL("invoices","FT",3);return{id:(await Go(tE,{...n,invoiceNumber:e,isDeleted:!1})).id,invoiceNumber:e}},Yk=async(n,e)=>{const t=fn(Ut,"invoices",n);await Zr(t,e)},UY=async n=>{const e=fn(Ut,"invoices",n);await Zr(e,{isDeleted:!0})},jL=async n=>{const e=fn(Ut,"invoices",n);await Wo(e)},LL=ss(Ut,"quotes"),HY=n=>({id:n.id,...n.data(),isDeleted:n.data().isDeleted||!1}),zS=async()=>{const n=ga(LL);return(await Jr(n)).docs.map(HY).sort((r,i)=>new Date(i.issueDate).getTime()-new Date(r.issueDate).getTime())},qY=async n=>{const e=await PL("quotes","PR",4);return(await Go(LL,{...n,quoteNumber:e,isDeleted:!1})).id},WY=async(n,e)=>{const t=fn(Ut,"quotes",n);await Zr(t,e)},GY=async n=>{const e=fn(Ut,"quotes",n);await Zr(e,{isDeleted:!0})},$Y=async n=>{const e=fn(Ut,"quotes",n);await Wo(e)},L1=async n=>{const e=n.clientId,t=n.childName,r=await yx(),i=t.toLowerCase(),s=r.filter(c=>c.clientId===e&&(c.notes&&c.notes.toLowerCase().includes(i)||c.items.some(u=>u.description.toLowerCase().includes(i))));for(const c of s)await MY(c.id),await jL(c.id);const o=(await Hp()).filter(c=>{const u=c.description.toLowerCase();return c.type===Fi.Income&&(u.includes(`incasso iscrizione (contanti): ${i}`)||u.includes(`incasso iscrizione (contanti) - ${i}`))});for(const c of o)await RL(c.id);if(n.locationId&&n.locationId!=="unassigned"&&await gp(n.locationId),n.appointments&&n.appointments.length>0){const c=n.appointments.map(u=>u.lessonId);await KY(c)}},KY=async n=>{if(n.length===0)return;const e=ss(Ut,"lesson_activities"),t=await Jr(e),r=Bc(Ut);let i=0;t.docs.forEach(s=>{const a=s.data();n.includes(a.lessonId)&&(r.delete(s.ref),i++)}),i>0&&(await r.commit(),console.log(`Eliminate ${i} attivit didattiche collegate.`))},YY=async n=>{const e=ga(sg,R0("type","==",n)),t=await Jr(e),r=Bc(Ut);let i=0;t.docs.forEach(s=>{s.data(),r.delete(s.ref),i++}),i>0&&await r.commit()},OL=async n=>{await zY();const e=n?`ep_ignored_notifications_${n}`:"ep_ignored_notifications",t=JSON.parse(localStorage.getItem(e)||"[]"),[r,i,s,a,o]=await Promise.all([_l(),Oh(),yx(),zS(),Hp()]),c=new Map;i.forEach(b=>{b.clientType===ur.Parent?c.set(b.id,`${b.firstName} ${b.lastName}`):c.set(b.id,b.companyName)});const u=[],d=new Date;d.setHours(0,0,0,0);const p=new Date(d);p.setDate(d.getDate()+7),r.forEach(b=>{const S=c.get(b.clientId)||"Cliente";if(b.status===Pr.Pending&&u.push({id:`enr-pending-${b.id}`,type:"payment_required",message:`Iscrizione in attesa di pagamento: ${b.childName} (${S}) - ${b.price}`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Enrollments",filterContext:{status:"pending",searchTerm:b.childName}}),b.status===Pr.Active){const T=new Date(b.endDate);if(T>=d&&T<=p){const k=T.getTime()-d.getTime(),E=Math.ceil(k/(1e3*60*60*24));u.push({id:`enr-exp-${b.id}`,type:"expiry",message:`L'iscrizione di ${b.childName} (${S}) scade tra ${E} giorni.`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Enrollments",filterContext:{status:"active",searchTerm:b.childName}})}b.lessonsRemaining>0&&b.lessonsRemaining<=2&&u.push({id:`enr-low-${b.id}`,type:"low_lessons",message:`Restano solo ${b.lessonsRemaining} lezioni per ${b.childName} (${S}).`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Enrollments",filterContext:{status:"active",searchTerm:b.childName}})}});let x=0;const v=d.getMonth(),_=d.getFullYear();return s.forEach(b=>{if(!b.isDeleted){if(b.isGhost&&b.status===wi.Draft){const S=new Date(b.issueDate);Math.floor((d.getTime()-S.getTime())/(1e3*60*60*24))>=30&&u.push({id:`inv-balance-${b.id}`,type:"balance_due",message:`SALDO DOVUTO: Sono passati 30gg dall'acconto di ${b.clientName}. Saldo: ${b.totalAmount.toFixed(2)}.`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"invoices",searchTerm:b.clientName}})}if(b.status===wi.Overdue&&u.push({id:`inv-overdue-${b.id}`,type:"expiry",message:`Fattura Scaduta ${b.invoiceNumber} (${b.totalAmount.toFixed(2)}) - ${b.clientName}`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"invoices",invoiceStatus:wi.Overdue}}),b.status===wi.Draft&&!b.isGhost&&u.push({id:`inv-draft-${b.id}`,type:"action_required",message:`Bozza Fattura da inviare: ${b.clientName} (${b.totalAmount.toFixed(2)})`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"invoices",invoiceStatus:wi.Draft}}),b.status===wi.PendingSDI){const S=new Date(b.issueDate);S.setHours(0,0,0,0);let T=new Date(S);if(T.setDate(T.getDate()+12),S.getMonth()===11){const j=new Date(S.getFullYear(),11,30);T>j&&(T=j)}const k=T.getTime()-d.getTime(),E=Math.ceil(k/(1e3*60*60*24));u.push({id:`inv-sdi-${b.id}`,type:"sdi_deadline",message:`SDI: Registra fattura ${b.invoiceNumber} entro ${E} giorni!`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"invoices",invoiceStatus:wi.PendingSDI}})}if(b.status===wi.SealedSDI){const S=new Date(b.issueDate);S.getMonth()===v&&S.getFullYear()===_&&x++}}}),x>0&&u.push({id:`accountant-send-${v}-${_}`,type:"accountant_send",message:`Trasmettere a commercialista: ${x} fatture sigillate questo mese.`,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"invoices",invoiceStatus:wi.SealedSDI}}),a.forEach(b=>{b.isDeleted||b.status===wi.Draft&&u.push({id:`quote-draft-${b.id}`,type:"action_required",message:`Bozza Preventivo da inviare: ${b.clientName} (${b.totalAmount.toFixed(2)})`,clientId:b.clientId,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"quotes"}})}),o.forEach(b=>{b.isDeleted||b.status===Lh.Pending&&u.push({id:`trans-pending-${b.id}`,type:"payment_required",message:`Da Saldare: ${b.description} (${b.amount.toFixed(2)})`,date:new Date().toISOString(),linkPage:"Finance",filterContext:{tab:"transactions",transactionStatus:"pending"}})}),u.filter(b=>!t.includes(b.id))},Vh=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),ML=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),XY=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),QY=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),as=()=>f.jsx("div",{className:"flex items-center justify-center",children:f.jsx("div",{className:"w-8 h-8 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin",role:"status","aria-label":"loading",children:f.jsx("span",{className:"sr-only",children:"Caricamento..."})})}),tb=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),fy=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),JY=({notifications:n,loading:e,onNotificationClick:t})=>{const[r,i]=ne.useState(void 0);ne.useEffect(()=>{const a=ig.currentUser;a&&i(a.uid)},[]);const s=()=>{const a=r?`ep_ignored_notifications_${r}`:"ep_ignored_notifications",o=JSON.parse(localStorage.getItem(a)||"[]"),c=n.map(u=>u.id);localStorage.setItem(a,JSON.stringify([...o,...c])),window.dispatchEvent(new Event("EP_DataUpdated"))};return f.jsxs("div",{className:"fixed right-2 top-16 mt-1 w-[95vw] max-w-[320px] sm:absolute sm:right-0 sm:left-auto sm:top-full sm:mt-2 sm:w-80 bg-white rounded-md shadow-lg z-50 ring-1 ring-black ring-opacity-5 animate-fade-in-down origin-top-right",children:[f.jsxs("div",{className:"px-4 py-2 border-b flex justify-between items-center",children:[f.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Notifiche"}),n.length>0&&f.jsx("button",{onClick:s,className:"text-[10px] text-indigo-600 font-bold hover:underline",children:"Segna tutti letti"})]}),f.jsx("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:e?f.jsx("div",{className:"flex justify-center items-center py-4",children:f.jsx(as,{})}):n.length===0?f.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"Nessuna nuova notifica."}):f.jsx("ul",{children:n.map(a=>f.jsx("li",{children:f.jsx("button",{onClick:()=>t(a),className:"w-full text-left px-4 py-3 hover:bg-slate-50 transition-colors border-b last:border-b-0 border-slate-100",children:f.jsxs("div",{className:"flex items-start space-x-3",children:[f.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.type==="expiry"||a.type==="balance_due"?f.jsx("span",{className:"text-amber-500",children:f.jsx(tb,{})}):f.jsx("span",{className:"text-red-500",children:f.jsx(fy,{})})}),f.jsx("div",{className:"flex-1 min-w-0",children:f.jsx("p",{className:"text-sm text-slate-600 leading-tight break-words",children:a.message})})]})})},a.id))})})]})},ZY=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),eX=({user:n,setCurrentPage:e,onNavigate:t,onMenuClick:r})=>{const[i,s]=ne.useState(!1),[a,o]=ne.useState(!1),[c,u]=ne.useState([]),[d,p]=ne.useState(!0),[x,v]=ne.useState(""),_=ne.useRef(null),b=ne.useRef(null),S=async()=>{try{await Sz(ig)}catch(E){console.error("Errore durante il logout:",E)}};ne.useEffect(()=>{const E=j=>{_.current&&!_.current.contains(j.target)&&s(!1),b.current&&!b.current.contains(j.target)&&o(!1)};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]);const T=ne.useCallback(async()=>{p(!0);try{const E=await OL(n.uid);u(E)}catch(E){console.error("Failed to fetch notifications:",E)}finally{p(!1)}},[]),k=ne.useCallback(async()=>{try{const E=await Up();E.logoBase64&&v(E.logoBase64)}catch(E){console.error("Header: Error loading logo",E)}},[]);return ne.useEffect(()=>{T(),k();const E=()=>{T(),k()};return window.addEventListener("EP_DataUpdated",E),()=>{window.removeEventListener("EP_DataUpdated",E)}},[T,k]),f.jsxs("header",{className:"h-16 bg-white shadow-sm flex-shrink-0 flex items-center justify-between px-4 md:px-6 lg:px-8 border-b",style:{backgroundColor:"var(--md-bg-card)",borderColor:"var(--md-divider)"},children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("button",{onClick:r,className:"md:hidden mr-4 md-icon-btn","aria-label":"Apri menu",children:f.jsx(ZY,{})}),f.jsxs("div",{className:"md:hidden flex items-center mr-4",children:[x?f.jsx("img",{src:x,alt:"Logo",className:"w-8 h-8 object-contain"}):f.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"}),f.jsx("span",{className:"ml-2 font-bold text-gray-700 text-sm",children:"EP v1"})]}),f.jsxs("div",{className:"relative hidden md:block w-full max-w-xs",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{id:"header-search",name:"header-search",type:"text",placeholder:"Cerca...",className:"block w-full bg-gray-100 border border-transparent rounded-md py-2 pl-10 pr-3 text-sm placeholder-gray-500 focus:outline-none focus:bg-white focus:ring-1 focus:border-indigo-500 focus:ring-indigo-500"})]})]}),f.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[f.jsxs("div",{className:"relative",ref:b,children:[f.jsxs("button",{onClick:()=>o(!a),className:"md-icon-btn relative","aria-label":"Apri notifiche",children:[f.jsx(ML,{}),!d&&c.length>0&&f.jsx("span",{className:"absolute top-1 right-1 flex items-center justify-center w-4 h-4 text-xs font-bold text-white rounded-full",style:{backgroundColor:"var(--md-red)"},children:c.length})]}),a&&f.jsx(JY,{notifications:c,loading:d,onNotificationClick:E=>{const j=E.linkPage||"Finance";t?t(j,E.filterContext):e(j),o(!1)}})]}),f.jsxs("div",{className:"relative",ref:_,children:[f.jsxs("button",{onClick:()=>s(!i),className:"flex items-center text-sm font-medium",style:{color:"var(--md-text-secondary)"},"aria-haspopup":"true","aria-expanded":i,children:[f.jsx("span",{className:"truncate max-w-[100px] md:max-w-none",children:n.email}),f.jsx(SL,{})]}),i&&f.jsxs("div",{className:"absolute right-0 mt-2 w-48 rounded-md py-1 z-20 md-card animate-fade-in-down",children:[f.jsxs("button",{onClick:()=>{e("Profile"),s(!1)},className:"w-full flex items-center px-4 py-2 text-sm hover:bg-gray-100 transition-colors",style:{color:"var(--md-text-primary)"},children:[f.jsx(QY,{}),f.jsx("span",{className:"ml-2",children:"Il mio Profilo"})]}),f.jsxs("button",{onClick:S,className:"w-full flex items-center px-4 py-2 text-sm hover:bg-gray-100 transition-colors",style:{color:"var(--md-text-primary)"},children:[f.jsx(XY,{}),f.jsx("span",{className:"ml-2",children:"Logout"})]})]})]})]})]})},FL=ss(Ut,"suppliers"),tX=n=>{const e=n.data();return{id:n.id,companyName:e.companyName||"",vatNumber:e.vatNumber||"",address:e.address||"",zipCode:e.zipCode||"",city:e.city||"",province:e.province||"",email:e.email||"",phone:e.phone||"",locations:(e.locations||[]).map(t=>({...t,name:t.name||"Sede senza nome",notes:t.notes||"",notesHistory:t.notesHistory||[],tags:t.tags||[],rating:t.rating||{cost:0,distance:0,parking:0,availability:0,safety:0,environment:0,distractions:0,modifiability:0,prestige:0}})),isDeleted:e.isDeleted||!1,notes:e.notes||"",notesHistory:e.notesHistory||[],tags:e.tags||[],rating:e.rating||{responsiveness:0,partnership:0,negotiation:0}}},Jl=async()=>(await Jr(FL)).docs.map(tX),nX=async n=>(await Go(FL,{...n,isDeleted:!1})).id,rX=async(n,e)=>{const t=fn(Ut,"suppliers",n);await Zr(t,{...e})},iX=async n=>{const e=fn(Ut,"suppliers",n);await Zr(e,{isDeleted:!0})},sX=async n=>{const e=fn(Ut,"suppliers",n);await Zr(e,{isDeleted:!1})},Xk=async n=>{const e=fn(Ut,"suppliers",n);await Wo(e)},aX=ss(Ut,"lessons"),oX=n=>{const e=n.data();return{id:n.id,...e}},BL=async()=>(await Jr(aX)).docs.map(oX),lX=n=>n<=5?5:n<=15?4:n<=30?3:n<=60?2:1,y2=({title:n,value:e,subtext:t,onClick:r,icon:i,colorClass:s="bg-gray-100 text-gray-600"})=>f.jsxs("div",{className:`md-card p-6 flex flex-col justify-between h-full relative overflow-hidden ${r?"cursor-pointer hover:translate-y-[-2px] transition-transform":""}`,onClick:r,children:[f.jsxs("div",{className:"flex justify-between items-start z-10",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wider",children:n}),f.jsx("div",{className:"text-3xl font-bold mt-3 text-gray-800 tracking-tight",children:e})]}),f.jsx("div",{className:`p-3 rounded-xl ${s} shadow-sm`,children:i})]}),t&&f.jsx("div",{className:"text-xs font-medium text-gray-400 mt-4 pt-3 border-t border-gray-50 z-10",children:t}),f.jsx("div",{className:`absolute -bottom-4 -right-4 w-24 h-24 rounded-full opacity-5 ${s.split(" ")[0]}`})]}),b2=({title:n,average:e,count:t,icon:r,details:i,colorClass:s,summary:a})=>f.jsxs("div",{className:"md-card p-6 flex flex-col h-full border-t-4",style:{borderColor:"var(--md-divider)"},children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800",children:n}),f.jsxs("p",{className:"text-xs text-gray-500",children:[t," valutazioni"]})]}),f.jsx("div",{className:`p-2 rounded-lg ${s} opacity-80`,children:r})]}),f.jsxs("div",{className:"flex items-baseline gap-2 mb-6",children:[f.jsx("span",{className:"text-4xl font-bold text-gray-900",children:e.toFixed(1)}),f.jsx("span",{className:"text-sm text-gray-400",children:"/ 5.0"}),f.jsx("div",{className:"flex ml-2",children:[1,2,3,4,5].map(o=>f.jsx("svg",{className:`w-4 h-4 ${o<=Math.round(e)?"text-yellow-400":"text-gray-200"}`,fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},o))})]}),f.jsx("div",{className:"space-y-3 flex-1",children:i.map((o,c)=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-gray-600 font-medium",children:o.label}),f.jsx("span",{className:"font-bold text-gray-800",children:o.value.toFixed(1)})]}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-1.5",children:f.jsx("div",{className:"h-1.5 rounded-full transition-all duration-500",style:{width:`${o.value/5*100}%`,backgroundColor:o.value>=4?"#4ade80":o.value>=2.5?"#facc15":"#f87171"}})})]},c))}),a&&f.jsx("div",{className:"mt-5 pt-3 border-t border-gray-100 text-center",children:f.jsxs("p",{className:"text-sm font-medium italic text-gray-500",children:['"',a,'"']})})]}),Qk=({setCurrentPage:n})=>{const[e,t]=ne.useState("overview"),[r,i]=ne.useState(!0),[s,a]=ne.useState([]),[o,c]=ne.useState([]),[u,d]=ne.useState(0),[p,x]=ne.useState(0),[v,_]=ne.useState(0),[b,S]=ne.useState(0),[T,k]=ne.useState(0),[E,j]=ne.useState([]),[F,z]=ne.useState("clients"),[A,I]=ne.useState([]),[O,B]=ne.useState([]),R=["DOM","LUN","MAR","MER","GIO","VEN","SAB"],P=ne.useCallback(async()=>{var q;try{i(!0);const[Q,se,J,me,re,M]=await Promise.all([Oh(),Jl(),_l(),BL(),Hp(),OL((q=ig.currentUser)==null?void 0:q.uid)]);a(Q),c(se),d(Q.length),_(se.length),j(M);const W=J.filter(Be=>Be.status===Pr.Active||Be.status===Pr.Pending),K=new Set(W.map(Be=>Be.clientId));x(K.size);const G=new Set(W.map(Be=>Be.supplierId));S(G.size);const te=new Date,he=te.getMonth(),ye=te.getFullYear();let be=0;J.filter(Be=>Be.status===Pr.Active).forEach(Be=>{Be.appointments&&Be.appointments.forEach(lt=>{const Ke=new Date(lt.date);Ke.getMonth()===he&&Ke.getFullYear()===ye&&be++})}),k(be);const Ce={};se.forEach(Be=>{Be.locations.forEach(lt=>{lt.availability&&lt.availability.length>0&&lt.availability.forEach(Ke=>{const We=`${lt.id}-${Ke.dayOfWeek}-${Ke.startTime}`;Ce[We]={key:We,locationName:lt.name,dayIndex:Ke.dayOfWeek,dayName:R[Ke.dayOfWeek].substring(0,3),startTime:Ke.startTime,endTime:Ke.endTime,color:lt.color||"#ccc",capacity:lt.capacity||0,occupied:0,occupancyPercent:0}})})}),W.forEach(Be=>{if(Be.appointments&&Be.appointments.length>0){const lt=Be.appointments[0],We=new Date(lt.date).getDay(),Et=lt.startTime,Oe=`${Be.locationId}-${We}-${Et}`;Ce[Oe]&&(Ce[Oe].occupied+=1)}});const ke=Object.values(Ce).map(Be=>{const lt=Be.capacity>0?Math.round(Be.occupied/Be.capacity*100):0;return{...Be,occupancyPercent:lt}});ke.sort((Be,lt)=>{const Ke=Be.dayIndex===0?7:Be.dayIndex,We=lt.dayIndex===0?7:lt.dayIndex;return Ke!==We?Ke-We:Be.startTime!==lt.startTime?Be.startTime.localeCompare(lt.startTime):Be.locationName.localeCompare(lt.locationName)}),B(ke);const oe=new Date(te),qe=oe.getDay(),at=oe.getDate()-qe+(qe===0?-6:1);oe.setDate(at),oe.setHours(0,0,0,0);const Fe=[],_e=["Lun","Mar","Mer","Gio","Ven","Sab","Dom"];for(let Be=0;Be<7;Be++){const lt=new Date(oe);lt.setDate(oe.getDate()+Be);let Ke=0;W.forEach(We=>{We.appointments&&We.appointments.forEach(Et=>{new Date(Et.date).toDateString()===lt.toDateString()&&Ke++})}),me.forEach(We=>{new Date(We.date).toDateString()===lt.toDateString()&&Ke++}),Fe.push({date:lt,count:Ke,dayName:_e[Be]})}I(Fe)}catch(Q){console.error("Failed to fetch dashboard data:",Q)}finally{i(!1)}},[]);ne.useEffect(()=>{P();const q=()=>{P()};return window.addEventListener("EP_DataUpdated",q),()=>window.removeEventListener("EP_DataUpdated",q)},[P]);const V=ne.useMemo(()=>{let q=0,Q={availability:0,complaints:0,churnRate:0,distance:0},se=0,J={learning:0,behavior:0,attendance:0,hygiene:0},me=0,re={responsiveness:0,partnership:0,negotiation:0},M=0,W={cost:0,distance:0,parking:0,availability:0,safety:0,environment:0,distractions:0,modifiability:0,prestige:0};s.forEach(oe=>{if(oe.clientType===ur.Parent){const qe=oe;qe.rating&&qe.rating.availability+qe.rating.complaints>0&&(q++,Q.availability+=qe.rating.availability,Q.complaints+=qe.rating.complaints,Q.churnRate+=qe.rating.churnRate,Q.distance+=qe.rating.distance),qe.children&&qe.children.forEach(at=>{at.rating&&at.rating.learning+at.rating.behavior>0&&(se++,J.learning+=at.rating.learning,J.behavior+=at.rating.behavior,J.attendance+=at.rating.attendance,J.hygiene+=at.rating.hygiene)})}}),o.forEach(oe=>{oe.rating&&oe.rating.responsiveness+oe.rating.partnership>0&&(me++,re.responsiveness+=oe.rating.responsiveness,re.partnership+=oe.rating.partnership,re.negotiation+=oe.rating.negotiation),oe.locations&&oe.locations.forEach(qe=>{qe.rating&&qe.rating.cost+qe.rating.safety>0&&(M++,W.cost+=qe.rating.cost,W.distance+=qe.rating.distance,W.parking+=qe.rating.parking,W.availability+=qe.rating.availability,W.safety+=qe.rating.safety,W.environment+=qe.rating.environment,W.distractions+=qe.rating.distractions,W.modifiability+=qe.rating.modifiability,W.prestige+=qe.rating.prestige)})});const K=q>0?(Q.availability+Q.complaints+Q.churnRate+Q.distance)/(q*4):0,G=se>0?(J.learning+J.behavior+J.attendance+J.hygiene)/(se*4):0,te=me>0?(re.responsiveness+re.partnership+re.negotiation)/(me*3):0,he=M>0?Object.values(W).reduce((oe,qe)=>oe+qe,0)/(M*9):0;let ye="";if(q>0){const oe=Q.complaints/q,qe=Q.churnRate/q;oe<3?ye="Genitori esigenti, gestire con cura.":qe>4?ye="Clientela altamente fidelizzata.":ye="Rapporto con i genitori stabile."}let be="";if(se>0){const oe=J.learning/se,qe=J.attendance/se,at=J.behavior/se;oe>3.5&&qe<3?be="Bravi ma con troppe assenze.":at<3?be="Richiesta attenzione disciplinare.":oe>4?be="Gruppo allievi eccellente.":be="Classe con buon potenziale."}let Ce="";if(me>0){const oe=re.negotiation/me,qe=re.responsiveness/me;oe<2.5?Ce="Prezzi rigidi, poco trattabili.":qe>4?Ce="Partner strategici e reattivi.":Ce="Fornitori affidabili."}let ke="";if(M>0){const oe=W.environment/M,qe=W.cost/M;oe>3.5&&qe<2.5?ke="Sedi belle ma costose.":qe>4?ke="Sedi molto economiche.":oe<3?ke="Ambienti da migliorare.":ke="Location adeguate alle attivit."}return{parents:{avg:K,count:q,details:[{label:"Disponibilit variazioni",value:q?Q.availability/q:0},{label:"Atteggiamento",value:q?Q.complaints/q:0},{label:"Costanza Iscrizioni",value:q?Q.churnRate/q:0},{label:"Mobilit",value:q?Q.distance/q:0}],summary:ye},children:{avg:G,count:se,details:[{label:"Apprendimento",value:se?J.learning/se:0},{label:"Condotta",value:se?J.behavior/se:0},{label:"Assenze",value:se?J.attendance/se:0},{label:"Igiene/Salute",value:se?J.hygiene/se:0}],summary:be},suppliers:{avg:te,count:me,details:[{label:"Reattivit",value:me?re.responsiveness/me:0},{label:"Partnership",value:me?re.partnership/me:0},{label:"Flessibilit",value:me?re.negotiation/me:0}],summary:Ce},locations:{avg:he,count:M,details:[{label:"Economicit",value:M?W.cost/M:0},{label:"Sicurezza (Norma)",value:M?W.safety/M:0},{label:"Ambiente/Luce",value:M?W.environment/M:0},{label:"Disponibilit Slot",value:M?W.availability/M:0},{label:"Vicinanza",value:M?W.distance/M:0}],summary:ke}}},[s,o]),Y=ne.useMemo(()=>{const q=s.filter(se=>se.clientType===ur.Parent).map(se=>{const J=se,me=J.rating||{availability:0,complaints:0,churnRate:0,distance:0},re=(me.availability+me.complaints+me.churnRate+me.distance)/4;return{id:J.id,name:`${J.firstName} ${J.lastName}`,score:re}}).sort((se,J)=>J.score-se.score).slice(0,5),Q=o.map(se=>{const J=se.rating||{responsiveness:0,partnership:0,negotiation:0};let me=0,re=0;se.locations&&se.locations.length>0&&se.locations.forEach(te=>{me+=lX(te.distance||0),re++});const M=re>0?me/re:0,W=re>0?4:3,G=(J.responsiveness+J.partnership+J.negotiation+M)/W;return{id:se.id,name:se.companyName,score:G}}).sort((se,J)=>J.score-se.score).slice(0,5);return{parents:q,suppliers:Q}},[s,o]),ie=q=>{switch(q){case"expiry":return f.jsx("span",{className:"text-amber-500",children:f.jsx(tb,{})});case"low_lessons":return f.jsx("span",{className:"text-indigo-500",children:f.jsx(fy,{})});case"payment_required":return f.jsx("span",{className:"text-red-500",children:f.jsx(fy,{})});case"action_required":return f.jsx("span",{className:"text-blue-500",children:f.jsx(LS,{})});default:return f.jsx("span",{className:"text-gray-500",children:f.jsx(tb,{})})}};return f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold text-gray-900 tracking-tight",children:"Dashboard"}),f.jsx("p",{className:"mt-1 text-gray-500",children:"Benvenuta, Ilaria! Ecco una panoramica."})]}),f.jsxs("div",{className:"bg-white rounded-lg p-1 flex border border-gray-200 shadow-sm",children:[f.jsx("button",{onClick:()=>t("overview"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${e==="overview"?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:text-gray-700"}`,children:"Panoramica"}),f.jsx("button",{onClick:()=>t("ratings"),className:`px-4 py-1.5 text-sm font-medium rounded-md transition-all ${e==="ratings"?"bg-indigo-100 text-indigo-700":"text-gray-500 hover:text-gray-700"}`,children:"Qualit & Rating"})]})]}),r?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(as,{})}):f.jsxs(f.Fragment,{children:[e==="overview"&&f.jsxs("div",{className:"animate-fade-in space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(y2,{title:"Clienti",onClick:()=>n&&n("Enrollments"),subtext:"Gestisci Iscrizioni",value:f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("span",{children:u}),p>0&&f.jsxs("span",{className:"text-sm font-semibold text-green-700 bg-green-50 px-2 py-0.5 rounded-lg",children:[p," Attivi"]})]}),icon:f.jsx(PS,{}),colorClass:"bg-blue-50 text-blue-600"}),f.jsx(y2,{title:"Lezioni (Mese)",value:T,subtext:"Totale erogato questo mese",onClick:()=>n&&n("ActivityLog"),icon:f.jsx(LS,{}),colorClass:"bg-emerald-50 text-emerald-600"}),f.jsx(y2,{title:"Fornitori",value:f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("span",{children:v}),b>0&&f.jsxs("span",{className:"text-sm font-semibold text-indigo-700 bg-indigo-50 px-2 py-0.5 rounded-lg",children:[b," Attivi"]})]}),onClick:()=>n&&n("Suppliers"),icon:f.jsx(jS,{}),colorClass:"bg-indigo-50 text-indigo-600"}),f.jsx(y2,{title:"Azioni Richieste",value:E.length,subtext:E.length>0?"Richiedono attenzione":"Tutto in ordine",onClick:()=>{},icon:f.jsx(fy,{}),colorClass:E.length>0?"bg-amber-50 text-amber-600":"bg-gray-50 text-gray-400"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"md-card p-6 border-t-4 border-indigo-500",children:[f.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2",children:"Questa Settimana"}),f.jsx("div",{className:"flex justify-between items-end h-40 pb-2 px-2",children:A.map((q,Q)=>{const se=new Date().toDateString()===q.date.toDateString();return f.jsxs("div",{className:"flex flex-col items-center space-y-2 w-full group cursor-default",children:[f.jsx("div",{className:`text-[10px] font-bold uppercase tracking-wider ${se?"text-indigo-600":"text-gray-400"}`,children:q.dayName}),f.jsx("div",{className:"relative w-full flex justify-center items-end h-28",children:f.jsx("div",{className:`w-3 sm:w-4 rounded-t-full transition-all duration-500 ${se?"bg-indigo-500 shadow-lg shadow-indigo-200":"bg-indigo-100 group-hover:bg-indigo-200"}`,style:{height:`${Math.max(10,Math.min(q.count/8*100,100))}%`}})}),f.jsx("div",{className:`font-bold text-sm ${se?"text-indigo-700":"text-gray-600"}`,children:q.count})]},Q)})})]}),f.jsxs("div",{className:"md-card p-6 flex flex-col border-t-4 border-pink-500",children:[f.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2",children:"Saturazione Aule"}),f.jsxs("div",{className:"flex-1 overflow-y-auto max-h-80 pr-2 space-y-5 custom-scrollbar",children:[O.map((q,Q)=>f.jsxs("div",{className:"w-full group",children:[f.jsxs("div",{className:"flex items-center mb-1.5 justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center text-[10px] font-bold text-white shadow-sm",style:{backgroundColor:q.color},children:q.dayName}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-xs font-bold text-gray-700",children:q.locationName}),f.jsxs("span",{className:"text-[10px] text-gray-400",children:[q.startTime," - ",q.endTime]})]})]}),f.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded bg-gray-50 text-gray-600",children:[q.occupied,"/",q.capacity]})]}),f.jsx("div",{className:"w-full bg-gray-100 rounded-full h-2 overflow-hidden",children:f.jsx("div",{className:"h-2 rounded-full transition-all duration-1000 ease-out",style:{width:`${q.occupancyPercent}%`,backgroundColor:q.color}})})]},Q)),O.length===0&&f.jsx("div",{className:"h-full flex flex-col items-center justify-center text-gray-400",children:f.jsx("p",{className:"text-sm italic",children:"Nessun dato di occupazione."})})]})]}),f.jsxs("div",{className:"md-card p-6 flex flex-col border-t-4 border-amber-500",children:[f.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-6 flex items-center gap-2",children:"Avvisi & Scadenze"}),f.jsx("div",{className:"flex-grow overflow-y-auto max-h-80 custom-scrollbar",children:E.length===0?f.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[f.jsx("div",{className:"w-12 h-12 bg-green-50 rounded-full flex items-center justify-center mb-3",children:f.jsx("span",{className:"text-2xl",children:""})}),f.jsx("p",{className:"text-sm font-medium text-green-800",children:"Tutto in regola!"}),f.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Nessuna scadenza imminente."})]}):f.jsx("ul",{className:"space-y-3",children:E.map((q,Q)=>f.jsxs("li",{className:"flex items-start space-x-3 p-3 rounded-xl bg-gray-50 hover:bg-white hover:shadow-md transition-all border border-gray-100 cursor-pointer group",onClick:()=>n&&q.linkPage&&n(q.linkPage),children:[f.jsx("div",{className:"flex-shrink-0 mt-0.5 group-hover:scale-110 transition-transform",children:ie(q.type)}),f.jsx("div",{className:"text-sm text-gray-700 leading-relaxed",children:q.message})]},Q))})})]})]})]}),e==="ratings"&&f.jsxs("div",{className:"animate-fade-in space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsx(b2,{title:"Genitori",average:V.parents.avg,count:V.parents.count,icon:f.jsx(PS,{}),details:V.parents.details,colorClass:"bg-blue-50 text-blue-600",summary:V.parents.summary}),f.jsx(b2,{title:"Allievi",average:V.children.avg,count:V.children.count,icon:f.jsx("span",{className:"text-2xl",children:""}),details:V.children.details,colorClass:"bg-emerald-50 text-emerald-600",summary:V.children.summary}),f.jsx(b2,{title:"Fornitori",average:V.suppliers.avg,count:V.suppliers.count,icon:f.jsx(jS,{}),details:V.suppliers.details,colorClass:"bg-indigo-50 text-indigo-600",summary:V.suppliers.summary}),f.jsx(b2,{title:"Sedi",average:V.locations.avg,count:V.locations.count,icon:f.jsx("span",{className:"text-2xl",children:""}),details:V.locations.details,colorClass:"bg-pink-50 text-pink-600",summary:V.locations.summary})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 items-start",children:[f.jsxs("div",{className:"md-card p-6 flex flex-col border-t-4 border-yellow-400 h-80",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:" Top 5"}),f.jsxs("div",{className:"flex bg-gray-100 p-0.5 rounded-lg",children:[f.jsx("button",{onClick:()=>z("clients"),className:`px-2 py-1 text-[10px] font-bold rounded-md transition-all ${F==="clients"?"bg-white text-yellow-600 shadow-sm":"text-gray-400"}`,children:"CLIENTI"}),f.jsx("button",{onClick:()=>z("suppliers"),className:`px-2 py-1 text-[10px] font-bold rounded-md transition-all ${F==="suppliers"?"bg-white text-yellow-600 shadow-sm":"text-gray-400"}`,children:"FORNITORI"})]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto pr-1 custom-scrollbar",children:f.jsxs("ul",{className:"space-y-2",children:[(F==="clients"?Y.parents:Y.suppliers).map((q,Q)=>f.jsxs("li",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[f.jsx("span",{className:`w-6 h-6 flex-shrink-0 rounded-full flex items-center justify-center text-xs font-bold ${Q===0?"bg-yellow-100 text-yellow-700 ring-2 ring-yellow-200":Q===1?"bg-gray-100 text-gray-600":Q===2?"bg-orange-100 text-orange-700":"bg-transparent text-gray-400"}`,children:Q+1}),f.jsx("span",{className:"text-sm text-gray-700 font-medium truncate block",title:q.name,children:q.name})]}),f.jsxs("div",{className:"flex items-center gap-1 bg-yellow-50 px-1.5 py-0.5 rounded-md border border-yellow-100 shrink-0",children:[f.jsx("span",{className:"text-xs font-bold text-yellow-700",children:q.score.toFixed(1)}),f.jsx("svg",{className:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})]})]},q.id)),(F==="clients"?Y.parents:Y.suppliers).length===0&&f.jsx("li",{className:"text-center text-gray-400 text-xs py-4 italic",children:"Nessun dato di rating disponibile."})]})})]}),f.jsx("div",{className:"flex items-end pb-2 md:col-span-2 h-full",children:f.jsxs("div",{className:"text-xs text-gray-400 flex items-center gap-2",children:[f.jsx("span",{className:"font-bold",children:"Legenda:"})," 1 Stella = Pessimo / 5 Stelle = Ottimo"]})})]})]})]})]})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var nb={};nb.version="0.18.5";var VL=1252,cX=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],nE={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},rE=function(n){cX.indexOf(n)!=-1&&(VL=nE[0]=n)};function uX(){rE(1252)}var Cc=function(n){rE(n)};function iE(){Cc(1200),uX()}function Jk(n){for(var e=[],t=0,r=n.length;t<r;++t)e[t]=n.charCodeAt(t);return e}function hX(n){for(var e=[],t=0;t<n.length>>1;++t)e[t]=String.fromCharCode(n.charCodeAt(2*t)+(n.charCodeAt(2*t+1)<<8));return e.join("")}function zL(n){for(var e=[],t=0;t<n.length>>1;++t)e[t]=String.fromCharCode(n.charCodeAt(2*t+1)+(n.charCodeAt(2*t)<<8));return e.join("")}var d1=function(n){var e=n.charCodeAt(0),t=n.charCodeAt(1);return e==255&&t==254?hX(n.slice(2)):e==254&&t==255?zL(n.slice(2)):e==65279?n.slice(1):n},_2=function(e){return String.fromCharCode(e)},Zk=function(e){return String.fromCharCode(e)},bx,Bf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _x(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,c=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,c=i&63,isNaN(r)?o=c=64:isNaN(i)&&(c=64),e+=Bf.charAt(s)+Bf.charAt(a)+Bf.charAt(o)+Bf.charAt(c);return e}function wl(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,c=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Bf.indexOf(n.charAt(u++)),a=Bf.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Bf.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),c=Bf.indexOf(n.charAt(u++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var Vn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),zh=(function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}})();function sd(n){return Vn?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function eI(n){return Vn?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var ml=function(e){return Vn?zh(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function i_(n){if(typeof ArrayBuffer>"u")return ml(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function _d(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function fX(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}function sE(n){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(n instanceof ArrayBuffer)return sE(new Uint8Array(n));for(var e=new Array(n.length),t=0;t<n.length;++t)e[t]=n[t];return e}var Qs=Vn?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:zh(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function dX(n){for(var e=[],t=0,r=n.length+250,i=sd(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=sd(65535),r=65530)}return e.push(i.slice(0,t)),Qs(e)}var fo=/\u0000/g,m1=/[\u0001-\u0006]/g;function xp(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function kc(n,e){var t=""+n;return t.length>=e?t:Vi("0",e-t.length)+t}function aE(n,e){var t=""+n;return t.length>=e?t:Vi(" ",e-t.length)+t}function rb(n,e){var t=""+n;return t.length>=e?t:t+Vi(" ",e-t.length)}function mX(n,e){var t=""+Math.round(n);return t.length>=e?t:Vi("0",e-t.length)+t}function pX(n,e){var t=""+n;return t.length>=e?t:Vi("0",e-t.length)+t}var tI=Math.pow(2,32);function Gm(n,e){if(n>tI||n<-tI)return mX(n,e);var t=Math.round(n);return pX(t,e)}function ib(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var nI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],d5=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function gX(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var wn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},rI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},xX={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sb(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,c=1,u=0,d=0,p=Math.floor(i);u<e&&(p=Math.floor(i),o=p*a+s,d=p*u+c,!(i-p<5e-8));)i=1/(i-p),s=a,a=o,c=u,u=d;if(d>e&&(u>e?(d=c,o=s):(d=u,o=a)),!t)return[0,r*o,d];var x=Math.floor(r*o/d);return[x,r*o-x*d,d]}function a0(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var c=new Date(1900,0,1);c.setDate(c.getDate()+r-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),r<60&&(s=(s+6)%7),t&&(s=SX(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var UL=new Date(1899,11,31,0,0,0),vX=UL.getTime(),yX=new Date(1900,2,1,0,0,0);function HL(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=yX&&(t+=1440*60*1e3),(t-(vX+(n.getTimezoneOffset()-UL.getTimezoneOffset())*6e4))/(1440*60*1e3)}function oE(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function bX(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function _X(n){var e=n<0?12:11,t=oE(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function wX(n){var e=oE(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function wx(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=_X(n):e===10?t=n.toFixed(10).substr(0,12):t=wX(n),oE(bX(t.toUpperCase()))}function O0(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):wx(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return Zl(14,HL(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function SX(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function TX(n,e,t,r){var i="",s=0,a=0,o=t.y,c,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=t.m,u=e.length;break;case 3:return d5[t.m-1][1];case 5:return d5[t.m-1][0];default:return d5[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=t.d,u=e.length;break;case 3:return nI[t.q][0];default:return nI[t.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?kc(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=kc(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=t.D*24+t.H;break;case"[m]":case"[mm]":c=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":c=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var d=u>0?kc(c,u):"";return d}function Vf(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var qL=/%/g;function EX(n,e,t){var r=e.replace(qL,""),i=e.length-r.length;return Ch(n,r,t*Math.pow(10,2*i))+Vi("%",i)}function AX(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ch(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function WL(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+WL(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(i+s)%i)+"."+d.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var GL=/# (\?+)( ?)\/( ?)(\d+)/;function NX(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?Vi(" ",n[1].length+1+n[4].length):aE(a,n[1].length)+n[2]+"/"+n[3]+kc(o,n[4].length))}function CX(n,e,t){return t+(e===0?"":""+e)+Vi(" ",n[1].length+2+n[4].length)}var $L=/^#*0*\.([0#]+)/,KL=/\).*[0#]/,YL=/\(###\) ###\\?-####/;function oo(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function iI(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function sI(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function kX(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function IX(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function Hl(n,e,t){if(n.charCodeAt(0)===40&&!e.match(KL)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?Hl("n",r,t):"("+Hl("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return AX(n,e,t);if(e.indexOf("%")!==-1)return EX(n,e,t);if(e.indexOf("E")!==-1)return WL(e,t);if(e.charCodeAt(0)===36)return"$"+Hl(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Gm(c,e.length);if(e.match(/^[#?]+$/))return i=Gm(t,0),i==="0"&&(i=""),i.length>e.length?i:oo(e.substr(0,e.length-i.length))+i;if(s=e.match(GL))return NX(s,c,u);if(e.match(/^#+0+$/))return u+Gm(c,e.length-e.indexOf("0"));if(s=e.match($L))return i=iI(t,s[1].length).replace(/^([^\.]+)$/,"$1."+oo(s[1])).replace(/\.$/,"."+oo(s[1])).replace(/\.(\d*)$/,function(_,b){return"."+b+Vi("0",oo(s[1]).length-b.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+iI(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Vf(Gm(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+Hl(n,e,-t):Vf(""+(Math.floor(t)+kX(t,s[1].length)))+"."+kc(sI(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return Hl(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=xp(Hl(n,e.replace(/[\\-]/g,""),t)),a=0,xp(xp(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(YL))return i=Hl(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=sb(c,Math.pow(10,a)-1,!1),i=""+u,d=Ch("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+s[2]+"/"+s[3],d=rb(o[2],a),d.length<s[4].length&&(d=oo(s[4].substr(s[4].length-d.length))+d),i+=d,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=sb(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?aE(o[1],a)+s[2]+"/"+s[3]+rb(o[2],a):Vi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=Gm(t,0),e.length<=i.length?i:oo(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var p=e.indexOf(".")-a,x=e.length-i.length-p;return oo(e.substr(0,p)+i+e.substr(e.length-x))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=sI(t,s[1].length),t<0?"-"+Hl(n,e,-t):Vf(IX(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?kc(0,3-_.length):"")+_})+"."+kc(a,s[1].length);switch(e){case"###,##0.00":return Hl(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var v=Vf(Gm(c,0));return v!=="0"?u+v:"";case"###,###.00":return Hl(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return Hl(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function DX(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ch(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function RX(n,e,t){var r=e.replace(qL,""),i=e.length-r.length;return Ch(n,r,t*Math.pow(10,2*i))+Vi("%",i)}function XL(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+XL(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,d){return c+u+d.substr(0,(i+s)%i)+"."+d.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function pu(n,e,t){if(n.charCodeAt(0)===40&&!e.match(KL)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?pu("n",r,t):"("+pu("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return DX(n,e,t);if(e.indexOf("%")!==-1)return RX(n,e,t);if(e.indexOf("E")!==-1)return XL(e,t);if(e.charCodeAt(0)===36)return"$"+pu(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+kc(c,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:oo(e.substr(0,e.length-i.length))+i;if(s=e.match(GL))return CX(s,c,u);if(e.match(/^#+0+$/))return u+kc(c,e.length-e.indexOf("0"));if(s=e.match($L))return i=(""+t).replace(/^([^\.]+)$/,"$1."+oo(s[1])).replace(/\.$/,"."+oo(s[1])),i=i.replace(/\.(\d*)$/,function(_,b){return"."+b+Vi("0",oo(s[1]).length-b.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Vf(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+pu(n,e,-t):Vf(""+t)+"."+Vi("0",s[1].length);if(s=e.match(/^#,#*,#0/))return pu(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=xp(pu(n,e.replace(/[\\-]/g,""),t)),a=0,xp(xp(e.replace(/\\/g,"")).replace(/[0#]/g,function(_){return a<i.length?i.charAt(a++):_==="0"?"0":""}));if(e.match(YL))return i=pu(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var d="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=sb(c,Math.pow(10,a)-1,!1),i=""+u,d=Ch("n",s[1],o[1]),d.charAt(d.length-1)==" "&&(d=d.substr(0,d.length-1)+"0"),i+=d+s[2]+"/"+s[3],d=rb(o[2],a),d.length<s[4].length&&(d=oo(s[4].substr(s[4].length-d.length))+d),i+=d,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=sb(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?aE(o[1],a)+s[2]+"/"+s[3]+rb(o[2],a):Vi(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:oo(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var p=e.indexOf(".")-a,x=e.length-i.length-p;return oo(e.substr(0,p)+i+e.substr(e.length-x))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+pu(n,e,-t):Vf(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(_){return"00,"+(_.length<3?kc(0,3-_.length):"")+_})+"."+kc(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var v=Vf(""+c);return v!=="0"?u+v:"";default:if(e.match(/\.[0#?]*$/))return pu(n,e.slice(0,e.lastIndexOf(".")),t)+oo(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ch(n,e,t){return(t|0)===t?pu(n,e,t):Hl(n,e,t)}function PX(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var QL=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ag(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":ib(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(QL))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function jX(n,e,t,r){for(var i=[],s="",a=0,o="",c="t",u,d,p,x="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!ib(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(p=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(p);i[i.length]={t:"t",v:s},++a;break;case"\\":var v=n.charAt(++a),_=v==="("||v===")"?v:"t";i[i.length]={t:_,v},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=a0(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=a0(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=x),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var b={t:o,v:o};if(u==null&&(u=a0(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(b.v=u.H>=12?"P":"A"),b.t="T",x="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(b.v=u.H>=12?"PM":"AM"),b.t="T",a+=5,x="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(b.v=u.H>=12?"":""),b.t="T",a+=5,x="h"):(b.t="t",++a),u==null&&b.t==="T")return"";i[i.length]=b,c=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(QL)){if(u==null&&(u=a0(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ag(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var S=0,T=0,k;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=x,c="h",S<1&&(S=1);break;case"s":(k=i[a].v.match(/\.0+$/))&&(T=Math.max(T,k[0].length-1)),S<3&&(S=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",S<2&&(S=2));break;case"X":break;case"Z":S<1&&i[a].v.match(/[Hh]/)&&(S=1),S<2&&i[a].v.match(/[Mm]/)&&(S=2),S<3&&i[a].v.match(/[Ss]/)&&(S=3)}switch(S){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var E="",j;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=TX(i[a].t.charCodeAt(0),i[a].v,u,T),i[a].t="t";break;case"n":case"?":for(j=a+1;i[j]!=null&&((o=i[j].t)==="?"||o==="D"||(o===" "||o==="t")&&i[j+1]!=null&&(i[j+1].t==="?"||i[j+1].t==="t"&&i[j+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[j].v==="/"||i[j].v===" "&&i[j+1]!=null&&i[j+1].t=="?"));)i[a].v+=i[j].v,i[j]={v:"",t:";"},++j;E+=i[a].v,a=j-1;break;case"G":i[a].t="t",i[a].v=O0(e,t);break}var F="",z,A;if(E.length>0){E.charCodeAt(0)==40?(z=e<0&&E.charCodeAt(0)===45?-e:e,A=Ch("n",E,z)):(z=e<0&&r>1?-e:e,A=Ch("n",E,z),z<0&&i[0]&&i[0].t=="t"&&(A=A.substr(1),i[0].v="-"+i[0].v)),j=A.length-1;var I=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){I=a;break}var O=i.length;if(I===i.length&&A.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(j>=i[a].v.length-1?(j-=i[a].v.length,i[a].v=A.substr(j+1,i[a].v.length)):j<0?i[a].v="":(i[a].v=A.substr(0,j+1),j=-1),i[a].t="t",O=a);j>=0&&O<i.length&&(i[O].v=A.substr(0,j+1)+i[O].v)}else if(I!==i.length&&A.indexOf("E")===-1){for(j=A.indexOf(".")-1,a=I;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(d=i[a].v.indexOf(".")>-1&&a===I?i[a].v.indexOf(".")-1:i[a].v.length-1,F=i[a].v.substr(d+1);d>=0;--d)j>=0&&(i[a].v.charAt(d)==="0"||i[a].v.charAt(d)==="#")&&(F=A.charAt(j--)+F);i[a].v=F,i[a].t="t",O=a}for(j>=0&&O<i.length&&(i[O].v=A.substr(0,j+1)+i[O].v),j=A.indexOf(".")+1,a=I;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==I)){for(d=i[a].v.indexOf(".")>-1&&a===I?i[a].v.indexOf(".")+1:0,F=i[a].v.substr(0,d);d<i[a].v.length;++d)j<A.length&&(F+=A.charAt(j++));i[a].v=F,i[a].t="t",O=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(z=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ch(i[a].t,i[a].v,z),i[a].t="t");var B="";for(a=0;a!==i.length;++a)i[a]!=null&&(B+=i[a].v);return B}var aI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function oI(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function LX(n,e){var t=PX(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(aI),o=t[1].match(aI);return oI(e,a)?[r,t[0]]:oI(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function Zl(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:wn)[n],r==null&&(r=t.table&&t.table[rI[n]]||wn[rI[n]]),r==null&&(r=xX[n]||"General");break}if(ib(r,0))return O0(e,t);e instanceof Date&&(e=HL(e,t.date1904));var i=LX(r,e);if(ib(i[1]))return O0(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return jX(i[1],e,t,i[0])}function kh(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(wn[t]==null){e<0&&(e=t);continue}if(wn[t]==n){e=t;break}}e<0&&(e=391)}return wn[e]=n,e}function s_(n){for(var e=0;e!=392;++e)n[e]!==void 0&&kh(n[e],e)}function og(){wn=gX()}var OX={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},JL=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function MX(n){var e=typeof n=="number"?wn[n]:n;return e=e.replace(JL,"(\\d+)"),new RegExp("^"+e+"$")}function FX(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match(JL)||[]).forEach(function(p,x){var v=parseInt(t[x+1],10);switch(p.toLowerCase().charAt(0)){case"y":r=v;break;case"d":s=v;break;case"h":a=v;break;case"s":c=v;break;case"m":a>=0?o=v:i=v;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var d=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?u:r==-1&&i==-1&&s==-1?d:u+"T"+d}var BX=(function(){var n={};n.version="1.2.0";function e(){for(var A=0,I=new Array(256),O=0;O!=256;++O)A=O,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,I[O]=A;return typeof Int32Array<"u"?new Int32Array(I):I}var t=e();function r(A){var I=0,O=0,B=0,R=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)R[B]=A[B];for(B=0;B!=256;++B)for(O=A[B],I=256+B;I<4096;I+=256)O=R[I]=O>>>8^A[O&255];var P=[];for(B=1;B!=16;++B)P[B-1]=typeof Int32Array<"u"?R.subarray(B*256,B*256+256):R.slice(B*256,B*256+256);return P}var i=r(t),s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],d=i[5],p=i[6],x=i[7],v=i[8],_=i[9],b=i[10],S=i[11],T=i[12],k=i[13],E=i[14];function j(A,I){for(var O=I^-1,B=0,R=A.length;B<R;)O=O>>>8^t[(O^A.charCodeAt(B++))&255];return~O}function F(A,I){for(var O=I^-1,B=A.length-15,R=0;R<B;)O=E[A[R++]^O&255]^k[A[R++]^O>>8&255]^T[A[R++]^O>>16&255]^S[A[R++]^O>>>24]^b[A[R++]]^_[A[R++]]^v[A[R++]]^x[A[R++]]^p[A[R++]]^d[A[R++]]^u[A[R++]]^c[A[R++]]^o[A[R++]]^a[A[R++]]^s[A[R++]]^t[A[R++]];for(B+=15;R<B;)O=O>>>8^t[(O^A[R++])&255];return~O}function z(A,I){for(var O=I^-1,B=0,R=A.length,P=0,V=0;B<R;)P=A.charCodeAt(B++),P<128?O=O>>>8^t[(O^P)&255]:P<2048?(O=O>>>8^t[(O^(192|P>>6&31))&255],O=O>>>8^t[(O^(128|P&63))&255]):P>=55296&&P<57344?(P=(P&1023)+64,V=A.charCodeAt(B++)&1023,O=O>>>8^t[(O^(240|P>>8&7))&255],O=O>>>8^t[(O^(128|P>>2&63))&255],O=O>>>8^t[(O^(128|V>>6&15|(P&3)<<4))&255],O=O>>>8^t[(O^(128|V&63))&255]):(O=O>>>8^t[(O^(224|P>>12&15))&255],O=O>>>8^t[(O^(128|P>>6&63))&255],O=O>>>8^t[(O^(128|P&63))&255]);return~O}return n.table=t,n.bstr=j,n.buf=F,n.str=z,n})(),pn=(function(){var e={};e.version="1.2.1";function t(le,Te){for(var xe=le.split("/"),ve=Te.split("/"),we=0,Ee=0,Ue=Math.min(xe.length,ve.length);we<Ue;++we){if(Ee=xe[we].length-ve[we].length)return Ee;if(xe[we]!=ve[we])return xe[we]<ve[we]?-1:1}return xe.length-ve.length}function r(le){if(le.charAt(le.length-1)=="/")return le.slice(0,-1).indexOf("/")===-1?le:r(le.slice(0,-1));var Te=le.lastIndexOf("/");return Te===-1?le:le.slice(0,Te+1)}function i(le){if(le.charAt(le.length-1)=="/")return i(le.slice(0,-1));var Te=le.lastIndexOf("/");return Te===-1?le:le.slice(Te+1)}function s(le,Te){typeof Te=="string"&&(Te=new Date(Te));var xe=Te.getHours();xe=xe<<6|Te.getMinutes(),xe=xe<<5|Te.getSeconds()>>>1,le.write_shift(2,xe);var ve=Te.getFullYear()-1980;ve=ve<<4|Te.getMonth()+1,ve=ve<<5|Te.getDate(),le.write_shift(2,ve)}function a(le){var Te=le.read_shift(2)&65535,xe=le.read_shift(2)&65535,ve=new Date,we=xe&31;xe>>>=5;var Ee=xe&15;xe>>>=4,ve.setMilliseconds(0),ve.setFullYear(xe+1980),ve.setMonth(Ee-1),ve.setDate(we);var Ue=Te&31;Te>>>=5;var rt=Te&63;return Te>>>=6,ve.setHours(Te),ve.setMinutes(rt),ve.setSeconds(Ue<<1),ve}function o(le){ma(le,0);for(var Te={},xe=0;le.l<=le.length-4;){var ve=le.read_shift(2),we=le.read_shift(2),Ee=le.l+we,Ue={};switch(ve){case 21589:xe=le.read_shift(1),xe&1&&(Ue.mtime=le.read_shift(4)),we>5&&(xe&2&&(Ue.atime=le.read_shift(4)),xe&4&&(Ue.ctime=le.read_shift(4))),Ue.mtime&&(Ue.mt=new Date(Ue.mtime*1e3));break}le.l=Ee,Te[ve]=Ue}return Te}var c;function u(){return c||(c={})}function d(le,Te){if(le[0]==80&&le[1]==75)return Ne(le,Te);if((le[0]|32)==109&&(le[1]|32)==105)return Tr(le,Te);if(le.length<512)throw new Error("CFB file size "+le.length+" < 512");var xe=3,ve=512,we=0,Ee=0,Ue=0,rt=0,He=0,$e=[],Ye=le.slice(0,512);ma(Ye,0);var yt=p(Ye);switch(xe=yt[0],xe){case 3:ve=512;break;case 4:ve=4096;break;case 0:if(yt[1]==0)return Ne(le,Te);default:throw new Error("Major Version: Expected 3 or 4 saw "+xe)}ve!==512&&(Ye=le.slice(0,ve),ma(Ye,28));var It=le.slice(0,ve);x(Ye,xe);var Lt=Ye.read_shift(4,"i");if(xe===3&&Lt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+Lt);Ye.l+=4,Ue=Ye.read_shift(4,"i"),Ye.l+=4,Ye.chk("00100000","Mini Stream Cutoff Size: "),rt=Ye.read_shift(4,"i"),we=Ye.read_shift(4,"i"),He=Ye.read_shift(4,"i"),Ee=Ye.read_shift(4,"i");for(var bt=-1,Ot=0;Ot<109&&(bt=Ye.read_shift(4,"i"),!(bt<0));++Ot)$e[Ot]=bt;var Qt=v(le,ve);S(He,Ee,Qt,ve,$e);var Un=k(Qt,Ue,$e,ve);Un[Ue].name="!Directory",we>0&&rt!==V&&(Un[rt].name="!MiniFAT"),Un[$e[0]].name="!FAT",Un.fat_addrs=$e,Un.ssz=ve;var gn={},Hn=[],ti=[],xa=[];E(Ue,Un,Qt,Hn,we,gn,ti,rt),_(ti,xa,Hn),Hn.shift();var zs={FileIndex:ti,FullPaths:xa};return Te&&Te.raw&&(zs.raw={header:It,sectors:Qt}),zs}function p(le){if(le[le.l]==80&&le[le.l+1]==75)return[0,0];le.chk(Y,"Header Signature: "),le.l+=16;var Te=le.read_shift(2,"u");return[le.read_shift(2,"u"),Te]}function x(le,Te){var xe=9;switch(le.l+=2,xe=le.read_shift(2)){case 9:if(Te!=3)throw new Error("Sector Shift: Expected 9 saw "+xe);break;case 12:if(Te!=4)throw new Error("Sector Shift: Expected 12 saw "+xe);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+xe)}le.chk("0600","Mini Sector Shift: "),le.chk("000000000000","Reserved: ")}function v(le,Te){for(var xe=Math.ceil(le.length/Te)-1,ve=[],we=1;we<xe;++we)ve[we-1]=le.slice(we*Te,(we+1)*Te);return ve[xe-1]=le.slice(xe*Te),ve}function _(le,Te,xe){for(var ve=0,we=0,Ee=0,Ue=0,rt=0,He=xe.length,$e=[],Ye=[];ve<He;++ve)$e[ve]=Ye[ve]=ve,Te[ve]=xe[ve];for(;rt<Ye.length;++rt)ve=Ye[rt],we=le[ve].L,Ee=le[ve].R,Ue=le[ve].C,$e[ve]===ve&&(we!==-1&&$e[we]!==we&&($e[ve]=$e[we]),Ee!==-1&&$e[Ee]!==Ee&&($e[ve]=$e[Ee])),Ue!==-1&&($e[Ue]=ve),we!==-1&&ve!=$e[ve]&&($e[we]=$e[ve],Ye.lastIndexOf(we)<rt&&Ye.push(we)),Ee!==-1&&ve!=$e[ve]&&($e[Ee]=$e[ve],Ye.lastIndexOf(Ee)<rt&&Ye.push(Ee));for(ve=1;ve<He;++ve)$e[ve]===ve&&(Ee!==-1&&$e[Ee]!==Ee?$e[ve]=$e[Ee]:we!==-1&&$e[we]!==we&&($e[ve]=$e[we]));for(ve=1;ve<He;++ve)if(le[ve].type!==0){if(rt=ve,rt!=$e[rt])do rt=$e[rt],Te[ve]=Te[rt]+"/"+Te[ve];while(rt!==0&&$e[rt]!==-1&&rt!=$e[rt]);$e[ve]=-1}for(Te[0]+="/",ve=1;ve<He;++ve)le[ve].type!==2&&(Te[ve]+="/")}function b(le,Te,xe){for(var ve=le.start,we=le.size,Ee=[],Ue=ve;xe&&we>0&&Ue>=0;)Ee.push(Te.slice(Ue*P,Ue*P+P)),we-=P,Ue=r0(xe,Ue*4);return Ee.length===0?ut(0):Qs(Ee).slice(0,le.size)}function S(le,Te,xe,ve,we){var Ee=V;if(le===V){if(Te!==0)throw new Error("DIFAT chain shorter than expected")}else if(le!==-1){var Ue=xe[le],rt=(ve>>>2)-1;if(!Ue)return;for(var He=0;He<rt&&(Ee=r0(Ue,He*4))!==V;++He)we.push(Ee);S(r0(Ue,ve-4),Te-1,xe,ve,we)}}function T(le,Te,xe,ve,we){var Ee=[],Ue=[];we||(we=[]);var rt=ve-1,He=0,$e=0;for(He=Te;He>=0;){we[He]=!0,Ee[Ee.length]=He,Ue.push(le[He]);var Ye=xe[Math.floor(He*4/ve)];if($e=He*4&rt,ve<4+$e)throw new Error("FAT boundary crossed: "+He+" 4 "+ve);if(!le[Ye])break;He=r0(le[Ye],$e)}return{nodes:Ee,data:yI([Ue])}}function k(le,Te,xe,ve){var we=le.length,Ee=[],Ue=[],rt=[],He=[],$e=ve-1,Ye=0,yt=0,It=0,Lt=0;for(Ye=0;Ye<we;++Ye)if(rt=[],It=Ye+Te,It>=we&&(It-=we),!Ue[It]){He=[];var bt=[];for(yt=It;yt>=0;){bt[yt]=!0,Ue[yt]=!0,rt[rt.length]=yt,He.push(le[yt]);var Ot=xe[Math.floor(yt*4/ve)];if(Lt=yt*4&$e,ve<4+Lt)throw new Error("FAT boundary crossed: "+yt+" 4 "+ve);if(!le[Ot]||(yt=r0(le[Ot],Lt),bt[yt]))break}Ee[It]={nodes:rt,data:yI([He])}}return Ee}function E(le,Te,xe,ve,we,Ee,Ue,rt){for(var He=0,$e=ve.length?2:0,Ye=Te[le].data,yt=0,It=0,Lt;yt<Ye.length;yt+=128){var bt=Ye.slice(yt,yt+128);ma(bt,64),It=bt.read_shift(2),Lt=mE(bt,0,It-$e),ve.push(Lt);var Ot={name:Lt,type:bt.read_shift(1),color:bt.read_shift(1),L:bt.read_shift(4,"i"),R:bt.read_shift(4,"i"),C:bt.read_shift(4,"i"),clsid:bt.read_shift(16),state:bt.read_shift(4,"i"),start:0,size:0},Qt=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);Qt!==0&&(Ot.ct=j(bt,bt.l-8));var Un=bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2)+bt.read_shift(2);Un!==0&&(Ot.mt=j(bt,bt.l-8)),Ot.start=bt.read_shift(4,"i"),Ot.size=bt.read_shift(4,"i"),Ot.size<0&&Ot.start<0&&(Ot.size=Ot.type=0,Ot.start=V,Ot.name=""),Ot.type===5?(He=Ot.start,we>0&&He!==V&&(Te[He].name="!StreamData")):Ot.size>=4096?(Ot.storage="fat",Te[Ot.start]===void 0&&(Te[Ot.start]=T(xe,Ot.start,Te.fat_addrs,Te.ssz)),Te[Ot.start].name=Ot.name,Ot.content=Te[Ot.start].data.slice(0,Ot.size)):(Ot.storage="minifat",Ot.size<0?Ot.size=0:He!==V&&Ot.start!==V&&Te[He]&&(Ot.content=b(Ot,Te[He].data,(Te[rt]||{}).data))),Ot.content&&ma(Ot.content,0),Ee[Lt]=Ot,Ue.push(Ot)}}function j(le,Te){return new Date((dl(le,Te+4)/1e7*Math.pow(2,32)+dl(le,Te)/1e7-11644473600)*1e3)}function F(le,Te){return u(),d(c.readFileSync(le),Te)}function z(le,Te){var xe=Te&&Te.type;switch(xe||Vn&&Buffer.isBuffer(le)&&(xe="buffer"),xe||"base64"){case"file":return F(le,Te);case"base64":return d(ml(wl(le)),Te);case"binary":return d(ml(le),Te)}return d(le,Te)}function A(le,Te){var xe=Te||{},ve=xe.root||"Root Entry";if(le.FullPaths||(le.FullPaths=[]),le.FileIndex||(le.FileIndex=[]),le.FullPaths.length!==le.FileIndex.length)throw new Error("inconsistent CFB structure");le.FullPaths.length===0&&(le.FullPaths[0]=ve+"/",le.FileIndex[0]={name:ve,type:5}),xe.CLSID&&(le.FileIndex[0].clsid=xe.CLSID),I(le)}function I(le){var Te="Sh33tJ5";if(!pn.find(le,"/"+Te)){var xe=ut(4);xe[0]=55,xe[1]=xe[3]=50,xe[2]=54,le.FileIndex.push({name:Te,type:2,content:xe,size:4,L:69,R:69,C:69}),le.FullPaths.push(le.FullPaths[0]+Te),O(le)}}function O(le,Te){A(le);for(var xe=!1,ve=!1,we=le.FullPaths.length-1;we>=0;--we){var Ee=le.FileIndex[we];switch(Ee.type){case 0:ve?xe=!0:(le.FileIndex.pop(),le.FullPaths.pop());break;case 1:case 2:case 5:ve=!0,isNaN(Ee.R*Ee.L*Ee.C)&&(xe=!0),Ee.R>-1&&Ee.L>-1&&Ee.R==Ee.L&&(xe=!0);break;default:xe=!0;break}}if(!(!xe&&!Te)){var Ue=new Date(1987,1,19),rt=0,He=Object.create?Object.create(null):{},$e=[];for(we=0;we<le.FullPaths.length;++we)He[le.FullPaths[we]]=!0,le.FileIndex[we].type!==0&&$e.push([le.FullPaths[we],le.FileIndex[we]]);for(we=0;we<$e.length;++we){var Ye=r($e[we][0]);ve=He[Ye],ve||($e.push([Ye,{name:i(Ye).replace("/",""),type:1,clsid:q,ct:Ue,mt:Ue,content:null}]),He[Ye]=!0)}for($e.sort(function(Lt,bt){return t(Lt[0],bt[0])}),le.FullPaths=[],le.FileIndex=[],we=0;we<$e.length;++we)le.FullPaths[we]=$e[we][0],le.FileIndex[we]=$e[we][1];for(we=0;we<$e.length;++we){var yt=le.FileIndex[we],It=le.FullPaths[we];if(yt.name=i(It).replace("/",""),yt.L=yt.R=yt.C=-(yt.color=1),yt.size=yt.content?yt.content.length:0,yt.start=0,yt.clsid=yt.clsid||q,we===0)yt.C=$e.length>1?1:-1,yt.size=0,yt.type=5;else if(It.slice(-1)=="/"){for(rt=we+1;rt<$e.length&&r(le.FullPaths[rt])!=It;++rt);for(yt.C=rt>=$e.length?-1:rt,rt=we+1;rt<$e.length&&r(le.FullPaths[rt])!=r(It);++rt);yt.R=rt>=$e.length?-1:rt,yt.type=1}else r(le.FullPaths[we+1]||"")==r(It)&&(yt.R=we+1),yt.type=2}}}function B(le,Te){var xe=Te||{};if(xe.fileType=="mad")return sn(le,xe);switch(O(le),xe.fileType){case"zip":return Pt(le,xe)}var ve=(function(Lt){for(var bt=0,Ot=0,Qt=0;Qt<Lt.FileIndex.length;++Qt){var Un=Lt.FileIndex[Qt];if(Un.content){var gn=Un.content.length;gn>0&&(gn<4096?bt+=gn+63>>6:Ot+=gn+511>>9)}}for(var Hn=Lt.FullPaths.length+3>>2,ti=bt+7>>3,xa=bt+127>>7,zs=ti+Ot+Hn+xa,Ki=zs+127>>7,ea=Ki<=109?0:Math.ceil((Ki-109)/127);zs+Ki+ea+127>>7>Ki;)ea=++Ki<=109?0:Math.ceil((Ki-109)/127);var ls=[1,ea,Ki,xa,Hn,Ot,bt,0];return Lt.FileIndex[0].size=bt<<6,ls[7]=(Lt.FileIndex[0].start=ls[0]+ls[1]+ls[2]+ls[3]+ls[4]+ls[5])+(ls[6]+7>>3),ls})(le),we=ut(ve[7]<<9),Ee=0,Ue=0;{for(Ee=0;Ee<8;++Ee)we.write_shift(1,ie[Ee]);for(Ee=0;Ee<8;++Ee)we.write_shift(2,0);for(we.write_shift(2,62),we.write_shift(2,3),we.write_shift(2,65534),we.write_shift(2,9),we.write_shift(2,6),Ee=0;Ee<3;++Ee)we.write_shift(2,0);for(we.write_shift(4,0),we.write_shift(4,ve[2]),we.write_shift(4,ve[0]+ve[1]+ve[2]+ve[3]-1),we.write_shift(4,0),we.write_shift(4,4096),we.write_shift(4,ve[3]?ve[0]+ve[1]+ve[2]-1:V),we.write_shift(4,ve[3]),we.write_shift(-4,ve[1]?ve[0]-1:V),we.write_shift(4,ve[1]),Ee=0;Ee<109;++Ee)we.write_shift(-4,Ee<ve[2]?ve[1]+Ee:-1)}if(ve[1])for(Ue=0;Ue<ve[1];++Ue){for(;Ee<236+Ue*127;++Ee)we.write_shift(-4,Ee<ve[2]?ve[1]+Ee:-1);we.write_shift(-4,Ue===ve[1]-1?V:Ue+1)}var rt=function(Lt){for(Ue+=Lt;Ee<Ue-1;++Ee)we.write_shift(-4,Ee+1);Lt&&(++Ee,we.write_shift(-4,V))};for(Ue=Ee=0,Ue+=ve[1];Ee<Ue;++Ee)we.write_shift(-4,Q.DIFSECT);for(Ue+=ve[2];Ee<Ue;++Ee)we.write_shift(-4,Q.FATSECT);rt(ve[3]),rt(ve[4]);for(var He=0,$e=0,Ye=le.FileIndex[0];He<le.FileIndex.length;++He)Ye=le.FileIndex[He],Ye.content&&($e=Ye.content.length,!($e<4096)&&(Ye.start=Ue,rt($e+511>>9)));for(rt(ve[6]+7>>3);we.l&511;)we.write_shift(-4,Q.ENDOFCHAIN);for(Ue=Ee=0,He=0;He<le.FileIndex.length;++He)Ye=le.FileIndex[He],Ye.content&&($e=Ye.content.length,!(!$e||$e>=4096)&&(Ye.start=Ue,rt($e+63>>6)));for(;we.l&511;)we.write_shift(-4,Q.ENDOFCHAIN);for(Ee=0;Ee<ve[4]<<2;++Ee){var yt=le.FullPaths[Ee];if(!yt||yt.length===0){for(He=0;He<17;++He)we.write_shift(4,0);for(He=0;He<3;++He)we.write_shift(4,-1);for(He=0;He<12;++He)we.write_shift(4,0);continue}Ye=le.FileIndex[Ee],Ee===0&&(Ye.start=Ye.size?Ye.start-1:V);var It=Ee===0&&xe.root||Ye.name;if($e=2*(It.length+1),we.write_shift(64,It,"utf16le"),we.write_shift(2,$e),we.write_shift(1,Ye.type),we.write_shift(1,Ye.color),we.write_shift(-4,Ye.L),we.write_shift(-4,Ye.R),we.write_shift(-4,Ye.C),Ye.clsid)we.write_shift(16,Ye.clsid,"hex");else for(He=0;He<4;++He)we.write_shift(4,0);we.write_shift(4,Ye.state||0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,0),we.write_shift(4,Ye.start),we.write_shift(4,Ye.size),we.write_shift(4,0)}for(Ee=1;Ee<le.FileIndex.length;++Ee)if(Ye=le.FileIndex[Ee],Ye.size>=4096)if(we.l=Ye.start+1<<9,Vn&&Buffer.isBuffer(Ye.content))Ye.content.copy(we,we.l,0,Ye.size),we.l+=Ye.size+511&-512;else{for(He=0;He<Ye.size;++He)we.write_shift(1,Ye.content[He]);for(;He&511;++He)we.write_shift(1,0)}for(Ee=1;Ee<le.FileIndex.length;++Ee)if(Ye=le.FileIndex[Ee],Ye.size>0&&Ye.size<4096)if(Vn&&Buffer.isBuffer(Ye.content))Ye.content.copy(we,we.l,0,Ye.size),we.l+=Ye.size+63&-64;else{for(He=0;He<Ye.size;++He)we.write_shift(1,Ye.content[He]);for(;He&63;++He)we.write_shift(1,0)}if(Vn)we.l=we.length;else for(;we.l<we.length;)we.write_shift(1,0);return we}function R(le,Te){var xe=le.FullPaths.map(function(He){return He.toUpperCase()}),ve=xe.map(function(He){var $e=He.split("/");return $e[$e.length-(He.slice(-1)=="/"?2:1)]}),we=!1;Te.charCodeAt(0)===47?(we=!0,Te=xe[0].slice(0,-1)+Te):we=Te.indexOf("/")!==-1;var Ee=Te.toUpperCase(),Ue=we===!0?xe.indexOf(Ee):ve.indexOf(Ee);if(Ue!==-1)return le.FileIndex[Ue];var rt=!Ee.match(m1);for(Ee=Ee.replace(fo,""),rt&&(Ee=Ee.replace(m1,"!")),Ue=0;Ue<xe.length;++Ue)if((rt?xe[Ue].replace(m1,"!"):xe[Ue]).replace(fo,"")==Ee||(rt?ve[Ue].replace(m1,"!"):ve[Ue]).replace(fo,"")==Ee)return le.FileIndex[Ue];return null}var P=64,V=-2,Y="d0cf11e0a1b11ae1",ie=[208,207,17,224,161,177,26,225],q="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:V,FREESECT:-1,HEADER_SIGNATURE:Y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function se(le,Te,xe){u();var ve=B(le,xe);c.writeFileSync(Te,ve)}function J(le){for(var Te=new Array(le.length),xe=0;xe<le.length;++xe)Te[xe]=String.fromCharCode(le[xe]);return Te.join("")}function me(le,Te){var xe=B(le,Te);switch(Te&&Te.type||"buffer"){case"file":return u(),c.writeFileSync(Te.filename,xe),xe;case"binary":return typeof xe=="string"?xe:J(xe);case"base64":return _x(typeof xe=="string"?xe:J(xe));case"buffer":if(Vn)return Buffer.isBuffer(xe)?xe:zh(xe);case"array":return typeof xe=="string"?ml(xe):xe}return xe}var re;function M(le){try{var Te=le.InflateRaw,xe=new Te;if(xe._processChunk(new Uint8Array([3,0]),xe._finishFlushFlag),xe.bytesRead)re=le;else throw new Error("zlib does not expose bytesRead")}catch(ve){console.error("cannot use native zlib: "+(ve.message||ve))}}function W(le,Te){if(!re)return wt(le,Te);var xe=re.InflateRaw,ve=new xe,we=ve._processChunk(le.slice(le.l),ve._finishFlushFlag);return le.l+=ve.bytesRead,we}function K(le){return re?re.deflateRawSync(le):Ft(le)}var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],he=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ye(le){var Te=(le<<1|le<<11)&139536|(le<<5|le<<15)&558144;return(Te>>16|Te>>8|Te)&255}for(var be=typeof Uint8Array<"u",Ce=be?new Uint8Array(256):[],ke=0;ke<256;++ke)Ce[ke]=ye(ke);function oe(le,Te){var xe=Ce[le&255];return Te<=8?xe>>>8-Te:(xe=xe<<8|Ce[le>>8&255],Te<=16?xe>>>16-Te:(xe=xe<<8|Ce[le>>16&255],xe>>>24-Te))}function qe(le,Te){var xe=Te&7,ve=Te>>>3;return(le[ve]|(xe<=6?0:le[ve+1]<<8))>>>xe&3}function at(le,Te){var xe=Te&7,ve=Te>>>3;return(le[ve]|(xe<=5?0:le[ve+1]<<8))>>>xe&7}function Fe(le,Te){var xe=Te&7,ve=Te>>>3;return(le[ve]|(xe<=4?0:le[ve+1]<<8))>>>xe&15}function _e(le,Te){var xe=Te&7,ve=Te>>>3;return(le[ve]|(xe<=3?0:le[ve+1]<<8))>>>xe&31}function Be(le,Te){var xe=Te&7,ve=Te>>>3;return(le[ve]|(xe<=1?0:le[ve+1]<<8))>>>xe&127}function lt(le,Te,xe){var ve=Te&7,we=Te>>>3,Ee=(1<<xe)-1,Ue=le[we]>>>ve;return xe<8-ve||(Ue|=le[we+1]<<8-ve,xe<16-ve)||(Ue|=le[we+2]<<16-ve,xe<24-ve)||(Ue|=le[we+3]<<24-ve),Ue&Ee}function Ke(le,Te,xe){var ve=Te&7,we=Te>>>3;return ve<=5?le[we]|=(xe&7)<<ve:(le[we]|=xe<<ve&255,le[we+1]=(xe&7)>>8-ve),Te+3}function We(le,Te,xe){var ve=Te&7,we=Te>>>3;return xe=(xe&1)<<ve,le[we]|=xe,Te+1}function Et(le,Te,xe){var ve=Te&7,we=Te>>>3;return xe<<=ve,le[we]|=xe&255,xe>>>=8,le[we+1]=xe,Te+8}function Oe(le,Te,xe){var ve=Te&7,we=Te>>>3;return xe<<=ve,le[we]|=xe&255,xe>>>=8,le[we+1]=xe&255,le[we+2]=xe>>>8,Te+16}function Dt(le,Te){var xe=le.length,ve=2*xe>Te?2*xe:Te+5,we=0;if(xe>=Te)return le;if(Vn){var Ee=eI(ve);if(le.copy)le.copy(Ee);else for(;we<le.length;++we)Ee[we]=le[we];return Ee}else if(be){var Ue=new Uint8Array(ve);if(Ue.set)Ue.set(le);else for(;we<xe;++we)Ue[we]=le[we];return Ue}return le.length=ve,le}function Rt(le){for(var Te=new Array(le),xe=0;xe<le;++xe)Te[xe]=0;return Te}function Wt(le,Te,xe){var ve=1,we=0,Ee=0,Ue=0,rt=0,He=le.length,$e=be?new Uint16Array(32):Rt(32);for(Ee=0;Ee<32;++Ee)$e[Ee]=0;for(Ee=He;Ee<xe;++Ee)le[Ee]=0;He=le.length;var Ye=be?new Uint16Array(He):Rt(He);for(Ee=0;Ee<He;++Ee)$e[we=le[Ee]]++,ve<we&&(ve=we),Ye[Ee]=0;for($e[0]=0,Ee=1;Ee<=ve;++Ee)$e[Ee+16]=rt=rt+$e[Ee-1]<<1;for(Ee=0;Ee<He;++Ee)rt=le[Ee],rt!=0&&(Ye[Ee]=$e[rt+16]++);var yt=0;for(Ee=0;Ee<He;++Ee)if(yt=le[Ee],yt!=0)for(rt=oe(Ye[Ee],ve)>>ve-yt,Ue=(1<<ve+4-yt)-1;Ue>=0;--Ue)Te[rt|Ue<<yt]=yt&15|Ee<<4;return ve}var Jt=be?new Uint16Array(512):Rt(512),yn=be?new Uint16Array(32):Rt(32);if(!be){for(var ln=0;ln<512;++ln)Jt[ln]=0;for(ln=0;ln<32;++ln)yn[ln]=0}(function(){for(var le=[],Te=0;Te<32;Te++)le.push(5);Wt(le,yn,32);var xe=[];for(Te=0;Te<=143;Te++)xe.push(8);for(;Te<=255;Te++)xe.push(9);for(;Te<=279;Te++)xe.push(7);for(;Te<=287;Te++)xe.push(8);Wt(xe,Jt,288)})();var Zt=(function(){for(var Te=be?new Uint8Array(32768):[],xe=0,ve=0;xe<he.length-1;++xe)for(;ve<he[xe+1];++ve)Te[ve]=xe;for(;ve<32768;++ve)Te[ve]=29;var we=be?new Uint8Array(259):[];for(xe=0,ve=0;xe<te.length-1;++xe)for(;ve<te[xe+1];++ve)we[ve]=xe;function Ee(rt,He){for(var $e=0;$e<rt.length;){var Ye=Math.min(65535,rt.length-$e),yt=$e+Ye==rt.length;for(He.write_shift(1,+yt),He.write_shift(2,Ye),He.write_shift(2,~Ye&65535);Ye-- >0;)He[He.l++]=rt[$e++]}return He.l}function Ue(rt,He){for(var $e=0,Ye=0,yt=be?new Uint16Array(32768):[];Ye<rt.length;){var It=Math.min(65535,rt.length-Ye);if(It<10){for($e=Ke(He,$e,+(Ye+It==rt.length)),$e&7&&($e+=8-($e&7)),He.l=$e/8|0,He.write_shift(2,It),He.write_shift(2,~It&65535);It-- >0;)He[He.l++]=rt[Ye++];$e=He.l*8;continue}$e=Ke(He,$e,+(Ye+It==rt.length)+2);for(var Lt=0;It-- >0;){var bt=rt[Ye];Lt=(Lt<<5^bt)&32767;var Ot=-1,Qt=0;if((Ot=yt[Lt])&&(Ot|=Ye&-32768,Ot>Ye&&(Ot-=32768),Ot<Ye))for(;rt[Ot+Qt]==rt[Ye+Qt]&&Qt<250;)++Qt;if(Qt>2){bt=we[Qt],bt<=22?$e=Et(He,$e,Ce[bt+1]>>1)-1:(Et(He,$e,3),$e+=5,Et(He,$e,Ce[bt-23]>>5),$e+=3);var Un=bt<8?0:bt-4>>2;Un>0&&(Oe(He,$e,Qt-te[bt]),$e+=Un),bt=Te[Ye-Ot],$e=Et(He,$e,Ce[bt]>>3),$e-=3;var gn=bt<4?0:bt-2>>1;gn>0&&(Oe(He,$e,Ye-Ot-he[bt]),$e+=gn);for(var Hn=0;Hn<Qt;++Hn)yt[Lt]=Ye&32767,Lt=(Lt<<5^rt[Ye])&32767,++Ye;It-=Qt-1}else bt<=143?bt=bt+48:$e=We(He,$e,1),$e=Et(He,$e,Ce[bt]),yt[Lt]=Ye&32767,++Ye}$e=Et(He,$e,0)-1}return He.l=($e+7)/8|0,He.l}return function(He,$e){return He.length<8?Ee(He,$e):Ue(He,$e)}})();function Ft(le){var Te=ut(50+Math.floor(le.length*1.1)),xe=Zt(le,Te);return Te.slice(0,xe)}var At=be?new Uint16Array(32768):Rt(32768),De=be?new Uint16Array(32768):Rt(32768),nt=be?new Uint16Array(128):Rt(128),ct=1,Nt=1;function gt(le,Te){var xe=_e(le,Te)+257;Te+=5;var ve=_e(le,Te)+1;Te+=5;var we=Fe(le,Te)+4;Te+=4;for(var Ee=0,Ue=be?new Uint8Array(19):Rt(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],He=1,$e=be?new Uint8Array(8):Rt(8),Ye=be?new Uint8Array(8):Rt(8),yt=Ue.length,It=0;It<we;++It)Ue[G[It]]=Ee=at(le,Te),He<Ee&&(He=Ee),$e[Ee]++,Te+=3;var Lt=0;for($e[0]=0,It=1;It<=He;++It)Ye[It]=Lt=Lt+$e[It-1]<<1;for(It=0;It<yt;++It)(Lt=Ue[It])!=0&&(rt[It]=Ye[Lt]++);var bt=0;for(It=0;It<yt;++It)if(bt=Ue[It],bt!=0){Lt=Ce[rt[It]]>>8-bt;for(var Ot=(1<<7-bt)-1;Ot>=0;--Ot)nt[Lt|Ot<<bt]=bt&7|It<<3}var Qt=[];for(He=1;Qt.length<xe+ve;)switch(Lt=nt[Be(le,Te)],Te+=Lt&7,Lt>>>=3){case 16:for(Ee=3+qe(le,Te),Te+=2,Lt=Qt[Qt.length-1];Ee-- >0;)Qt.push(Lt);break;case 17:for(Ee=3+at(le,Te),Te+=3;Ee-- >0;)Qt.push(0);break;case 18:for(Ee=11+Be(le,Te),Te+=7;Ee-- >0;)Qt.push(0);break;default:Qt.push(Lt),He<Lt&&(He=Lt);break}var Un=Qt.slice(0,xe),gn=Qt.slice(xe);for(It=xe;It<286;++It)Un[It]=0;for(It=ve;It<30;++It)gn[It]=0;return ct=Wt(Un,At,286),Nt=Wt(gn,De,30),Te}function $t(le,Te){if(le[0]==3&&!(le[1]&3))return[sd(Te),2];for(var xe=0,ve=0,we=eI(Te||1<<18),Ee=0,Ue=we.length>>>0,rt=0,He=0;(ve&1)==0;){if(ve=at(le,xe),xe+=3,ve>>>1)ve>>1==1?(rt=9,He=5):(xe=gt(le,xe),rt=ct,He=Nt);else{xe&7&&(xe+=8-(xe&7));var $e=le[xe>>>3]|le[(xe>>>3)+1]<<8;if(xe+=32,$e>0)for(!Te&&Ue<Ee+$e&&(we=Dt(we,Ee+$e),Ue=we.length);$e-- >0;)we[Ee++]=le[xe>>>3],xe+=8;continue}for(;;){!Te&&Ue<Ee+32767&&(we=Dt(we,Ee+32767),Ue=we.length);var Ye=lt(le,xe,rt),yt=ve>>>1==1?Jt[Ye]:At[Ye];if(xe+=yt&15,yt>>>=4,(yt>>>8&255)===0)we[Ee++]=yt;else{if(yt==256)break;yt-=257;var It=yt<8?0:yt-4>>2;It>5&&(It=0);var Lt=Ee+te[yt];It>0&&(Lt+=lt(le,xe,It),xe+=It),Ye=lt(le,xe,He),yt=ve>>>1==1?yn[Ye]:De[Ye],xe+=yt&15,yt>>>=4;var bt=yt<4?0:yt-2>>1,Ot=he[yt];for(bt>0&&(Ot+=lt(le,xe,bt),xe+=bt),!Te&&Ue<Lt&&(we=Dt(we,Lt+100),Ue=we.length);Ee<Lt;)we[Ee]=we[Ee-Ot],++Ee}}}return Te?[we,xe+7>>>3]:[we.slice(0,Ee),xe+7>>>3]}function wt(le,Te){var xe=le.slice(le.l||0),ve=$t(xe,Te);return le.l+=ve[1],ve[0]}function In(le,Te){if(le)typeof console<"u"&&console.error(Te);else throw new Error(Te)}function Ne(le,Te){var xe=le;ma(xe,0);var ve=[],we=[],Ee={FileIndex:ve,FullPaths:we};A(Ee,{root:Te.root});for(var Ue=xe.length-4;(xe[Ue]!=80||xe[Ue+1]!=75||xe[Ue+2]!=5||xe[Ue+3]!=6)&&Ue>=0;)--Ue;xe.l=Ue+4,xe.l+=4;var rt=xe.read_shift(2);xe.l+=6;var He=xe.read_shift(4);for(xe.l=He,Ue=0;Ue<rt;++Ue){xe.l+=20;var $e=xe.read_shift(4),Ye=xe.read_shift(4),yt=xe.read_shift(2),It=xe.read_shift(2),Lt=xe.read_shift(2);xe.l+=8;var bt=xe.read_shift(4),Ot=o(xe.slice(xe.l+yt,xe.l+yt+It));xe.l+=yt+It+Lt;var Qt=xe.l;xe.l=bt+4,tt(xe,$e,Ye,Ee,Ot),xe.l=Qt}return Ee}function tt(le,Te,xe,ve,we){le.l+=2;var Ee=le.read_shift(2),Ue=le.read_shift(2),rt=a(le);if(Ee&8257)throw new Error("Unsupported ZIP encryption");for(var He=le.read_shift(4),$e=le.read_shift(4),Ye=le.read_shift(4),yt=le.read_shift(2),It=le.read_shift(2),Lt="",bt=0;bt<yt;++bt)Lt+=String.fromCharCode(le[le.l++]);if(It){var Ot=o(le.slice(le.l,le.l+It));(Ot[21589]||{}).mt&&(rt=Ot[21589].mt),((we||{})[21589]||{}).mt&&(rt=we[21589].mt)}le.l+=It;var Qt=le.slice(le.l,le.l+$e);switch(Ue){case 8:Qt=W(le,Ye);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ue)}var Un=!1;Ee&8&&(He=le.read_shift(4),He==134695760&&(He=le.read_shift(4),Un=!0),$e=le.read_shift(4),Ye=le.read_shift(4)),$e!=Te&&In(Un,"Bad compressed size: "+Te+" != "+$e),Ye!=xe&&In(Un,"Bad uncompressed size: "+xe+" != "+Ye),Ar(ve,Lt,Qt,{unsafe:!0,mt:rt})}function Pt(le,Te){var xe=Te||{},ve=[],we=[],Ee=ut(1),Ue=xe.compression?8:0,rt=0,He=0,$e=0,Ye=0,yt=0,It=le.FullPaths[0],Lt=It,bt=le.FileIndex[0],Ot=[],Qt=0;for(He=1;He<le.FullPaths.length;++He)if(Lt=le.FullPaths[He].slice(It.length),bt=le.FileIndex[He],!(!bt.size||!bt.content||Lt=="Sh33tJ5")){var Un=Ye,gn=ut(Lt.length);for($e=0;$e<Lt.length;++$e)gn.write_shift(1,Lt.charCodeAt($e)&127);gn=gn.slice(0,gn.l),Ot[yt]=BX.buf(bt.content,0);var Hn=bt.content;Ue==8&&(Hn=K(Hn)),Ee=ut(30),Ee.write_shift(4,67324752),Ee.write_shift(2,20),Ee.write_shift(2,rt),Ee.write_shift(2,Ue),bt.mt?s(Ee,bt.mt):Ee.write_shift(4,0),Ee.write_shift(-4,Ot[yt]),Ee.write_shift(4,Hn.length),Ee.write_shift(4,bt.content.length),Ee.write_shift(2,gn.length),Ee.write_shift(2,0),Ye+=Ee.length,ve.push(Ee),Ye+=gn.length,ve.push(gn),Ye+=Hn.length,ve.push(Hn),Ee=ut(46),Ee.write_shift(4,33639248),Ee.write_shift(2,0),Ee.write_shift(2,20),Ee.write_shift(2,rt),Ee.write_shift(2,Ue),Ee.write_shift(4,0),Ee.write_shift(-4,Ot[yt]),Ee.write_shift(4,Hn.length),Ee.write_shift(4,bt.content.length),Ee.write_shift(2,gn.length),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(4,0),Ee.write_shift(4,Un),Qt+=Ee.l,we.push(Ee),Qt+=gn.length,we.push(gn),++yt}return Ee=ut(22),Ee.write_shift(4,101010256),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,yt),Ee.write_shift(2,yt),Ee.write_shift(4,Qt),Ee.write_shift(4,Ye),Ee.write_shift(2,0),Qs([Qs(ve),Qs(we),Ee])}var kt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function St(le,Te){if(le.ctype)return le.ctype;var xe=le.name||"",ve=xe.match(/\.([^\.]+)$/);return ve&&kt[ve[1]]||Te&&(ve=(xe=Te).match(/[\.\\]([^\.\\])+$/),ve&&kt[ve[1]])?kt[ve[1]]:"application/octet-stream"}function jt(le){for(var Te=_x(le),xe=[],ve=0;ve<Te.length;ve+=76)xe.push(Te.slice(ve,ve+76));return xe.join(`\r
`)+`\r
`}function Fn(le){var Te=le.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function($e){var Ye=$e.charCodeAt(0).toString(16).toUpperCase();return"="+(Ye.length==1?"0"+Ye:Ye)});Te=Te.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Te.charAt(0)==`
`&&(Te="=0D"+Te.slice(1)),Te=Te.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var xe=[],ve=Te.split(`\r
`),we=0;we<ve.length;++we){var Ee=ve[we];if(Ee.length==0){xe.push("");continue}for(var Ue=0;Ue<Ee.length;){var rt=76,He=Ee.slice(Ue,Ue+rt);He.charAt(rt-1)=="="?rt--:He.charAt(rt-2)=="="?rt-=2:He.charAt(rt-3)=="="&&(rt-=3),He=Ee.slice(Ue,Ue+rt),Ue+=rt,Ue<Ee.length&&(He+="="),xe.push(He)}}return xe.join(`\r
`)}function hn(le){for(var Te=[],xe=0;xe<le.length;++xe){for(var ve=le[xe];xe<=le.length&&ve.charAt(ve.length-1)=="=";)ve=ve.slice(0,ve.length-1)+le[++xe];Te.push(ve)}for(var we=0;we<Te.length;++we)Te[we]=Te[we].replace(/[=][0-9A-Fa-f]{2}/g,function(Ee){return String.fromCharCode(parseInt(Ee.slice(1),16))});return ml(Te.join(`\r
`))}function nr(le,Te,xe){for(var ve="",we="",Ee="",Ue,rt=0;rt<10;++rt){var He=Te[rt];if(!He||He.match(/^\s*$/))break;var $e=He.match(/^(.*?):\s*([^\s].*)$/);if($e)switch($e[1].toLowerCase()){case"content-location":ve=$e[2].trim();break;case"content-type":Ee=$e[2].trim();break;case"content-transfer-encoding":we=$e[2].trim();break}}switch(++rt,we.toLowerCase()){case"base64":Ue=ml(wl(Te.slice(rt).join("")));break;case"quoted-printable":Ue=hn(Te.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+we)}var Ye=Ar(le,ve.slice(xe.length),Ue,{unsafe:!0});Ee&&(Ye.ctype=Ee)}function Tr(le,Te){if(J(le.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var xe=Te&&Te.root||"",ve=(Vn&&Buffer.isBuffer(le)?le.toString("binary"):J(le)).split(`\r
`),we=0,Ee="";for(we=0;we<ve.length;++we)if(Ee=ve[we],!!/^Content-Location:/i.test(Ee)&&(Ee=Ee.slice(Ee.indexOf("file")),xe||(xe=Ee.slice(0,Ee.lastIndexOf("/")+1)),Ee.slice(0,xe.length)!=xe))for(;xe.length>0&&(xe=xe.slice(0,xe.length-1),xe=xe.slice(0,xe.lastIndexOf("/")+1),Ee.slice(0,xe.length)!=xe););var Ue=(ve[1]||"").match(/boundary="(.*?)"/);if(!Ue)throw new Error("MAD cannot find boundary");var rt="--"+(Ue[1]||""),He=[],$e=[],Ye={FileIndex:He,FullPaths:$e};A(Ye);var yt,It=0;for(we=0;we<ve.length;++we){var Lt=ve[we];Lt!==rt&&Lt!==rt+"--"||(It++&&nr(Ye,ve.slice(yt,we),xe),yt=we)}return Ye}function sn(le,Te){var xe=Te||{},ve=xe.boundary||"SheetJS";ve="------="+ve;for(var we=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ve.slice(2)+'"',"","",""],Ee=le.FullPaths[0],Ue=Ee,rt=le.FileIndex[0],He=1;He<le.FullPaths.length;++He)if(Ue=le.FullPaths[He].slice(Ee.length),rt=le.FileIndex[He],!(!rt.size||!rt.content||Ue=="Sh33tJ5")){Ue=Ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Qt){return"_x"+Qt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Qt){return"_u"+Qt.charCodeAt(0).toString(16)+"_"});for(var $e=rt.content,Ye=Vn&&Buffer.isBuffer($e)?$e.toString("binary"):J($e),yt=0,It=Math.min(1024,Ye.length),Lt=0,bt=0;bt<=It;++bt)(Lt=Ye.charCodeAt(bt))>=32&&Lt<128&&++yt;var Ot=yt>=It*4/5;we.push(ve),we.push("Content-Location: "+(xe.root||"file:///C:/SheetJS/")+Ue),we.push("Content-Transfer-Encoding: "+(Ot?"quoted-printable":"base64")),we.push("Content-Type: "+St(rt,Ue)),we.push(""),we.push(Ot?Fn(Ye):jt(Ye))}return we.push(ve+`--\r
`),we.join(`\r
`)}function Br(le){var Te={};return A(Te,le),Te}function Ar(le,Te,xe,ve){var we=ve&&ve.unsafe;we||A(le);var Ee=!we&&pn.find(le,Te);if(!Ee){var Ue=le.FullPaths[0];Te.slice(0,Ue.length)==Ue?Ue=Te:(Ue.slice(-1)!="/"&&(Ue+="/"),Ue=(Ue+Te).replace("//","/")),Ee={name:i(Te),type:2},le.FileIndex.push(Ee),le.FullPaths.push(Ue),we||pn.utils.cfb_gc(le)}return Ee.content=xe,Ee.size=xe?xe.length:0,ve&&(ve.CLSID&&(Ee.clsid=ve.CLSID),ve.mt&&(Ee.mt=ve.mt),ve.ct&&(Ee.ct=ve.ct)),Ee}function ei(le,Te){A(le);var xe=pn.find(le,Te);if(xe){for(var ve=0;ve<le.FileIndex.length;++ve)if(le.FileIndex[ve]==xe)return le.FileIndex.splice(ve,1),le.FullPaths.splice(ve,1),!0}return!1}function Er(le,Te,xe){A(le);var ve=pn.find(le,Te);if(ve){for(var we=0;we<le.FileIndex.length;++we)if(le.FileIndex[we]==ve)return le.FileIndex[we].name=i(xe),le.FullPaths[we]=xe,!0}return!1}function sr(le){O(le,!0)}return e.find=R,e.read=z,e.parse=d,e.write=me,e.writeFile=se,e.utils={cfb_new:Br,cfb_add:Ar,cfb_del:ei,cfb_mov:Er,cfb_gc:sr,ReadShift:O1,CheckField:bO,prep_blob:ma,bconcat:Qs,use_zlib:M,_deflateRaw:Ft,_inflateRaw:wt,consts:Q},e})();function VX(n){return typeof n=="string"?i_(n):Array.isArray(n)?fX(n):n}function cv(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=i_(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Au(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([VX(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=_d(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+n)}function zX(n){if(typeof Deno<"u")return Deno.readFileSync(n);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(n);e.open("r"),e.encoding="binary";var t=e.read();return e.close(),t}catch(r){if(!r.message||!r.message.match(/onstruct/))throw r}throw new Error("Cannot access file "+n)}function Gi(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function lI(n,e){for(var t=[],r=Gi(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function a_(n){for(var e=[],t=Gi(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function o_(n){for(var e=[],t=Gi(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function UX(n){for(var e=[],t=Gi(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var ab=new Date(1899,11,30,0,0,0);function Bs(n,e){var t=n.getTime(),r=ab.getTime()+(n.getTimezoneOffset()-ab.getTimezoneOffset())*6e4;return(t-r)/(1440*60*1e3)}var ZL=new Date,HX=ab.getTime()+(ZL.getTimezoneOffset()-ab.getTimezoneOffset())*6e4,cI=ZL.getTimezoneOffset();function l_(n){var e=new Date;return e.setTime(n*24*60*60*1e3+HX),e.getTimezoneOffset()!==cI&&e.setTime(e.getTime()+(e.getTimezoneOffset()-cI)*6e4),e}function qX(n){var e=0,t=0,r=!1,i=n.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!i)throw new Error("|"+n+"| is not an ISO8601 Duration");for(var s=1;s!=i.length;++s)if(i[s]){switch(t=1,s>3&&(r=!0),i[s].slice(i[s].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+i[s].slice(i[s].length-1));case"D":t*=24;case"H":t*=60;case"M":if(r)t*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=t*parseInt(i[s],10)}return e}var uI=new Date("2017-02-19T19:06:09.000Z"),eO=isNaN(uI.getFullYear())?new Date("2/19/17"):uI,WX=eO.getFullYear()==2017;function fi(n,e){var t=new Date(n);if(WX)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(eO.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function M0(n,e){if(Vn&&Buffer.isBuffer(n)){if(e){if(n[0]==255&&n[1]==254)return Au(n.slice(2).toString("utf16le"));if(n[1]==254&&n[2]==255)return Au(zL(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(n[0]==255&&n[1]==254)return Au(new TextDecoder("utf-16le").decode(n.slice(2)));if(n[0]==254&&n[1]==255)return Au(new TextDecoder("utf-16be").decode(n.slice(2)))}var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function di(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=di(n[t]));return e}function Vi(n,e){for(var t="";t.length<e;)t+=n;return t}function Dc(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var GX=["january","february","march","april","may","june","july","august","september","october","november","december"];function qp(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&GX.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}var $X=(function(){var n="abacaba".split(/(:?b)/i).length==5;return function(t,r,i){if(n||typeof r=="string")return t.split(r);for(var s=t.split(r),a=[s[0]],o=1;o<s.length;++o)a.push(i),a.push(s[o]);return a}})();function tO(n){return n?n.content&&n.type?M0(n.content,!0):n.data?d1(n.data):n.asNodeBuffer&&Vn?d1(n.asNodeBuffer().toString("binary")):n.asBinary?d1(n.asBinary()):n._data&&n._data.getContent?d1(M0(Array.prototype.slice.call(n._data.getContent(),0))):null:null}function nO(n){if(!n)return null;if(n.data)return Jk(n.data);if(n.asNodeBuffer&&Vn)return n.asNodeBuffer();if(n._data&&n._data.getContent){var e=n._data.getContent();return typeof e=="string"?Jk(e):Array.prototype.slice.call(e)}return n.content&&n.type?n.content:null}function KX(n){return n&&n.name.slice(-4)===".bin"?nO(n):tO(n)}function Gl(n,e){for(var t=n.FullPaths||Gi(n.files),r=e.toLowerCase().replace(/[\/]/g,"\\"),i=r.replace(/\\/g,"/"),s=0;s<t.length;++s){var a=t[s].replace(/^Root Entry[\/]/,"").toLowerCase();if(r==a||i==a)return n.files?n.files[t[s]]:n.FileIndex[s]}return null}function lE(n,e){var t=Gl(n,e);if(t==null)throw new Error("Cannot find file "+e+" in zip");return t}function ys(n,e,t){if(!t)return KX(lE(n,e));if(!e)return null;try{return ys(n,e)}catch{return null}}function pl(n,e,t){if(!t)return tO(lE(n,e));if(!e)return null;try{return pl(n,e)}catch{return null}}function YX(n,e,t){return nO(lE(n,e))}function hI(n){for(var e=n.FullPaths||Gi(n.files),t=[],r=0;r<e.length;++r)e[r].slice(-1)!="/"&&t.push(e[r].replace(/^Root Entry[\/]/,""));return t.sort()}function Mn(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return Vn?r=zh(t):r=dX(t),pn.utils.cfb_add(n,e,r)}pn.utils.cfb_add(n,e,t)}else n.file(e,t)}function cE(){return pn.utils.cfb_new()}function rO(n,e){switch(e.type){case"base64":return pn.read(n,{type:"base64"});case"binary":return pn.read(n,{type:"binary"});case"buffer":case"array":return pn.read(n,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function p1(n,e){if(n.charAt(0)=="/")return n.slice(1);var t=e.split("/");e.slice(-1)!="/"&&t.pop();for(var r=n.split("/");r.length!==0;){var i=r.shift();i===".."?t.pop():i!=="."&&t.push(i)}return t.join("/")}var os=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,XX=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,fI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,QX=/<[^>]*>/g,$a=os.match(fI)?fI:QX,JX=/<\w*:/,ZX=/<(\/?)\w+:/;function An(n,e,t){for(var r={},i=0,s=0;i!==n.length&&!((s=n.charCodeAt(i))===32||s===10||s===13);++i);if(e||(r[0]=n.slice(0,i)),i===n.length)return r;var a=n.match(XX),o=0,c="",u=0,d="",p="",x=1;if(a)for(u=0;u!=a.length;++u){for(p=a[u],s=0;s!=p.length&&p.charCodeAt(s)!==61;++s);for(d=p.slice(0,s).trim();p.charCodeAt(s+1)==32;)++s;for(x=(i=p.charCodeAt(s+1))==34||i==39?1:0,c=p.slice(s+1+x,p.length-x),o=0;o!=d.length&&d.charCodeAt(o)!==58;++o);if(o===d.length)d.indexOf("_")>0&&(d=d.slice(0,d.indexOf("_"))),r[d]=c,r[d.toLowerCase()]=c;else{var v=(o===5&&d.slice(0,5)==="xmlns"?"xmlns":"")+d.slice(o+1);if(r[v]&&d.slice(o-3,o)=="ext")continue;r[v]=c,r[v.toLowerCase()]=c}}return r}function Fu(n){return n.replace(ZX,"<$1")}var iO={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},uE=a_(iO),fr=(function(){var n=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;return function t(r){var i=r+"",s=i.indexOf("<![CDATA[");if(s==-1)return i.replace(n,function(o,c){return iO[o]||String.fromCharCode(parseInt(c,o.indexOf("x")>-1?16:10))||o}).replace(e,function(o,c){return String.fromCharCode(parseInt(c,16))});var a=i.indexOf("]]>");return t(i.slice(0,s))+i.slice(s+9,a)+t(i.slice(a+3))}})(),hE=/[&<>'"]/g,eQ=/[\u0000-\u0008\u000b-\u001f]/g;function Or(n){var e=n+"";return e.replace(hE,function(t){return uE[t]}).replace(eQ,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function dI(n){return Or(n).replace(/ /g,"_x0020_")}var sO=/[\u0000-\u001f]/g;function fE(n){var e=n+"";return e.replace(hE,function(t){return uE[t]}).replace(/\n/g,"<br/>").replace(sO,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function tQ(n){var e=n+"";return e.replace(hE,function(t){return uE[t]}).replace(sO,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}var mI=(function(){var n=/&#(\d+);/g;function e(t,r){return String.fromCharCode(parseInt(r,10))}return function(r){return r.replace(n,e)}})();function nQ(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function ci(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function m5(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function pI(n){var e=sd(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function gI(n){return zh(n,"binary").toString("utf8")}var w2="foo bar baz",Gr=Vn&&(gI(w2)==m5(w2)&&gI||pI(w2)==m5(w2)&&pI)||m5,Au=Vn?function(n){return zh(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},Sx=(function(){var n={};return function(t,r){var i=t+"|"+(r||"");return n[i]?n[i]:n[i]=new RegExp("<(?:\\w+:)?"+t+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+t+">",r||"")}})(),aO=(function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}})(),rQ=(function(){var n={};return function(t){return n[t]!==void 0?n[t]:n[t]=new RegExp("<(?:vt:)?"+t+">([\\s\\S]*?)</(?:vt:)?"+t+">","g")}})(),iQ=/<\/?(?:vt:)?variant>/g,sQ=/<(?:vt:)([^>]*)>([\s\S]*)</;function xI(n,e){var t=An(n),r=n.match(rQ(t.baseType))||[],i=[];if(r.length!=t.size){if(e.WTF)throw new Error("unexpected vector length "+r.length+" != "+t.size);return i}return r.forEach(function(s){var a=s.replace(iQ,"").match(sQ);a&&i.push({v:Gr(a[2]),t:a[1]})}),i}var oO=/(^\s|\s$|\n)/;function pa(n,e){return"<"+n+(e.match(oO)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Tx(n){return Gi(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function Bt(n,e,t){return"<"+n+(t!=null?Tx(t):"")+(e!=null?(e.match(oO)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function US(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function aQ(n,e){switch(typeof n){case"string":var t=Bt("vt:lpwstr",Or(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return Bt((n|0)==n?"vt:i4":"vt:r8",Or(String(n)));case"boolean":return Bt("vt:bool",n?"true":"false")}if(n instanceof Date)return Bt("vt:filetime",US(n));throw new Error("Unable to serialize "+n)}function dE(n){if(Vn&&Buffer.isBuffer(n))return n.toString("utf8");if(typeof n=="string")return n;if(typeof Uint8Array<"u"&&n instanceof Uint8Array)return Gr(_d(sE(n)));throw new Error("Bad input format: expected Buffer or string")}var Ex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ls={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Y0=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],fl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function oQ(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function lQ(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var vI=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},yI=Vn?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:zh(e)})):vI(n)}:vI,bI=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(Sh(n,i)));return r.join("").replace(fo,"")},mE=Vn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(fo,""):bI(n,e,t)}:bI,_I=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},lO=Vn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):_I(n,e,t)}:_I,wI=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(sp(n,i)));return r.join("")},uv=Vn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):wI(e,t,r)}:wI,cO=function(n,e){var t=dl(n,e);return t>0?uv(n,e+4,e+4+t-1):""},uO=cO,hO=function(n,e){var t=dl(n,e);return t>0?uv(n,e+4,e+4+t-1):""},fO=hO,dO=function(n,e){var t=2*dl(n,e);return t>0?uv(n,e+4,e+4+t-1):""},mO=dO,pO=function(e,t){var r=dl(e,t);return r>0?mE(e,t+4,t+4+r):""},gO=pO,xO=function(n,e){var t=dl(n,e);return t>0?uv(n,e+4,e+4+t):""},vO=xO,yO=function(n,e){return oQ(n,e)},ob=yO,pE=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};Vn&&(uO=function(e,t){if(!Buffer.isBuffer(e))return cO(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},fO=function(e,t){if(!Buffer.isBuffer(e))return hO(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},mO=function(e,t){if(!Buffer.isBuffer(e))return dO(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},gO=function(e,t){if(!Buffer.isBuffer(e))return pO(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},vO=function(e,t){if(!Buffer.isBuffer(e))return xO(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},ob=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):yO(e,t)},pE=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var sp=function(n,e){return n[e]},Sh=function(n,e){return n[e+1]*256+n[e]},cQ=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},dl=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},r0=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},uQ=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function O1(n,e){var t="",r,i,s=[],a,o,c,u;switch(e){case"dbcs":if(u=this.l,Vn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(c=0;c<n;++c)t+=String.fromCharCode(Sh(this,u)),u+=2;n*=2;break;case"utf8":t=uv(this,this.l,this.l+n);break;case"utf16le":n*=2,t=mE(this,this.l,this.l+n);break;case"wstr":return O1.call(this,n,"dbcs");case"lpstr-ansi":t=uO(this,this.l),n=4+dl(this,this.l);break;case"lpstr-cp":t=fO(this,this.l),n=4+dl(this,this.l);break;case"lpwstr":t=mO(this,this.l),n=4+2*dl(this,this.l);break;case"lpp4":n=4+dl(this,this.l),t=gO(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+dl(this,this.l),t=vO(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=sp(this,this.l+n++))!==0;)s.push(_2(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=Sh(this,this.l+n))!==0;)s.push(_2(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,c=0;c<n;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=sp(this,u),this.l=u+1,o=O1.call(this,n-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_2(Sh(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,c=0;c!=n;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=sp(this,u),this.l=u+1,o=O1.call(this,n-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(_2(sp(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=sp(this,this.l),this.l++,r;case 2:return r=(e==="i"?cQ:Sh)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||(this[this.l+3]&128)===0?(r=(n>0?r0:uQ)(this,this.l),this.l+=4,r):(i=dl(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=ob(this,this.l):i=ob([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=lO(this,this.l,n);break}}return this.l+=n,t}var hQ=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},fQ=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},dQ=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function mQ(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)dQ(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,hQ(this,e,this.l);break;case 8:if(r=8,t==="f"){lQ(this,e,this.l);break}case 16:break;case-4:r=4,fQ(this,e,this.l);break}return this.l+=r,this}function bO(n,e){var t=lO(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function ma(n,e){n.l=e,n.read_shift=O1,n.chk=bO,n.write_shift=mQ}function Wa(n,e){n.l+=e}function ut(n){var e=sd(n);return ma(e,0),e}function Uh(n,e,t){if(n){var r,i,s;ma(n,n.l||0);for(var a=n.length,o=0,c=0;n.l<a;){o=n.read_shift(1),o&128&&(o=(o&127)+((n.read_shift(1)&127)<<7));var u=Dx[o]||Dx[65535];for(r=n.read_shift(1),s=r&127,i=1;i<4&&r&128;++i)s+=((r=n.read_shift(1))&127)<<7*i;c=n.l+s;var d=u.f&&u.f(n,s,t);if(n.l=c,e(d,u,o))return}}}function Uo(){var n=[],e=Vn?256:2048,t=function(u){var d=ut(u);return ma(d,0),d},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),Qs(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function Tt(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=Dx[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&pE(t)&&n.push(t)}}function M1(n,e,t){var r=di(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function SI(n,e,t){var r=di(n);return r.s=M1(r.s,e.s,t),r.e=M1(r.e,e.s,t),r}function F1(n,e){if(n.cRel&&n.c<0)for(n=di(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=di(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=Tn(n);return!n.cRel&&n.cRel!=null&&(t=xQ(t)),!n.rRel&&n.rRel!=null&&(t=pQ(t)),t}function p5(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+Ri(n.s.c)+":"+(n.e.cRel?"":"$")+Ri(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+rs(n.s.r)+":"+(n.e.rRel?"":"$")+rs(n.e.r):F1(n.s,e.biff)+":"+F1(n.e,e.biff)}function gE(n){return parseInt(gQ(n),10)-1}function rs(n){return""+(n+1)}function pQ(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function gQ(n){return n.replace(/\$(\d+)$/,"$1")}function xE(n){for(var e=vQ(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function Ri(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function xQ(n){return n.replace(/^([A-Z])/,"$$$1")}function vQ(n){return n.replace(/^\$([A-Z])/,"$1")}function yQ(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Pi(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function Tn(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function qo(n){var e=n.indexOf(":");return e==-1?{s:Pi(n),e:Pi(n)}:{s:Pi(n.slice(0,e)),e:Pi(n.slice(e+1))}}function Ln(n,e){return typeof e>"u"||typeof e=="number"?Ln(n.s,n.e):(typeof n!="string"&&(n=Tn(n)),typeof e!="string"&&(e=Tn(e)),n==e?n:n+":"+e)}function dr(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function TI(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=Zl(n.z,t?Bs(e):e)}catch{}try{return n.w=Zl((n.XF||{}).numFmtId||(t?14:0),t?Bs(e):e)}catch{return""+e}}function Mh(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?Hh[n.v]||n.v:e==null?TI(n,n.v):TI(n,e))}function wd(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function _O(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var c=typeof r.origin=="string"?Pi(r.origin):r.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var d=dr(s["!ref"]);u.s.c=d.s.c,u.s.r=d.s.r,u.e.c=Math.max(u.e.c,d.e.c),u.e.r=Math.max(u.e.r,d.e.r),a==-1&&(u.e.r=a=d.e.r+1)}for(var p=0;p!=e.length;++p)if(e[p]){if(!Array.isArray(e[p]))throw new Error("aoa_to_sheet expects an array of arrays");for(var x=0;x!=e[p].length;++x)if(!(typeof e[p][x]>"u")){var v={v:e[p][x]},_=a+p,b=o+x;if(u.s.r>_&&(u.s.r=_),u.s.c>b&&(u.s.c=b),u.e.r<_&&(u.e.r=_),u.e.c<b&&(u.e.c=b),e[p][x]&&typeof e[p][x]=="object"&&!Array.isArray(e[p][x])&&!(e[p][x]instanceof Date))v=e[p][x];else if(Array.isArray(v.v)&&(v.f=e[p][x][1],v.v=v.v[0]),v.v===null)if(v.f)v.t="n";else if(r.nullError)v.t="e",v.v=0;else if(r.sheetStubs)v.t="z";else continue;else typeof v.v=="number"?v.t="n":typeof v.v=="boolean"?v.t="b":v.v instanceof Date?(v.z=r.dateNF||wn[14],r.cellDates?(v.t="d",v.w=Zl(v.z,Bs(v.v))):(v.t="n",v.v=Bs(v.v),v.w=Zl(v.z,v.v))):v.t="s";if(i)s[_]||(s[_]=[]),s[_][b]&&s[_][b].z&&(v.z=s[_][b].z),s[_][b]=v;else{var S=Tn({c:b,r:_});s[S]&&s[S].z&&(v.z=s[S].z),s[S]=v}}}return u.s.c<1e7&&(s["!ref"]=Ln(u)),s}function lg(n,e){return _O(null,n,e)}function bQ(n){return n.read_shift(4,"i")}function Rc(n,e){return e||(e=ut(4)),e.write_shift(4,n),e}function qa(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Js(n,e){var t=!1;return e==null&&(t=!0,e=ut(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function _Q(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function wQ(n,e){return e||(e=ut(4)),e.write_shift(2,0),e.write_shift(2,0),e}function vE(n,e){var t=n.l,r=n.read_shift(1),i=qa(n),s=[],a={t:i,h:i};if((r&1)!==0){for(var o=n.read_shift(4),c=0;c!=o;++c)s.push(_Q(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function SQ(n,e){var t=!1;return e==null&&(t=!0,e=ut(15+4*n.t.length)),e.write_shift(1,0),Js(n.t,e),t?e.slice(0,e.l):e}var TQ=vE;function EQ(n,e){var t=!1;return e==null&&(t=!0,e=ut(23+4*n.t.length)),e.write_shift(1,1),Js(n.t,e),e.write_shift(4,1),wQ({},e),t?e.slice(0,e.l):e}function ec(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function X0(n,e){return e==null&&(e=ut(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function Q0(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function J0(n,e){return e==null&&(e=ut(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var AQ=qa,wO=Js;function yE(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function lb(n,e){var t=!1;return e==null&&(t=!0,e=ut(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var NQ=qa,HS=yE,bE=lb;function _E(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?ob([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):r0(e,0)>>2;return t?i/100:i}function SO(n,e){e==null&&(e=ut(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function TO(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function CQ(n,e){return e||(e=ut(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Z0=TO,cg=CQ;function za(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function F0(n,e){return(e||ut(8)).write_shift(8,n,"f")}function kQ(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),c=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=d0[i];u&&(e.rgb=Nx(u));break;case 2:e.rgb=Nx([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function cb(n,e){if(e||(e=ut(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function IQ(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function DQ(n,e){e||(e=ut(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}function EO(n,e){var t={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},r=n.read_shift(4);switch(r){case 0:return"";case 4294967295:case 4294967294:return t[n.read_shift(4)]||""}if(r>400)throw new Error("Unsupported Clipboard: "+r.toString(16));return n.l-=4,n.read_shift(0,e==1?"lpstr":"lpwstr")}function RQ(n){return EO(n,1)}function PQ(n){return EO(n,2)}var wE=2,Mo=3,S2=11,EI=12,ub=19,T2=64,jQ=65,LQ=71,OQ=4108,MQ=4126,Xs=80,AO=81,FQ=[Xs,AO],qS={1:{n:"CodePage",t:wE},2:{n:"Category",t:Xs},3:{n:"PresentationFormat",t:Xs},4:{n:"ByteCount",t:Mo},5:{n:"LineCount",t:Mo},6:{n:"ParagraphCount",t:Mo},7:{n:"SlideCount",t:Mo},8:{n:"NoteCount",t:Mo},9:{n:"HiddenCount",t:Mo},10:{n:"MultimediaClipCount",t:Mo},11:{n:"ScaleCrop",t:S2},12:{n:"HeadingPairs",t:OQ},13:{n:"TitlesOfParts",t:MQ},14:{n:"Manager",t:Xs},15:{n:"Company",t:Xs},16:{n:"LinksUpToDate",t:S2},17:{n:"CharacterCount",t:Mo},19:{n:"SharedDoc",t:S2},22:{n:"HyperlinksChanged",t:S2},23:{n:"AppVersion",t:Mo,p:"version"},24:{n:"DigSig",t:jQ},26:{n:"ContentType",t:Xs},27:{n:"ContentStatus",t:Xs},28:{n:"Language",t:Xs},29:{n:"Version",t:Xs},255:{},2147483648:{n:"Locale",t:ub},2147483651:{n:"Behavior",t:ub},1919054434:{}},WS={1:{n:"CodePage",t:wE},2:{n:"Title",t:Xs},3:{n:"Subject",t:Xs},4:{n:"Author",t:Xs},5:{n:"Keywords",t:Xs},6:{n:"Comments",t:Xs},7:{n:"Template",t:Xs},8:{n:"LastAuthor",t:Xs},9:{n:"RevNumber",t:Xs},10:{n:"EditTime",t:T2},11:{n:"LastPrinted",t:T2},12:{n:"CreatedDate",t:T2},13:{n:"ModifiedDate",t:T2},14:{n:"PageCount",t:Mo},15:{n:"WordCount",t:Mo},16:{n:"CharCount",t:Mo},17:{n:"Thumbnail",t:LQ},18:{n:"Application",t:Xs},19:{n:"DocSecurity",t:Mo},255:{},2147483648:{n:"Locale",t:ub},2147483651:{n:"Behavior",t:ub},1919054434:{}},AI={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},BQ=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function VQ(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var zQ=VQ([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),d0=di(zQ),Hh={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},NO={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},GS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},E2={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function SE(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function UQ(n){var e=SE();if(!n||!n.match)return e;var t={};if((n.match($a)||[]).forEach(function(r){var i=An(r);switch(i[0].replace(JX,"<")){case"<?xml":break;case"<Types":e.xmlns=i["xmlns"+(i[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":t[i.Extension]=i.ContentType;break;case"<Override":e[GS[i.ContentType]]!==void 0&&e[GS[i.ContentType]].push(i.PartName);break}}),e.xmlns!==Ls.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=t,delete e.calcchains,e}function CO(n,e){var t=UX(GS),r=[],i;r[r.length]=os,r[r.length]=Bt("Types",null,{xmlns:Ls.CT,"xmlns:xsd":Ls.xsd,"xmlns:xsi":Ls.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Bt("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){n[c]&&n[c].length>0&&(i=n[c][0],r[r.length]=Bt("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:E2[c][e.bookType]||E2[c].xlsx}))},a=function(c){(n[c]||[]).forEach(function(u){r[r.length]=Bt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:E2[c][e.bookType]||E2[c].xlsx})})},o=function(c){(n[c]||[]).forEach(function(u){r[r.length]=Bt("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[c][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var qn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Ax(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function B1(n,e){var t={"!id":{}};if(!n)return t;e.charAt(0)!=="/"&&(e="/"+e);var r={};return(n.match($a)||[]).forEach(function(i){var s=An(i);if(s[0]==="<Relationship"){var a={};a.Type=s.Type,a.Target=s.Target,a.Id=s.Id,s.TargetMode&&(a.TargetMode=s.TargetMode);var o=s.TargetMode==="External"?s.Target:p1(s.Target,e);t[o]=a,r[s.Id]=a}}),t["!id"]=r,t}function vp(n){var e=[os,Bt("Relationships",null,{xmlns:Ls.RELS})];return Gi(n["!id"]).forEach(function(t){e[e.length]=Bt("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function Dr(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[qn.HLINK,qn.XPATH,qn.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}var HQ="application/vnd.oasis.opendocument.spreadsheet";function qQ(n,e){for(var t=dE(n),r,i;r=Ex.exec(t);)switch(r[3]){case"manifest":break;case"file-entry":if(i=An(r[0],!1),i.path=="/"&&i.type!==HQ)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw r}}function WQ(n){var e=[os];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function NI(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function GQ(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function $Q(n){var e=[os];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(NI(n[t][0],n[t][1])),e.push(GQ("",n[t][0]));return e.push(NI("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function kO(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+nb.version+"</meta:generator></office:meta></office:document-meta>"}var Xl=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],KQ=(function(){for(var n=new Array(Xl.length),e=0;e<Xl.length;++e){var t=Xl[e],r="(?:"+t[0].slice(0,t[0].indexOf(":"))+":)"+t[0].slice(t[0].indexOf(":")+1);n[e]=new RegExp("<"+r+"[^>]*>([\\s\\S]*?)</"+r+">")}return n})();function IO(n){var e={};n=Gr(n);for(var t=0;t<Xl.length;++t){var r=Xl[t],i=n.match(KQ[t]);i!=null&&i.length>0&&(e[r[1]]=fr(i[1])),r[2]==="date"&&e[r[1]]&&(e[r[1]]=fi(e[r[1]]))}return e}function g5(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=Or(e),r[r.length]=t?Bt(n,e,t):pa(n,e))}function DO(n,e){var t=e||{},r=[os,Bt("cp:coreProperties",null,{"xmlns:cp":Ls.CORE_PROPS,"xmlns:dc":Ls.dc,"xmlns:dcterms":Ls.dcterms,"xmlns:dcmitype":Ls.dcmitype,"xmlns:xsi":Ls.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&g5("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:US(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&g5("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:US(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=Xl.length;++s){var a=Xl[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&g5(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var m0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],RO=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function PO(n,e,t,r){var i=[];if(typeof n=="string")i=xI(n,r);else for(var s=0;s<n.length;++s)i=i.concat(n[s].map(function(d){return{v:d}}));var a=typeof e=="string"?xI(e,r).map(function(d){return d.v}):e,o=0,c=0;if(a.length>0)for(var u=0;u!==i.length;u+=2){switch(c=+i[u+1].v,i[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":t.Worksheets=c,t.SheetNames=a.slice(o,o+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":t.NamedRanges=c,t.DefinedNames=a.slice(o,o+c);break;case"Charts":case"Diagramme":t.Chartsheets=c,t.ChartNames=a.slice(o,o+c);break}o+=c}}function YQ(n,e,t){var r={};return e||(e={}),n=Gr(n),m0.forEach(function(i){var s=(n.match(Sx(i[0]))||[])[1];switch(i[2]){case"string":s&&(e[i[1]]=fr(s));break;case"bool":e[i[1]]=s==="true";break;case"raw":var a=n.match(new RegExp("<"+i[0]+"[^>]*>([\\s\\S]*?)</"+i[0]+">"));a&&a.length>0&&(r[i[1]]=a[1]);break}}),r.HeadingPairs&&r.TitlesOfParts&&PO(r.HeadingPairs,r.TitlesOfParts,e,t),e}function jO(n){var e=[],t=Bt;return n||(n={}),n.Application="SheetJS",e[e.length]=os,e[e.length]=Bt("Properties",null,{xmlns:Ls.EXT_PROPS,"xmlns:vt":Ls.vt}),m0.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=Or(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+Or(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var XQ=/<[^>]+>[^<]*/g;function QQ(n,e){var t={},r="",i=n.match(XQ);if(i)for(var s=0;s!=i.length;++s){var a=i[s],o=An(a);switch(o[0]){case"<?xml":break;case"<Properties":break;case"<property":r=fr(o.name);break;case"</property>":r=null;break;default:if(a.indexOf("<vt:")===0){var c=a.split(">"),u=c[0].slice(4),d=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":t[r]=fr(d);break;case"bool":t[r]=ci(d);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":t[r]=parseInt(d,10);break;case"r4":case"r8":case"decimal":t[r]=parseFloat(d);break;case"filetime":case"date":t[r]=fi(d);break;case"cy":case"error":t[r]=fr(d);break;default:if(u.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",a,u,c)}}else if(a.slice(0,2)!=="</"){if(e.WTF)throw new Error(a)}}}return t}function LO(n){var e=[os,Bt("Properties",null,{xmlns:Ls.CUST_PROPS,"xmlns:vt":Ls.vt})];if(!n)return e.join("");var t=1;return Gi(n).forEach(function(i){++t,e[e.length]=Bt("property",aQ(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:Or(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var $S={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},x5;function JQ(n,e,t){x5||(x5=a_($S)),e=x5[e]||e,n[e]=t}function ZQ(n,e){var t=[];return Gi($S).map(function(r){for(var i=0;i<Xl.length;++i)if(Xl[i][1]==r)return Xl[i];for(i=0;i<m0.length;++i)if(m0[i][1]==r)return m0[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(pa($S[r[1]]||r[1],i))}}),Bt("DocumentProperties",t.join(""),{xmlns:fl.o})}function eJ(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&Gi(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<Xl.length;++a)if(s==Xl[a][1])return;for(a=0;a<m0.length;++a)if(s==m0[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(Bt(dI(s),o,{"dt:dt":c}))}}),e&&Gi(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(Bt(dI(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+fl.o+'">'+i.join("")+"</"+r+">"}function TE(n){var e=n.read_shift(4),t=n.read_shift(4);return new Date((t/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function tJ(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=ut(8);return a.write_shift(4,r),a.write_shift(4,i),a}function OO(n,e,t){var r=n.l,i=n.read_shift(0,"lpstr-cp");if(t)for(;n.l-r&3;)++n.l;return i}function MO(n,e,t){var r=n.read_shift(0,"lpwstr");return r}function FO(n,e,t){return e===31?MO(n):OO(n,e,t)}function KS(n,e,t){return FO(n,e,t===!1?0:4)}function nJ(n,e){if(!e)throw new Error("VtUnalignedString must have positive length");return FO(n,e,0)}function rJ(n){for(var e=n.read_shift(4),t=[],r=0;r!=e;++r){var i=n.l;t[r]=n.read_shift(0,"lpwstr").replace(fo,""),n.l-i&2&&(n.l+=2)}return t}function iJ(n){for(var e=n.read_shift(4),t=[],r=0;r!=e;++r)t[r]=n.read_shift(0,"lpstr-cp").replace(fo,"");return t}function sJ(n){var e=n.l,t=hb(n,AO);n[n.l]==0&&n[n.l+1]==0&&n.l-e&2&&(n.l+=2);var r=hb(n,Mo);return[t,r]}function aJ(n){for(var e=n.read_shift(4),t=[],r=0;r<e/2;++r)t.push(sJ(n));return t}function CI(n,e){for(var t=n.read_shift(4),r={},i=0;i!=t;++i){var s=n.read_shift(4),a=n.read_shift(4);r[s]=n.read_shift(a,e===1200?"utf16le":"utf8").replace(fo,"").replace(m1,"!"),e===1200&&a%2&&(n.l+=2)}return n.l&3&&(n.l=n.l>>3<<2),r}function BO(n){var e=n.read_shift(4),t=n.slice(n.l,n.l+e);return n.l+=e,(e&3)>0&&(n.l+=4-(e&3)&3),t}function oJ(n){var e={};return e.Size=n.read_shift(4),n.l+=e.Size+3-(e.Size-1)%4,e}function hb(n,e,t){var r=n.read_shift(2),i,s=t||{};if(n.l+=2,e!==EI&&r!==e&&FQ.indexOf(e)===-1&&!((e&65534)==4126&&(r&65534)==4126))throw new Error("Expected type "+e+" saw "+r);switch(e===EI?r:e){case 2:return i=n.read_shift(2,"i"),s.raw||(n.l+=2),i;case 3:return i=n.read_shift(4,"i"),i;case 11:return n.read_shift(4)!==0;case 19:return i=n.read_shift(4),i;case 30:return OO(n,r,4).replace(fo,"");case 31:return MO(n);case 64:return TE(n);case 65:return BO(n);case 71:return oJ(n);case 80:return KS(n,r,!s.raw).replace(fo,"");case 81:return nJ(n,r).replace(fo,"");case 4108:return aJ(n);case 4126:case 4127:return r==4127?rJ(n):iJ(n);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+r)}}function kI(n,e){var t=ut(4),r=ut(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=ut(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=tJ(e);break;case 31:case 80:for(r=ut(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return Qs([t,r])}function II(n,e){var t=n.l,r=n.read_shift(4),i=n.read_shift(4),s=[],a=0,o=0,c=-1,u={};for(a=0;a!=i;++a){var d=n.read_shift(4),p=n.read_shift(4);s[a]=[d,p+t]}s.sort(function(k,E){return k[1]-E[1]});var x={};for(a=0;a!=i;++a){if(n.l!==s[a][1]){var v=!0;if(a>0&&e)switch(e[s[a-1][0]].t){case 2:n.l+2===s[a][1]&&(n.l+=2,v=!1);break;case 80:n.l<=s[a][1]&&(n.l=s[a][1],v=!1);break;case 4108:n.l<=s[a][1]&&(n.l=s[a][1],v=!1);break}if((!e||a==0)&&n.l<=s[a][1]&&(v=!1,n.l=s[a][1]),v)throw new Error("Read Error: Expected address "+s[a][1]+" at "+n.l+" :"+a)}if(e){var _=e[s[a][0]];if(x[_.n]=hb(n,_.t,{raw:!0}),_.p==="version"&&(x[_.n]=String(x[_.n]>>16)+"."+("0000"+String(x[_.n]&65535)).slice(-4)),_.n=="CodePage")switch(x[_.n]){case 0:x[_.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Cc(o=x[_.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+x[_.n])}}else if(s[a][0]===1){if(o=x.CodePage=hb(n,wE),Cc(o),c!==-1){var b=n.l;n.l=s[c][1],u=CI(n,o),n.l=b}}else if(s[a][0]===0){if(o===0){c=a,n.l=s[a+1][1];continue}u=CI(n,o)}else{var S=u[s[a][0]],T;switch(n[n.l]){case 65:n.l+=4,T=BO(n);break;case 30:n.l+=4,T=KS(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 31:n.l+=4,T=KS(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 3:n.l+=4,T=n.read_shift(4,"i");break;case 19:n.l+=4,T=n.read_shift(4);break;case 5:n.l+=4,T=n.read_shift(8,"f");break;case 11:n.l+=4,T=Xi(n,4);break;case 64:n.l+=4,T=fi(TE(n));break;default:throw new Error("unparsed value: "+n[n.l])}x[S]=T}}return n.l=t+r,x}var VO=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function lJ(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function DI(n,e,t){var r=ut(8),i=[],s=[],a=8,o=0,c=ut(8),u=ut(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),a+=8+c.length,!e){u=ut(8),u.write_shift(4,0),i.unshift(u);var d=[ut(4)];for(d[0].write_shift(4,n.length),o=0;o<n.length;++o){var p=n[o][0];for(c=ut(8+2*(p.length+1)+(p.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,p.length+1),c.write_shift(0,p,"dbcs");c.l!=c.length;)c.write_shift(1,0);d.push(c)}c=Qs(d),s.unshift(c),a+=8+c.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(VO.indexOf(n[o][0])>-1||RO.indexOf(n[o][0])>-1)&&n[o][1]!=null){var x=n[o][1],v=0;if(e){v=+e[n[o][0]];var _=t[v];if(_.p=="version"&&typeof x=="string"){var b=x.split(".");x=(+b[0]<<16)+(+b[1]||0)}c=kI(_.t,x)}else{var S=lJ(x);S==-1&&(S=31,x=String(x)),c=kI(S,x)}s.push(c),u=ut(8),u.write_shift(4,e?v:2+o),i.push(u),a+=8+c.length}var T=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,T),T+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),Qs([r].concat(i).concat(s))}function RI(n,e,t){var r=n.content;if(!r)return{};ma(r,0);var i,s,a,o,c=0;r.chk("feff","Byte Order: "),r.read_shift(2);var u=r.read_shift(4),d=r.read_shift(16);if(d!==pn.utils.consts.HEADER_CLSID&&d!==t)throw new Error("Bad PropertySet CLSID "+d);if(i=r.read_shift(4),i!==1&&i!==2)throw new Error("Unrecognized #Sets: "+i);if(s=r.read_shift(16),o=r.read_shift(4),i===1&&o!==r.l)throw new Error("Length mismatch: "+o+" !== "+r.l);i===2&&(a=r.read_shift(16),c=r.read_shift(4));var p=II(r,e),x={SystemIdentifier:u};for(var v in p)x[v]=p[v];if(x.FMTID=s,i===1)return x;if(c-r.l==2&&(r.l+=2),r.l!==c)throw new Error("Length mismatch 2: "+r.l+" !== "+c);var _;try{_=II(r,null)}catch{}for(v in _)x[v]=_[v];return x.FMTID=[s,a],x}function PI(n,e,t,r,i,s){var a=ut(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,pn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=DI(n,t,r);if(o.push(c),i){var u=DI(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(u)}return Qs(o)}function Nf(n,e){return n.read_shift(e),null}function cJ(n,e){e||(e=ut(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function uJ(n,e,t){for(var r=[],i=n.l+e;n.l<i;)r.push(t(n,i-n.l));if(i!==n.l)throw new Error("Slurp error");return r}function Xi(n,e){return n.read_shift(e)===1}function lo(n,e){return e||(e=ut(2)),e.write_shift(2,+!!n),e}function bs(n){return n.read_shift(2,"u")}function $l(n,e){return e||(e=ut(2)),e.write_shift(2,n),e}function zO(n,e){return uJ(n,e,bs)}function hJ(n){var e=n.read_shift(1),t=n.read_shift(1);return t===1?e:e===1}function UO(n,e,t){return t||(t=ut(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function hv(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function fJ(n){var e=n.read_shift(2),t=n.read_shift(1),r=t&4,i=t&8,s=1+(t&1),a=0,o,c={};i&&(a=n.read_shift(2)),r&&(o=n.read_shift(4));var u=s==2?"dbcs-cont":"sbcs-cont",d=e===0?"":n.read_shift(e,u);return i&&(n.l+=4*a),r&&(n.l+=o),c.t=d,i||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function dJ(n){var e=n.t||"",t=ut(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=ut(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return Qs(i)}function B0(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function fv(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):B0(n,r,t)}function em(n,e,t){if(t.biff>5)return fv(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function HO(n,e,t){return t||(t=ut(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function mJ(n){var e=n.read_shift(1);n.l++;var t=n.read_shift(2);return n.l+=2,[e,t]}function pJ(n){var e=n.read_shift(4),t=n.l,r=!1;e>24&&(n.l+=e-24,n.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(r=!0),n.l=t);var i=n.read_shift((r?e-24:e)>>1,"utf16le").replace(fo,"");return r&&(n.l+=24),i}function gJ(n){for(var e=n.read_shift(2),t="";e-- >0;)t+="../";var r=n.read_shift(0,"lpstr-ansi");if(n.l+=2,n.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var i=n.read_shift(4);if(i===0)return t+r.replace(/\\/g,"/");var s=n.read_shift(4);if(n.read_shift(2)!=3)throw new Error("Bad FileMoniker");var a=n.read_shift(s>>1,"utf16le").replace(fo,"");return t+a}function xJ(n,e){var t=n.read_shift(16);switch(t){case"e0c9ea79f9bace118c8200aa004ba90b":return pJ(n);case"0303000000000000c000000000000046":return gJ(n);default:throw new Error("Unsupported Moniker "+t)}}function A2(n){var e=n.read_shift(4),t=e>0?n.read_shift(e,"utf16le").replace(fo,""):"";return t}function jI(n,e){e||(e=ut(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function vJ(n,e){var t=n.l+e,r=n.read_shift(4);if(r!==2)throw new Error("Unrecognized streamVersion: "+r);var i=n.read_shift(2);n.l+=2;var s,a,o,c,u="",d,p;i&16&&(s=A2(n,t-n.l)),i&128&&(a=A2(n,t-n.l)),(i&257)===257&&(o=A2(n,t-n.l)),(i&257)===1&&(c=xJ(n,t-n.l)),i&8&&(u=A2(n,t-n.l)),i&32&&(d=n.read_shift(16)),i&64&&(p=TE(n)),n.l=t;var x=a||o||c||"";x&&u&&(x+="#"+u),x||(x="#"+u),i&2&&x.charAt(0)=="/"&&x.charAt(1)!="/"&&(x="file://"+x);var v={Target:x};return d&&(v.guid=d),p&&(v.time=p),s&&(v.Tooltip=s),v}function yJ(n){var e=ut(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),jI(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&jI(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var c=0;r.slice(c*3,c*3+3)=="../"||r.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,r.length-3*c+1),t=0;t<r.length-3*c;++t)e.write_shift(1,r.charCodeAt(t+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function qO(n){var e=n.read_shift(1),t=n.read_shift(1),r=n.read_shift(1),i=n.read_shift(1);return[e,t,r,i]}function WO(n,e){var t=qO(n);return t[3]=0,t}function Bu(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2);return{r:e,c:t,ixfe:r}}function V0(n,e,t,r){return r||(r=ut(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function bJ(n){var e=n.read_shift(2),t=n.read_shift(2);return n.l+=8,{type:e,flags:t}}function _J(n,e,t){return e===0?"":em(n,e,t)}function wJ(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function GO(n){var e=n.read_shift(2),t=_E(n);return[e,t]}function SJ(n,e,t){n.l+=4,e-=4;var r=n.l+e,i=hv(n,e,t),s=n.read_shift(2);if(r-=n.l,s!==r)throw new Error("Malformed AddinUdf: padding = "+r+" != "+s);return n.l+=s,i}function c_(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function $O(n,e){return e||(e=ut(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function KO(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(1),i=n.read_shift(1);return{s:{c:r,r:e},e:{c:i,r:t}}}var TJ=KO;function YO(n){n.l+=4;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2);return n.l+=12,[t,e,r]}function EJ(n){var e={};return n.l+=4,n.l+=16,e.fSharedNote=n.read_shift(2),n.l+=4,e}function AJ(n){var e={};return n.l+=4,n.cf=n.read_shift(2),e}function Ca(n){n.l+=2,n.l+=n.read_shift(2)}var NJ={0:Ca,4:Ca,5:Ca,6:Ca,7:AJ,8:Ca,9:Ca,10:Ca,11:Ca,12:Ca,13:EJ,14:Ca,15:Ca,16:Ca,17:Ca,18:Ca,19:Ca,20:Ca,21:YO};function CJ(n,e){for(var t=n.l+e,r=[];n.l<t;){var i=n.read_shift(2);n.l-=2;try{r.push(NJ[i](n,t-n.l))}catch{return n.l=t,r}}return n.l!=t&&(n.l=t),r}function N2(n,e){var t={BIFFVer:0,dt:0};switch(t.BIFFVer=n.read_shift(2),e-=2,e>=2&&(t.dt=n.read_shift(2),n.l-=2),t.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+t.BIFFVer)}return n.read_shift(e),t}function EE(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=ut(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function kJ(n,e){return e===0||n.read_shift(2),1200}function IJ(n,e,t){if(t.enc)return n.l+=e,"";var r=n.l,i=em(n,0,t);return n.read_shift(e+r-n.l),i}function DJ(n,e){var t=!e||e.biff==8,r=ut(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function RJ(n,e,t){var r=t&&t.biff==8||e==2?n.read_shift(2):(n.l+=e,0);return{fDialog:r&16,fBelow:r&64,fRight:r&128}}function PJ(n,e,t){var r=n.read_shift(4),i=n.read_shift(1)&3,s=n.read_shift(1);switch(s){case 0:s="Worksheet";break;case 1:s="Macrosheet";break;case 2:s="Chartsheet";break;case 6:s="VBAModule";break}var a=hv(n,0,t);return a.length===0&&(a="Sheet1"),{pos:r,hs:i,dt:s,name:a}}function jJ(n,e){var t=!e||e.biff>=8?2:1,r=ut(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function LJ(n,e){for(var t=n.l+e,r=n.read_shift(4),i=n.read_shift(4),s=[],a=0;a!=i&&n.l<t;++a)s.push(fJ(n));return s.Count=r,s.Unique=i,s}function OJ(n,e){var t=ut(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=dJ(n[i]);var s=Qs([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function MJ(n,e){var t={};return t.dsst=n.read_shift(2),n.l+=e-2,t}function FJ(n){var e={};e.r=n.read_shift(2),e.c=n.read_shift(2),e.cnt=n.read_shift(2)-e.c;var t=n.read_shift(2);n.l+=4;var r=n.read_shift(1);return n.l+=3,r&7&&(e.level=r&7),r&32&&(e.hidden=!0),r&64&&(e.hpt=t/20),e}function BJ(n){var e=bJ(n);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var t=n.read_shift(4);return t!==0}function VJ(n){return n.read_shift(2),n.read_shift(4)}function LI(n,e,t){var r=0;t&&t.biff==2||(r=n.read_shift(2));var i=n.read_shift(2);t&&t.biff==2&&(r=1-(i>>15),i&=32767);var s={Unsynced:r&1,DyZero:(r&2)>>1,ExAsc:(r&4)>>2,ExDsc:(r&8)>>3};return[s,i]}function zJ(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2),s=n.read_shift(2),a=n.read_shift(2),o=n.read_shift(2),c=n.read_shift(2),u=n.read_shift(2);return{Pos:[e,t],Dim:[r,i],Flags:s,CurTab:a,FirstTab:o,Selected:c,TabRatio:u}}function UJ(){var n=ut(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function HJ(n,e,t){if(t&&t.biff>=2&&t.biff<5)return{};var r=n.read_shift(2);return{RTL:r&64}}function qJ(n){var e=ut(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function WJ(){}function GJ(n,e,t){var r={dyHeight:n.read_shift(2),fl:n.read_shift(2)};switch(t&&t.biff||8){case 2:break;case 3:case 4:n.l+=2;break;default:n.l+=10;break}return r.name=hv(n,0,t),r}function $J(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=ut(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function KJ(n){var e=Bu(n);return e.isst=n.read_shift(4),e}function YJ(n,e,t,r){var i=ut(10);return V0(n,e,r,i),i.write_shift(4,t),i}function XJ(n,e,t){t.biffguess&&t.biff==2&&(t.biff=5);var r=n.l+e,i=Bu(n);t.biff==2&&n.l++;var s=fv(n,r-n.l,t);return i.val=s,i}function QJ(n,e,t,r,i){var s=!i||i.biff==8,a=ut(8+ +s+(1+s)*t.length);return V0(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function JJ(n,e,t){var r=n.read_shift(2),i=em(n,0,t);return[r,i]}function ZJ(n,e,t,r){var i=t&&t.biff==5;r||(r=ut(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}var eZ=em;function OI(n,e,t){var r=n.l+e,i=t.biff==8||!t.biff?4:2,s=n.read_shift(i),a=n.read_shift(i),o=n.read_shift(2),c=n.read_shift(2);return n.l=r,{s:{r:s,c:o},e:{r:a,c}}}function tZ(n,e){var t=e.biff==8||!e.biff?4:2,r=ut(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function nZ(n){var e=n.read_shift(2),t=n.read_shift(2),r=GO(n);return{r:e,c:t,ixfe:r[0],rknum:r[1]}}function rZ(n,e){for(var t=n.l+e-2,r=n.read_shift(2),i=n.read_shift(2),s=[];n.l<t;)s.push(GO(n));if(n.l!==t)throw new Error("MulRK read error");var a=n.read_shift(2);if(s.length!=a-i+1)throw new Error("MulRK length mismatch");return{r,c:i,C:a,rkrec:s}}function iZ(n,e){for(var t=n.l+e-2,r=n.read_shift(2),i=n.read_shift(2),s=[];n.l<t;)s.push(n.read_shift(2));if(n.l!==t)throw new Error("MulBlank read error");var a=n.read_shift(2);if(s.length!=a-i+1)throw new Error("MulBlank length mismatch");return{r,c:i,C:a,ixfe:s}}function sZ(n,e,t,r){var i={},s=n.read_shift(4),a=n.read_shift(4),o=n.read_shift(4),c=n.read_shift(2);return i.patternType=BQ[o>>26],r.cellStyles&&(i.alc=s&7,i.fWrap=s>>3&1,i.alcV=s>>4&7,i.fJustLast=s>>7&1,i.trot=s>>8&255,i.cIndent=s>>16&15,i.fShrinkToFit=s>>20&1,i.iReadOrder=s>>22&2,i.fAtrNum=s>>26&1,i.fAtrFnt=s>>27&1,i.fAtrAlc=s>>28&1,i.fAtrBdr=s>>29&1,i.fAtrPat=s>>30&1,i.fAtrProt=s>>31&1,i.dgLeft=a&15,i.dgRight=a>>4&15,i.dgTop=a>>8&15,i.dgBottom=a>>12&15,i.icvLeft=a>>16&127,i.icvRight=a>>23&127,i.grbitDiag=a>>30&3,i.icvTop=o&127,i.icvBottom=o>>7&127,i.icvDiag=o>>14&127,i.dgDiag=o>>21&15,i.icvFore=c&127,i.icvBack=c>>7&127,i.fsxButton=c>>14&1),i}function aZ(n,e,t){var r={};return r.ifnt=n.read_shift(2),r.numFmtId=n.read_shift(2),r.flags=n.read_shift(2),r.fStyle=r.flags>>2&1,e-=6,r.data=sZ(n,e,r.fStyle,t),r}function MI(n,e,t,r){var i=t&&t.biff==5;r||(r=ut(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function oZ(n){n.l+=4;var e=[n.read_shift(2),n.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function lZ(n){var e=ut(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function FI(n,e,t){var r=Bu(n);(t.biff==2||e==9)&&++n.l;var i=hJ(n);return r.val=i,r.t=i===!0||i===!1?"b":"e",r}function cZ(n,e,t,r,i,s){var a=ut(8);return V0(n,e,r,a),UO(t,s,a),a}function uZ(n,e,t){t.biffguess&&t.biff==2&&(t.biff=5);var r=Bu(n),i=za(n);return r.val=i,r}function hZ(n,e,t,r){var i=ut(14);return V0(n,e,r,i),F0(t,i),i}var BI=_J;function fZ(n,e,t){var r=n.l+e,i=n.read_shift(2),s=n.read_shift(2);if(t.sbcch=s,s==1025||s==14849)return[s,i];if(s<1||s>255)throw new Error("Unexpected SupBook type: "+s);for(var a=B0(n,s),o=[];r>n.l;)o.push(fv(n));return[s,i,a,o]}function VI(n,e,t){var r=n.read_shift(2),i,s={fBuiltIn:r&1,fWantAdvise:r>>>1&1,fWantPict:r>>>2&1,fOle:r>>>3&1,fOleLink:r>>>4&1,cf:r>>>5&1023,fIcon:r>>>15&1};return t.sbcch===14849&&(i=SJ(n,e-2,t)),s.body=i||n.read_shift(e-2),typeof i=="string"&&(s.Name=i),s}var dZ=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function zI(n,e,t){var r=n.l+e,i=n.read_shift(2),s=n.read_shift(1),a=n.read_shift(1),o=n.read_shift(t&&t.biff==2?1:2),c=0;(!t||t.biff>=5)&&(t.biff!=5&&(n.l+=2),c=n.read_shift(2),t.biff==5&&(n.l+=2),n.l+=4);var u=B0(n,a,t);i&32&&(u=dZ[u.charCodeAt(0)]);var d=r-n.l;t&&t.biff==2&&--d;var p=r==n.l||o===0||!(d>0)?[]:Cre(n,d,t,o);return{chKey:s,Name:u,itab:c,rgce:p}}function XO(n,e,t){if(t.biff<8)return mZ(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(wJ(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function mZ(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=hv(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function pZ(n,e,t){if(t.biff<8){n.l+=e;return}var r=n.read_shift(2),i=n.read_shift(2),s=B0(n,r,t),a=B0(n,i,t);return[s,a]}function gZ(n,e,t){var r=KO(n);n.l++;var i=n.read_shift(1);return e-=8,[kre(n,e,t),i,r]}function UI(n,e,t){var r=TJ(n);switch(t.biff){case 2:n.l++,e-=7;break;case 3:case 4:n.l+=2,e-=8;break;default:n.l+=6,e-=12}return[r,Are(n,e,t)]}function xZ(n){var e=n.read_shift(4)!==0,t=n.read_shift(4)!==0,r=n.read_shift(4);return[e,t,r]}function vZ(n,e,t){if(!(t.biff<8)){var r=n.read_shift(2),i=n.read_shift(2),s=n.read_shift(2),a=n.read_shift(2),o=em(n,0,t);return t.biff<8&&n.read_shift(1),[{r,c:i},o,a,s]}}function yZ(n,e,t){return vZ(n,e,t)}function bZ(n,e){for(var t=[],r=n.read_shift(2);r--;)t.push(c_(n));return t}function _Z(n){var e=ut(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)$O(n[t],e);return e}function wZ(n,e,t){if(t&&t.biff<8)return TZ(n,e,t);var r=YO(n),i=CJ(n,e-22,r[1]);return{cmo:r,ft:i}}var SZ={8:function(n,e){var t=n.l+e;n.l+=10;var r=n.read_shift(2);n.l+=4,n.l+=2,n.l+=2,n.l+=2,n.l+=4;var i=n.read_shift(1);return n.l+=i,n.l=t,{fmt:r}}};function TZ(n,e,t){n.l+=4;var r=n.read_shift(2),i=n.read_shift(2),s=n.read_shift(2);n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=6,e-=36;var a=[];return a.push((SZ[r]||Wa)(n,e,t)),{cmo:[i,r,s],ft:a}}function EZ(n,e,t){var r=n.l,i="";try{n.l+=4;var s=(t.lastobj||{cmo:[0,0]}).cmo[1],a;[0,5,7,11,12,14].indexOf(s)==-1?n.l+=6:a=mJ(n,6,t);var o=n.read_shift(2);n.read_shift(2),bs(n,2);var c=n.read_shift(2);n.l+=c;for(var u=1;u<n.lens.length-1;++u){if(n.l-r!=n.lens[u])throw new Error("TxO: bad continue record");var d=n[n.l],p=B0(n,n.lens[u+1]-n.lens[u]-1);if(i+=p,i.length>=(d?o:2*o))break}if(i.length!==o&&i.length!==o*2)throw new Error("cchText: "+o+" != "+i.length);return n.l=r+e,{t:i}}catch{return n.l=r+e,{t:i}}}function AZ(n,e){var t=c_(n);n.l+=16;var r=vJ(n,e-24);return[t,r]}function NZ(n){var e=ut(24),t=Pi(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Qs([e,yJ(n[1])])}function CZ(n,e){n.read_shift(2);var t=c_(n),r=n.read_shift((e-10)/2,"dbcs-cont");return r=r.replace(fo,""),[t,r]}function kZ(n){var e=n[1].Tooltip,t=ut(10+2*(e.length+1));t.write_shift(2,2048);var r=Pi(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function IZ(n){var e=[0,0],t;return t=n.read_shift(2),e[0]=AI[t]||t,t=n.read_shift(2),e[1]=AI[t]||t,e}function DZ(n){return n||(n=ut(4)),n.write_shift(2,1),n.write_shift(2,1),n}function RZ(n){for(var e=n.read_shift(2),t=[];e-- >0;)t.push(WO(n));return t}function PZ(n){for(var e=n.read_shift(2),t=[];e-- >0;)t.push(WO(n));return t}function jZ(n){n.l+=2;var e={cxfs:0,crc:0};return e.cxfs=n.read_shift(2),e.crc=n.read_shift(4),e}function QO(n,e,t){if(!t.cellStyles)return Wa(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),c=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:c};return(t.biff>=5||!t.biff)&&(u.level=c>>8&7),u}function LZ(n,e){var t=ut(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function OZ(n,e){var t={};return e<32||(n.l+=16,t.header=za(n),t.footer=za(n),n.l+=2),t}function MZ(n,e,t){var r={area:!1};if(t.biff!=5)return n.l+=e,r;var i=n.read_shift(1);return n.l+=3,i&16&&(r.area=!0),r}function FZ(n){for(var e=ut(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}var BZ=Bu,VZ=zO,zZ=fv;function UZ(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i={fmt:e,env:t,len:r,data:n.slice(n.l,n.l+r)};return n.l+=r,i}function HZ(n,e,t){t.biffguess&&t.biff==5&&(t.biff=2);var r=Bu(n);++n.l;var i=em(n,e-7,t);return r.t="str",r.val=i,r}function qZ(n){var e=Bu(n);++n.l;var t=za(n);return e.t="n",e.val=t,e}function WZ(n,e,t){var r=ut(15);return gv(r,n,e),r.write_shift(8,t,"f"),r}function GZ(n){var e=Bu(n);++n.l;var t=n.read_shift(2);return e.t="n",e.val=t,e}function $Z(n,e,t){var r=ut(9);return gv(r,n,e),r.write_shift(2,t),r}function KZ(n){var e=n.read_shift(1);return e===0?(n.l++,""):n.read_shift(e,"sbcs-cont")}function YZ(n,e){n.l+=6,n.l+=2,n.l+=1,n.l+=3,n.l+=1,n.l+=e-13}function XZ(n,e,t){var r=n.l+e,i=Bu(n),s=n.read_shift(2),a=B0(n,s,t);return n.l=r,i.t="str",i.val=a,i}var QZ=[2,3,48,49,131,139,140,245],YS=(function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=a_({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,c){var u=[],d=sd(1);switch(c.type){case"base64":d=ml(wl(o));break;case"binary":d=ml(o);break;case"buffer":case"array":d=o;break}ma(d,0);var p=d.read_shift(1),x=!!(p&136),v=!1,_=!1;switch(p){case 2:break;case 3:break;case 48:v=!0,x=!0;break;case 49:v=!0,x=!0;break;case 131:break;case 139:break;case 140:_=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+p.toString(16))}var b=0,S=521;p==2&&(b=d.read_shift(2)),d.l+=3,p!=2&&(b=d.read_shift(4)),b>1048576&&(b=1e6),p!=2&&(S=d.read_shift(2));var T=d.read_shift(2),k=c.codepage||1252;p!=2&&(d.l+=16,d.read_shift(1),d[d.l]!==0&&(k=n[d[d.l]]),d.l+=1,d.l+=2),_&&(d.l+=36);for(var E=[],j={},F=Math.min(d.length,p==2?521:S-10-(v?264:0)),z=_?32:11;d.l<F&&d[d.l]!=13;)switch(j={},j.name=bx.utils.decode(k,d.slice(d.l,d.l+z)).replace(/[\u0000\r\n].*$/g,""),d.l+=z,j.type=String.fromCharCode(d.read_shift(1)),p!=2&&!_&&(j.offset=d.read_shift(4)),j.len=d.read_shift(1),p==2&&(j.offset=d.read_shift(2)),j.dec=d.read_shift(1),j.name.length&&E.push(j),p!=2&&(d.l+=_?13:14),j.type){case"B":(!v||j.len!=8)&&c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+j.name+":"+j.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+j.type)}if(d[d.l]!==13&&(d.l=S-1),d.read_shift(1)!==13)throw new Error("DBF Terminator not found "+d.l+" "+d[d.l]);d.l=S;var A=0,I=0;for(u[0]=[],I=0;I!=E.length;++I)u[0][I]=E[I].name;for(;b-- >0;){if(d[d.l]===42){d.l+=T;continue}for(++d.l,u[++A]=[],I=0,I=0;I!=E.length;++I){var O=d.slice(d.l,d.l+E[I].len);d.l+=E[I].len,ma(O,0);var B=bx.utils.decode(k,O);switch(E[I].type){case"C":B.trim().length&&(u[A][I]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[A][I]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[A][I]=B;break;case"F":u[A][I]=parseFloat(B.trim());break;case"+":case"I":u[A][I]=_?O.read_shift(-4,"i")^2147483648:O.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[A][I]=!0;break;case"N":case"F":u[A][I]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!x)throw new Error("DBF Unexpected MEMO for type "+p.toString(16));u[A][I]="##MEMO##"+(_?parseInt(B.trim(),10):O.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[A][I]=+B||0);break;case"@":u[A][I]=new Date(O.read_shift(-8,"f")-621356832e5);break;case"T":u[A][I]=new Date((O.read_shift(4)-2440588)*864e5+O.read_shift(4));break;case"Y":u[A][I]=O.read_shift(4,"i")/1e4+O.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[A][I]=-O.read_shift(-8,"f");break;case"B":if(v&&E[I].len==8){u[A][I]=O.read_shift(8,"f");break}case"G":case"P":O.l+=E[I].len;break;case"0":if(E[I].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+E[I].type)}}}if(p!=2&&d.l<d.length&&d[d.l++]!=26)throw new Error("DBF EOF Marker missing "+(d.l-1)+" of "+d.length+" "+d[d.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=E,u}function r(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var d=lg(t(o,u),u);return d["!cols"]=u.DBF.map(function(p){return{wch:p.len,DBF:p}}),delete u.DBF,d}function i(o,c){try{return wd(r(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var u=c||{};if(+u.codepage>=0&&Cc(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var d=Uo(),p=mb(o,{header:1,raw:!0,cellDates:!0}),x=p[0],v=p.slice(1),_=o["!cols"]||[],b=0,S=0,T=0,k=1;for(b=0;b<x.length;++b){if(((_[b]||{}).DBF||{}).name){x[b]=_[b].DBF.name,++T;continue}if(x[b]!=null){if(++T,typeof x[b]=="number"&&(x[b]=x[b].toString(10)),typeof x[b]!="string")throw new Error("DBF Invalid column name "+x[b]+" |"+typeof x[b]+"|");if(x.indexOf(x[b])!==b){for(S=0;S<1024;++S)if(x.indexOf(x[b]+"_"+S)==-1){x[b]+="_"+S;break}}}}var E=dr(o["!ref"]),j=[],F=[],z=[];for(b=0;b<=E.e.c-E.s.c;++b){var A="",I="",O=0,B=[];for(S=0;S<v.length;++S)v[S][b]!=null&&B.push(v[S][b]);if(B.length==0||x[b]==null){j[b]="?";continue}for(S=0;S<B.length;++S){switch(typeof B[S]){case"number":I="B";break;case"string":I="C";break;case"boolean":I="L";break;case"object":I=B[S]instanceof Date?"D":"C";break;default:I="C"}O=Math.max(O,String(B[S]).length),A=A&&A!=I?"C":I}O>250&&(O=250),I=((_[b]||{}).DBF||{}).type,I=="C"&&_[b].DBF.len>O&&(O=_[b].DBF.len),A=="B"&&I=="N"&&(A="N",z[b]=_[b].DBF.dec,O=_[b].DBF.len),F[b]=A=="C"||I=="N"?O:s[A]||0,k+=F[b],j[b]=A}var R=d.next(32);for(R.write_shift(4,318902576),R.write_shift(4,v.length),R.write_shift(2,296+32*T),R.write_shift(2,k),b=0;b<4;++b)R.write_shift(4,0);for(R.write_shift(4,0|(+e[VL]||3)<<8),b=0,S=0;b<x.length;++b)if(x[b]!=null){var P=d.next(32),V=(x[b].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);P.write_shift(1,V,"sbcs"),P.write_shift(1,j[b]=="?"?"C":j[b],"sbcs"),P.write_shift(4,S),P.write_shift(1,F[b]||s[j[b]]||0),P.write_shift(1,z[b]||0),P.write_shift(1,2),P.write_shift(4,0),P.write_shift(1,0),P.write_shift(4,0),P.write_shift(4,0),S+=F[b]||s[j[b]]||0}var Y=d.next(264);for(Y.write_shift(4,13),b=0;b<65;++b)Y.write_shift(4,0);for(b=0;b<v.length;++b){var ie=d.next(k);for(ie.write_shift(1,0),S=0;S<x.length;++S)if(x[S]!=null)switch(j[S]){case"L":ie.write_shift(1,v[b][S]==null?63:v[b][S]?84:70);break;case"B":ie.write_shift(8,v[b][S]||0,"f");break;case"N":var q="0";for(typeof v[b][S]=="number"&&(q=v[b][S].toFixed(z[S]||0)),T=0;T<F[S]-q.length;++T)ie.write_shift(1,32);ie.write_shift(1,q,"sbcs");break;case"D":v[b][S]?(ie.write_shift(4,("0000"+v[b][S].getFullYear()).slice(-4),"sbcs"),ie.write_shift(2,("00"+(v[b][S].getMonth()+1)).slice(-2),"sbcs"),ie.write_shift(2,("00"+v[b][S].getDate()).slice(-2),"sbcs")):ie.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(v[b][S]!=null?v[b][S]:"").slice(0,F[S]);for(ie.write_shift(1,Q,"sbcs"),T=0;T<F[S]-Q.length;++T)ie.write_shift(1,32);break}}return d.next(1).write_shift(1,26),d.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}})(),JO=(function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+Gi(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(x,v){var _=n[v];return typeof _=="number"?Zk(_):_},r=function(x,v,_){var b=v.charCodeAt(0)-32<<4|_.charCodeAt(0)-48;return b==59?x:Zk(b)};n["|"]=254;function i(x,v){switch(v.type){case"base64":return s(wl(x),v);case"binary":return s(x,v);case"buffer":return s(Vn&&Buffer.isBuffer(x)?x.toString("binary"):_d(x),v);case"array":return s(M0(x),v)}throw new Error("Unrecognized type "+v.type)}function s(x,v){var _=x.split(/[\n\r]+/),b=-1,S=-1,T=0,k=0,E=[],j=[],F=null,z={},A=[],I=[],O=[],B=0,R;for(+v.codepage>=0&&Cc(+v.codepage);T!==_.length;++T){B=0;var P=_[T].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),V=P.replace(/;;/g,"\0").split(";").map(function(G){return G.replace(/\u0000/g,";")}),Y=V[0],ie;if(P.length>0)switch(Y){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":V[1].charAt(0)=="P"&&j.push(P.slice(3).replace(/;;/g,";"));break;case"C":var q=!1,Q=!1,se=!1,J=!1,me=-1,re=-1;for(k=1;k<V.length;++k)switch(V[k].charAt(0)){case"A":break;case"X":S=parseInt(V[k].slice(1))-1,Q=!0;break;case"Y":for(b=parseInt(V[k].slice(1))-1,Q||(S=0),R=E.length;R<=b;++R)E[R]=[];break;case"K":ie=V[k].slice(1),ie.charAt(0)==='"'?ie=ie.slice(1,ie.length-1):ie==="TRUE"?ie=!0:ie==="FALSE"?ie=!1:isNaN(Dc(ie))?isNaN(qp(ie).getDate())||(ie=fi(ie)):(ie=Dc(ie),F!==null&&ag(F)&&(ie=l_(ie))),q=!0;break;case"E":J=!0;var M=yp(V[k].slice(1),{r:b,c:S});E[b][S]=[E[b][S],M];break;case"S":se=!0,E[b][S]=[E[b][S],"S5S"];break;case"G":break;case"R":me=parseInt(V[k].slice(1))-1;break;case"C":re=parseInt(V[k].slice(1))-1;break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+P)}if(q&&(E[b][S]&&E[b][S].length==2?E[b][S][0]=ie:E[b][S]=ie,F=null),se){if(J)throw new Error("SYLK shared formula cannot have own formula");var W=me>-1&&E[me][re];if(!W||!W[1])throw new Error("SYLK shared formula cannot find base");E[b][S][1]=gM(W[1],{r:b-me,c:S-re})}break;case"F":var K=0;for(k=1;k<V.length;++k)switch(V[k].charAt(0)){case"X":S=parseInt(V[k].slice(1))-1,++K;break;case"Y":for(b=parseInt(V[k].slice(1))-1,R=E.length;R<=b;++R)E[R]=[];break;case"M":B=parseInt(V[k].slice(1))/20;break;case"F":break;case"G":break;case"P":F=j[parseInt(V[k].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(O=V[k].slice(1).split(" "),R=parseInt(O[0],10);R<=parseInt(O[1],10);++R)B=parseInt(O[2],10),I[R-1]=B===0?{hidden:!0}:{wch:B},ad(I[R-1]);break;case"C":S=parseInt(V[k].slice(1))-1,I[S]||(I[S]={});break;case"R":b=parseInt(V[k].slice(1))-1,A[b]||(A[b]={}),B>0?(A[b].hpt=B,A[b].hpx=Gp(B)):B===0&&(A[b].hidden=!0);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+P)}K<1&&(F=null);break;default:if(v&&v.WTF)throw new Error("SYLK bad record "+P)}}return A.length>0&&(z["!rows"]=A),I.length>0&&(z["!cols"]=I),v&&v.sheetRows&&(E=E.slice(0,v.sheetRows)),[E,z]}function a(x,v){var _=i(x,v),b=_[0],S=_[1],T=lg(b,v);return Gi(S).forEach(function(k){T[k]=S[k]}),T}function o(x,v){return wd(a(x,v),v)}function c(x,v,_,b){var S="C;Y"+(_+1)+";X"+(b+1)+";K";switch(x.t){case"n":S+=x.v||0,x.f&&!x.F&&(S+=";E"+DE(x.f,{r:_,c:b}));break;case"b":S+=x.v?"TRUE":"FALSE";break;case"e":S+=x.w||x.v;break;case"d":S+='"'+(x.w||x.v)+'"';break;case"s":S+='"'+x.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return S}function u(x,v){v.forEach(function(_,b){var S="F;W"+(b+1)+" "+(b+1)+" ";_.hidden?S+="0":(typeof _.width=="number"&&!_.wpx&&(_.wpx=Cx(_.width)),typeof _.wpx=="number"&&!_.wch&&(_.wch=kx(_.wpx)),typeof _.wch=="number"&&(S+=Math.round(_.wch))),S.charAt(S.length-1)!=" "&&x.push(S)})}function d(x,v){v.forEach(function(_,b){var S="F;";_.hidden?S+="M0;":_.hpt?S+="M"+20*_.hpt+";":_.hpx&&(S+="M"+20*Ix(_.hpx)+";"),S.length>2&&x.push(S+"R"+(b+1))})}function p(x,v){var _=["ID;PWXL;N;E"],b=[],S=dr(x["!ref"]),T,k=Array.isArray(x),E=`\r
`;_.push("P;PGeneral"),_.push("F;P0;DG0G8;M255"),x["!cols"]&&u(_,x["!cols"]),x["!rows"]&&d(_,x["!rows"]),_.push("B;Y"+(S.e.r-S.s.r+1)+";X"+(S.e.c-S.s.c+1)+";D"+[S.s.c,S.s.r,S.e.c,S.e.r].join(" "));for(var j=S.s.r;j<=S.e.r;++j)for(var F=S.s.c;F<=S.e.c;++F){var z=Tn({r:j,c:F});T=k?(x[j]||[])[F]:x[z],!(!T||T.v==null&&(!T.f||T.F))&&b.push(c(T,x,j,F))}return _.join(E)+E+b.join(E)+E+"E"+E}return{to_workbook:o,to_sheet:a,from_sheet:p}})(),ZO=(function(){function n(s,a){switch(a.type){case"base64":return e(wl(s),a);case"binary":return e(s,a);case"buffer":return e(Vn&&Buffer.isBuffer(s)?s.toString("binary"):_d(s),a);case"array":return e(M0(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),c=-1,u=-1,d=0,p=[];d!==o.length;++d){if(o[d].trim()==="BOT"){p[++c]=[],u=0;continue}if(!(c<0)){var x=o[d].trim().split(","),v=x[0],_=x[1];++d;for(var b=o[d]||"";(b.match(/["]/g)||[]).length&1&&d<o.length-1;)b+=`
`+o[++d];switch(b=b.trim(),+v){case-1:if(b==="BOT"){p[++c]=[],u=0;continue}else if(b!=="EOD")throw new Error("Unrecognized DIF special command "+b);break;case 0:b==="TRUE"?p[c][u]=!0:b==="FALSE"?p[c][u]=!1:isNaN(Dc(_))?isNaN(qp(_).getDate())?p[c][u]=_:p[c][u]=fi(_):p[c][u]=Dc(_),++u;break;case 1:b=b.slice(1,b.length-1),b=b.replace(/""/g,'"'),b&&b.match(/^=".*"$/)&&(b=b.slice(2,-1)),p[c][u++]=b!==""?b:null;break}if(b==="EOD")break}}return a&&a.sheetRows&&(p=p.slice(0,a.sheetRows)),p}function t(s,a){return lg(n(s,a),a)}function r(s,a){return wd(t(s,a),a)}var i=(function(){var s=function(c,u,d,p,x){c.push(u),c.push(d+","+p),c.push('"'+x.replace(/"/g,'""')+'"')},a=function(c,u,d,p){c.push(u+","+d),c.push(u==1?'"'+p.replace(/"/g,'""')+'"':p)};return function(c){var u=[],d=dr(c["!ref"]),p,x=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,d.e.r-d.s.r+1,""),s(u,"TUPLES",0,d.e.c-d.s.c+1,""),s(u,"DATA",0,0,"");for(var v=d.s.r;v<=d.e.r;++v){a(u,-1,0,"BOT");for(var _=d.s.c;_<=d.e.c;++_){var b=Tn({r:v,c:_});if(p=x?(c[v]||[])[_]:c[b],!p){a(u,1,0,"");continue}switch(p.t){case"n":var S=p.w;!S&&p.v!=null&&(S=p.v),S==null?p.f&&!p.F?a(u,1,0,"="+p.f):a(u,1,0,""):a(u,0,S,"V");break;case"b":a(u,0,p.v?1:0,p.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(p.v)?p.v:'="'+p.v+'"');break;case"d":p.w||(p.w=Zl(p.z||wn[14],Bs(fi(p.v)))),a(u,0,p.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var T=`\r
`,k=u.join(T);return k}})();return{to_workbook:r,to_sheet:t,from_sheet:i}})(),eM=(function(){function n(p){return p.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(p){return p.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(p,x){for(var v=p.split(`
`),_=-1,b=-1,S=0,T=[];S!==v.length;++S){var k=v[S].trim().split(":");if(k[0]==="cell"){var E=Pi(k[1]);if(T.length<=E.r)for(_=T.length;_<=E.r;++_)T[_]||(T[_]=[]);switch(_=E.r,b=E.c,k[2]){case"t":T[_][b]=n(k[3]);break;case"v":T[_][b]=+k[3];break;case"vtf":var j=k[k.length-1];case"vtc":switch(k[3]){case"nl":T[_][b]=!!+k[4];break;default:T[_][b]=+k[4];break}k[2]=="vtf"&&(T[_][b]=[T[_][b],j])}}}return x&&x.sheetRows&&(T=T.slice(0,x.sheetRows)),T}function r(p,x){return lg(t(p,x),x)}function i(p,x){return wd(r(p,x),x)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(p){if(!p||!p["!ref"])return"";for(var x=[],v=[],_,b="",S=qo(p["!ref"]),T=Array.isArray(p),k=S.s.r;k<=S.e.r;++k)for(var E=S.s.c;E<=S.e.c;++E)if(b=Tn({r:k,c:E}),_=T?(p[k]||[])[E]:p[b],!(!_||_.v==null||_.t==="z")){switch(v=["cell",b,"t"],_.t){case"s":case"str":v.push(e(_.v));break;case"n":_.f?(v[2]="vtf",v[3]="n",v[4]=_.v,v[5]=e(_.f)):(v[2]="v",v[3]=_.v);break;case"b":v[2]="vt"+(_.f?"f":"c"),v[3]="nl",v[4]=_.v?"1":"0",v[5]=e(_.f||(_.v?"TRUE":"FALSE"));break;case"d":var j=Bs(fi(_.v));v[2]="vtc",v[3]="nd",v[4]=""+j,v[5]=_.w||Zl(_.z||wn[14],j);break;case"e":continue}x.push(v.join(":"))}return x.push("sheet:c:"+(S.e.c-S.s.c+1)+":r:"+(S.e.r-S.s.r+1)+":tvf:1"),x.push("valueformat:1:text-wiki"),x.join(`
`)}function d(p){return[s,a,o,a,u(p),c].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:d}})(),Wp=(function(){function n(d,p,x,v,_){_.raw?p[x][v]=d:d===""||(d==="TRUE"?p[x][v]=!0:d==="FALSE"?p[x][v]=!1:isNaN(Dc(d))?isNaN(qp(d).getDate())?p[x][v]=d:p[x][v]=fi(d):p[x][v]=Dc(d))}function e(d,p){var x=p||{},v=[];if(!d||d.length===0)return v;for(var _=d.split(/[\r\n]/),b=_.length-1;b>=0&&_[b].length===0;)--b;for(var S=10,T=0,k=0;k<=b;++k)T=_[k].indexOf(" "),T==-1?T=_[k].length:T++,S=Math.max(S,T);for(k=0;k<=b;++k){v[k]=[];var E=0;for(n(_[k].slice(0,S).trim(),v,k,E,x),E=1;E<=(_[k].length-S)/10+1;++E)n(_[k].slice(S+(E-1)*10,S+E*10).trim(),v,k,E,x)}return x.sheetRows&&(v=v.slice(0,x.sheetRows)),v}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(d){for(var p={},x=!1,v=0,_=0;v<d.length;++v)(_=d.charCodeAt(v))==34?x=!x:!x&&_ in t&&(p[_]=(p[_]||0)+1);_=[];for(v in p)Object.prototype.hasOwnProperty.call(p,v)&&_.push([p[v],v]);if(!_.length){p=r;for(v in p)Object.prototype.hasOwnProperty.call(p,v)&&_.push([p[v],v])}return _.sort(function(b,S){return b[0]-S[0]||r[b[1]]-r[S[1]]}),t[_.pop()[1]]||44}function s(d,p){var x=p||{},v="",_=x.dense?[]:{},b={s:{c:0,r:0},e:{c:0,r:0}};d.slice(0,4)=="sep="?d.charCodeAt(5)==13&&d.charCodeAt(6)==10?(v=d.charAt(4),d=d.slice(7)):d.charCodeAt(5)==13||d.charCodeAt(5)==10?(v=d.charAt(4),d=d.slice(6)):v=i(d.slice(0,1024)):x&&x.FS?v=x.FS:v=i(d.slice(0,1024));var S=0,T=0,k=0,E=0,j=0,F=v.charCodeAt(0),z=!1,A=0,I=d.charCodeAt(0);d=d.replace(/\r\n/mg,`
`);var O=x.dateNF!=null?MX(x.dateNF):null;function B(){var R=d.slice(E,j),P={};if(R.charAt(0)=='"'&&R.charAt(R.length-1)=='"'&&(R=R.slice(1,-1).replace(/""/g,'"')),R.length===0)P.t="z";else if(x.raw)P.t="s",P.v=R;else if(R.trim().length===0)P.t="s",P.v=R;else if(R.charCodeAt(0)==61)R.charCodeAt(1)==34&&R.charCodeAt(R.length-1)==34?(P.t="s",P.v=R.slice(2,-1).replace(/""/g,'"')):fne(R)?(P.t="n",P.f=R.slice(1)):(P.t="s",P.v=R);else if(R=="TRUE")P.t="b",P.v=!0;else if(R=="FALSE")P.t="b",P.v=!1;else if(!isNaN(k=Dc(R)))P.t="n",x.cellText!==!1&&(P.w=R),P.v=k;else if(!isNaN(qp(R).getDate())||O&&R.match(O)){P.z=x.dateNF||wn[14];var V=0;O&&R.match(O)&&(R=FX(R,x.dateNF,R.match(O)||[]),V=1),x.cellDates?(P.t="d",P.v=fi(R,V)):(P.t="n",P.v=Bs(fi(R,V))),x.cellText!==!1&&(P.w=Zl(P.z,P.v instanceof Date?Bs(P.v):P.v)),x.cellNF||delete P.z}else P.t="s",P.v=R;if(P.t=="z"||(x.dense?(_[S]||(_[S]=[]),_[S][T]=P):_[Tn({c:T,r:S})]=P),E=j+1,I=d.charCodeAt(E),b.e.c<T&&(b.e.c=T),b.e.r<S&&(b.e.r=S),A==F)++T;else if(T=0,++S,x.sheetRows&&x.sheetRows<=S)return!0}e:for(;j<d.length;++j)switch(A=d.charCodeAt(j)){case 34:I===34&&(z=!z);break;case F:case 10:case 13:if(!z&&B())break e;break}return j-E>0&&B(),_["!ref"]=Ln(b),_}function a(d,p){return!(p&&p.PRN)||p.FS||d.slice(0,4)=="sep="||d.indexOf("	")>=0||d.indexOf(",")>=0||d.indexOf(";")>=0?s(d,p):lg(e(d,p),p)}function o(d,p){var x="",v=p.type=="string"?[0,0,0,0]:BE(d,p);switch(p.type){case"base64":x=wl(d);break;case"binary":x=d;break;case"buffer":p.codepage==65001?x=d.toString("utf8"):p.codepage&&typeof bx<"u"||(x=Vn&&Buffer.isBuffer(d)?d.toString("binary"):_d(d));break;case"array":x=M0(d);break;case"string":x=d;break;default:throw new Error("Unrecognized type "+p.type)}return v[0]==239&&v[1]==187&&v[2]==191?x=Gr(x.slice(3)):p.type!="string"&&p.type!="buffer"&&p.codepage==65001?x=Gr(x):p.type=="binary"&&typeof bx<"u",x.slice(0,19)=="socialcalc:version:"?eM.to_sheet(p.type=="string"?x:Gr(x),p):a(x,p)}function c(d,p){return wd(o(d,p),p)}function u(d){for(var p=[],x=dr(d["!ref"]),v,_=Array.isArray(d),b=x.s.r;b<=x.e.r;++b){for(var S=[],T=x.s.c;T<=x.e.c;++T){var k=Tn({r:b,c:T});if(v=_?(d[b]||[])[T]:d[k],!v||v.v==null){S.push("          ");continue}for(var E=(v.w||(Mh(v),v.w)||"").slice(0,10);E.length<10;)E+=" ";S.push(E+(T===0?" ":""))}p.push(S.join(""))}return p.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}})();function JZ(n,e){var t=e||{},r=!!t.WTF;t.WTF=!0;try{var i=JO.to_workbook(n,t);return t.WTF=r,i}catch(s){if(t.WTF=r,!s.message.match(/SYLK bad record ID/)&&r)throw s;return Wp.to_workbook(n,e)}}var p0=(function(){function n(M,W,K){if(M){ma(M,M.l||0);for(var G=K.Enum||me;M.l<M.length;){var te=M.read_shift(2),he=G[te]||G[65535],ye=M.read_shift(2),be=M.l+ye,Ce=he.f&&he.f(M,ye,K);if(M.l=be,W(Ce,he,te))return}}}function e(M,W){switch(W.type){case"base64":return t(ml(wl(M)),W);case"binary":return t(ml(M),W);case"buffer":case"array":return t(M,W)}throw"Unsupported type "+W.type}function t(M,W){if(!M)return M;var K=W||{},G=K.dense?[]:{},te="Sheet1",he="",ye=0,be={},Ce=[],ke=[],oe={s:{r:0,c:0},e:{r:0,c:0}},qe=K.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)K.Enum=me,n(M,function(Be,lt,Ke){switch(Ke){case 0:K.vers=Be,Be>=4096&&(K.qpro=!0);break;case 6:oe=Be;break;case 204:Be&&(he=Be);break;case 222:he=Be;break;case 15:case 51:K.qpro||(Be[1].v=Be[1].v.slice(1));case 13:case 14:case 16:Ke==14&&(Be[2]&112)==112&&(Be[2]&15)>1&&(Be[2]&15)<15&&(Be[1].z=K.dateNF||wn[14],K.cellDates&&(Be[1].t="d",Be[1].v=l_(Be[1].v))),K.qpro&&Be[3]>ye&&(G["!ref"]=Ln(oe),be[te]=G,Ce.push(te),G=K.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},ye=Be[3],te=he||"Sheet"+(ye+1),he="");var We=K.dense?(G[Be[0].r]||[])[Be[0].c]:G[Tn(Be[0])];if(We){We.t=Be[1].t,We.v=Be[1].v,Be[1].z!=null&&(We.z=Be[1].z),Be[1].f!=null&&(We.f=Be[1].f);break}K.dense?(G[Be[0].r]||(G[Be[0].r]=[]),G[Be[0].r][Be[0].c]=Be[1]):G[Tn(Be[0])]=Be[1];break}},K);else if(M[2]==26||M[2]==14)K.Enum=re,M[2]==14&&(K.qpro=!0,M.l=0),n(M,function(Be,lt,Ke){switch(Ke){case 204:te=Be;break;case 22:Be[1].v=Be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Be[3]>ye&&(G["!ref"]=Ln(oe),be[te]=G,Ce.push(te),G=K.dense?[]:{},oe={s:{r:0,c:0},e:{r:0,c:0}},ye=Be[3],te="Sheet"+(ye+1)),qe>0&&Be[0].r>=qe)break;K.dense?(G[Be[0].r]||(G[Be[0].r]=[]),G[Be[0].r][Be[0].c]=Be[1]):G[Tn(Be[0])]=Be[1],oe.e.c<Be[0].c&&(oe.e.c=Be[0].c),oe.e.r<Be[0].r&&(oe.e.r=Be[0].r);break;case 27:Be[14e3]&&(ke[Be[14e3][0]]=Be[14e3][1]);break;case 1537:ke[Be[0]]=Be[1],Be[0]==ye&&(te=Be[1]);break}},K);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(G["!ref"]=Ln(oe),be[he||te]=G,Ce.push(he||te),!ke.length)return{SheetNames:Ce,Sheets:be};for(var at={},Fe=[],_e=0;_e<ke.length;++_e)be[Ce[_e]]?(Fe.push(ke[_e]||Ce[_e]),at[ke[_e]]=be[ke[_e]]||be[Ce[_e]]):(Fe.push(ke[_e]),at[ke[_e]]={"!ref":"A1"});return{SheetNames:Fe,Sheets:at}}function r(M,W){var K=W||{};if(+K.codepage>=0&&Cc(+K.codepage),K.type=="string")throw new Error("Cannot write WK1 to JS string");var G=Uo(),te=dr(M["!ref"]),he=Array.isArray(M),ye=[];zt(G,0,s(1030)),zt(G,6,c(te));for(var be=Math.min(te.e.r,8191),Ce=te.s.r;Ce<=be;++Ce)for(var ke=rs(Ce),oe=te.s.c;oe<=te.e.c;++oe){Ce===te.s.r&&(ye[oe]=Ri(oe));var qe=ye[oe]+ke,at=he?(M[Ce]||[])[oe]:M[qe];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?zt(G,13,v(Ce,oe,at.v)):zt(G,14,b(Ce,oe,at.v));else{var Fe=Mh(at);zt(G,15,p(Ce,oe,Fe.slice(0,239)))}}return zt(G,1),G.end()}function i(M,W){var K=W||{};if(+K.codepage>=0&&Cc(+K.codepage),K.type=="string")throw new Error("Cannot write WK3 to JS string");var G=Uo();zt(G,0,a(M));for(var te=0,he=0;te<M.SheetNames.length;++te)(M.Sheets[M.SheetNames[te]]||{})["!ref"]&&zt(G,27,J(M.SheetNames[te],he++));var ye=0;for(te=0;te<M.SheetNames.length;++te){var be=M.Sheets[M.SheetNames[te]];if(!(!be||!be["!ref"])){for(var Ce=dr(be["!ref"]),ke=Array.isArray(be),oe=[],qe=Math.min(Ce.e.r,8191),at=Ce.s.r;at<=qe;++at)for(var Fe=rs(at),_e=Ce.s.c;_e<=Ce.e.c;++_e){at===Ce.s.r&&(oe[_e]=Ri(_e));var Be=oe[_e]+Fe,lt=ke?(be[at]||[])[_e]:be[Be];if(!(!lt||lt.t=="z"))if(lt.t=="n")zt(G,23,B(at,_e,ye,lt.v));else{var Ke=Mh(lt);zt(G,22,A(at,_e,ye,Ke.slice(0,239)))}}++ye}}return zt(G,1),G.end()}function s(M){var W=ut(2);return W.write_shift(2,M),W}function a(M){var W=ut(26);W.write_shift(2,4096),W.write_shift(2,4),W.write_shift(4,0);for(var K=0,G=0,te=0,he=0;he<M.SheetNames.length;++he){var ye=M.SheetNames[he],be=M.Sheets[ye];if(!(!be||!be["!ref"])){++te;var Ce=qo(be["!ref"]);K<Ce.e.r&&(K=Ce.e.r),G<Ce.e.c&&(G=Ce.e.c)}}return K>8191&&(K=8191),W.write_shift(2,K),W.write_shift(1,te),W.write_shift(1,G),W.write_shift(2,0),W.write_shift(2,0),W.write_shift(1,1),W.write_shift(1,2),W.write_shift(4,0),W.write_shift(4,0),W}function o(M,W,K){var G={s:{c:0,r:0},e:{c:0,r:0}};return W==8&&K.qpro?(G.s.c=M.read_shift(1),M.l++,G.s.r=M.read_shift(2),G.e.c=M.read_shift(1),M.l++,G.e.r=M.read_shift(2),G):(G.s.c=M.read_shift(2),G.s.r=M.read_shift(2),W==12&&K.qpro&&(M.l+=2),G.e.c=M.read_shift(2),G.e.r=M.read_shift(2),W==12&&K.qpro&&(M.l+=2),G.s.c==65535&&(G.s.c=G.e.c=G.s.r=G.e.r=0),G)}function c(M){var W=ut(8);return W.write_shift(2,M.s.c),W.write_shift(2,M.s.r),W.write_shift(2,M.e.c),W.write_shift(2,M.e.r),W}function u(M,W,K){var G=[{c:0,r:0},{t:"n",v:0},0,0];return K.qpro&&K.vers!=20768?(G[0].c=M.read_shift(1),G[3]=M.read_shift(1),G[0].r=M.read_shift(2),M.l+=2):(G[2]=M.read_shift(1),G[0].c=M.read_shift(2),G[0].r=M.read_shift(2)),G}function d(M,W,K){var G=M.l+W,te=u(M,W,K);if(te[1].t="s",K.vers==20768){M.l++;var he=M.read_shift(1);return te[1].v=M.read_shift(he,"utf8"),te}return K.qpro&&M.l++,te[1].v=M.read_shift(G-M.l,"cstr"),te}function p(M,W,K){var G=ut(7+K.length);G.write_shift(1,255),G.write_shift(2,W),G.write_shift(2,M),G.write_shift(1,39);for(var te=0;te<G.length;++te){var he=K.charCodeAt(te);G.write_shift(1,he>=128?95:he)}return G.write_shift(1,0),G}function x(M,W,K){var G=u(M,W,K);return G[1].v=M.read_shift(2,"i"),G}function v(M,W,K){var G=ut(7);return G.write_shift(1,255),G.write_shift(2,W),G.write_shift(2,M),G.write_shift(2,K,"i"),G}function _(M,W,K){var G=u(M,W,K);return G[1].v=M.read_shift(8,"f"),G}function b(M,W,K){var G=ut(13);return G.write_shift(1,255),G.write_shift(2,W),G.write_shift(2,M),G.write_shift(8,K,"f"),G}function S(M,W,K){var G=M.l+W,te=u(M,W,K);if(te[1].v=M.read_shift(8,"f"),K.qpro)M.l=G;else{var he=M.read_shift(2);j(M.slice(M.l,M.l+he),te),M.l+=he}return te}function T(M,W,K){var G=W&32768;return W&=-32769,W=(G?M:0)+(W>=8192?W-16384:W),(G?"":"$")+(K?Ri(W):rs(W))}var k={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},E=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function j(M,W){ma(M,0);for(var K=[],G=0,te="",he="",ye="",be="";M.l<M.length;){var Ce=M[M.l++];switch(Ce){case 0:K.push(M.read_shift(8,"f"));break;case 1:he=T(W[0].c,M.read_shift(2),!0),te=T(W[0].r,M.read_shift(2),!1),K.push(he+te);break;case 2:{var ke=T(W[0].c,M.read_shift(2),!0),oe=T(W[0].r,M.read_shift(2),!1);he=T(W[0].c,M.read_shift(2),!0),te=T(W[0].r,M.read_shift(2),!1),K.push(ke+oe+":"+he+te)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:K.push("("+K.pop()+")");break;case 5:K.push(M.read_shift(2));break;case 6:{for(var qe="";Ce=M[M.l++];)qe+=String.fromCharCode(Ce);K.push('"'+qe.replace(/"/g,'""')+'"')}break;case 8:K.push("-"+K.pop());break;case 23:K.push("+"+K.pop());break;case 22:K.push("NOT("+K.pop()+")");break;case 20:case 21:be=K.pop(),ye=K.pop(),K.push(["AND","OR"][Ce-20]+"("+ye+","+be+")");break;default:if(Ce<32&&E[Ce])be=K.pop(),ye=K.pop(),K.push(ye+E[Ce]+be);else if(k[Ce]){if(G=k[Ce][1],G==69&&(G=M[M.l++]),G>K.length){console.error("WK1 bad formula parse 0x"+Ce.toString(16)+":|"+K.join("|")+"|");return}var at=K.slice(-G);K.length-=G,K.push(k[Ce][0]+"("+at.join(",")+")")}else return Ce<=7?console.error("WK1 invalid opcode "+Ce.toString(16)):Ce<=24?console.error("WK1 unsupported op "+Ce.toString(16)):Ce<=30?console.error("WK1 invalid opcode "+Ce.toString(16)):Ce<=115?console.error("WK1 unsupported function opcode "+Ce.toString(16)):console.error("WK1 unrecognized opcode "+Ce.toString(16))}}K.length==1?W[1].f=""+K[0]:console.error("WK1 bad formula parse |"+K.join("|")+"|")}function F(M){var W=[{c:0,r:0},{t:"n",v:0},0];return W[0].r=M.read_shift(2),W[3]=M[M.l++],W[0].c=M[M.l++],W}function z(M,W){var K=F(M);return K[1].t="s",K[1].v=M.read_shift(W-4,"cstr"),K}function A(M,W,K,G){var te=ut(6+G.length);te.write_shift(2,M),te.write_shift(1,K),te.write_shift(1,W),te.write_shift(1,39);for(var he=0;he<G.length;++he){var ye=G.charCodeAt(he);te.write_shift(1,ye>=128?95:ye)}return te.write_shift(1,0),te}function I(M,W){var K=F(M);K[1].v=M.read_shift(2);var G=K[1].v>>1;if(K[1].v&1)switch(G&7){case 0:G=(G>>3)*5e3;break;case 1:G=(G>>3)*500;break;case 2:G=(G>>3)/20;break;case 3:G=(G>>3)/200;break;case 4:G=(G>>3)/2e3;break;case 5:G=(G>>3)/2e4;break;case 6:G=(G>>3)/16;break;case 7:G=(G>>3)/64;break}return K[1].v=G,K}function O(M,W){var K=F(M),G=M.read_shift(4),te=M.read_shift(4),he=M.read_shift(2);if(he==65535)return G===0&&te===3221225472?(K[1].t="e",K[1].v=15):G===0&&te===3489660928?(K[1].t="e",K[1].v=42):K[1].v=0,K;var ye=he&32768;return he=(he&32767)-16446,K[1].v=(1-ye*2)*(te*Math.pow(2,he+32)+G*Math.pow(2,he)),K}function B(M,W,K,G){var te=ut(14);if(te.write_shift(2,M),te.write_shift(1,K),te.write_shift(1,W),G==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var he=0,ye=0,be=0,Ce=0;return G<0&&(he=1,G=-G),ye=Math.log2(G)|0,G/=Math.pow(2,ye-31),Ce=G>>>0,(Ce&2147483648)==0&&(G/=2,++ye,Ce=G>>>0),G-=Ce,Ce|=2147483648,Ce>>>=0,G*=Math.pow(2,32),be=G>>>0,te.write_shift(4,be),te.write_shift(4,Ce),ye+=16383+(he?32768:0),te.write_shift(2,ye),te}function R(M,W){var K=O(M);return M.l+=W-14,K}function P(M,W){var K=F(M),G=M.read_shift(4);return K[1].v=G>>6,K}function V(M,W){var K=F(M),G=M.read_shift(8,"f");return K[1].v=G,K}function Y(M,W){var K=V(M);return M.l+=W-10,K}function ie(M,W){return M[M.l+W-1]==0?M.read_shift(W,"cstr"):""}function q(M,W){var K=M[M.l++];K>W-1&&(K=W-1);for(var G="";G.length<K;)G+=String.fromCharCode(M[M.l++]);return G}function Q(M,W,K){if(!(!K.qpro||W<21)){var G=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var te=M.read_shift(W-21,"cstr");return[G,te]}}function se(M,W){for(var K={},G=M.l+W;M.l<G;){var te=M.read_shift(2);if(te==14e3){for(K[te]=[0,""],K[te][0]=M.read_shift(2);M[M.l];)K[te][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return K}function J(M,W){var K=ut(5+M.length);K.write_shift(2,14e3),K.write_shift(2,W);for(var G=0;G<M.length;++G){var te=M.charCodeAt(G);K[K.l++]=te>127?95:te}return K[K.l++]=0,K}var me={0:{n:"BOF",f:bs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:x},14:{n:"NUMBER",f:_},15:{n:"LABEL",f:d},16:{n:"FORMULA",f:S},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:d},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ie},222:{n:"SHEETNAMELP",f:q},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:z},23:{n:"NUMBER17",f:O},24:{n:"NUMBER18",f:I},25:{n:"FORMULA19",f:R},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:se},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:P},38:{n:"??"},39:{n:"NUMBER27",f:V},40:{n:"FORMULA28",f:Y},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ie},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}})();function ZZ(n){var e={},t=n.match($a),r=0,i=!1;if(t)for(;r!=t.length;++r){var s=An(t[r]);switch(s[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!s.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(s.val=="1")break;e.cp=nE[parseInt(s.val,10)];break;case"<outline":if(!s.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=s.val;break;case"<sz":e.sz=s.val;break;case"<strike":if(!s.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!s.val)break;switch(s.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(s.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(s.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":s.rgb&&(e.color=s.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=s.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=s.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(s[0].charCodeAt(1)!==47&&!i)throw new Error("Unrecognized rich format "+s[0])}}return e}var eee=(function(){var n=Sx("t"),e=Sx("rPr");function t(s){var a=s.match(n);if(!a)return{t:"s",v:""};var o={t:"s",v:fr(a[1])},c=s.match(e);return c&&(o.s=ZZ(c[1])),o}var r=/<(?:\w+:)?r>/g,i=/<\/(?:\w+:)?r>/;return function(a){return a.replace(r,"").split(i).map(t).filter(function(o){return o.v})}})(),tee=(function(){var e=/(\r\n|\n)/g;function t(i,s,a){var o=[];i.u&&o.push("text-decoration: underline;"),i.uval&&o.push("text-underline-style:"+i.uval+";"),i.sz&&o.push("font-size:"+i.sz+"pt;"),i.outline&&o.push("text-effect: outline;"),i.shadow&&o.push("text-shadow: auto;"),s.push('<span style="'+o.join("")+'">'),i.b&&(s.push("<b>"),a.push("</b>")),i.i&&(s.push("<i>"),a.push("</i>")),i.strike&&(s.push("<s>"),a.push("</s>"));var c=i.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(s.push("<"+c+">"),a.push("</"+c+">")),a.push("</span>"),i}function r(i){var s=[[],i.v,[]];return i.v?(i.s&&t(i.s,s[0],s[2]),s[0].join("")+s[1].replace(e,"<br/>")+s[2].join("")):""}return function(s){return s.map(r).join("")}})(),nee=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ree=/<(?:\w+:)?r>/,iee=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function AE(n,e){var t=e?e.cellHTML:!0,r={};return n?(n.match(/^\s*<(?:\w+:)?t[^>]*>/)?(r.t=fr(Gr(n.slice(n.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),r.r=Gr(n),t&&(r.h=fE(r.t))):n.match(ree)&&(r.r=Gr(n),r.t=fr(Gr((n.replace(iee,"").match(nee)||[]).join("").replace($a,""))),t&&(r.h=tee(eee(r.r)))),r):{t:""}}var see=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,aee=/<(?:\w+:)?(?:si|sstItem)>/g,oee=/<\/(?:\w+:)?(?:si|sstItem)>/;function lee(n,e){var t=[],r="";if(!n)return t;var i=n.match(see);if(i){r=i[2].replace(aee,"").split(oee);for(var s=0;s!=r.length;++s){var a=AE(r[s].trim(),e);a!=null&&(t[t.length]=a)}i=An(i[1]),t.Count=i.count,t.Unique=i.uniqueCount}return t}var cee=/^\s|\s$|[\t\n\r]/;function tM(n,e){if(!e.bookSST)return"";var t=[os];t[t.length]=Bt("sst",null,{xmlns:Y0[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(cee)&&(s+=' xml:space="preserve"'),s+=">"+Or(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function uee(n){return[n.read_shift(4),n.read_shift(4)]}function hee(n,e){var t=[],r=!1;return Uh(n,function(s,a,o){switch(o){case 159:t.Count=s[0],t.Unique=s[1];break;case 19:t.push(s);break;case 160:return!0;case 35:r=!0;break;case 36:r=!1;break;default:if(a.T,!r||e.WTF)throw new Error("Unexpected record 0x"+o.toString(16))}}),t}function fee(n,e){return e||(e=ut(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var dee=SQ;function mee(n){var e=Uo();Tt(e,159,fee(n));for(var t=0;t<n.length;++t)Tt(e,19,dee(n[t]));return Tt(e,160),e.end()}function nM(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function Ih(n,e){var t={};return t.Major=n.read_shift(2),t.Minor=n.read_shift(2),e>=4&&(n.l+=e-4),t}function pee(n){var e={};return e.id=n.read_shift(0,"lpp4"),e.R=Ih(n,4),e.U=Ih(n,4),e.W=Ih(n,4),e}function gee(n){for(var e=n.read_shift(4),t=n.l+e-4,r={},i=n.read_shift(4),s=[];i-- >0;)s.push({t:n.read_shift(4),v:n.read_shift(0,"lpp4")});if(r.name=n.read_shift(0,"lpp4"),r.comps=s,n.l!=t)throw new Error("Bad DataSpaceMapEntry: "+n.l+" != "+t);return r}function xee(n){var e=[];n.l+=4;for(var t=n.read_shift(4);t-- >0;)e.push(gee(n));return e}function vee(n){var e=[];n.l+=4;for(var t=n.read_shift(4);t-- >0;)e.push(n.read_shift(0,"lpp4"));return e}function yee(n){var e={};return n.read_shift(4),n.l+=4,e.id=n.read_shift(0,"lpp4"),e.name=n.read_shift(0,"lpp4"),e.R=Ih(n,4),e.U=Ih(n,4),e.W=Ih(n,4),e}function bee(n){var e=yee(n);if(e.ename=n.read_shift(0,"8lpp4"),e.blksz=n.read_shift(4),e.cmode=n.read_shift(4),n.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function rM(n,e){var t=n.l+e,r={};r.Flags=n.read_shift(4)&63,n.l+=4,r.AlgID=n.read_shift(4);var i=!1;switch(r.AlgID){case 26126:case 26127:case 26128:i=r.Flags==36;break;case 26625:i=r.Flags==4;break;case 0:i=r.Flags==16||r.Flags==4||r.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+r.AlgID}if(!i)throw new Error("Encryption Flags/AlgID mismatch");return r.AlgIDHash=n.read_shift(4),r.KeySize=n.read_shift(4),r.ProviderType=n.read_shift(4),n.l+=8,r.CSPName=n.read_shift(t-n.l>>1,"utf16le"),n.l=t,r}function iM(n,e){var t={},r=n.l+e;return n.l+=4,t.Salt=n.slice(n.l,n.l+16),n.l+=16,t.Verifier=n.slice(n.l,n.l+16),n.l+=16,n.read_shift(4),t.VerifierHash=n.slice(n.l,r),n.l=r,t}function _ee(n){var e=Ih(n);switch(e.Minor){case 2:return[e.Minor,wee(n)];case 3:return[e.Minor,See()];case 4:return[e.Minor,Tee(n)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function wee(n){var e=n.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var t=n.read_shift(4),r=rM(n,t),i=iM(n,n.length-n.l);return{t:"Std",h:r,v:i}}function See(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Tee(n){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];n.l+=4;var t=n.read_shift(n.length-n.l,"utf8"),r={};return t.replace($a,function(s){var a=An(s);switch(Fu(a[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(o){r[o]=a[o]});break;case"<dataIntegrity":r.encryptedHmacKey=a.encryptedHmacKey,r.encryptedHmacValue=a.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":r.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":r.uri=a.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":r.encs.push(a);break;default:throw a[0]}}),r}function Eee(n,e){var t={},r=t.EncryptionVersionInfo=Ih(n,4);if(e-=4,r.Minor!=2)throw new Error("unrecognized minor version code: "+r.Minor);if(r.Major>4||r.Major<2)throw new Error("unrecognized major version code: "+r.Major);t.Flags=n.read_shift(4),e-=4;var i=n.read_shift(4);return e-=4,t.EncryptionHeader=rM(n,i),e-=i,t.EncryptionVerifier=iM(n,e),t}function Aee(n){var e={},t=e.EncryptionVersionInfo=Ih(n,4);if(t.Major!=1||t.Minor!=1)throw"unrecognized version code "+t.Major+" : "+t.Minor;return e.Salt=n.read_shift(16),e.EncryptedVerifier=n.read_shift(16),e.EncryptedVerifierHash=n.read_shift(16),e}function NE(n){var e=0,t,r=nM(n),i=r.length+1,s,a,o,c,u;for(t=sd(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=(e&16384)===0?0:1,c=e<<1&32767,u=o|c,e=u^a;return e^52811}var sM=(function(){var n=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],t=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],r=function(a){return(a/2|a*128)&255},i=function(a,o){return r(a^o)},s=function(a){for(var o=e[a.length-1],c=104,u=a.length-1;u>=0;--u)for(var d=a[u],p=0;p!=7;++p)d&64&&(o^=t[c]),d*=2,--c;return o};return function(a){for(var o=nM(a),c=s(o),u=o.length,d=sd(16),p=0;p!=16;++p)d[p]=0;var x,v,_;for((u&1)===1&&(x=c>>8,d[u]=i(n[0],x),--u,x=c&255,v=o[o.length-1],d[u]=i(v,x));u>0;)--u,x=c>>8,d[u]=i(o[u],x),--u,x=c&255,d[u]=i(o[u],x);for(u=15,_=15-o.length;_>0;)x=c>>8,d[u]=i(n[_],x),--u,--_,x=c&255,d[u]=i(o[u],x),--u,--_;return d}})(),Nee=function(n,e,t,r,i){i||(i=e),r||(r=sM(n));var s,a;for(s=0;s!=e.length;++s)a=e[s],a^=r[t],a=(a>>5|a<<3)&255,i[s]=a,++t;return[i,t,r]},Cee=function(n){var e=0,t=sM(n);return function(r){var i=Nee("",r,e,t);return e=i[1],i[0]}};function kee(n,e,t,r){var i={key:bs(n),verificationBytes:bs(n)};return t.password&&(i.verifier=NE(t.password)),r.valid=i.verificationBytes===i.verifier,r.valid&&(r.insitu=Cee(t.password)),i}function Iee(n,e,t){var r=t||{};return r.Info=n.read_shift(2),n.l-=2,r.Info===1?r.Data=Aee(n):r.Data=Eee(n,e),r}function Dee(n,e,t){var r={Type:t.biff>=8?n.read_shift(2):0};return r.Type?Iee(n,e-2,r):kee(n,t.biff>=8?e:e-2,t,r),r}var aM=(function(){function n(i,s){switch(s.type){case"base64":return e(wl(i),s);case"binary":return e(i,s);case"buffer":return e(Vn&&Buffer.isBuffer(i)?i.toString("binary"):_d(i),s);case"array":return e(M0(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(d,p){Array.isArray(o)&&(o[p]=[]);for(var x=/\\\w+\b/g,v=0,_,b=-1;_=x.exec(d);){switch(_[0]){case"\\cell":var S=d.slice(v,x.lastIndex-_[0].length);if(S[0]==" "&&(S=S.slice(1)),++b,S.length){var T={v:S,t:"s"};Array.isArray(o)?o[p][b]=T:o[Tn({r:p,c:b})]=T}break}v=x.lastIndex}b>u.e.c&&(u.e.c=b)}),o["!ref"]=Ln(u),o}function t(i,s){return wd(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=dr(i["!ref"]),o,c=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var d=a.s.c;d<=a.e.c;++d)s.push("\\cellx"+(d+1));for(s.push("\\pard\\intbl"),d=a.s.c;d<=a.e.c;++d){var p=Tn({r:u,c:d});o=c?(i[u]||[])[d]:i[p],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(Mh(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}})();function Ree(n){var e=n.slice(n[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function Nx(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}function Pee(n){var e=n[0]/255,t=n[1]/255,r=n[2]/255,i=Math.max(e,t,r),s=Math.min(e,t,r),a=i-s;if(a===0)return[0,0,e];var o=0,c=0,u=i+s;switch(c=a/(u>1?2-u:u),i){case e:o=((t-r)/a+6)%6;break;case t:o=(r-e)/a+2;break;case r:o=(e-t)/a+4;break}return[o/6,c,u/2]}function jee(n){var e=n[0],t=n[1],r=n[2],i=t*2*(r<.5?r:1-r),s=r-i/2,a=[s,s,s],o=6*e,c;if(t!==0)switch(o|0){case 0:case 6:c=i*o,a[0]+=i,a[1]+=c;break;case 1:c=i*(2-o),a[0]+=c,a[1]+=i;break;case 2:c=i*(o-2),a[1]+=i,a[2]+=c;break;case 3:c=i*(4-o),a[1]+=c,a[2]+=i;break;case 4:c=i*(o-4),a[2]+=i,a[0]+=c;break;case 5:c=i*(6-o),a[2]+=c,a[0]+=i;break}for(var u=0;u!=3;++u)a[u]=Math.round(a[u]*255);return a}function fb(n,e){if(e===0)return n;var t=Pee(Ree(n));return e<0?t[2]=t[2]*(1+e):t[2]=1-(1-t[2])*(1-e),Nx(jee(t))}var oM=6,Lee=15,Oee=1,Ba=oM;function Cx(n){return Math.floor((n+Math.round(128/Ba)/256)*Ba)}function kx(n){return Math.floor((n-5)/Ba*100+.5)/100}function db(n){return Math.round((n*Ba+5)/Ba*256)/256}function v5(n){return db(kx(Cx(n)))}function CE(n){var e=Math.abs(n-v5(n)),t=Ba;if(e>.005)for(Ba=Oee;Ba<Lee;++Ba)Math.abs(n-v5(n))<=e&&(e=Math.abs(n-v5(n)),t=Ba);Ba=t}function ad(n){n.width?(n.wpx=Cx(n.width),n.wch=kx(n.wpx),n.MDW=Ba):n.wpx?(n.wch=kx(n.wpx),n.width=db(n.wch),n.MDW=Ba):typeof n.wch=="number"&&(n.width=db(n.wch),n.wpx=Cx(n.width),n.MDW=Ba),n.customWidth&&delete n.customWidth}var Mee=96,lM=Mee;function Ix(n){return n*96/lM}function Gp(n){return n*lM/96}var Fee={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Bee(n,e,t,r){e.Borders=[];var i={},s=!1;(n[0].match($a)||[]).forEach(function(a){var o=An(a);switch(Fu(o[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":i={},o.diagonalUp&&(i.diagonalUp=ci(o.diagonalUp)),o.diagonalDown&&(i.diagonalDown=ci(o.diagonalDown)),e.Borders.push(i);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in borders")}})}function Vee(n,e,t,r){e.Fills=[];var i={},s=!1;(n[0].match($a)||[]).forEach(function(a){var o=An(a);switch(Fu(o[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":i={},e.Fills.push(i);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(i),i={};break;case"<patternFill":case"<patternFill>":o.patternType&&(i.patternType=o.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":i.bgColor||(i.bgColor={}),o.indexed&&(i.bgColor.indexed=parseInt(o.indexed,10)),o.theme&&(i.bgColor.theme=parseInt(o.theme,10)),o.tint&&(i.bgColor.tint=parseFloat(o.tint)),o.rgb&&(i.bgColor.rgb=o.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":i.fgColor||(i.fgColor={}),o.theme&&(i.fgColor.theme=parseInt(o.theme,10)),o.tint&&(i.fgColor.tint=parseFloat(o.tint)),o.rgb!=null&&(i.fgColor.rgb=o.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fills")}})}function zee(n,e,t,r){e.Fonts=[];var i={},s=!1;(n[0].match($a)||[]).forEach(function(a){var o=An(a);switch(Fu(o[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(i),i={};break;case"<name":o.val&&(i.name=Gr(o.val));break;case"<name/>":case"</name>":break;case"<b":i.bold=o.val?ci(o.val):1;break;case"<b/>":i.bold=1;break;case"<i":i.italic=o.val?ci(o.val):1;break;case"<i/>":i.italic=1;break;case"<u":switch(o.val){case"none":i.underline=0;break;case"single":i.underline=1;break;case"double":i.underline=2;break;case"singleAccounting":i.underline=33;break;case"doubleAccounting":i.underline=34;break}break;case"<u/>":i.underline=1;break;case"<strike":i.strike=o.val?ci(o.val):1;break;case"<strike/>":i.strike=1;break;case"<outline":i.outline=o.val?ci(o.val):1;break;case"<outline/>":i.outline=1;break;case"<shadow":i.shadow=o.val?ci(o.val):1;break;case"<shadow/>":i.shadow=1;break;case"<condense":i.condense=o.val?ci(o.val):1;break;case"<condense/>":i.condense=1;break;case"<extend":i.extend=o.val?ci(o.val):1;break;case"<extend/>":i.extend=1;break;case"<sz":o.val&&(i.sz=+o.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":o.val&&(i.vertAlign=o.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":o.val&&(i.family=parseInt(o.val,10));break;case"<family/>":case"</family>":break;case"<scheme":o.val&&(i.scheme=o.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(o.val=="1")break;o.codepage=nE[parseInt(o.val,10)];break;case"<color":if(i.color||(i.color={}),o.auto&&(i.color.auto=ci(o.auto)),o.rgb)i.color.rgb=o.rgb.slice(-6);else if(o.indexed){i.color.index=parseInt(o.indexed,10);var c=d0[i.color.index];i.color.index==81&&(c=d0[1]),c||(c=d0[1]),i.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else o.theme&&(i.color.theme=parseInt(o.theme,10),o.tint&&(i.color.tint=parseFloat(o.tint)),o.theme&&t.themeElements&&t.themeElements.clrScheme&&(i.color.rgb=fb(t.themeElements.clrScheme[i.color.theme].rgb,i.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in fonts")}})}function Uee(n,e,t){e.NumberFmt=[];for(var r=Gi(wn),i=0;i<r.length;++i)e.NumberFmt[r[i]]=wn[r[i]];var s=n[0].match($a);if(s)for(i=0;i<s.length;++i){var a=An(s[i]);switch(Fu(a[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var o=fr(Gr(a.formatCode)),c=parseInt(a.numFmtId,10);if(e.NumberFmt[c]=o,c>0){if(c>392){for(c=392;c>60&&e.NumberFmt[c]!=null;--c);e.NumberFmt[c]=o}kh(o,c)}}break;case"</numFmt>":break;default:if(t.WTF)throw new Error("unrecognized "+a[0]+" in numFmts")}}}function Hee(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=Bt("numFmt",null,{numFmtId:r,formatCode:Or(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=Bt("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var C2=["numFmtId","fillId","fontId","borderId","xfId"],k2=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function qee(n,e,t){e.CellXf=[];var r,i=!1;(n[0].match($a)||[]).forEach(function(s){var a=An(s),o=0;switch(Fu(a[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(r=a,delete r[0],o=0;o<C2.length;++o)r[C2[o]]&&(r[C2[o]]=parseInt(r[C2[o]],10));for(o=0;o<k2.length;++o)r[k2[o]]&&(r[k2[o]]=ci(r[k2[o]]));if(e.NumberFmt&&r.numFmtId>392){for(o=392;o>60;--o)if(e.NumberFmt[r.numFmtId]==e.NumberFmt[o]){r.numFmtId=o;break}}e.CellXf.push(r);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};a.vertical&&(c.vertical=a.vertical),a.horizontal&&(c.horizontal=a.horizontal),a.textRotation!=null&&(c.textRotation=a.textRotation),a.indent&&(c.indent=a.indent),a.wrapText&&(c.wrapText=ci(a.wrapText)),r.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(t&&t.WTF&&!i)throw new Error("unrecognized "+a[0]+" in cellXfs")}})}function Wee(n){var e=[];return e[e.length]=Bt("cellXfs",null),n.forEach(function(t){e[e.length]=Bt("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=Bt("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var Gee=(function(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,t=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,r=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,i=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,s=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(o,c,u){var d={};if(!o)return d;o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var p;return(p=o.match(e))&&Uee(p,d,u),(p=o.match(i))&&zee(p,d,c,u),(p=o.match(r))&&Vee(p,d,c,u),(p=o.match(s))&&Bee(p,d,c,u),(p=o.match(t))&&qee(p,d,u),d}})();function cM(n,e){var t=[os,Bt("styleSheet",null,{xmlns:Y0[0],"xmlns:vt":Ls.vt})],r;return n.SSF&&(r=Hee(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=Wee(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function $ee(n,e){var t=n.read_shift(2),r=qa(n);return[t,r]}function Kee(n,e,t){t||(t=ut(6+4*e.length)),t.write_shift(2,n),Js(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function Yee(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=IQ(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var c=n.read_shift(1);switch(c>0&&(r.charset=c),n.l++,r.color=kQ(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=qa(n),r}function Xee(n,e){e||(e=ut(153)),e.write_shift(2,n.sz*20),DQ(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),cb(n.color,e);var r=0;return r=2,e.write_shift(1,r),Js(n.name,e),e.length>e.l?e.slice(0,e.l):e}var Qee=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],y5,Jee=Wa;function HI(n,e){e||(e=ut(84)),y5||(y5=a_(Qee));var t=y5[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(cb({auto:1},e),cb({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function Zee(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function uM(n,e,t){t||(t=ut(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Qg(n,e){return e||(e=ut(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var ete=Wa;function tte(n,e){return e||(e=ut(51)),e.write_shift(1,0),Qg(null,e),Qg(null,e),Qg(null,e),Qg(null,e),Qg(null,e),e.length>e.l?e.slice(0,e.l):e}function nte(n,e){return e||(e=ut(52)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),lb(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function rte(n,e,t){var r=ut(2052);return r.write_shift(4,n),lb(e,r),lb(t,r),r.length>r.l?r.slice(0,r.l):r}function ite(n,e,t){var r={};r.NumberFmt=[];for(var i in wn)r.NumberFmt[i]=wn[i];r.CellXf=[],r.Fonts=[];var s=[],a=!1;return Uh(n,function(c,u,d){switch(d){case 44:r.NumberFmt[c[0]]=c[1],kh(c[1],c[0]);break;case 43:r.Fonts.push(c),c.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(c.color.rgb=fb(e.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:s[s.length-1]==617&&r.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:s.push(d),a=!0;break;case 38:s.pop(),a=!1;break;default:if(u.T>0)s.push(d);else if(u.T<0)s.pop();else if(!a||t.WTF&&s[s.length-1]!=37)throw new Error("Unexpected record 0x"+d.toString(16))}}),r}function ste(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(Tt(n,615,Rc(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&Tt(n,44,Kee(i,e[i]))}),Tt(n,616))}}function ate(n){var e=1;Tt(n,611,Rc(e)),Tt(n,43,Xee({sz:12,color:{theme:1},name:"Calibri",family:2})),Tt(n,612)}function ote(n){var e=2;Tt(n,603,Rc(e)),Tt(n,45,HI({patternType:"none"})),Tt(n,45,HI({patternType:"gray125"})),Tt(n,604)}function lte(n){var e=1;Tt(n,613,Rc(e)),Tt(n,46,tte()),Tt(n,614)}function cte(n){var e=1;Tt(n,626,Rc(e)),Tt(n,47,uM({numFmtId:0},65535)),Tt(n,627)}function ute(n,e){Tt(n,617,Rc(e.length)),e.forEach(function(t){Tt(n,47,uM(t,0))}),Tt(n,618)}function hte(n){var e=1;Tt(n,619,Rc(e)),Tt(n,48,nte({xfId:0,name:"Normal"})),Tt(n,620)}function fte(n){var e=0;Tt(n,505,Rc(e)),Tt(n,506)}function dte(n){var e=0;Tt(n,508,rte(e,"TableStyleMedium9","PivotStyleMedium4")),Tt(n,509)}function mte(n,e){var t=Uo();return Tt(t,278),ste(t,n.SSF),ate(t),ote(t),lte(t),cte(t),ute(t,e.cellXfs),hte(t),fte(t),dte(t),Tt(t,279),t.end()}var pte=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function gte(n,e,t){e.themeElements.clrScheme=[];var r={};(n[0].match($a)||[]).forEach(function(i){var s=An(i);switch(s[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":r.rgb=s.val;break;case"<a:sysClr":r.rgb=s.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":s[0].charAt(1)==="/"?(e.themeElements.clrScheme[pte.indexOf(s[0])]=r,r={}):r.name=s[0].slice(3,s[0].length-1);break;default:if(t&&t.WTF)throw new Error("Unrecognized "+s[0]+" in clrScheme")}})}function xte(){}function vte(){}var yte=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,bte=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,_te=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function wte(n,e,t){e.themeElements={};var r;[["clrScheme",yte,gte],["fontScheme",bte,xte],["fmtScheme",_te,vte]].forEach(function(i){if(!(r=n.match(i[1])))throw new Error(i[0]+" not found in themeElements");i[2](r,e,t)})}var Ste=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function hM(n,e){(!n||n.length===0)&&(n=kE());var t,r={};if(!(t=n.match(Ste)))throw new Error("themeElements not found in theme");return wte(t[0],r,e),r.raw=n,r}function kE(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[os];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function Tte(n,e,t){var r=n.l+e,i=n.read_shift(4);if(i!==124226){if(!t.cellStyles){n.l=r;return}var s=n.slice(n.l);n.l=r;var a;try{a=rO(s,{type:"array"})}catch{return}var o=pl(a,"theme/theme/theme1.xml",!0);if(o)return hM(o,t)}}function Ete(n){return n.read_shift(4)}function Ate(n){var e={};switch(e.xclrType=n.read_shift(2),e.nTintShade=n.read_shift(2),e.xclrType){case 0:n.l+=4;break;case 1:e.xclrValue=Nte(n,4);break;case 2:e.xclrValue=qO(n);break;case 3:e.xclrValue=Ete(n);break;case 4:n.l+=4;break}return n.l+=8,e}function Nte(n,e){return Wa(n,e)}function Cte(n,e){return Wa(n,e)}function kte(n){var e=n.read_shift(2),t=n.read_shift(2)-4,r=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:r[1]=Ate(n);break;case 6:r[1]=Cte(n,t);break;case 14:case 15:r[1]=n.read_shift(t===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+t)}return r}function Ite(n,e){var t=n.l+e;n.l+=2;var r=n.read_shift(2);n.l+=2;for(var i=n.read_shift(2),s=[];i-- >0;)s.push(kte(n,t-n.l));return{ixfe:r,ext:s}}function Dte(n,e){e.forEach(function(t){t[0]})}function Rte(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:qa(n)}}function Pte(n){var e=ut(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Js(n.name,e),e.slice(0,e.l)}function jte(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function Lte(n){var e=ut(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function Ote(n,e){var t=ut(8+2*e.length);return t.write_shift(4,n),Js(e,t),t.slice(0,t.l)}function Mte(n){return n.l+=4,n.read_shift(4)!=0}function Fte(n,e){var t=ut(8);return t.write_shift(4,n),t.write_shift(4,1),t}function Bte(n,e,t){var r={Types:[],Cell:[],Value:[]},i=t||{},s=[],a=!1,o=2;return Uh(n,function(c,u,d){switch(d){case 335:r.Types.push({name:c.name});break;case 51:c.forEach(function(p){o==1?r.Cell.push({type:r.Types[p[0]-1].name,index:p[1]}):o==0&&r.Value.push({type:r.Types[p[0]-1].name,index:p[1]})});break;case 337:o=c?1:0;break;case 338:o=2;break;case 35:s.push(d),a=!0;break;case 36:s.pop(),a=!1;break;default:if(!u.T){if(!a||i.WTF&&s[s.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Vte(){var n=Uo();return Tt(n,332),Tt(n,334,Rc(1)),Tt(n,335,Pte({name:"XLDAPR",version:12e4,flags:3496657072})),Tt(n,336),Tt(n,339,Ote(1,"XLDAPR")),Tt(n,52),Tt(n,35,Rc(514)),Tt(n,4096,Rc(0)),Tt(n,4097,$l(1)),Tt(n,36),Tt(n,53),Tt(n,340),Tt(n,337,Fte(1)),Tt(n,51,Lte([[1,0]])),Tt(n,338),Tt(n,333),n.end()}function zte(n,e,t){var r={Types:[],Cell:[],Value:[]};if(!n)return r;var i=!1,s=2,a;return n.replace($a,function(o){var c=An(o);switch(Fu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":r.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<r.Types.length;++u)r.Types[u].name==c.name&&(a=r.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":s==1?r.Cell.push({type:r.Types[c.t-1].name,index:+c.v}):s==0&&r.Value.push({type:r.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":s=1;break;case"</cellMetadata>":s=2;break;case"<valueMetadata":s=0;break;case"</valueMetadata>":s=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<rvb":if(!a)break;a.offsets||(a.offsets=[]),a.offsets.push(+c.i);break;default:if(!i&&t.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return o}),r}function fM(){var n=[os];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function Ute(n){var e=[];if(!n)return e;var t=1;return(n.match($a)||[]).forEach(function(r){var i=An(r);switch(i[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete i[0],i.i?t=i.i:i.i=t,e.push(i);break}}),e}function Hte(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=Tn(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}function qte(n,e,t){var r=[];return Uh(n,function(s,a,o){switch(o){case 63:r.push(s);break;default:if(!a.T)throw new Error("Unexpected record 0x"+o.toString(16))}}),r}function Wte(n,e,t,r){if(!n)return n;var i=r||{},s=!1;Uh(n,function(o,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:s=!0;break;case 36:s=!1;break;default:if(!c.T){if(!s||i.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},i)}function Gte(n,e){if(!n)return"??";var t=(n.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][t].Target}var cp=1024;function dM(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[Bt("xml",null,{"xmlns:v":fl.v,"xmlns:o":fl.o,"xmlns:x":fl.x,"xmlns:mv":fl.mv}).replace(/\/>/,">"),Bt("o:shapelayout",Bt("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),Bt("v:shapetype",[Bt("v:stroke",null,{joinstyle:"miter"}),Bt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];cp<n*1e3;)cp+=1e3;return e.forEach(function(s){var a=Pi(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?Bt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=Bt("v:fill",c,o),d={on:"t",obscured:"t"};++cp,i=i.concat(["<v:shape"+Tx({id:"_x0000_s"+cp,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,Bt("v:shadow",null,d),Bt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",pa("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),pa("x:AutoFill","False"),pa("x:Row",String(a.r)),pa("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function qI(n,e,t,r){var i=Array.isArray(n),s;e.forEach(function(a){var o=Pi(a.ref);if(i?(n[o.r]||(n[o.r]=[]),s=n[o.r][o.c]):s=n[a.ref],!s){s={t:"z"},i?n[o.r][o.c]=s:n[a.ref]=s;var c=dr(n["!ref"]||"BDWGO1000001:A1");c.s.r>o.r&&(c.s.r=o.r),c.e.r<o.r&&(c.e.r=o.r),c.s.c>o.c&&(c.s.c=o.c),c.e.c<o.c&&(c.e.c=o.c);var u=Ln(c);u!==n["!ref"]&&(n["!ref"]=u)}s.c||(s.c=[]);var d={a:a.author,t:a.t,r:a.r,T:t};a.h&&(d.h=a.h);for(var p=s.c.length-1;p>=0;--p){if(!t&&s.c[p].T)return;t&&!s.c[p].T&&s.c.splice(p,1)}if(t&&r){for(p=0;p<r.length;++p)if(d.a==r[p].id){d.a=r[p].name||d.a;break}}s.c.push(d)})}function $te(n,e){if(n.match(/<(?:\w+:)?comments *\/>/))return[];var t=[],r=[],i=n.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);i&&i[1]&&i[1].split(/<\/\w*:?author>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?author[^>]*>(.*)/);o&&t.push(o[1])}});var s=n.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return s&&s[1]&&s[1].split(/<\/\w*:?comment>/).forEach(function(a){if(!(a===""||a.trim()==="")){var o=a.match(/<(?:\w+:)?comment[^>]*>/);if(o){var c=An(o[0]),u={author:c.authorId&&t[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},d=Pi(c.ref);if(!(e.sheetRows&&e.sheetRows<=d.r)){var p=a.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),x=!!p&&!!p[1]&&AE(p[1])||{r:"",t:"",h:""};u.r=x.r,x.r=="<t></t>"&&(x.t=x.h=""),u.t=(x.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(u.h=x.h),r.push(u)}}}}),r}function mM(n){var e=[os,Bt("comments",null,{xmlns:Y0[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=Or(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(c){c.a&&(i=t.indexOf(Or(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(pa("t",Or(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(pa("t",Or(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function Kte(n,e){var t=[],r=!1,i={},s=0;return n.replace($a,function(o,c){var u=An(o);switch(Fu(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":i={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":i.t!=null&&t.push(i);break;case"<text>":case"<text":s=c+o.length;break;case"</text>":i.t=n.slice(s,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":r=!0;break;case"</mentions>":r=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return o}),t}function Yte(n,e,t){var r=[os,Bt("ThreadedComments",null,{xmlns:Ls.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(Bt("threadedComment",pa("text",a.t||""),c))})}),r.push("</ThreadedComments>"),r.join("")}function Xte(n,e){var t=[],r=!1;return n.replace($a,function(s){var a=An(s);switch(Fu(a[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":t.push({name:a.displayname,id:a.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;default:if(!r&&e.WTF)throw new Error("unrecognized "+a[0]+" in threaded comments")}return s}),t}function Qte(n){var e=[os,Bt("personList",null,{xmlns:Ls.TCMNT,"xmlns:x":Y0[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(Bt("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function Jte(n){var e={};e.iauthor=n.read_shift(4);var t=Z0(n);return e.rfx=t.s,e.ref=Tn(t.s),n.l+=16,e}function Zte(n,e){return e==null&&(e=ut(36)),e.write_shift(4,n[1].iauthor),cg(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var ene=qa;function tne(n){return Js(n.slice(0,54))}function nne(n,e){var t=[],r=[],i={},s=!1;return Uh(n,function(o,c,u){switch(u){case 632:r.push(o);break;case 635:i=o;break;case 637:i.t=o.t,i.h=o.h,i.r=o.r;break;case 636:if(i.author=r[i.iauthor],delete i.iauthor,e.sheetRows&&i.rfx&&e.sheetRows<=i.rfx.r)break;i.t||(i.t=""),delete i.rfx,t.push(i);break;case 3072:break;case 35:s=!0;break;case 36:s=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!s||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),t}function rne(n){var e=Uo(),t=[];return Tt(e,628),Tt(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),Tt(e,632,tne(i.a)))})}),Tt(e,631),Tt(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Pi(r[0]),e:Pi(r[0])};Tt(e,635,Zte([s,i])),i.t&&i.t.length>0&&Tt(e,637,EQ(i)),Tt(e,636),delete i.iauthor})}),Tt(e,634),Tt(e,629),e.end()}var ine="application/vnd.ms-office.vbaProject";function sne(n){var e=pn.utils.cfb_new({root:"R"});return n.FullPaths.forEach(function(t,r){if(!(t.slice(-1)==="/"||!t.match(/_VBA_PROJECT_CUR/))){var i=t.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");pn.utils.cfb_add(e,i,n.FileIndex[r].content)}}),pn.write(e)}function ane(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&pn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var pM=["xlsb","xlsm","xlam","biff8","xla"];function one(){return{"!type":"dialog"}}function lne(){return{"!type":"dialog"}}function cne(){return{"!type":"macro"}}function une(){return{"!type":"macro"}}var yp=(function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,d=a.length>0?parseInt(a,10)|0:0;return o?d+=e.c:--d,c?u+=e.r:--u,i+(o?"":"$")+Ri(d)+(c?"":"$")+rs(u)}return function(i,s){return e=s,i.replace(n,t)}})(),IE=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,DE=(function(){return function(e,t){return e.replace(IE,function(r,i,s,a,o,c){var u=xE(a)-(s?0:t.c),d=gE(c)-(o?0:t.r),p=d==0?"":o?d+1:"["+d+"]",x=u==0?"":s?u+1:"["+u+"]";return i+"R"+p+"C"+x})}})();function gM(n,e){return n.replace(IE,function(t,r,i,s,a,o){return r+(i=="$"?i+s:Ri(xE(s)+e.c))+(a=="$"?a+o:rs(gE(o)+e.r))})}function hne(n,e,t){var r=qo(e),i=r.s,s=Pi(t),a={r:s.r-i.r,c:s.c-i.c};return gM(n,a)}function fne(n){return n.length!=1}function WI(n){return n.replace(/_xlfn\./g,"")}function xs(n){n.l+=1}function od(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function xM(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return vM(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=od(n),o=od(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function vM(n){var e=od(n),t=od(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function dne(n,e,t){if(t.biff<8)return vM(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=od(n),a=od(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function yM(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return mne(n);var r=n.read_shift(t&&t.biff==12?4:2),i=od(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function mne(n){var e=od(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function pne(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function gne(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return xne(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function xne(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function vne(n,e,t){var r=(n[n.l++]&96)>>5,i=xM(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function yne(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=xM(n,s,t);return[r,i,a]}function bne(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function _ne(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function wne(n,e,t){var r=(n[n.l++]&96)>>5,i=dne(n,e-1,t);return[r,i]}function Sne(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function GI(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function Tne(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function Ene(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function Ane(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function Nne(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function Cne(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function bM(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function kne(n){return n.read_shift(2),bM(n)}function Ine(n){return n.read_shift(2),bM(n)}function Dne(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=yM(n,0,t);return[r,i]}function Rne(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=gne(n,0,t);return[r,i]}function Pne(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=yM(n,0,t);return[r,i,s]}function jne(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[Mre[i],SM[i],r]}function Lne(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:One(n);return[i,(s[0]===0?SM:Ore)[s[1]]]}function One(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function Mne(n,e,t){n.l+=t&&t.biff==2?3:4}function Fne(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Bne(n){return n.l++,Hh[n.read_shift(1)]}function Vne(n){return n.l++,n.read_shift(2)}function zne(n){return n.l++,n.read_shift(1)!==0}function Une(n){return n.l++,za(n)}function Hne(n,e,t){return n.l++,hv(n,e-1,t)}function qne(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=Xi(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=Hh[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=za(n);break;case 2:t[1]=em(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function Wne(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?Z0:c_)(n));return i}function Gne(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=qne(n,t.biff);return a}function $ne(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function Kne(n,e,t){if(t.biff==5)return Yne(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function Yne(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function Xne(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Qne(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function Jne(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function Zne(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var ere=Wa,tre=Wa,nre=Wa;function dv(n,e,t){return n.l+=2,[pne(n)]}function RE(n){return n.l+=6,[]}var rre=dv,ire=RE,sre=RE,are=dv;function _M(n){return n.l+=2,[bs(n),n.read_shift(2)&1]}var ore=dv,lre=_M,cre=RE,ure=dv,hre=dv,fre=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function dre(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=fre[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function mre(n){return n.l+=2,[n.read_shift(4)]}function pre(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function gre(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function xre(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function vre(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function yre(n){return n.l+=4,[0,0]}var $I={1:{n:"PtgExp",f:Fne},2:{n:"PtgTbl",f:nre},3:{n:"PtgAdd",f:xs},4:{n:"PtgSub",f:xs},5:{n:"PtgMul",f:xs},6:{n:"PtgDiv",f:xs},7:{n:"PtgPower",f:xs},8:{n:"PtgConcat",f:xs},9:{n:"PtgLt",f:xs},10:{n:"PtgLe",f:xs},11:{n:"PtgEq",f:xs},12:{n:"PtgGe",f:xs},13:{n:"PtgGt",f:xs},14:{n:"PtgNe",f:xs},15:{n:"PtgIsect",f:xs},16:{n:"PtgUnion",f:xs},17:{n:"PtgRange",f:xs},18:{n:"PtgUplus",f:xs},19:{n:"PtgUminus",f:xs},20:{n:"PtgPercent",f:xs},21:{n:"PtgParen",f:xs},22:{n:"PtgMissArg",f:xs},23:{n:"PtgStr",f:Hne},26:{n:"PtgSheet",f:pre},27:{n:"PtgEndSheet",f:gre},28:{n:"PtgErr",f:Bne},29:{n:"PtgBool",f:zne},30:{n:"PtgInt",f:Vne},31:{n:"PtgNum",f:Une},32:{n:"PtgArray",f:Sne},33:{n:"PtgFunc",f:jne},34:{n:"PtgFuncVar",f:Lne},35:{n:"PtgName",f:$ne},36:{n:"PtgRef",f:Dne},37:{n:"PtgArea",f:vne},38:{n:"PtgMemArea",f:Xne},39:{n:"PtgMemErr",f:ere},40:{n:"PtgMemNoMem",f:tre},41:{n:"PtgMemFunc",f:Qne},42:{n:"PtgRefErr",f:Jne},43:{n:"PtgAreaErr",f:bne},44:{n:"PtgRefN",f:Rne},45:{n:"PtgAreaN",f:wne},46:{n:"PtgMemAreaN",f:xre},47:{n:"PtgMemNoMemN",f:vre},57:{n:"PtgNameX",f:Kne},58:{n:"PtgRef3d",f:Pne},59:{n:"PtgArea3d",f:yne},60:{n:"PtgRefErr3d",f:Zne},61:{n:"PtgAreaErr3d",f:_ne},255:{}},bre={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},_re={1:{n:"PtgElfLel",f:_M},2:{n:"PtgElfRw",f:ure},3:{n:"PtgElfCol",f:rre},6:{n:"PtgElfRwV",f:hre},7:{n:"PtgElfColV",f:are},10:{n:"PtgElfRadical",f:ore},11:{n:"PtgElfRadicalS",f:cre},13:{n:"PtgElfColS",f:ire},15:{n:"PtgElfColSV",f:sre},16:{n:"PtgElfRadicalLel",f:lre},25:{n:"PtgList",f:dre},29:{n:"PtgSxName",f:mre},255:{}},wre={0:{n:"PtgAttrNoop",f:yre},1:{n:"PtgAttrSemi",f:Cne},2:{n:"PtgAttrIf",f:Ane},4:{n:"PtgAttrChoose",f:Tne},8:{n:"PtgAttrGoto",f:Ene},16:{n:"PtgAttrSum",f:Mne},32:{n:"PtgAttrBaxcel",f:GI},33:{n:"PtgAttrBaxcel",f:GI},64:{n:"PtgAttrSpace",f:kne},65:{n:"PtgAttrSpaceSemi",f:Ine},128:{n:"PtgAttrIfError",f:Nne},255:{}};function mv(n,e,t,r){if(r.biff<8)return Wa(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=Gne(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=Wne(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(Wa(n,e)),s}function pv(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=$I[s]||$I[bre[s]],(s===24||s===25)&&(i=(s===24?_re:wre)[n[n.l+1]]),!i||!i.f?Wa(n,e):a.push([i.n,i.f(n,e,t)]);return a}function Sre(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var Tre={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Ere(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function wM(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function KI(n,e,t){var r=wM(n,e,t);return r=="#REF"?r:Ere(r,t)}function Ma(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],c,u,d,p=0,x=0,v,_="";if(!n[0]||!n[0][0])return"";for(var b=-1,S="",T=0,k=n[0].length;T<k;++T){var E=n[0][T];switch(E[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),b>=0){switch(n[0][b][1][0]){case 0:S=Vi(" ",n[0][b][1][1]);break;case 1:S=Vi("\r",n[0][b][1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][b][1][0])}u=u+S,b=-1}o.push(u+Tre[E[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":d=M1(E[1][1],a,i),o.push(F1(d,s));break;case"PtgRefN":d=t?M1(E[1][1],t,i):E[1][1],o.push(F1(d,s));break;case"PtgRef3d":p=E[1][1],d=M1(E[1][2],a,i),_=KI(r,p,i),o.push(_+"!"+F1(d,s));break;case"PtgFunc":case"PtgFuncVar":var j=E[1][0],F=E[1][1];j||(j=0),j&=127;var z=j==0?[]:o.slice(-j);o.length-=j,F==="User"&&(F=z.shift()),o.push(F+"("+z.join(",")+")");break;case"PtgBool":o.push(E[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(E[1]);break;case"PtgNum":o.push(String(E[1]));break;case"PtgStr":o.push('"'+E[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(E[1]);break;case"PtgAreaN":v=SI(E[1][1],t?{s:t}:a,i),o.push(p5(v,i));break;case"PtgArea":v=SI(E[1][1],a,i),o.push(p5(v,i));break;case"PtgArea3d":p=E[1][1],v=E[1][2],_=KI(r,p,i),o.push(_+"!"+p5(v,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":x=E[1][2];var A=(r.names||[])[x-1]||(r[0]||[])[x],I=A?A.Name:"SH33TJSNAME"+String(x);I&&I.slice(0,6)=="_xlfn."&&!i.xlfn&&(I=I.slice(6)),o.push(I);break;case"PtgNameX":var O=E[1][1];x=E[1][2];var B;if(i.biff<=5)O<0&&(O=-O),r[O]&&(B=r[O][x]);else{var R="";if(((r[O]||[])[0]||[])[0]==14849||(((r[O]||[])[0]||[])[0]==1025?r[O][x]&&r[O][x].itab>0&&(R=r.SheetNames[r[O][x].itab-1]+"!"):R=r.SheetNames[x-1]+"!"),r[O]&&r[O][x])R+=r[O][x].Name;else if(r[0]&&r[0][x])R+=r[0][x].Name;else{var P=(wM(r,O,i)||"").split(";;");P[x-1]?R=P[x-1]:R+="SH33TJSERRX"}o.push(R);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var V="(",Y=")";if(b>=0){switch(S="",n[0][b][1][0]){case 2:V=Vi(" ",n[0][b][1][1])+V;break;case 3:V=Vi("\r",n[0][b][1][1])+V;break;case 4:Y=Vi(" ",n[0][b][1][1])+Y;break;case 5:Y=Vi("\r",n[0][b][1][1])+Y;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][b][1][0])}b=-1}o.push(V+o.pop()+Y);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":d={c:E[1][1],r:E[1][0]};var ie={c:t.c,r:t.r};if(r.sharedf[Tn(d)]){var q=r.sharedf[Tn(d)];o.push(Ma(q,a,ie,r,i))}else{var Q=!1;for(c=0;c!=r.arrayf.length;++c)if(u=r.arrayf[c],!(d.c<u[0].s.c||d.c>u[0].e.c)&&!(d.r<u[0].s.r||d.r>u[0].e.r)){o.push(Ma(u[1],a,ie,r,i)),Q=!0;break}Q||o.push(E[1])}break;case"PtgArray":o.push("{"+Sre(E[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":b=T;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+E[1].idx+"[#"+E[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(E));default:throw new Error("Unrecognized Formula Token: "+String(E))}var se=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&b>=0&&se.indexOf(n[0][T][0])==-1){E=n[0][b];var J=!0;switch(E[1][0]){case 4:J=!1;case 0:S=Vi(" ",E[1][1]);break;case 5:J=!1;case 1:S=Vi("\r",E[1][1]);break;default:if(S="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+E[1][0])}o.push((J?S:"")+o.pop()+(J?"":S)),b=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function Are(n,e,t){var r=n.l+e,i=t.biff==2?1:2,s,a=n.read_shift(i);if(a==65535)return[[],Wa(n,e-2)];var o=pv(n,a,t);return e!==a+i&&(s=mv(n,e-a-i,o,t)),n.l=r,[o,s]}function Nre(n,e,t){var r=n.l+e,i=t.biff==2?1:2,s,a=n.read_shift(i);if(a==65535)return[[],Wa(n,e-2)];var o=pv(n,a,t);return e!==a+i&&(s=mv(n,e-a-i,o,t)),n.l=r,[o,s]}function Cre(n,e,t,r){var i=n.l+e,s=pv(n,r,t),a;return i!==n.l&&(a=mv(n,i-n.l,s,t)),[s,a]}function kre(n,e,t){var r=n.l+e,i,s=n.read_shift(2),a=pv(n,s,t);return s==65535?[[],Wa(n,e-2)]:(e!==s+2&&(i=mv(n,r-s-2,a,t)),[a,i])}function Ire(n){var e;if(Sh(n,n.l+6)!==65535)return[za(n),"n"];switch(n[n.l]){case 0:return n.l+=8,["String","s"];case 1:return e=n[n.l+2]===1,n.l+=8,[e,"b"];case 2:return e=n[n.l+2],n.l+=8,[e,"e"];case 3:return n.l+=8,["","s"]}return[]}function Dre(n){if(n==null){var e=ut(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return F0(n);return F0(0)}function b5(n,e,t){var r=n.l+e,i=Bu(n);t.biff==2&&++n.l;var s=Ire(n),a=n.read_shift(1);t.biff!=2&&(n.read_shift(1),t.biff>=5&&n.read_shift(4));var o=Nre(n,r-n.l,t);return{cell:i,val:s[0],formula:o,shared:a>>3&1,tt:s[1]}}function Rre(n,e,t,r,i){var s=V0(e,t,i),a=Dre(n.v),o=ut(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=ut(n.bf.length),d=0;d<n.bf.length;++d)u[d]=n.bf[d];var p=Qs([s,a,o,u]);return p}function u_(n,e,t){var r=n.read_shift(4),i=pv(n,r,t),s=n.read_shift(4),a=s>0?mv(n,s,i,t):null;return[i,a]}var Pre=u_,h_=u_,jre=u_,Lre=u_,Ore={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},SM={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Mre={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function YI(n){return n.slice(0,3)=="of:"&&(n=n.slice(3)),n.charCodeAt(0)==61&&(n=n.slice(1),n.charCodeAt(0)==61&&(n=n.slice(1))),n=n.replace(/COM\.MICROSOFT\./g,""),n=n.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,t){return t.replace(/\./g,"")}),n=n.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),n.replace(/[;~]/g,",").replace(/\|/g,";")}function Fre(n){var e="of:="+n.replace(IE,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function _5(n){var e=n.split(":"),t=e[0].split(".")[0];return[t,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function Bre(n){return n.replace(/\./,"!")}var V1={},bp={},z1=typeof Map<"u";function PE(n,e,t){var r=0,i=n.length;if(t){if(z1?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=z1?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(z1?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function f_(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Ba=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=kx(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=db(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function g0(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(t=[1,1,1,1,.5,.5]),n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Sd(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){kh(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function TM(n,e,t,r,i,s){try{r.cellNF&&(n.z=wn[e])}catch(o){if(r.WTF)throw o}if(!(n.t==="z"&&!r.cellStyles)){if(n.t==="d"&&typeof n.v=="string"&&(n.v=fi(n.v)),(!r||r.cellText!==!1)&&n.t!=="z")try{if(wn[e]==null&&kh(OX[e]||"General",e),n.t==="e")n.w=n.w||Hh[n.v];else if(e===0)if(n.t==="n")(n.v|0)===n.v?n.w=n.v.toString(10):n.w=wx(n.v);else if(n.t==="d"){var a=Bs(n.v);(a|0)===a?n.w=a.toString(10):n.w=wx(a)}else{if(n.v===void 0)return"";n.w=O0(n.v,bp)}else n.t==="d"?n.w=Zl(e,Bs(n.v),bp):n.w=Zl(e,n.v,bp)}catch(o){if(r.WTF)throw o}if(r.cellStyles&&t!=null)try{n.s=s.Fills[t],n.s.fgColor&&n.s.fgColor.theme&&!n.s.fgColor.rgb&&(n.s.fgColor.rgb=fb(i.themeElements.clrScheme[n.s.fgColor.theme].rgb,n.s.fgColor.tint||0),r.WTF&&(n.s.fgColor.raw_rgb=i.themeElements.clrScheme[n.s.fgColor.theme].rgb)),n.s.bgColor&&n.s.bgColor.theme&&(n.s.bgColor.rgb=fb(i.themeElements.clrScheme[n.s.bgColor.theme].rgb,n.s.bgColor.tint||0),r.WTF&&(n.s.bgColor.raw_rgb=i.themeElements.clrScheme[n.s.bgColor.theme].rgb))}catch(o){if(r.WTF&&s.Fills)throw o}}}function Vre(n,e,t){if(n&&n["!ref"]){var r=dr(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function zre(n,e){var t=dr(e);t.s.r<=t.e.r&&t.s.c<=t.e.c&&t.s.r>=0&&t.s.c>=0&&(n["!ref"]=Ln(t))}var Ure=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Hre=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,qre=/<(?:\w:)?hyperlink [^>]*>/mg,Wre=/"(\w*:\w*)"/,Gre=/<(?:\w:)?col\b[^>]*[\/]?>/g,$re=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,Kre=/<(?:\w:)?pageMargins[^>]*\/>/g,EM=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Yre=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Xre=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function Qre(n,e,t,r,i,s,a){if(!n)return n;r||(r={"!id":{}});var o=e.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",d="",p=n.match(Hre);p?(u=n.slice(0,p.index),d=n.slice(p.index+p[0].length)):u=d=n;var x=u.match(EM);x?jE(x[0],o,i,t):(x=u.match(Yre))&&Zre(x[0],x[1]||"",o,i,t);var v=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(v>0){var _=u.slice(v,v+50).match(Wre);_&&zre(o,_[1])}var b=u.match(Xre);b&&b[1]&&fie(b[1],i);var S=[];if(e.cellStyles){var T=u.match(Gre);T&&oie(S,T)}p&&pie(p[1],o,e,c,s,a);var k=d.match($re);k&&(o["!autofilter"]=cie(k[0]));var E=[],j=d.match(Ure);if(j)for(v=0;v!=j.length;++v)E[v]=dr(j[v].slice(j[v].indexOf('"')+1));var F=d.match(qre);F&&iie(o,F,r);var z=d.match(Kre);if(z&&(o["!margins"]=sie(An(z[0]))),!o["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(o["!ref"]=Ln(c)),e.sheetRows>0&&o["!ref"]){var A=dr(o["!ref"]);e.sheetRows<=+A.e.r&&(A.e.r=e.sheetRows-1,A.e.r>c.e.r&&(A.e.r=c.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>c.e.c&&(A.e.c=c.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),o["!fullref"]=o["!ref"],o["!ref"]=Ln(A))}return S.length>0&&(o["!cols"]=S),E.length>0&&(o["!merges"]=E),o}function Jre(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Ln(n[t])+'"/>';return e+"</mergeCells>"}function jE(n,e,t,r){var i=An(n);t.Sheets[r]||(t.Sheets[r]={}),i.codeName&&(t.Sheets[r].CodeName=fr(Gr(i.codeName)))}function Zre(n,e,t,r,i){jE(n.slice(0,n.indexOf(">")),t,r,i)}function eie(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[t];try{e.Workbook&&(c=e.Workbook.Sheets[t].CodeName||c)}catch{}s=!0,a.codeName=Au(Or(c))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+Bt("outlinePr",null,u)}!s&&!o||(i[i.length]=Bt("sheetPr",o,a))}var tie=["objects","scenarios","selectLockedCells","selectUnlockedCells"],nie=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function rie(n){var e={sheet:1};return tie.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),nie.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=NE(n.password).toString(16).toUpperCase()),Bt("sheetProtection",null,e)}function iie(n,e,t){for(var r=Array.isArray(n),i=0;i!=e.length;++i){var s=An(Gr(e[i]),!0);if(!s.ref)return;var a=((t||{})["!id"]||[])[s.id];a?(s.Target=a.Target,s.location&&(s.Target+="#"+fr(s.location))):(s.Target="#"+fr(s.location),a={Target:s.Target,TargetMode:"Internal"}),s.Rel=a,s.tooltip&&(s.Tooltip=s.tooltip,delete s.tooltip);for(var o=dr(s.ref),c=o.s.r;c<=o.e.r;++c)for(var u=o.s.c;u<=o.e.c;++u){var d=Tn({c:u,r:c});r?(n[c]||(n[c]=[]),n[c][u]||(n[c][u]={t:"z",v:void 0}),n[c][u].l=s):(n[d]||(n[d]={t:"z",v:void 0}),n[d].l=s)}}}function sie(n){var e={};return["left","right","top","bottom","header","footer"].forEach(function(t){n[t]&&(e[t]=parseFloat(n[t]))}),e}function aie(n){return g0(n),Bt("pageMargins",null,n)}function oie(n,e){for(var t=!1,r=0;r!=e.length;++r){var i=An(e[r],!0);i.hidden&&(i.hidden=ci(i.hidden));var s=parseInt(i.min,10)-1,a=parseInt(i.max,10)-1;for(i.outlineLevel&&(i.level=+i.outlineLevel||0),delete i.min,delete i.max,i.width=+i.width,!t&&i.width&&(t=!0,CE(i.width)),ad(i);s<=a;)n[s++]=di(i)}}function lie(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=Bt("col",null,f_(i,r)));return t[t.length]="</cols>",t.join("")}function cie(n){var e={ref:(n.match(/ref="([^"]*)"/)||[])[1]};return e}function uie(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Ln(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=qo(i);a.s.r==a.e.r&&(a.e.r=qo(e["!ref"]).e.r,i=Ln(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),Bt("autoFilter",null,{ref:i})}var hie=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function fie(n,e){e.Views||(e.Views=[{}]),(n.match(hie)||[]).forEach(function(t,r){var i=An(t);e.Views[r]||(e.Views[r]={}),+i.zoomScale&&(e.Views[r].zoom=+i.zoomScale),ci(i.rightToLeft)&&(e.Views[r].RTL=!0)})}function die(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),Bt("sheetViews",Bt("sheetView",null,i),{})}function mie(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=Hh[n.v];break;case"d":r&&r.cellDates?i=fi(n.v,-1).toISOString():(n=di(n),n.t="n",i=""+(n.v=Bs(fi(n.v)))),typeof n.z>"u"&&(n.z=wn[14]);break;default:i=n.v;break}var o=pa("v",Or(i)),c={r:e},u=Sd(r.cellXfs,n,r);switch(u!==0&&(c.s=u),n.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=pa("v",""+PE(r.Strings,n.v,r.revStrings)),c.t="s";break}c.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var d=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=Bt("f",Or(n.f),d)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(c.cm=1),Bt("c",o,c)}var pie=(function(){var n=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,t=/r=["']([^"']*)["']/,r=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,i=/ref=["']([^"']*)["']/,s=Sx("v"),a=Sx("f");return function(c,u,d,p,x,v){for(var _=0,b="",S=[],T=[],k=0,E=0,j=0,F="",z,A,I=0,O=0,B,R,P=0,V=0,Y=Array.isArray(v.CellXf),ie,q=[],Q=[],se=Array.isArray(u),J=[],me={},re=!1,M=!!d.sheetStubs,W=c.split(e),K=0,G=W.length;K!=G;++K){b=W[K].trim();var te=b.length;if(te!==0){var he=0;e:for(_=0;_<te;++_)switch(b[_]){case">":if(b[_-1]!="/"){++_;break e}if(d&&d.cellStyles){if(A=An(b.slice(he,_),!0),I=A.r!=null?parseInt(A.r,10):I+1,O=-1,d.sheetRows&&d.sheetRows<I)continue;me={},re=!1,A.ht&&(re=!0,me.hpt=parseFloat(A.ht),me.hpx=Gp(me.hpt)),A.hidden=="1"&&(re=!0,me.hidden=!0),A.outlineLevel!=null&&(re=!0,me.level=+A.outlineLevel),re&&(J[I-1]=me)}break;case"<":he=_;break}if(he>=_)break;if(A=An(b.slice(he,_),!0),I=A.r!=null?parseInt(A.r,10):I+1,O=-1,!(d.sheetRows&&d.sheetRows<I)){p.s.r>I-1&&(p.s.r=I-1),p.e.r<I-1&&(p.e.r=I-1),d&&d.cellStyles&&(me={},re=!1,A.ht&&(re=!0,me.hpt=parseFloat(A.ht),me.hpx=Gp(me.hpt)),A.hidden=="1"&&(re=!0,me.hidden=!0),A.outlineLevel!=null&&(re=!0,me.level=+A.outlineLevel),re&&(J[I-1]=me)),S=b.slice(_).split(n);for(var ye=0;ye!=S.length&&S[ye].trim().charAt(0)=="<";++ye);for(S=S.slice(ye),_=0;_!=S.length;++_)if(b=S[_].trim(),b.length!==0){if(T=b.match(t),k=_,E=0,j=0,b="<c "+(b.slice(0,1)=="<"?">":"")+b,T!=null&&T.length===2){for(k=0,F=T[1],E=0;E!=F.length&&!((j=F.charCodeAt(E)-64)<1||j>26);++E)k=26*k+j;--k,O=k}else++O;for(E=0;E!=b.length&&b.charCodeAt(E)!==62;++E);if(++E,A=An(b.slice(0,E),!0),A.r||(A.r=Tn({r:I-1,c:O})),F=b.slice(E),z={t:""},(T=F.match(s))!=null&&T[1]!==""&&(z.v=fr(T[1])),d.cellFormula){if((T=F.match(a))!=null&&T[1]!==""){if(z.f=fr(Gr(T[1])).replace(/\r\n/g,`
`),d.xlfn||(z.f=WI(z.f)),T[0].indexOf('t="array"')>-1)z.F=(F.match(i)||[])[1],z.F.indexOf(":")>-1&&q.push([dr(z.F),z.F]);else if(T[0].indexOf('t="shared"')>-1){R=An(T[0]);var be=fr(Gr(T[1]));d.xlfn||(be=WI(be)),Q[parseInt(R.si,10)]=[R,be,A.r]}}else(T=F.match(/<f[^>]*\/>/))&&(R=An(T[0]),Q[R.si]&&(z.f=hne(Q[R.si][1],Q[R.si][2],A.r)));var Ce=Pi(A.r);for(E=0;E<q.length;++E)Ce.r>=q[E][0].s.r&&Ce.r<=q[E][0].e.r&&Ce.c>=q[E][0].s.c&&Ce.c<=q[E][0].e.c&&(z.F=q[E][1])}if(A.t==null&&z.v===void 0)if(z.f||z.F)z.v=0,z.t="n";else if(M)z.t="z";else continue;else z.t=A.t||"n";switch(p.s.c>O&&(p.s.c=O),p.e.c<O&&(p.e.c=O),z.t){case"n":if(z.v==""||z.v==null){if(!M)continue;z.t="z"}else z.v=parseFloat(z.v);break;case"s":if(typeof z.v>"u"){if(!M)continue;z.t="z"}else B=V1[parseInt(z.v,10)],z.v=B.t,z.r=B.r,d.cellHTML&&(z.h=B.h);break;case"str":z.t="s",z.v=z.v!=null?Gr(z.v):"",d.cellHTML&&(z.h=fE(z.v));break;case"inlineStr":T=F.match(r),z.t="s",T!=null&&(B=AE(T[1]))?(z.v=B.t,d.cellHTML&&(z.h=B.h)):z.v="";break;case"b":z.v=ci(z.v);break;case"d":d.cellDates?z.v=fi(z.v,1):(z.v=Bs(fi(z.v,1)),z.t="n");break;case"e":(!d||d.cellText!==!1)&&(z.w=z.v),z.v=NO[z.v];break}if(P=V=0,ie=null,Y&&A.s!==void 0&&(ie=v.CellXf[A.s],ie!=null&&(ie.numFmtId!=null&&(P=ie.numFmtId),d.cellStyles&&ie.fillId!=null&&(V=ie.fillId))),TM(z,P,V,d,x,v),d.cellDates&&Y&&z.t=="n"&&ag(wn[P])&&(z.t="d",z.v=l_(z.v)),A.cm&&d.xlmeta){var ke=(d.xlmeta.Cell||[])[+A.cm-1];ke&&ke.type=="XLDAPR"&&(z.D=!0)}if(se){var oe=Pi(A.r);u[oe.r]||(u[oe.r]=[]),u[oe.r][oe.c]=z}else u[A.r]=z}}}}J.length>0&&(u["!rows"]=J)}})();function gie(n,e,t,r){var i=[],s=[],a=dr(n["!ref"]),o="",c,u="",d=[],p=0,x=0,v=n["!rows"],_=Array.isArray(n),b={r:u},S,T=-1;for(x=a.s.c;x<=a.e.c;++x)d[x]=Ri(x);for(p=a.s.r;p<=a.e.r;++p){for(s=[],u=rs(p),x=a.s.c;x<=a.e.c;++x){c=d[x]+u;var k=_?(n[p]||[])[x]:n[c];k!==void 0&&(o=mie(k,c,n,e))!=null&&s.push(o)}(s.length>0||v&&v[p])&&(b={r:u},v&&v[p]&&(S=v[p],S.hidden&&(b.hidden=1),T=-1,S.hpx?T=Ix(S.hpx):S.hpt&&(T=S.hpt),T>-1&&(b.ht=T,b.customHeight=1),S.level&&(b.outlineLevel=S.level)),i[i.length]=Bt("row",s.join(""),b))}if(v)for(;p<v.length;++p)v&&v[p]&&(b={r:p+1},S=v[p],S.hidden&&(b.hidden=1),T=-1,S.hpx?T=Ix(S.hpx):S.hpt&&(T=S.hpt),T>-1&&(b.ht=T,b.customHeight=1),S.level&&(b.outlineLevel=S.level),i[i.length]=Bt("row","",b));return i.join("")}function AM(n,e,t,r){var i=[os,Bt("worksheet",null,{xmlns:Y0[0],"xmlns:r":Ls.r})],s=t.SheetNames[n],a=0,o="",c=t.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",d=dr(u);if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575),u=Ln(d)}r||(r={}),c["!comments"]=[];var p=[];eie(c,t,n,e,i),i[i.length]=Bt("dimension",null,{ref:u}),i[i.length]=die(c,e,n,t),e.sheetFormat&&(i[i.length]=Bt("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=lie(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=gie(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=rie(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=uie(c["!autofilter"],c,t,n)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=Jre(c["!merges"]));var x=-1,v,_=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(b){b[1].Target&&(v={ref:b[0]},b[1].Target.charAt(0)!="#"&&(_=Dr(r,-1,Or(b[1].Target).replace(/#.*$/,""),qn.HLINK),v["r:id"]="rId"+_),(x=b[1].Target.indexOf("#"))>-1&&(v.location=Or(b[1].Target.slice(x+1))),b[1].Tooltip&&(v.tooltip=Or(b[1].Tooltip)),i[i.length]=Bt("hyperlink",null,v))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=aie(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=pa("ignoredErrors",Bt("ignoredError",null,{numberStoredAsText:1,sqref:u}))),p.length>0&&(_=Dr(r,-1,"../drawings/drawing"+(n+1)+".xml",qn.DRAW),i[i.length]=Bt("drawing",null,{"r:id":"rId"+_}),c["!drawing"]=p),c["!comments"].length>0&&(_=Dr(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",qn.VML),i[i.length]=Bt("legacyDrawing",null,{"r:id":"rId"+_}),c["!legacy"]=_),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function xie(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function vie(n,e,t){var r=ut(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=Ix(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,c=r.l;r.l+=4;for(var u={r:n,c:0},d=0;d<16;++d)if(!(e.s.c>d+1<<10||e.e.c<d<<10)){for(var p=-1,x=-1,v=d<<10;v<d+1<<10;++v){u.c=v;var _=Array.isArray(t)?(t[u.r]||[])[u.c]:t[Tn(u)];_&&(p<0&&(p=v),x=v)}p<0||(++o,r.write_shift(4,p),r.write_shift(4,x))}var b=r.l;return r.l=c,r.write_shift(4,o),r.l=b,r.length>r.l?r.slice(0,r.l):r}function yie(n,e,t,r){var i=vie(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&Tt(n,0,i)}var bie=Z0,_ie=cg;function wie(){}function Sie(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=AQ(n),t}function Tie(n,e,t){t==null&&(t=ut(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return cb({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),wO(n,t),t.slice(0,t.l)}function Eie(n){var e=ec(n);return[e]}function Aie(n,e,t){return t==null&&(t=ut(8)),X0(e,t)}function Nie(n){var e=Q0(n);return[e]}function Cie(n,e,t){return t==null&&(t=ut(4)),J0(e,t)}function kie(n){var e=ec(n),t=n.read_shift(1);return[e,t,"b"]}function Iie(n,e,t){return t==null&&(t=ut(9)),X0(e,t),t.write_shift(1,n.v?1:0),t}function Die(n){var e=Q0(n),t=n.read_shift(1);return[e,t,"b"]}function Rie(n,e,t){return t==null&&(t=ut(5)),J0(e,t),t.write_shift(1,n.v?1:0),t}function Pie(n){var e=ec(n),t=n.read_shift(1);return[e,t,"e"]}function jie(n,e,t){return t==null&&(t=ut(9)),X0(e,t),t.write_shift(1,n.v),t}function Lie(n){var e=Q0(n),t=n.read_shift(1);return[e,t,"e"]}function Oie(n,e,t){return t==null&&(t=ut(8)),J0(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function Mie(n){var e=ec(n),t=n.read_shift(4);return[e,t,"s"]}function Fie(n,e,t){return t==null&&(t=ut(12)),X0(e,t),t.write_shift(4,e.v),t}function Bie(n){var e=Q0(n),t=n.read_shift(4);return[e,t,"s"]}function Vie(n,e,t){return t==null&&(t=ut(8)),J0(e,t),t.write_shift(4,e.v),t}function zie(n){var e=ec(n),t=za(n);return[e,t,"n"]}function Uie(n,e,t){return t==null&&(t=ut(16)),X0(e,t),F0(n.v,t),t}function NM(n){var e=Q0(n),t=za(n);return[e,t,"n"]}function Hie(n,e,t){return t==null&&(t=ut(12)),J0(e,t),F0(n.v,t),t}function qie(n){var e=ec(n),t=_E(n);return[e,t,"n"]}function Wie(n,e,t){return t==null&&(t=ut(12)),X0(e,t),SO(n.v,t),t}function Gie(n){var e=Q0(n),t=_E(n);return[e,t,"n"]}function $ie(n,e,t){return t==null&&(t=ut(8)),J0(e,t),SO(n.v,t),t}function Kie(n){var e=ec(n),t=vE(n);return[e,t,"is"]}function Yie(n){var e=ec(n),t=qa(n);return[e,t,"str"]}function Xie(n,e,t){return t==null&&(t=ut(12+4*n.v.length)),X0(e,t),Js(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Qie(n){var e=Q0(n),t=qa(n);return[e,t,"str"]}function Jie(n,e,t){return t==null&&(t=ut(8+4*n.v.length)),J0(e,t),Js(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Zie(n,e,t){var r=n.l+e,i=ec(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=h_(n,r-n.l,t);a[3]=Ma(o,null,i,t.supbooks,t)}else n.l=r;return a}function ese(n,e,t){var r=n.l+e,i=ec(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=h_(n,r-n.l,t);a[3]=Ma(o,null,i,t.supbooks,t)}else n.l=r;return a}function tse(n,e,t){var r=n.l+e,i=ec(n);i.r=t["!row"];var s=za(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=h_(n,r-n.l,t);a[3]=Ma(o,null,i,t.supbooks,t)}else n.l=r;return a}function nse(n,e,t){var r=n.l+e,i=ec(n);i.r=t["!row"];var s=qa(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=h_(n,r-n.l,t);a[3]=Ma(o,null,i,t.supbooks,t)}else n.l=r;return a}var rse=Z0,ise=cg;function sse(n,e){return e==null&&(e=ut(4)),e.write_shift(4,n),e}function ase(n,e){var t=n.l+e,r=Z0(n),i=yE(n),s=qa(n),a=qa(n),o=qa(n);n.l=t;var c={rfx:r,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function ose(n,e){var t=ut(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));cg({s:Pi(n[0]),e:Pi(n[0])},t),bE("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return Js(i||"",t),Js(n[1].Tooltip||"",t),Js("",t),t.slice(0,t.l)}function lse(){}function cse(n,e,t){var r=n.l+e,i=TO(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=Pre(n,r-n.l,t);a[1]=o}else n.l=r;return a}function use(n,e,t){var r=n.l+e,i=Z0(n),s=[i];if(t.cellFormula){var a=Lre(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function hse(n,e,t){t==null&&(t=ut(18));var r=f_(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var CM=["left","right","top","bottom","header","footer"];function fse(n){var e={};return CM.forEach(function(t){e[t]=za(n)}),e}function dse(n,e){return e==null&&(e=ut(48)),g0(n),CM.forEach(function(t){F0(n[t],e)}),e}function mse(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function pse(n,e,t){t==null&&(t=ut(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function gse(n){var e=ut(24);return e.write_shift(4,4),e.write_shift(4,1),cg(n,e),e}function xse(n,e){return e==null&&(e=ut(66)),e.write_shift(2,n.password?NE(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function vse(){}function yse(){}function bse(n,e,t,r,i,s,a){if(!n)return n;var o=e||{};r||(r={"!id":{}});var c=o.dense?[]:{},u,d={s:{r:2e6,c:2e6},e:{r:0,c:0}},p=!1,x=!1,v,_,b,S,T,k,E,j,F,z=[];o.biff=12,o["!row"]=0;var A=0,I=!1,O=[],B={},R=o.supbooks||i.supbooks||[[]];if(R.sharedf=B,R.arrayf=O,R.SheetNames=i.SheetNames||i.Sheets.map(function(se){return se.name}),!o.supbooks&&(o.supbooks=R,i.Names))for(var P=0;P<i.Names.length;++P)R[0][P+1]=i.Names[P];var V=[],Y=[],ie=!1;Dx[16]={n:"BrtShortReal",f:NM};var q;if(Uh(n,function(J,me,re){if(!x)switch(re){case 148:u=J;break;case 0:v=J,o.sheetRows&&o.sheetRows<=v.r&&(x=!0),j=rs(S=v.r),o["!row"]=v.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=Gp(J.hpt)),Y[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(_={t:J[2]},J[2]){case"n":_.v=J[1];break;case"s":E=V1[J[1]],_.v=E.t,_.r=E.r;break;case"b":_.v=!!J[1];break;case"e":_.v=J[1],o.cellText!==!1&&(_.w=Hh[_.v]);break;case"str":_.t="s",_.v=J[1];break;case"is":_.t="s",_.v=J[1].t;break}if((b=a.CellXf[J[0].iStyleRef])&&TM(_,b.numFmtId,null,o,s,a),T=J[0].c==-1?T+1:J[0].c,o.dense?(c[S]||(c[S]=[]),c[S][T]=_):c[Ri(T)+j]=_,o.cellFormula){for(I=!1,A=0;A<O.length;++A){var M=O[A];v.r>=M[0].s.r&&v.r<=M[0].e.r&&T>=M[0].s.c&&T<=M[0].e.c&&(_.F=Ln(M[0]),I=!0)}!I&&J.length>3&&(_.f=J[3])}if(d.s.r>v.r&&(d.s.r=v.r),d.s.c>T&&(d.s.c=T),d.e.r<v.r&&(d.e.r=v.r),d.e.c<T&&(d.e.c=T),o.cellDates&&b&&_.t=="n"&&ag(wn[b.numFmtId])){var W=a0(_.v);W&&(_.t="d",_.v=new Date(W.y,W.m-1,W.d,W.H,W.M,W.S,W.u))}q&&(q.type=="XLDAPR"&&(_.D=!0),q=void 0);break;case 1:case 12:if(!o.sheetStubs||p)break;_={t:"z",v:void 0},T=J[0].c==-1?T+1:J[0].c,o.dense?(c[S]||(c[S]=[]),c[S][T]=_):c[Ri(T)+j]=_,d.s.r>v.r&&(d.s.r=v.r),d.s.c>T&&(d.s.c=T),d.e.r<v.r&&(d.e.r=v.r),d.e.c<T&&(d.e.c=T),q&&(q.type=="XLDAPR"&&(_.D=!0),q=void 0);break;case 176:z.push(J);break;case 49:q=((o.xlmeta||{}).Cell||[])[J-1];break;case 494:var K=r["!id"][J.relId];for(K?(J.Target=K.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=K):J.relId==""&&(J.Target="#"+J.loc),S=J.rfx.s.r;S<=J.rfx.e.r;++S)for(T=J.rfx.s.c;T<=J.rfx.e.c;++T)o.dense?(c[S]||(c[S]=[]),c[S][T]||(c[S][T]={t:"z",v:void 0}),c[S][T].l=J):(k=Tn({c:T,r:S}),c[k]||(c[k]={t:"z",v:void 0}),c[k].l=J);break;case 426:if(!o.cellFormula)break;O.push(J),F=o.dense?c[S][T]:c[Ri(T)+j],F.f=Ma(J[1],d,{r:v.r,c:T},R,o),F.F=Ln(J[0]);break;case 427:if(!o.cellFormula)break;B[Tn(J[0].s)]=J[1],F=o.dense?c[S][T]:c[Ri(T)+j],F.f=Ma(J[1],d,{r:v.r,c:T},R,o);break;case 60:if(!o.cellStyles)break;for(;J.e>=J.s;)V[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},ie||(ie=!0,CE(J.w/256)),ad(V[J.e+1]);break;case 161:c["!autofilter"]={ref:Ln(J)};break;case 476:c["!margins"]=J;break;case 147:i.Sheets[t]||(i.Sheets[t]={}),J.name&&(i.Sheets[t].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:i.Views||(i.Views=[{}]),i.Views[0]||(i.Views[0]={}),J.RTL&&(i.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:p=!0;break;case 36:p=!1;break;case 37:p=!0;break;case 38:p=!1;break;default:if(!me.T){if(!p||o.WTF)throw new Error("Unexpected record 0x"+re.toString(16))}}},o),delete o.supbooks,delete o["!row"],!c["!ref"]&&(d.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=Ln(u||d)),o.sheetRows&&c["!ref"]){var Q=dr(c["!ref"]);o.sheetRows<=+Q.e.r&&(Q.e.r=o.sheetRows-1,Q.e.r>d.e.r&&(Q.e.r=d.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>d.e.c&&(Q.e.c=d.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=Ln(Q))}return z.length>0&&(c["!merges"]=z),V.length>0&&(c["!cols"]=V),Y.length>0&&(c["!rows"]=Y),c}function _se(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=di(e),e.z=e.z||wn[14],e.v=Bs(fi(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r:t,c:r};switch(c.s=Sd(i.cellXfs,e,i),e.l&&s["!links"].push([Tn(c),e.l]),e.c&&s["!comments"].push([Tn(c),e.c]),e.t){case"s":case"str":return i.bookSST?(o=PE(i.Strings,e.v,i.revStrings),c.t="s",c.v=o,a?Tt(n,18,Vie(e,c)):Tt(n,7,Fie(e,c))):(c.t="str",a?Tt(n,17,Jie(e,c)):Tt(n,6,Xie(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?Tt(n,13,$ie(e,c)):Tt(n,2,Wie(e,c)):a?Tt(n,16,Hie(e,c)):Tt(n,5,Uie(e,c)),!0;case"b":return c.t="b",a?Tt(n,15,Rie(e,c)):Tt(n,4,Iie(e,c)),!0;case"e":return c.t="e",a?Tt(n,14,Oie(e,c)):Tt(n,3,jie(e,c)),!0}return a?Tt(n,12,Cie(e,c)):Tt(n,1,Aie(e,c)),!0}function wse(n,e,t,r){var i=dr(e["!ref"]||"A1"),s,a="",o=[];Tt(n,145);var c=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var d=i.s.r;d<=u;++d){a=rs(d),yie(n,e,i,d);var p=!1;if(d<=i.e.r)for(var x=i.s.c;x<=i.e.c;++x){d===i.s.r&&(o[x]=Ri(x)),s=o[x]+a;var v=c?(e[d]||[])[x]:e[s];if(!v){p=!1;continue}p=_se(n,v,d,x,r,e,p)}}Tt(n,146)}function Sse(n,e){!e||!e["!merges"]||(Tt(n,177,sse(e["!merges"].length)),e["!merges"].forEach(function(t){Tt(n,176,ise(t))}),Tt(n,178))}function Tse(n,e){!e||!e["!cols"]||(Tt(n,390),e["!cols"].forEach(function(t,r){t&&Tt(n,60,hse(r,t))}),Tt(n,391))}function Ese(n,e){!e||!e["!ref"]||(Tt(n,648),Tt(n,649,gse(dr(e["!ref"]))),Tt(n,650))}function Ase(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=Dr(t,-1,r[1].Target.replace(/#.*$/,""),qn.HLINK);Tt(n,494,ose(r,i))}}),delete e["!links"]}function Nse(n,e,t,r){if(e["!comments"].length>0){var i=Dr(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",qn.VML);Tt(n,551,bE("rId"+i)),e["!legacy"]=i}}function Cse(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Ln(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=qo(s);o.s.r==o.e.r&&(o.e.r=qo(e["!ref"]).e.r,s=Ln(o));for(var c=0;c<a.length;++c){var u=a[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),Tt(n,161,cg(dr(s))),Tt(n,162)}}function kse(n,e,t){Tt(n,133),Tt(n,137,pse(e,t)),Tt(n,138),Tt(n,134)}function Ise(n,e){e["!protect"]&&Tt(n,535,xse(e["!protect"]))}function Dse(n,e,t,r){var i=Uo(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var c=dr(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],Tt(i,129),(t.vbaraw||a["!outline"])&&Tt(i,147,Tie(o,a["!outline"])),Tt(i,148,_ie(c)),kse(i,a,t.Workbook),Tse(i,a),wse(i,a,n,e),Ise(i,a),Cse(i,a,t,n),Sse(i,a),Ase(i,a,r),a["!margins"]&&Tt(i,476,dse(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Ese(i,a),Nse(i,a,n,r),Tt(i,130),i.end()}function Rse(n){var e=[],t=n.match(/^<c:numCache>/),r;(n.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(s){var a=s.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);a&&(e[+a[1]]=t?+a[2]:a[2])});var i=fr((n.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(n.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(s){r=s.replace(/<.*?>/g,"")}),[e,i,r]}function Pse(n,e,t,r,i,s){var a=s||{"!type":"chart"};if(!n)return s;var o=0,c=0,u="A",d={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(n.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(p){var x=Rse(p);d.s.r=d.s.c=0,d.e.c=o,u=Ri(o),x[0].forEach(function(v,_){a[u+rs(_)]={t:"n",v,z:x[1]},c=_}),d.e.r<c&&(d.e.r=c),++o}),o>0&&(a["!ref"]=Ln(d)),a}function jse(n,e,t,r,i){if(!n)return n;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a,o=n.match(EM);return o&&jE(o[0],s,i,t),(a=n.match(/drawing r:id="(.*?)"/))&&(s["!rel"]=a[1]),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}function Lse(n,e){n.l+=10;var t=qa(n);return{name:t}}function Ose(n,e,t,r,i){if(!n)return n;r||(r={"!id":{}});var s={"!type":"chart","!drawel":null,"!rel":""},a=!1;return Uh(n,function(c,u,d){switch(d){case 550:s["!rel"]=c;break;case 651:i.Sheets[t]||(i.Sheets[t]={}),c.name&&(i.Sheets[t].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:a=!0;break;case 36:a=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!a||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}},e),r["!id"][s["!rel"]]&&(s["!drawel"]=r["!id"][s["!rel"]]),s}var LE=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Mse=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Fse=[],Bse=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function XI(n,e){for(var t=0;t!=n.length;++t)for(var r=n[t],i=0;i!=e.length;++i){var s=e[i];if(r[s[0]]==null)r[s[0]]=s[1];else switch(s[2]){case"bool":typeof r[s[0]]=="string"&&(r[s[0]]=ci(r[s[0]]));break;case"int":typeof r[s[0]]=="string"&&(r[s[0]]=parseInt(r[s[0]],10));break}}}function QI(n,e){for(var t=0;t!=e.length;++t){var r=e[t];if(n[r[0]]==null)n[r[0]]=r[1];else switch(r[2]){case"bool":typeof n[r[0]]=="string"&&(n[r[0]]=ci(n[r[0]]));break;case"int":typeof n[r[0]]=="string"&&(n[r[0]]=parseInt(n[r[0]],10));break}}}function kM(n){QI(n.WBProps,LE),QI(n.CalcPr,Bse),XI(n.WBView,Mse),XI(n.Sheets,Fse),bp.date1904=ci(n.WBProps.date1904)}function Vse(n){return!n.Workbook||!n.Workbook.WBProps?"false":ci(n.Workbook.WBProps.date1904)?"true":"false"}var zse="][*?/\\".split("");function IM(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return zse.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Use(n,e,t){n.forEach(function(r,i){IM(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Hse(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Use(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)Vre(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}var qse=/<\w+:workbook/;function Wse(n,e){if(!n)throw new Error("Could not find file");var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},r=!1,i="xmlns",s={},a=0;if(n.replace($a,function(c,u){var d=An(c);switch(Fu(d[0])){case"<?xml":break;case"<workbook":c.match(qse)&&(i="xmlns"+c.match(/<(\w+):/)[1]),t.xmlns=d[i];break;case"</workbook>":break;case"<fileVersion":delete d[0],t.AppVersion=d;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":LE.forEach(function(p){if(d[p[0]]!=null)switch(p[2]){case"bool":t.WBProps[p[0]]=ci(d[p[0]]);break;case"int":t.WBProps[p[0]]=parseInt(d[p[0]],10);break;default:t.WBProps[p[0]]=d[p[0]]}}),d.codeName&&(t.WBProps.CodeName=Gr(d.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete d[0],t.WBView.push(d);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(d.state){case"hidden":d.Hidden=1;break;case"veryHidden":d.Hidden=2;break;default:d.Hidden=0}delete d.state,d.name=fr(Gr(d.name)),delete d[0],t.Sheets.push(d);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":r=!0;break;case"</definedNames>":r=!1;break;case"<definedName":s={},s.Name=Gr(d.name),d.comment&&(s.Comment=d.comment),d.localSheetId&&(s.Sheet=+d.localSheetId),ci(d.hidden||"0")&&(s.Hidden=!0),a=u+c.length;break;case"</definedName>":s.Ref=fr(Gr(n.slice(a,u))),t.Names.push(s);break;case"<definedName/>":break;case"<calcPr":delete d[0],t.CalcPr=d;break;case"<calcPr/>":delete d[0],t.CalcPr=d;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":r=!0;break;case"</ext>":r=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":r=!0;break;case"</AlternateContent>":r=!1;break;case"<revisionPtr":break;default:if(!r&&e.WTF)throw new Error("unrecognized "+d[0]+" in workbook")}return c}),Y0.indexOf(t.xmlns)===-1)throw new Error("Unknown Namespace: "+t.xmlns);return kM(t),t}function DM(n){var e=[os];e[e.length]=Bt("workbook",null,{xmlns:Y0[0],"xmlns:r":Ls.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(LE.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=Bt("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:Or(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=Bt("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=Bt("definedName",Or(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Gse(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=HS(n),t.name=qa(n),t}function $se(n,e){return e||(e=ut(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),bE(n.strRelID,e),Js(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Kse(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?qa(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Yse(n,e){e||(e=ut(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),wO(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Xse(n,e){var t={};return n.read_shift(4),t.ArchID=n.read_shift(4),n.l+=e-8,t}function Qse(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=NQ(n),a=jre(n,0,t),o=yE(n);n.l=r;var c={Name:s,Ptg:a};return i<268435455&&(c.Sheet=i),o&&(c.Comment=o),c}function Jse(n,e){var t={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},r=[],i=!1;e||(e={}),e.biff=12;var s=[],a=[[]];return a.SheetNames=[],a.XTI=[],Dx[16]={n:"BrtFRTArchID$",f:Xse},Uh(n,function(c,u,d){switch(d){case 156:a.SheetNames.push(c.name),t.Sheets.push(c);break;case 153:t.WBProps=c;break;case 39:c.Sheet!=null&&(e.SID=c.Sheet),c.Ref=Ma(c.Ptg,null,null,a,e),delete e.SID,delete c.Ptg,s.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:a[0].length?a.push([d,c]):a[0]=[d,c],a[a.length-1].XTI=[];break;case 362:a.length===0&&(a[0]=[],a[0].XTI=[]),a[a.length-1].XTI=a[a.length-1].XTI.concat(c),a.XTI=a.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:r.push(d),i=!0;break;case 36:r.pop(),i=!1;break;case 37:r.push(d),i=!0;break;case 38:r.pop(),i=!1;break;case 16:break;default:if(!u.T){if(!i||e.WTF&&r[r.length-1]!=37&&r[r.length-1]!=35)throw new Error("Unexpected record 0x"+d.toString(16))}}},e),kM(t),t.Names=s,t.supbooks=a,t}function Zse(n,e){Tt(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};Tt(n,156,$se(i))}Tt(n,144)}function eae(n,e){e||(e=ut(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Js("SheetJS",e),Js(nb.version,e),Js(nb.version,e),Js("7262",e),e.length>e.l?e.slice(0,e.l):e}function tae(n,e){e||(e=ut(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function nae(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(Tt(n,135),Tt(n,158,tae(i)),Tt(n,136))}}function rae(n,e){var t=Uo();return Tt(t,131),Tt(t,128,eae()),Tt(t,153,Yse(n.Workbook&&n.Workbook.WBProps||null)),nae(t,n),Zse(t,n),Tt(t,132),t.end()}function iae(n,e,t){return e.slice(-4)===".bin"?Jse(n,t):Wse(n,t)}function sae(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?bse(n,r,t,i,s,a,o):Qre(n,r,t,i,s,a,o)}function aae(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?Ose(n,r,t,i,s):jse(n,r,t,i,s)}function oae(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?cne():une()}function lae(n,e,t,r,i,s,a,o){return e.slice(-4)===".bin"?one():lne()}function cae(n,e,t,r){return e.slice(-4)===".bin"?ite(n,t,r):Gee(n,t,r)}function uae(n,e,t){return hM(n,t)}function hae(n,e,t){return e.slice(-4)===".bin"?hee(n,t):lee(n,t)}function fae(n,e,t){return e.slice(-4)===".bin"?nne(n,t):$te(n,t)}function dae(n,e,t){return e.slice(-4)===".bin"?qte(n):Ute(n)}function mae(n,e,t,r){return t.slice(-4)===".bin"?Wte(n,e,t,r):void 0}function pae(n,e,t){return e.slice(-4)===".bin"?Bte(n,e,t):zte(n,e,t)}function gae(n,e,t){return(e.slice(-4)===".bin"?rae:DM)(n)}function xae(n,e,t,r,i){return(e.slice(-4)===".bin"?Dse:AM)(n,t,r,i)}function vae(n,e,t){return(e.slice(-4)===".bin"?mte:cM)(n,t)}function yae(n,e,t){return(e.slice(-4)===".bin"?mee:tM)(n,t)}function bae(n,e,t){return(e.slice(-4)===".bin"?rne:mM)(n)}function _ae(n){return(n.slice(-4)===".bin"?Vte:fM)()}var RM=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,PM=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function _c(n,e){var t=n.split(/\s+/),r=[];if(r[0]=t[0],t.length===1)return r;var i=n.match(RM),s,a,o,c;if(i)for(c=0;c!=i.length;++c)s=i[c].match(PM),(a=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(a+1),r[o]=s[2].slice(1,s[2].length-1));return r}function wae(n){var e=n.split(/\s+/),t={};if(e.length===1)return t;var r=n.match(RM),i,s,a,o;if(r)for(o=0;o!=r.length;++o)i=r[o].match(PM),(s=i[1].indexOf(":"))===-1?t[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?a="xmlns"+i[1].slice(6):a=i[1].slice(s+1),t[a]=i[2].slice(1,i[2].length-1));return t}var U1;function Sae(n,e){var t=U1[n]||fr(n);return t==="General"?O0(e):Zl(t,e)}function Tae(n,e,t,r){var i=r;switch((t[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":i=ci(r);break;case"i2":case"int":i=parseInt(r,10);break;case"r4":case"float":i=parseFloat(r);break;case"date":case"dateTime.tz":i=fi(r);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+t[0])}n[fr(e)]=i}function Eae(n,e,t){if(n.t!=="z"){if(!t||t.cellText!==!1)try{n.t==="e"?n.w=n.w||Hh[n.v]:e==="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=wx(n.v):n.w=O0(n.v):n.w=Sae(e||"General",n.v)}catch(s){if(t.WTF)throw s}try{var r=U1[e]||e||"General";if(t.cellNF&&(n.z=r),t.cellDates&&n.t=="n"&&ag(r)){var i=a0(n.v);i&&(n.t="d",n.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}catch(s){if(t.WTF)throw s}}}function Aae(n,e,t){if(t.cellStyles&&e.Interior){var r=e.Interior;r.Pattern&&(r.patternType=Fee[r.Pattern]||r.Pattern)}n[e.ID]=e}function Nae(n,e,t,r,i,s,a,o,c,u){var d="General",p=r.StyleID,x={};u=u||{};var v=[],_=0;for(p===void 0&&o&&(p=o.StyleID),p===void 0&&a&&(p=a.StyleID);s[p]!==void 0&&(s[p].nf&&(d=s[p].nf),s[p].Interior&&v.push(s[p].Interior),!!s[p].Parent);)p=s[p].Parent;switch(t.Type){case"Boolean":r.t="b",r.v=ci(n);break;case"String":r.t="s",r.r=mI(fr(n)),r.v=n.indexOf("<")>-1?fr(e||n).replace(/<.*?>/g,""):r.r;break;case"DateTime":n.slice(-1)!="Z"&&(n+="Z"),r.v=(fi(n)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),r.v!==r.v?r.v=fr(n):r.v<60&&(r.v=r.v-1),(!d||d=="General")&&(d="yyyy-mm-dd");case"Number":r.v===void 0&&(r.v=+n),r.t||(r.t="n");break;case"Error":r.t="e",r.v=NO[n],u.cellText!==!1&&(r.w=n);break;default:n==""&&e==""?r.t="z":(r.t="s",r.v=mI(e||n));break}if(Eae(r,d,u),u.cellFormula!==!1)if(r.Formula){var b=fr(r.Formula);b.charCodeAt(0)==61&&(b=b.slice(1)),r.f=yp(b,i),delete r.Formula,r.ArrayRange=="RC"?r.F=yp("RC:RC",i):r.ArrayRange&&(r.F=yp(r.ArrayRange,i),c.push([dr(r.F),r.F]))}else for(_=0;_<c.length;++_)i.r>=c[_][0].s.r&&i.r<=c[_][0].e.r&&i.c>=c[_][0].s.c&&i.c<=c[_][0].e.c&&(r.F=c[_][1]);u.cellStyles&&(v.forEach(function(S){!x.patternType&&S.patternType&&(x.patternType=S.patternType)}),r.s=x),r.StyleID!==void 0&&(r.ixfe=r.StyleID)}function Cae(n){n.t=n.v||"",n.t=n.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n.v=n.w=n.ixfe=void 0}function w5(n,e){var t=e||{};og();var r=d1(dE(n));(t.type=="binary"||t.type=="array"||t.type=="base64")&&(r=Gr(r));var i=r.slice(0,1024).toLowerCase(),s=!1;if(i=i.replace(/".*?"/g,""),(i.indexOf(">")&1023)>Math.min(i.indexOf(",")&1023,i.indexOf(";")&1023)){var a=di(t);return a.type="string",Wp.to_workbook(r,a)}if(i.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(lt){i.indexOf("<"+lt)>=0&&(s=!0)}),s)return doe(r,t);U1={"General Number":"General","General Date":wn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":wn[15],"Short Date":wn[14],"Long Time":wn[19],"Medium Time":wn[18],"Short Time":wn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:wn[2],Standard:wn[4],Percent:wn[10],Scientific:wn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var o,c=[],u,d={},p=[],x=t.dense?[]:{},v="",_={},b={},S=_c('<Data ss:Type="String">'),T=0,k=0,E=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},F={},z={},A="",I=0,O=[],B={},R={},P=0,V=[],Y=[],ie={},q=[],Q,se=!1,J=[],me=[],re={},M=0,W=0,K={Sheets:[],WBProps:{date1904:!1}},G={};Ex.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";o=Ex.exec(r);)switch(o[3]=(te=o[3]).toLowerCase()){case"data":if(te=="data"){if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break}if(c[c.length-1][1])break;o[1]==="/"?Nae(r.slice(T,o.index),A,S,c[c.length-1][0]=="comment"?ie:_,{c:k,r:E},F,q[k],b,J,t):(A="",S=_c(o[0]),T=o.index+o[0].length);break;case"cell":if(o[1]==="/")if(Y.length>0&&(_.c=Y),(!t.sheetRows||t.sheetRows>E)&&_.v!==void 0&&(t.dense?(x[E]||(x[E]=[]),x[E][k]=_):x[Ri(k)+rs(E)]=_),_.HRef&&(_.l={Target:fr(_.HRef)},_.HRefScreenTip&&(_.l.Tooltip=_.HRefScreenTip),delete _.HRef,delete _.HRefScreenTip),(_.MergeAcross||_.MergeDown)&&(M=k+(parseInt(_.MergeAcross,10)|0),W=E+(parseInt(_.MergeDown,10)|0),O.push({s:{c:k,r:E},e:{c:M,r:W}})),!t.sheetStubs)_.MergeAcross?k=M+1:++k;else if(_.MergeAcross||_.MergeDown){for(var he=k;he<=M;++he)for(var ye=E;ye<=W;++ye)(he>k||ye>E)&&(t.dense?(x[ye]||(x[ye]=[]),x[ye][he]={t:"z"}):x[Ri(he)+rs(ye)]={t:"z"});k=M+1}else++k;else _=wae(o[0]),_.Index&&(k=+_.Index-1),k<j.s.c&&(j.s.c=k),k>j.e.c&&(j.e.c=k),o[0].slice(-2)==="/>"&&++k,Y=[];break;case"row":o[1]==="/"||o[0].slice(-2)==="/>"?(E<j.s.r&&(j.s.r=E),E>j.e.r&&(j.e.r=E),o[0].slice(-2)==="/>"&&(b=_c(o[0]),b.Index&&(E=+b.Index-1)),k=0,++E):(b=_c(o[0]),b.Index&&(E=+b.Index-1),re={},(b.AutoFitHeight=="0"||b.Height)&&(re.hpx=parseInt(b.Height,10),re.hpt=Ix(re.hpx),me[E]=re),b.Hidden=="1"&&(re.hidden=!0,me[E]=re));break;case"worksheet":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));p.push(v),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(x["!ref"]=Ln(j),t.sheetRows&&t.sheetRows<=j.e.r&&(x["!fullref"]=x["!ref"],j.e.r=t.sheetRows-1,x["!ref"]=Ln(j))),O.length&&(x["!merges"]=O),q.length>0&&(x["!cols"]=q),me.length>0&&(x["!rows"]=me),d[v]=x}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=k=0,c.push([o[3],!1]),u=_c(o[0]),v=fr(u.Name),x=t.dense?[]:{},O=[],J=[],me=[],G={name:v,Hidden:0},K.Sheets.push(G);break;case"table":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else{if(o[0].slice(-2)=="/>")break;c.push([o[3],!1]),q=[],se=!1}break;case"style":o[1]==="/"?Aae(F,z,t):z=_c(o[0]);break;case"numberformat":z.nf=fr(_c(o[0]).Format||"General"),U1[z.nf]&&(z.nf=U1[z.nf]);for(var be=0;be!=392&&wn[be]!=z.nf;++be);if(be==392){for(be=57;be!=392;++be)if(wn[be]==null){kh(z.nf,be);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=_c(o[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!se&&Q.wpx>10){se=!0,Ba=oM;for(var Ce=0;Ce<q.length;++Ce)q[Ce]&&ad(q[Ce])}se&&ad(Q),q[Q.Index-1||q.length]=Q;for(var ke=0;ke<+Q.Span;++ke)q[q.length]=di(Q);break;case"namedrange":if(o[1]==="/")break;K.Names||(K.Names=[]);var oe=An(o[0]),qe={Name:oe.Name,Ref:yp(oe.RefersTo.slice(1),{r:0,c:0})};K.Sheets.length>0&&(qe.Sheet=K.Sheets.length-1),K.Names.push(qe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(o[0].slice(-2)==="/>")break;o[1]==="/"?A+=r.slice(I,o.index):I=o.index+o[0].length;break;case"interior":if(!t.cellStyles)break;z.Interior=_c(o[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(o[0].slice(-2)==="/>")break;o[1]==="/"?JQ(B,te,r.slice(P,o.index)):P=o.index+o[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else c.push([o[3],!1]);break;case"comment":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"));Cae(ie),Y.push(ie)}else c.push([o[3],!1]),u=_c(o[0]),ie={a:u.Author};break;case"autofilter":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else if(o[0].charAt(o[0].length-2)!=="/"){var at=_c(o[0]);x["!autofilter"]={ref:yp(at.Range).replace(/\$/g,"")},c.push([o[3],!0])}break;case"name":break;case"datavalidation":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(o[1]==="/"){if((u=c.pop())[0]!==o[3])throw new Error("Bad state: "+u.join("|"))}else o[0].charAt(o[0].length-2)!=="/"&&c.push([o[3],!0]);break;case"null":break;default:if(c.length==0&&o[3]=="document"||c.length==0&&o[3]=="uof")return n6(r,t);var Fe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(o[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Fe=!1}break;case"componentoptions":switch(o[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Fe=!1}break;case"excelworkbook":switch(o[3]){case"date1904":K.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Fe=!1}break;case"workbookoptions":switch(o[3]){case"owcversion":break;case"height":break;case"width":break;default:Fe=!1}break;case"worksheetoptions":switch(o[3]){case"visible":if(o[0].slice(-2)!=="/>")if(o[1]==="/")switch(r.slice(P,o.index)){case"SheetHidden":G.Hidden=1;break;case"SheetVeryHidden":G.Hidden=2;break}else P=o.index+o[0].length;break;case"header":x["!margins"]||g0(x["!margins"]={},"xlml"),isNaN(+An(o[0]).Margin)||(x["!margins"].header=+An(o[0]).Margin);break;case"footer":x["!margins"]||g0(x["!margins"]={},"xlml"),isNaN(+An(o[0]).Margin)||(x["!margins"].footer=+An(o[0]).Margin);break;case"pagemargins":var _e=An(o[0]);x["!margins"]||g0(x["!margins"]={},"xlml"),isNaN(+_e.Top)||(x["!margins"].top=+_e.Top),isNaN(+_e.Left)||(x["!margins"].left=+_e.Left),isNaN(+_e.Right)||(x["!margins"].right=+_e.Right),isNaN(+_e.Bottom)||(x["!margins"].bottom=+_e.Bottom);break;case"displayrighttoleft":K.Views||(K.Views=[]),K.Views[0]||(K.Views[0]={}),K.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":x["!outline"]||(x["!outline"]={}),x["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Fe=!1}break;case"pivottable":case"pivotcache":switch(o[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Fe=!1}break;case"pagebreaks":switch(o[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Fe=!1}break;case"autofilter":switch(o[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Fe=!1}break;case"querytable":switch(o[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Fe=!1}break;case"datavalidation":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Fe=!1}break;case"sorting":case"conditionalformatting":switch(o[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Fe=!1}break;case"mapinfo":case"schema":case"data":switch(o[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Fe=!1}break;case"smarttags":break;default:Fe=!1;break}if(Fe||o[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+o[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(o[0].slice(-2)==="/>")break;o[1]==="/"?Tae(R,te,V,r.slice(P,o.index)):(V=o,P=o.index+o[0].length);break}if(t.WTF)throw"Unrecognized tag: "+o[3]+"|"+c.join("|")}var Be={};return!t.bookSheets&&!t.bookProps&&(Be.Sheets=d),Be.SheetNames=p,Be.Workbook=K,Be.SSF=di(wn),Be.Props=B,Be.Custprops=R,Be}function XS(n,e){switch(ME(e=e||{}),e.type||"base64"){case"base64":return w5(wl(n),e);case"binary":case"buffer":case"file":return w5(n,e);case"array":return w5(_d(n),e)}}function kae(n,e){var t=[];return n.Props&&t.push(ZQ(n.Props,e)),n.Custprops&&t.push(eJ(n.Props,n.Custprops)),t.join("")}function Iae(){return""}function Dae(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(Bt("NumberFormat",null,{"ss:Format":Or(wn[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(Bt("Style",s.join(""),a))}),Bt("Styles",t.join(""))}function jM(n){return Bt("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+DE(n.Ref,{r:0,c:0})})}function Rae(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(jM(i)))}return Bt("Names",t.join(""))}function Pae(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(jM(o)))}return s.join("")}function jae(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(Bt("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(Bt("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(Bt("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(Bt("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(pa("ProtectContents","True")),n["!protect"].objects&&i.push(pa("ProtectObjects","True")),n["!protect"].scenarios&&i.push(pa("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(pa("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(pa("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":Bt("WorksheetOptions",i.join(""),{xmlns:fl.x})}function Lae(n){return n.map(function(e){var t=nQ(e.t||""),r=Bt("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return Bt("Comment",r,{"ss:Author":e.a})}).join("")}function Oae(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+Or(DE(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var c=Pi(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=Or(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=Or(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],d=0;d!=u.length;++d)u[d].s.c!=a.c||u[d].s.r!=a.r||(u[d].e.c>u[d].s.c&&(o["ss:MergeAcross"]=u[d].e.c-u[d].s.c),u[d].e.r>u[d].s.r&&(o["ss:MergeDown"]=u[d].e.r-u[d].s.r));var p="",x="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":p="Number",x=String(n.v);break;case"b":p="Boolean",x=n.v?"1":"0";break;case"e":p="Error",x=Hh[n.v];break;case"d":p="DateTime",x=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||wn[14]);break;case"s":p="String",x=tQ(n.v||"");break}var v=Sd(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+v),o["ss:Index"]=a.c+1;var _=n.v!=null?x:"",b=n.t=="z"?"":'<Data ss:Type="'+p+'">'+_+"</Data>";return(n.c||[]).length>0&&(b+=Lae(n.c)),Bt("Cell",b,o)}function Mae(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=Gp(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Fae(n,e,t,r){if(!n["!ref"])return"";var i=dr(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(S,T){ad(S);var k=!!S.width,E=f_(T,S),j={"ss:Index":T+1};k&&(j["ss:Width"]=Cx(E.width)),S.hidden&&(j["ss:Hidden"]="1"),o.push(Bt("Column",null,j))});for(var c=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var d=[Mae(u,(n["!rows"]||[])[u])],p=i.s.c;p<=i.e.c;++p){var x=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>p)&&!(s[a].s.r>u)&&!(s[a].e.c<p)&&!(s[a].e.r<u)){(s[a].s.c!=p||s[a].s.r!=u)&&(x=!0);break}if(!x){var v={r:u,c:p},_=Tn(v),b=c?(n[u]||[])[p]:n[_];d.push(Oae(b,_,n,e,t,r,v))}}d.push("</Row>"),d.length>2&&o.push(d.join(""))}return o.join("")}function Bae(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Pae(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Fae(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(jae(s,e,n,t)),r.join("")}function Vae(n,e){e||(e={}),n.SSF||(n.SSF=di(wn)),n.SSF&&(og(),s_(n.SSF),e.revssf=o_(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Sd(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(kae(n,e)),t.push(Iae()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(Bt("Worksheet",Bae(r,e,n),{"ss:Name":Or(n.SheetNames[r])}));return t[2]=Dae(n,e),t[3]=Rae(n),os+Bt("Workbook",t.join(""),{xmlns:fl.ss,"xmlns:o":fl.o,"xmlns:x":fl.x,"xmlns:ss":fl.ss,"xmlns:dt":fl.dt,"xmlns:html":fl.html})}function zae(n){var e={},t=n.content;if(t.l=28,e.AnsiUserType=t.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=RQ(t),t.length-t.l<=4)return e;var r=t.read_shift(4);if(r==0||r>40||(t.l-=4,e.Reserved1=t.read_shift(0,"lpstr-ansi"),t.length-t.l<=4)||(r=t.read_shift(4),r!==1907505652)||(e.UnicodeClipboardFormat=PQ(t),r=t.read_shift(4),r==0||r>40))return e;t.l-=4,e.Reserved2=t.read_shift(0,"lpwstr")}var Uae=[60,1084,2066,2165,2175];function Hae(n,e,t,r,i){var s=r,a=[],o=t.slice(t.l,t.l+s);if(i&&i.enc&&i.enc.insitu&&o.length>0)switch(n){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:i.enc.insitu(o)}a.push(o),t.l+=s;for(var c=Sh(t,t.l),u=QS[c],d=0;u!=null&&Uae.indexOf(c)>-1;)s=Sh(t,t.l+2),d=t.l+4,c==2066?d+=4:(c==2165||c==2175)&&(d+=12),o=t.slice(d,t.l+4+s),a.push(o),t.l+=4+s,u=QS[c=Sh(t,t.l)];var p=Qs(a);ma(p,0);var x=0;p.lens=[];for(var v=0;v<a.length;++v)p.lens.push(x),x+=a[v].length;if(p.length<r)throw"XLS Record 0x"+n.toString(16)+" Truncated: "+p.length+" < "+r;return e.f(p,p.length,i)}function mu(n,e,t){if(n.t!=="z"&&n.XF){var r=0;try{r=n.z||n.XF.numFmtId||0,e.cellNF&&(n.z=wn[r])}catch(s){if(e.WTF)throw s}if(!e||e.cellText!==!1)try{n.t==="e"?n.w=n.w||Hh[n.v]:r===0||r=="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=wx(n.v):n.w=O0(n.v):n.w=Zl(r,n.v,{date1904:!!t,dateNF:e&&e.dateNF})}catch(s){if(e.WTF)throw s}if(e.cellDates&&r&&n.t=="n"&&ag(wn[r]||String(r))){var i=a0(n.v);i&&(n.t="d",n.v=new Date(i.y,i.m-1,i.d,i.H,i.M,i.S,i.u))}}}function I2(n,e,t){return{v:n,ixfe:e,t}}function qae(n,e){var t={opts:{}},r={},i=e.dense?[]:{},s={},a={},o=null,c=[],u="",d={},p,x="",v,_,b,S,T={},k=[],E,j,F=[],z=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},I={},O=function(Ft){return Ft<8?d0[Ft]:Ft<64&&z[Ft-8]||d0[Ft]},B=function(Ft,At,De){var nt=At.XF.data;if(!(!nt||!nt.patternType||!De||!De.cellStyles)){At.s={},At.s.patternType=nt.patternType;var ct;(ct=Nx(O(nt.icvFore)))&&(At.s.fgColor={rgb:ct}),(ct=Nx(O(nt.icvBack)))&&(At.s.bgColor={rgb:ct})}},R=function(Ft,At,De){if(!(re>1)&&!(De.sheetRows&&Ft.r>=De.sheetRows)){if(De.cellStyles&&At.XF&&At.XF.data&&B(Ft,At,De),delete At.ixfe,delete At.XF,p=Ft,x=Tn(Ft),(!a||!a.s||!a.e)&&(a={s:{r:0,c:0},e:{r:0,c:0}}),Ft.r<a.s.r&&(a.s.r=Ft.r),Ft.c<a.s.c&&(a.s.c=Ft.c),Ft.r+1>a.e.r&&(a.e.r=Ft.r+1),Ft.c+1>a.e.c&&(a.e.c=Ft.c+1),De.cellFormula&&At.f){for(var nt=0;nt<k.length;++nt)if(!(k[nt][0].s.c>Ft.c||k[nt][0].s.r>Ft.r)&&!(k[nt][0].e.c<Ft.c||k[nt][0].e.r<Ft.r)){At.F=Ln(k[nt][0]),(k[nt][0].s.c!=Ft.c||k[nt][0].s.r!=Ft.r)&&delete At.f,At.f&&(At.f=""+Ma(k[nt][1],a,Ft,J,P));break}}De.dense?(i[Ft.r]||(i[Ft.r]=[]),i[Ft.r][Ft.c]=At):i[x]=At}},P={enc:!1,sbcch:0,snames:[],sharedf:T,arrayf:k,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(P.password=e.password);var V,Y=[],ie=[],q=[],Q=[],se=!1,J=[];J.SheetNames=P.snames,J.sharedf=P.sharedf,J.arrayf=P.arrayf,J.names=[],J.XTI=[];var me=0,re=0,M=0,W=[],K=[],G;P.codepage=1200,Cc(1200);for(var te=!1;n.l<n.length-1;){var he=n.l,ye=n.read_shift(2);if(ye===0&&me===10)break;var be=n.l===n.length?0:n.read_shift(2),Ce=QS[ye];if(Ce&&Ce.f){if(e.bookSheets&&me===133&&ye!==133)break;if(me=ye,Ce.r===2||Ce.r==12){var ke=n.read_shift(2);if(be-=2,!P.enc&&ke!==ye&&((ke&255)<<8|ke>>8)!==ye)throw new Error("rt mismatch: "+ke+"!="+ye);Ce.r==12&&(n.l+=10,be-=10)}var oe={};if(ye===10?oe=Ce.f(n,be,P):oe=Hae(ye,Ce,n,be,P),re==0&&[9,521,1033,2057].indexOf(me)===-1)continue;switch(ye){case 34:t.opts.Date1904=A.WBProps.date1904=oe;break;case 134:t.opts.WriteProtect=!0;break;case 47:if(P.enc||(n.l=0),P.enc=oe,!e.password)throw new Error("File is password-protected");if(oe.valid==null)throw new Error("Encryption scheme unsupported");if(!oe.valid)throw new Error("Password is incorrect");break;case 92:P.lastuser=oe;break;case 66:var qe=Number(oe);switch(qe){case 21010:qe=1200;break;case 32768:qe=1e4;break;case 32769:qe=1252;break}Cc(P.codepage=qe),te=!0;break;case 317:P.rrtabid=oe;break;case 25:P.winlocked=oe;break;case 439:t.opts.RefreshAll=oe;break;case 12:t.opts.CalcCount=oe;break;case 16:t.opts.CalcDelta=oe;break;case 17:t.opts.CalcIter=oe;break;case 13:t.opts.CalcMode=oe;break;case 14:t.opts.CalcPrecision=oe;break;case 95:t.opts.CalcSaveRecalc=oe;break;case 15:P.CalcRefMode=oe;break;case 2211:t.opts.FullCalc=oe;break;case 129:oe.fDialog&&(i["!type"]="dialog"),oe.fBelow||((i["!outline"]||(i["!outline"]={})).above=!0),oe.fRight||((i["!outline"]||(i["!outline"]={})).left=!0);break;case 224:F.push(oe);break;case 430:J.push([oe]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(oe);break;case 24:case 536:G={Name:oe.Name,Ref:Ma(oe.rgce,a,null,J,P)},oe.itab>0&&(G.Sheet=oe.itab-1),J.names.push(G),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(oe),oe.Name=="_xlnm._FilterDatabase"&&oe.itab>0&&oe.rgce&&oe.rgce[0]&&oe.rgce[0][0]&&oe.rgce[0][0][0]=="PtgArea3d"&&(K[oe.itab-1]={ref:Ln(oe.rgce[0][0][1][2])});break;case 22:P.ExternCount=oe;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(oe),J.XTI=J.XTI.concat(oe);break;case 2196:if(P.biff<8)break;G!=null&&(G.Comment=oe[1]);break;case 18:i["!protect"]=oe;break;case 19:oe!==0&&P.WTF&&console.error("Password verifier: "+oe);break;case 133:s[oe.pos]=oe,P.snames.push(oe.name);break;case 10:{if(--re)break;if(a.e){if(a.e.r>0&&a.e.c>0){if(a.e.r--,a.e.c--,i["!ref"]=Ln(a),e.sheetRows&&e.sheetRows<=a.e.r){var at=a.e.r;a.e.r=e.sheetRows-1,i["!fullref"]=i["!ref"],i["!ref"]=Ln(a),a.e.r=at}a.e.r++,a.e.c++}Y.length>0&&(i["!merges"]=Y),ie.length>0&&(i["!objects"]=ie),q.length>0&&(i["!cols"]=q),Q.length>0&&(i["!rows"]=Q),A.Sheets.push(I)}u===""?d=i:r[u]=i,i=e.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(P.biff===8&&(P.biff={9:2,521:3,1033:4}[ye]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[oe.BIFFVer]||8),P.biffguess=oe.BIFFVer==0,oe.BIFFVer==0&&oe.dt==4096&&(P.biff=5,te=!0,Cc(P.codepage=28591)),P.biff==8&&oe.BIFFVer==0&&oe.dt==16&&(P.biff=2),re++)break;if(i=e.dense?[]:{},P.biff<8&&!te&&(te=!0,Cc(P.codepage=e.codepage||1252)),P.biff<5||oe.BIFFVer==0&&oe.dt==4096){u===""&&(u="Sheet1"),a={s:{r:0,c:0},e:{r:0,c:0}};var Fe={pos:n.l-be,name:u};s[Fe.pos]=Fe,P.snames.push(u)}else u=(s[he]||{name:""}).name;oe.dt==32&&(i["!type"]="chart"),oe.dt==64&&(i["!type"]="macro"),Y=[],ie=[],P.arrayf=k=[],q=[],Q=[],se=!1,I={Hidden:(s[he]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:i["!type"]=="chart"&&(e.dense?(i[oe.r]||[])[oe.c]:i[Tn({c:oe.c,r:oe.r})])&&++oe.c,E={ixfe:oe.ixfe,XF:F[oe.ixfe]||{},v:oe.val,t:"n"},M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:oe.c,r:oe.r},E,e);break;case 5:case 517:E={ixfe:oe.ixfe,XF:F[oe.ixfe],v:oe.val,t:oe.t},M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:oe.c,r:oe.r},E,e);break;case 638:E={ixfe:oe.ixfe,XF:F[oe.ixfe],v:oe.rknum,t:"n"},M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:oe.c,r:oe.r},E,e);break;case 189:for(var _e=oe.c;_e<=oe.C;++_e){var Be=oe.rkrec[_e-oe.c][0];E={ixfe:Be,XF:F[Be],v:oe.rkrec[_e-oe.c][1],t:"n"},M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:_e,r:oe.r},E,e)}break;case 6:case 518:case 1030:{if(oe.val=="String"){o=oe;break}if(E=I2(oe.val,oe.cell.ixfe,oe.tt),E.XF=F[E.ixfe],e.cellFormula){var lt=oe.formula;if(lt&&lt[0]&&lt[0][0]&&lt[0][0][0]=="PtgExp"){var Ke=lt[0][0][1][0],We=lt[0][0][1][1],Et=Tn({r:Ke,c:We});T[Et]?E.f=""+Ma(oe.formula,a,oe.cell,J,P):E.F=((e.dense?(i[Ke]||[])[We]:i[Et])||{}).F}else E.f=""+Ma(oe.formula,a,oe.cell,J,P)}M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R(oe.cell,E,e),o=oe}break;case 7:case 519:if(o)o.val=oe,E=I2(oe,o.cell.ixfe,"s"),E.XF=F[E.ixfe],e.cellFormula&&(E.f=""+Ma(o.formula,a,o.cell,J,P)),M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R(o.cell,E,e),o=null;else throw new Error("String record expects Formula");break;case 33:case 545:{k.push(oe);var Oe=Tn(oe[0].s);if(v=e.dense?(i[oe[0].s.r]||[])[oe[0].s.c]:i[Oe],e.cellFormula&&v){if(!o||!Oe||!v)break;v.f=""+Ma(oe[1],a,oe[0],J,P),v.F=Ln(oe[0])}}break;case 1212:{if(!e.cellFormula)break;if(x){if(!o)break;T[Tn(o.cell)]=oe[0],v=e.dense?(i[o.cell.r]||[])[o.cell.c]:i[Tn(o.cell)],(v||{}).f=""+Ma(oe[0],a,p,J,P)}}break;case 253:E=I2(c[oe.isst].t,oe.ixfe,"s"),c[oe.isst].h&&(E.h=c[oe.isst].h),E.XF=F[E.ixfe],M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:oe.c,r:oe.r},E,e);break;case 513:e.sheetStubs&&(E={ixfe:oe.ixfe,XF:F[oe.ixfe],t:"z"},M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:oe.c,r:oe.r},E,e));break;case 190:if(e.sheetStubs)for(var Dt=oe.c;Dt<=oe.C;++Dt){var Rt=oe.ixfe[Dt-oe.c];E={ixfe:Rt,XF:F[Rt],t:"z"},M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:Dt,r:oe.r},E,e)}break;case 214:case 516:case 4:E=I2(oe.val,oe.ixfe,"s"),E.XF=F[E.ixfe],M>0&&(E.z=W[E.ixfe>>8&63]),mu(E,e,t.opts.Date1904),R({c:oe.c,r:oe.r},E,e);break;case 0:case 512:re===1&&(a=oe);break;case 252:c=oe;break;case 1054:if(P.biff==4){W[M++]=oe[1];for(var Wt=0;Wt<M+163&&wn[Wt]!=oe[1];++Wt);Wt>=163&&kh(oe[1],M+163)}else kh(oe[1],oe[0]);break;case 30:{W[M++]=oe;for(var Jt=0;Jt<M+163&&wn[Jt]!=oe;++Jt);Jt>=163&&kh(oe,M+163)}break;case 229:Y=Y.concat(oe);break;case 93:ie[oe.cmo[0]]=P.lastobj=oe;break;case 438:P.lastobj.TxO=oe;break;case 127:P.lastobj.ImData=oe;break;case 440:for(S=oe[0].s.r;S<=oe[0].e.r;++S)for(b=oe[0].s.c;b<=oe[0].e.c;++b)v=e.dense?(i[S]||[])[b]:i[Tn({c:b,r:S})],v&&(v.l=oe[1]);break;case 2048:for(S=oe[0].s.r;S<=oe[0].e.r;++S)for(b=oe[0].s.c;b<=oe[0].e.c;++b)v=e.dense?(i[S]||[])[b]:i[Tn({c:b,r:S})],v&&v.l&&(v.l.Tooltip=oe[1]);break;case 28:{if(P.biff<=5&&P.biff>=2)break;v=e.dense?(i[oe[0].r]||[])[oe[0].c]:i[Tn(oe[0])];var yn=ie[oe[2]];v||(e.dense?(i[oe[0].r]||(i[oe[0].r]=[]),v=i[oe[0].r][oe[0].c]={t:"z"}):v=i[Tn(oe[0])]={t:"z"},a.e.r=Math.max(a.e.r,oe[0].r),a.s.r=Math.min(a.s.r,oe[0].r),a.e.c=Math.max(a.e.c,oe[0].c),a.s.c=Math.min(a.s.c,oe[0].c)),v.c||(v.c=[]),_={a:oe[1],t:yn.TxO.t},v.c.push(_)}break;case 2173:Dte(F[oe.ixfe],oe.ext);break;case 125:{if(!P.cellStyles)break;for(;oe.e>=oe.s;)q[oe.e--]={width:oe.w/256,level:oe.level||0,hidden:!!(oe.flags&1)},se||(se=!0,CE(oe.w/256)),ad(q[oe.e+1])}break;case 520:{var ln={};oe.level!=null&&(Q[oe.r]=ln,ln.level=oe.level),oe.hidden&&(Q[oe.r]=ln,ln.hidden=!0),oe.hpt&&(Q[oe.r]=ln,ln.hpt=oe.hpt,ln.hpx=Gp(oe.hpt))}break;case 38:case 39:case 40:case 41:i["!margins"]||g0(i["!margins"]={}),i["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ye]]=oe;break;case 161:i["!margins"]||g0(i["!margins"]={}),i["!margins"].header=oe.header,i["!margins"].footer=oe.footer;break;case 574:oe.RTL&&(A.Views[0].RTL=!0);break;case 146:z=oe;break;case 2198:V=oe;break;case 140:j=oe;break;case 442:u?I.CodeName=oe||I.name:A.WBProps.CodeName=oe||"ThisWorkbook";break}}else Ce||console.error("Missing Info for XLS Record 0x"+ye.toString(16)),n.l+=be}return t.SheetNames=Gi(s).sort(function(Zt,Ft){return Number(Zt)-Number(Ft)}).map(function(Zt){return s[Zt].name}),e.bookSheets||(t.Sheets=r),!t.SheetNames.length&&d["!ref"]?(t.SheetNames.push("Sheet1"),t.Sheets&&(t.Sheets.Sheet1=d)):t.Preamble=d,t.Sheets&&K.forEach(function(Zt,Ft){t.Sheets[t.SheetNames[Ft]]["!autofilter"]=Zt}),t.Strings=c,t.SSF=di(wn),P.enc&&(t.Encryption=P.enc),V&&(t.Themes=V),t.Metadata={},j!==void 0&&(t.Metadata.Country=j),J.names.length>0&&(A.Names=J.names),t.Workbook=A,t}var H1={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Wae(n,e,t){var r=pn.find(n,"/!DocumentSummaryInformation");if(r&&r.size>0)try{var i=RI(r,qS,H1.DSI);for(var s in i)e[s]=i[s]}catch(u){if(t.WTF)throw u}var a=pn.find(n,"/!SummaryInformation");if(a&&a.size>0)try{var o=RI(a,WS,H1.SI);for(var c in o)e[c]==null&&(e[c]=o[c])}catch(u){if(t.WTF)throw u}e.HeadingPairs&&e.TitlesOfParts&&(PO(e.HeadingPairs,e.TitlesOfParts,e,t),delete e.HeadingPairs,delete e.TitlesOfParts)}function Gae(n,e){var t=[],r=[],i=[],s=0,a,o=lI(qS,"n"),c=lI(WS,"n");if(n.Props)for(a=Gi(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=Gi(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)VO.indexOf(i[s][0])>-1||RO.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&pn.utils.cfb_add(e,"/SummaryInformation",PI(r,H1.SI,c,WS)),(t.length||u.length)&&pn.utils.cfb_add(e,"/DocumentSummaryInformation",PI(t,H1.DSI,o,qS,u.length?u:null,H1.UDI))}function LM(n,e){e||(e={}),ME(e),iE(),e.codepage&&rE(e.codepage);var t,r;if(n.FullPaths){if(pn.find(n,"/encryption"))throw new Error("File is password-protected");t=pn.find(n,"!CompObj"),r=pn.find(n,"/Workbook")||pn.find(n,"/Book")}else{switch(e.type){case"base64":n=ml(wl(n));break;case"binary":n=ml(n);break;case"buffer":break;case"array":Array.isArray(n)||(n=Array.prototype.slice.call(n));break}ma(n,0),r={content:n}}var i,s;if(t&&zae(t),e.bookProps&&!e.bookSheets)i={};else{var a=Vn?"buffer":"array";if(r&&r.content)i=qae(r.content,e);else if((s=pn.find(n,"PerfectOffice_MAIN"))&&s.content)i=p0.to_workbook(s.content,(e.type=a,e));else if((s=pn.find(n,"NativeContent_MAIN"))&&s.content)i=p0.to_workbook(s.content,(e.type=a,e));else throw(s=pn.find(n,"MN0"))&&s.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&n.FullPaths&&pn.find(n,"/_VBA_PROJECT_CUR/VBA/dir")&&(i.vbaraw=sne(n))}var o={};return n.FullPaths&&Wae(n,o,e),i.Props=i.Custprops=o,e.bookFiles&&(i.cfb=n),i}function $ae(n,e){var t=e||{},r=pn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return pn.utils.cfb_add(r,i,OM(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Gae(n,r),t.biff==8&&n.vbaraw&&ane(r,pn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var Dx={0:{f:xie},1:{f:Eie},2:{f:qie},3:{f:Pie},4:{f:kie},5:{f:zie},6:{f:Yie},7:{f:Mie},8:{f:nse},9:{f:tse},10:{f:Zie},11:{f:ese},12:{f:Nie},13:{f:Gie},14:{f:Lie},15:{f:Die},16:{f:NM},17:{f:Qie},18:{f:Bie},19:{f:vE},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Qse},40:{},42:{},43:{f:Yee},44:{f:$ee},45:{f:Jee},46:{f:ete},47:{f:Zee},48:{},49:{f:bQ},50:{},51:{f:jte},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:QO},62:{f:Kie},63:{f:Hte},64:{f:vse},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Wa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:mse},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Sie},148:{f:bie,p:16},151:{f:lse},152:{},153:{f:Kse},154:{},155:{},156:{f:Gse},157:{},158:{},159:{T:1,f:uee},160:{T:-1},161:{T:1,f:Z0},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:rse},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Rte},336:{T:-1},337:{f:Mte,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:HS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:XO},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:cse},427:{f:use},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:fse},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:wie},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:ase},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:HS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ene},633:{T:1},634:{T:-1},635:{T:1,f:Jte},636:{T:-1},637:{f:TQ},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Lse},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:yse},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},QS={6:{f:b5},10:{f:Nf},12:{f:bs},13:{f:bs},14:{f:Xi},15:{f:Xi},16:{f:za},17:{f:Xi},18:{f:Xi},19:{f:bs},20:{f:BI},21:{f:BI},23:{f:XO},24:{f:zI},25:{f:Xi},26:{},27:{},28:{f:yZ},29:{},34:{f:Xi},35:{f:VI},38:{f:za},39:{f:za},40:{f:za},41:{f:za},42:{f:Xi},43:{f:Xi},47:{f:Dee},49:{f:GJ},51:{f:bs},60:{},61:{f:zJ},64:{f:Xi},65:{f:WJ},66:{f:bs},77:{},80:{},81:{},82:{},85:{f:bs},89:{},90:{},91:{},92:{f:IJ},93:{f:wZ},94:{},95:{f:Xi},96:{},97:{},99:{f:Xi},125:{f:QO},128:{f:oZ},129:{f:RJ},130:{f:bs},131:{f:Xi},132:{f:Xi},133:{f:PJ},134:{},140:{f:IZ},141:{f:bs},144:{},146:{f:PZ},151:{},152:{},153:{},154:{},155:{},156:{f:bs},157:{},158:{},160:{f:VZ},161:{f:OZ},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:rZ},190:{f:iZ},193:{f:Nf},197:{},198:{},199:{},200:{},201:{},202:{f:Xi},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:bs},220:{},221:{f:Xi},222:{},224:{f:aZ},225:{f:kJ},226:{f:Nf},227:{},229:{f:bZ},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:LJ},253:{f:KJ},255:{f:MJ},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:zO},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Xi},353:{f:Nf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:fZ},431:{f:Xi},432:{},433:{},434:{},437:{},438:{f:EZ},439:{f:Xi},440:{f:AZ},441:{},442:{f:fv},443:{},444:{f:bs},445:{},446:{},448:{f:Nf},449:{f:VJ,r:2},450:{f:Nf},512:{f:OI},513:{f:BZ},515:{f:uZ},516:{f:XJ},517:{f:FI},519:{f:zZ},520:{f:FJ},523:{},545:{f:UI},549:{f:LI},566:{},574:{f:HJ},638:{f:nZ},659:{},1048:{},1054:{f:JJ},1084:{},1212:{f:gZ},2048:{f:CZ},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:N2},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Nf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:jZ,r:12},2173:{f:Ite,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Xi,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:pZ,r:12},2197:{},2198:{f:Tte,r:12},2199:{},2200:{},2201:{},2202:{f:xZ,r:12},2203:{f:Nf},2204:{},2205:{},2206:{},2207:{},2211:{f:BJ},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:bs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:MZ},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:RZ},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:OI},1:{},2:{f:GZ},3:{f:qZ},4:{f:HZ},5:{f:FI},7:{f:KZ},8:{},9:{f:N2},11:{},22:{f:bs},30:{f:eZ},31:{},32:{},33:{f:UI},36:{},37:{f:LI},50:{f:YZ},62:{},52:{},67:{},68:{f:bs},69:{},86:{},126:{},127:{f:UZ},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:XZ},223:{},234:{},354:{},421:{},518:{f:b5},521:{f:N2},536:{f:zI},547:{f:VI},561:{},579:{},1030:{f:b5},1033:{f:N2},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function zt(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&pE(t)&&n.push(t)}}function Kae(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return zt(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,c=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var d=n.next(4);for(d.write_shift(2,s),d.write_shift(2,u),n.push(t.slice(c,c+u)),c+=u;c<i;){for(d=n.next(4),d.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;d.write_shift(2,u),n.push(t.slice(c,c+u)),c+=u}}}function gv(n,e,t){return n||(n=ut(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function Yae(n,e,t,r){var i=ut(9);return gv(i,n,e),UO(t,r||"b",i),i}function Xae(n,e,t){var r=ut(8+2*t.length);return gv(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Qae(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Bs(fi(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?zt(n,2,$Z(t,r,i)):zt(n,3,WZ(t,r,i));return;case"b":case"e":zt(n,5,Yae(t,r,e.v,e.t));return;case"s":case"str":zt(n,4,Xae(t,r,(e.v||"").slice(0,255)));return}zt(n,1,gv(null,t,r))}function Jae(n,e,t,r){var i=Array.isArray(e),s=dr(e["!ref"]||"A1"),a,o="",c=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Ln(s)}for(var u=s.s.r;u<=s.e.r;++u){o=rs(u);for(var d=s.s.c;d<=s.e.c;++d){u===s.s.r&&(c[d]=Ri(d)),a=c[d]+o;var p=i?(e[u]||[])[d]:e[a];p&&Qae(n,p,u,d)}}}function Zae(n,e){for(var t=e||{},r=Uo(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return zt(r,t.biff==4?1033:t.biff==3?521:9,EE(n,16,t)),Jae(r,n.Sheets[n.SheetNames[i]],i,t),zt(r,10),r.end()}function eoe(n,e,t){zt(n,49,$J({sz:12,name:"Arial"},t))}function toe(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&zt(n,1054,ZJ(i,e[i],t))})}function noe(n,e){var t=ut(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),zt(n,2151,t),t=ut(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),$O(dr(e["!ref"]||"A1"),t),t.write_shift(4,4),zt(n,2152,t)}function roe(n,e){for(var t=0;t<16;++t)zt(n,224,MI({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){zt(n,224,MI(r,0,e))})}function ioe(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];zt(n,440,NZ(r)),r[1].Tooltip&&zt(n,2048,kZ(r))}delete e["!links"]}function soe(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&zt(n,125,LZ(f_(i,r),i))})}}function aoe(n,e,t,r,i){var s=16+Sd(i.cellXfs,e,i);if(e.v==null&&!e.bf){zt(n,513,V0(t,r,s));return}if(e.bf)zt(n,6,Rre(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Bs(fi(e.v)):e.v;zt(n,515,hZ(t,r,a,s));break;case"b":case"e":zt(n,517,cZ(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=PE(i.Strings,e.v,i.revStrings);zt(n,253,YJ(t,r,o,s))}else zt(n,516,QJ(t,r,(e.v||"").slice(0,255),s,i));break;default:zt(n,513,V0(t,r,s))}}function ooe(n,e,t){var r=Uo(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},c=Array.isArray(s),u=e.biff==8,d,p="",x=[],v=dr(s["!ref"]||"A1"),_=u?65536:16384;if(v.e.c>255||v.e.r>=_){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");v.e.c=Math.min(v.e.c,255),v.e.r=Math.min(v.e.c,_-1)}zt(r,2057,EE(t,16,e)),zt(r,13,$l(1)),zt(r,12,$l(100)),zt(r,15,lo(!0)),zt(r,17,lo(!1)),zt(r,16,F0(.001)),zt(r,95,lo(!0)),zt(r,42,lo(!1)),zt(r,43,lo(!1)),zt(r,130,$l(1)),zt(r,128,lZ()),zt(r,131,lo(!1)),zt(r,132,lo(!1)),u&&soe(r,s["!cols"]),zt(r,512,tZ(v,e)),u&&(s["!links"]=[]);for(var b=v.s.r;b<=v.e.r;++b){p=rs(b);for(var S=v.s.c;S<=v.e.c;++S){b===v.s.r&&(x[S]=Ri(S)),d=x[S]+p;var T=c?(s[b]||[])[S]:s[d];T&&(aoe(r,T,b,S,e),u&&T.l&&s["!links"].push([d,T.l]))}}var k=o.CodeName||o.name||i;return u&&zt(r,574,qJ((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&zt(r,229,_Z(s["!merges"])),u&&ioe(r,s),zt(r,442,HO(k)),u&&noe(r,s),zt(r,10),r.end()}function loe(n,e,t){var r=Uo(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,c=t.biff==5;if(zt(r,2057,EE(n,5,t)),t.bookType=="xla"&&zt(r,135),zt(r,225,o?$l(1200):null),zt(r,193,cJ(2)),c&&zt(r,191),c&&zt(r,192),zt(r,226),zt(r,92,DJ("SheetJS",t)),zt(r,66,$l(o?1200:1252)),o&&zt(r,353,$l(0)),o&&zt(r,448),zt(r,317,FZ(n.SheetNames.length)),o&&n.vbaraw&&zt(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";zt(r,442,HO(u))}zt(r,156,$l(17)),zt(r,25,lo(!1)),zt(r,18,lo(!1)),zt(r,19,$l(0)),o&&zt(r,431,lo(!1)),o&&zt(r,444,$l(0)),zt(r,61,UJ()),zt(r,64,lo(!1)),zt(r,141,$l(0)),zt(r,34,lo(Vse(n)=="true")),zt(r,14,lo(!0)),o&&zt(r,439,lo(!1)),zt(r,218,$l(0)),eoe(r,n,t),toe(r,n.SSF,t),roe(r,t),o&&zt(r,352,lo(!1));var d=r.end(),p=Uo();o&&zt(p,140,DZ()),o&&t.Strings&&Kae(p,252,OJ(t.Strings)),zt(p,10);var x=p.end(),v=Uo(),_=0,b=0;for(b=0;b<n.SheetNames.length;++b)_+=(o?12:11)+(o?2:1)*n.SheetNames[b].length;var S=d.length+_+x.length;for(b=0;b<n.SheetNames.length;++b){var T=s[b]||{};zt(v,133,jJ({pos:S,hs:T.Hidden||0,dt:0,name:n.SheetNames[b]},t)),S+=e[b].length}var k=v.end();if(_!=k.length)throw new Error("BS8 "+_+" != "+k.length);var E=[];return d.length&&E.push(d),k.length&&E.push(k),x.length&&E.push(x),Qs(E)}function coe(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=di(wn)),n&&n.SSF&&(og(),s_(n.SSF),t.revssf=o_(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,FE(t),t.cellXfs=[],Sd(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=ooe(i,t,n);return r.unshift(loe(n,r,t)),Qs(r)}function OM(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=qo(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return coe(n,e);case 4:case 3:case 2:return Zae(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function JI(n,e){var t=e||{},r=t.dense?[]:{};n=n.replace(/<!--.*?-->/g,"");var i=n.match(/<table/i);if(!i)throw new Error("Invalid HTML: could not find <table>");var s=n.match(/<\/table/i),a=i.index,o=s&&s.index||n.length,c=$X(n.slice(a,o),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,d=0,p=0,x=0,v={s:{r:1e7,c:1e7},e:{r:0,c:0}},_=[];for(a=0;a<c.length;++a){var b=c[a].trim(),S=b.slice(0,3).toLowerCase();if(S=="<tr"){if(++u,t.sheetRows&&t.sheetRows<=u){--u;break}d=0;continue}if(!(S!="<td"&&S!="<th")){var T=b.split(/<\/t[dh]>/i);for(o=0;o<T.length;++o){var k=T[o].trim();if(k.match(/<t[dh]/i)){for(var E=k,j=0;E.charAt(0)=="<"&&(j=E.indexOf(">"))>-1;)E=E.slice(j+1);for(var F=0;F<_.length;++F){var z=_[F];z.s.c==d&&z.s.r<u&&u<=z.e.r&&(d=z.e.c+1,F=-1)}var A=An(k.slice(0,k.indexOf(">")));x=A.colspan?+A.colspan:1,((p=+A.rowspan)>1||x>1)&&_.push({s:{r:u,c:d},e:{r:u+(p||1)-1,c:d+x-1}});var I=A.t||A["data-t"]||"";if(!E.length){d+=x;continue}if(E=aO(E),v.s.r>u&&(v.s.r=u),v.e.r<u&&(v.e.r=u),v.s.c>d&&(v.s.c=d),v.e.c<d&&(v.e.c=d),!E.length){d+=x;continue}var O={t:"s",v:E};t.raw||!E.trim().length||I=="s"||(E==="TRUE"?O={t:"b",v:!0}:E==="FALSE"?O={t:"b",v:!1}:isNaN(Dc(E))?isNaN(qp(E).getDate())||(O={t:"d",v:fi(E)},t.cellDates||(O={t:"n",v:Bs(O.v)}),O.z=t.dateNF||wn[14]):O={t:"n",v:Dc(E)}),t.dense?(r[u]||(r[u]=[]),r[u][d]=O):r[Tn({r:u,c:d})]=O,d+=x}}}}return r["!ref"]=Ln(v),_.length&&(r["!merges"]=_),r}function uoe(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,c=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,c=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var d=Tn({r:t,c:a}),p=r.dense?(n[t]||[])[a]:n[d],x=p&&p.v!=null&&(p.h||fE(p.w||(Mh(p),p.w)||""))||"",v={};o>1&&(v.rowspan=o),c>1&&(v.colspan=c),r.editable?x='<span contenteditable="true">'+x+"</span>":p&&(v["data-t"]=p&&p.t||"z",p.v!=null&&(v["data-v"]=p.v),p.z!=null&&(v["data-z"]=p.z),p.l&&(p.l.Target||"#").charAt(0)!="#"&&(x='<a href="'+p.l.Target+'">'+x+"</a>")),v.id=(r.id||"sjs")+"-"+d,s.push(Bt("td",x,v))}}var _="<tr>";return _+s.join("")+"</tr>"}var hoe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',foe="</body></html>";function doe(n,e){var t=n.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!t||t.length==0)throw new Error("Invalid HTML: could not find <table>");if(t.length==1)return wd(JI(t[0],e),e);var r=zE();return t.forEach(function(i,s){UE(r,JI(i,e),"Sheet"+(s+1))}),r}function moe(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function MM(n,e){var t=e||{},r=t.header!=null?t.header:hoe,i=t.footer!=null?t.footer:foe,s=[r],a=qo(n["!ref"]);t.dense=Array.isArray(n),s.push(moe(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(uoe(n,a,o,t));return s.push("</table>"+i),s.join("")}function FM(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?Pi(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),c=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var d=qo(n["!ref"]);u.s.r=Math.min(u.s.r,d.s.r),u.s.c=Math.min(u.s.c,d.s.c),u.e.r=Math.max(u.e.r,d.e.r),u.e.c=Math.max(u.e.c,d.e.c),i==-1&&(u.e.r=i=d.e.r+1)}var p=[],x=0,v=n["!rows"]||(n["!rows"]=[]),_=0,b=0,S=0,T=0,k=0,E=0;for(n["!cols"]||(n["!cols"]=[]);_<o.length&&b<c;++_){var j=o[_];if(ZI(j)){if(r.display)continue;v[b]={hidden:!0}}var F=j.children;for(S=T=0;S<F.length;++S){var z=F[S];if(!(r.display&&ZI(z))){var A=z.hasAttribute("data-v")?z.getAttribute("data-v"):z.hasAttribute("v")?z.getAttribute("v"):aO(z.innerHTML),I=z.getAttribute("data-z")||z.getAttribute("z");for(x=0;x<p.length;++x){var O=p[x];O.s.c==T+s&&O.s.r<b+i&&b+i<=O.e.r&&(T=O.e.c+1-s,x=-1)}E=+z.getAttribute("colspan")||1,((k=+z.getAttribute("rowspan")||1)>1||E>1)&&p.push({s:{r:b+i,c:T+s},e:{r:b+i+(k||1)-1,c:T+s+(E||1)-1}});var B={t:"s",v:A},R=z.getAttribute("data-t")||z.getAttribute("t")||"";A!=null&&(A.length==0?B.t=R||"z":r.raw||A.trim().length==0||R=="s"||(A==="TRUE"?B={t:"b",v:!0}:A==="FALSE"?B={t:"b",v:!1}:isNaN(Dc(A))?isNaN(qp(A).getDate())||(B={t:"d",v:fi(A)},r.cellDates||(B={t:"n",v:Bs(B.v)}),B.z=r.dateNF||wn[14]):B={t:"n",v:Dc(A)})),B.z===void 0&&I!=null&&(B.z=I);var P="",V=z.getElementsByTagName("A");if(V&&V.length)for(var Y=0;Y<V.length&&!(V[Y].hasAttribute("href")&&(P=V[Y].getAttribute("href"),P.charAt(0)!="#"));++Y);P&&P.charAt(0)!="#"&&(B.l={Target:P}),r.dense?(n[b+i]||(n[b+i]=[]),n[b+i][T+s]=B):n[Tn({c:T+s,r:b+i})]=B,u.e.c<T+s&&(u.e.c=T+s),T+=E}}++b}return p.length&&(n["!merges"]=(n["!merges"]||[]).concat(p)),u.e.r=Math.max(u.e.r,b-1+i),n["!ref"]=Ln(u),b>=c&&(n["!fullref"]=Ln((u.e.r=o.length-_+b-1+i,u))),n}function BM(n,e){var t=e||{},r=t.dense?[]:{};return FM(r,n,e)}function poe(n,e){return wd(BM(n,e),e)}function ZI(n){var e="",t=goe(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function goe(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function xoe(n){var e=n.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(r,i){return Array(parseInt(i,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),t=fr(e.replace(/<[^>]*>/g,""));return[t]}var e6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function VM(n,e){var t=e||{},r=dE(n),i=[],s,a,o={name:""},c="",u=0,d,p,x={},v=[],_=t.dense?[]:{},b,S,T={value:""},k="",E=0,j=[],F=-1,z=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},I=0,O={},B=[],R={},P=0,V=0,Y=[],ie=1,q=1,Q=[],se={Names:[]},J={},me=["",""],re=[],M={},W="",K=0,G=!1,te=!1,he=0;for(Ex.lastIndex=0,r=r.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");b=Ex.exec(r);)switch(b[3]=b[3].replace(/_.*$/,"")){case"table":case"":b[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?_["!ref"]=Ln(A):_["!ref"]="A1:A1",t.sheetRows>0&&t.sheetRows<=A.e.r&&(_["!fullref"]=_["!ref"],A.e.r=t.sheetRows-1,_["!ref"]=Ln(A)),B.length&&(_["!merges"]=B),Y.length&&(_["!rows"]=Y),d.name=d.||d.name,typeof JSON<"u"&&JSON.stringify(d),v.push(d.name),x[d.name]=_,te=!1):b[0].charAt(b[0].length-2)!=="/"&&(d=An(b[0],!1),F=z=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,_=t.dense?[]:{},B=[],Y=[],te=!0);break;case"table-row-group":b[1]==="/"?--I:++I;break;case"table-row":case"":if(b[1]==="/"){F+=ie,ie=1;break}if(p=An(b[0],!1),p.?F=p.-1:F==-1&&(F=0),ie=+p["number-rows-repeated"]||1,ie<10)for(he=0;he<ie;++he)I>0&&(Y[F+he]={level:I});z=-1;break;case"covered-table-cell":b[1]!=="/"&&++z,t.sheetStubs&&(t.dense?(_[F]||(_[F]=[]),_[F][z]={t:"z"}):_[Tn({r:F,c:z})]={t:"z"}),k="",j=[];break;case"table-cell":case"":if(b[0].charAt(b[0].length-2)==="/")++z,T=An(b[0],!1),q=parseInt(T["number-columns-repeated"]||"1",10),S={t:"z",v:null},T.formula&&t.cellFormula!=!1&&(S.f=YI(fr(T.formula))),(T.||T["value-type"])=="string"&&(S.t="s",S.v=fr(T["string-value"]||""),t.dense?(_[F]||(_[F]=[]),_[F][z]=S):_[Tn({r:F,c:z})]=S),z+=q-1;else if(b[1]!=="/"){++z,k="",E=0,j=[],q=1;var ye=ie?F+ie-1:F;if(z>A.e.c&&(A.e.c=z),z<A.s.c&&(A.s.c=z),F<A.s.r&&(A.s.r=F),ye>A.e.r&&(A.e.r=ye),T=An(b[0],!1),re=[],M={},S={t:T.||T["value-type"],v:null},t.cellFormula)if(T.formula&&(T.formula=fr(T.formula)),T["number-matrix-columns-spanned"]&&T["number-matrix-rows-spanned"]&&(P=parseInt(T["number-matrix-rows-spanned"],10)||0,V=parseInt(T["number-matrix-columns-spanned"],10)||0,R={s:{r:F,c:z},e:{r:F+P-1,c:z+V-1}},S.F=Ln(R),Q.push([R,S.F])),T.formula)S.f=YI(T.formula);else for(he=0;he<Q.length;++he)F>=Q[he][0].s.r&&F<=Q[he][0].e.r&&z>=Q[he][0].s.c&&z<=Q[he][0].e.c&&(S.F=Q[he][1]);switch((T["number-columns-spanned"]||T["number-rows-spanned"])&&(P=parseInt(T["number-rows-spanned"],10)||0,V=parseInt(T["number-columns-spanned"],10)||0,R={s:{r:F,c:z},e:{r:F+P-1,c:z+V-1}},B.push(R)),T["number-columns-repeated"]&&(q=parseInt(T["number-columns-repeated"],10)),S.t){case"boolean":S.t="b",S.v=ci(T["boolean-value"]);break;case"float":S.t="n",S.v=parseFloat(T.value);break;case"percentage":S.t="n",S.v=parseFloat(T.value);break;case"currency":S.t="n",S.v=parseFloat(T.value);break;case"date":S.t="d",S.v=fi(T["date-value"]),t.cellDates||(S.t="n",S.v=Bs(S.v)),S.z="m/d/yy";break;case"time":S.t="n",S.v=qX(T["time-value"])/86400,t.cellDates&&(S.t="d",S.v=l_(S.v)),S.z="HH:MM:SS";break;case"number":S.t="n",S.v=parseFloat(T.);break;default:if(S.t==="string"||S.t==="text"||!S.t)S.t="s",T["string-value"]!=null&&(k=fr(T["string-value"]),j=[]);else throw new Error("Unsupported value type "+S.t)}}else{if(G=!1,S.t==="s"&&(S.v=k||"",j.length&&(S.R=j),G=E==0),J.Target&&(S.l=J),re.length>0&&(S.c=re,re=[]),k&&t.cellText!==!1&&(S.w=k),G&&(S.t="z",delete S.v),(!G||t.sheetStubs)&&!(t.sheetRows&&t.sheetRows<=F))for(var be=0;be<ie;++be){if(q=parseInt(T["number-columns-repeated"]||"1",10),t.dense)for(_[F+be]||(_[F+be]=[]),_[F+be][z]=be==0?S:di(S);--q>0;)_[F+be][z+q]=di(S);else for(_[Tn({r:F+be,c:z})]=S;--q>0;)_[Tn({r:F+be,c:z+q})]=di(S);A.e.c<=z&&(A.e.c=z)}q=parseInt(T["number-columns-repeated"]||"1",10),z+=q-1,q=0,S={},k="",j=[]}J={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(b[1]==="/"){if((s=i.pop())[0]!==b[3])throw"Bad state: "+s}else b[0].charAt(b[0].length-2)!=="/"&&i.push([b[3],!0]);break;case"annotation":if(b[1]==="/"){if((s=i.pop())[0]!==b[3])throw"Bad state: "+s;M.t=k,j.length&&(M.R=j),M.a=W,re.push(M)}else b[0].charAt(b[0].length-2)!=="/"&&i.push([b[3],!1]);W="",K=0,k="",E=0,j=[];break;case"creator":b[1]==="/"?W=r.slice(K,b.index):K=b.index+b[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(b[1]==="/"){if((s=i.pop())[0]!==b[3])throw"Bad state: "+s}else b[0].charAt(b[0].length-2)!=="/"&&i.push([b[3],!1]);k="",E=0,j=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(b[1]==="/"){if(O[o.name]=c,(s=i.pop())[0]!==b[3])throw"Bad state: "+s}else b[0].charAt(b[0].length-2)!=="/"&&(c="",o=An(b[0],!1),i.push([b[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(i[i.length-1][0]){case"time-style":case"date-style":a=An(b[0],!1),c+=e6[b[3]][a.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(i[i.length-1][0]){case"time-style":case"date-style":a=An(b[0],!1),c+=e6[b[3]][a.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(b[0].slice(-2)==="/>")break;if(b[1]==="/")switch(i[i.length-1][0]){case"number-style":case"date-style":case"time-style":c+=r.slice(u,b.index);break}else u=b.index+b[0].length;break;case"named-range":a=An(b[0],!1),me=_5(a["cell-range-address"]);var Ce={Name:a.name,Ref:me[0]+"!"+me[1]};te&&(Ce.Sheet=v.length),se.Names.push(Ce);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(i[i.length-1][0])>-1)break;if(b[1]==="/"&&(!T||!T["string-value"])){var ke=xoe(r.slice(E,b.index));k=(k.length>0?k+`
`:"")+ke[0]}else An(b[0],!1),E=b.index+b[0].length;break;case"s":break;case"database-range":if(b[1]==="/")break;try{me=_5(An(b[0])["target-range-address"]),x[me[0]]["!autofilter"]={ref:me[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(b[1]!=="/"){if(J=An(b[0],!1),!J.href)break;J.Target=fr(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(me=_5(J.Target.slice(1)),J.Target="#"+me[0]+"!"+me[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(b[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(t.WTF)throw new Error(b)}}var oe={Sheets:x,SheetNames:v,Workbook:se};return t.bookSheets&&delete oe.Sheets,oe}function t6(n,e){e=e||{},Gl(n,"META-INF/manifest.xml")&&qQ(ys(n,"META-INF/manifest.xml"),e);var t=pl(n,"content.xml");if(!t)throw new Error("Missing content.xml in ODS / UOF file");var r=VM(Gr(t),e);return Gl(n,"meta.xml")&&(r.Props=IO(ys(n,"meta.xml"))),r}function n6(n,e){return VM(n,e)}var voe=(function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Tx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return os+e}})(),r6=(function(){var n=function(s){return Or(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var c=[];c.push('      <table:table table:name="'+Or(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,d=0,p=qo(s["!ref"]||"A1"),x=s["!merges"]||[],v=0,_=Array.isArray(s);if(s["!cols"])for(d=0;d<=p.e.c;++d)c.push("        <table:table-column"+(s["!cols"][d]?' table:style-name="co'+s["!cols"][d].ods+'"':"")+`></table:table-column>
`);var b="",S=s["!rows"]||[];for(u=0;u<p.s.r;++u)b=S[u]?' table:style-name="ro'+S[u].ods+'"':"",c.push("        <table:table-row"+b+`></table:table-row>
`);for(;u<=p.e.r;++u){for(b=S[u]?' table:style-name="ro'+S[u].ods+'"':"",c.push("        <table:table-row"+b+`>
`),d=0;d<p.s.c;++d)c.push(e);for(;d<=p.e.c;++d){var T=!1,k={},E="";for(v=0;v!=x.length;++v)if(!(x[v].s.c>d)&&!(x[v].s.r>u)&&!(x[v].e.c<d)&&!(x[v].e.r<u)){(x[v].s.c!=d||x[v].s.r!=u)&&(T=!0),k["table:number-columns-spanned"]=x[v].e.c-x[v].s.c+1,k["table:number-rows-spanned"]=x[v].e.r-x[v].s.r+1;break}if(T){c.push(t);continue}var j=Tn({r:u,c:d}),F=_?(s[u]||[])[d]:s[j];if(F&&F.f&&(k["table:formula"]=Or(Fre(F.f)),F.F&&F.F.slice(0,j.length)==j)){var z=qo(F.F);k["table:number-matrix-columns-spanned"]=z.e.c-z.s.c+1,k["table:number-matrix-rows-spanned"]=z.e.r-z.s.r+1}if(!F){c.push(e);continue}switch(F.t){case"b":E=F.v?"TRUE":"FALSE",k["office:value-type"]="boolean",k["office:boolean-value"]=F.v?"true":"false";break;case"n":E=F.w||String(F.v||0),k["office:value-type"]="float",k["office:value"]=F.v||0;break;case"s":case"str":E=F.v==null?"":F.v,k["office:value-type"]="string";break;case"d":E=F.w||fi(F.v).toISOString(),k["office:value-type"]="date",k["office:date-value"]=fi(F.v).toISOString(),k["table:style-name"]="ce1";break;default:c.push(e);continue}var A=n(E);if(F.l&&F.l.Target){var I=F.l.Target;I=I.charAt(0)=="#"?"#"+Bre(I.slice(1)):I,I.charAt(0)!="#"&&!I.match(/^\w+:/)&&(I="../"+I),A=Bt("text:a",A,{"xlink:href":I.replace(/&/g,"&amp;")})}c.push("          "+Bt("table:table-cell",Bt("text:p",A,{}),k)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var d=0;d<u["!cols"].length;++d)if(u["!cols"][d]){var p=u["!cols"][d];if(p.width==null&&p.wpx==null&&p.wch==null)continue;ad(p),p.ods=o;var x=u["!cols"][d].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+x+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var d=0;d<u["!rows"].length;++d)if(u["!rows"][d]){u["!rows"][d].ods=c;var p=u["!rows"][d].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+p+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var c=[os],u=Tx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),d=Tx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+d+`>
`),c.push(kO().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),i(c,a),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var p=0;p!=a.SheetNames.length;++p)c.push(r(a.Sheets[a.SheetNames[p]],a,p));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function zM(n,e){if(e.bookType=="fods")return r6(n,e);var t=cE(),r="",i=[],s=[];return r="mimetype",Mn(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",Mn(t,r,r6(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",Mn(t,r,voe(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",Mn(t,r,os+kO()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",Mn(t,r,$Q(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",Mn(t,r,WQ(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function z0(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function JS(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):Gr(_d(n))}function yoe(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):ml(Au(n))}function boe(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function ld(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function i6(n){return n-=n>>1&1431655765,n=(n&858993459)+(n>>2&858993459),(n+(n>>4)&252645135)*16843009>>>24}function _oe(n,e){for(var t=(n[e+15]&127)<<7|n[e+14]>>1,r=n[e+14]&1,i=e+13;i>=e;--i)r=r*256+n[i];return(n[e+15]&128?-r:r)*Math.pow(10,t-6176)}function woe(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function Rx(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function Ir(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function qi(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function yr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=Rx(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var c=t[0];n[t[0]++]>=128;);o=n.slice(c,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=Rx(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function fa(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(Ir(r*8+i.type)),i.type==2&&e.push(Ir(i.data.length)),e.push(i.data))})}),ld(e)}function OE(n,e){return(n==null?void 0:n.map(function(t){return e(t.data)}))||[]}function ql(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=Rx(n,r),s=yr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:qi(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=yr(o.data),u=qi(c[3][0].data);a.messages.push({meta:c,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=qi(s[3][0].data)>>>0>0),t.push(a)}return t}function $m(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:Ir(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:Ir(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:Ir(a.data.length)}],r[2].push({data:fa(a.meta),type:2})});var s=fa(r);e.push(Ir(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),ld(e)}function Soe(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=Rx(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var c=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,c=(e[t[0]++]&224)<<3,c|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(c=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(c=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[ld(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(i.push(i[0].slice(-c)),u-=c;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-c,-c+u))}}var d=ld(i);if(d.length!=r)throw new Error("Unexpected length: ".concat(d.length," != ").concat(r));return d}function Wl(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Soe(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return ld(e)}function Km(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=Ir(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return ld(e)}function Toe(n,e,t,r){var i=z0(n),s=i.getUint32(4,!0),a=(r>1?12:8)+i6(s&(r>1?3470:398))*4,o=-1,c=-1,u=NaN,d=new Date(2001,0,1);s&512&&(o=i.getUint32(a,!0),a+=4),a+=i6(s&(r>1?12288:4096))*4,s&16&&(c=i.getUint32(a,!0),a+=4),s&32&&(u=i.getFloat64(a,!0),a+=8),s&64&&(d.setTime(d.getTime()+i.getFloat64(a,!0)*1e3),a+=8);var p;switch(n[2]){case 0:break;case 2:p={t:"n",v:u};break;case 3:p={t:"s",v:e[c]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:u>0};break;case 7:p={t:"n",v:u/86400};break;case 8:p={t:"e",v:0};break;case 9:if(o>-1)p={t:"s",v:t[o]};else if(c>-1)p={t:"s",v:e[c]};else if(!isNaN(u))p={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(n.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(n.slice(0,4)))}return p}function Eoe(n,e,t){var r=z0(n),i=r.getUint32(8,!0),s=12,a=-1,o=-1,c=NaN,u=NaN,d=new Date(2001,0,1);i&1&&(c=_oe(n,s),s+=16),i&2&&(u=r.getFloat64(s,!0),s+=8),i&4&&(d.setTime(d.getTime()+r.getFloat64(s,!0)*1e3),s+=8),i&8&&(o=r.getUint32(s,!0),s+=4),i&16&&(a=r.getUint32(s,!0),s+=4);var p;switch(n[1]){case 0:break;case 2:p={t:"n",v:c};break;case 3:p={t:"s",v:e[o]};break;case 5:p={t:"d",v:d};break;case 6:p={t:"b",v:u>0};break;case 7:p={t:"n",v:u/86400};break;case 8:p={t:"e",v:0};break;case 9:if(a>-1)p={t:"s",v:t[a]};else throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(i&31," : ").concat(n.slice(0,4)));break;case 10:p={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(i&31," : ").concat(n.slice(0,4)))}return p}function S5(n,e){var t=new Uint8Array(32),r=z0(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,woe(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function T5(n,e){var t=new Uint8Array(32),r=z0(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function Aoe(n,e,t){switch(n[0]){case 0:case 1:case 2:case 3:return Toe(n,e,t,n[0]);case 5:return Eoe(n,e,t);default:throw new Error("Unsupported payload version ".concat(n[0]))}}function Oa(n){var e=yr(n);return Rx(e[1][0].data)}function s6(n,e){var t=yr(e.data),r=qi(t[1][0].data),i=t[3],s=[];return(i||[]).forEach(function(a){var o=yr(a.data),c=qi(o[1][0].data)>>>0;switch(r){case 1:s[c]=JS(o[3][0].data);break;case 8:{var u=n[Oa(o[9][0].data)][0],d=yr(u.data),p=n[Oa(d[1][0].data)][0],x=qi(p.meta[1][0].data);if(x!=2001)throw new Error("2000 unexpected reference to ".concat(x));var v=yr(p.data);s[c]=v[3].map(function(_){return JS(_.data)}).join("")}break}}),s}function Noe(n,e){var t,r,i,s,a,o,c,u,d,p,x,v,_,b,S=yr(n),T=qi(S[1][0].data)>>>0,k=qi(S[2][0].data)>>>0,E=((r=(t=S[8])==null?void 0:t[0])==null?void 0:r.data)&&qi(S[8][0].data)>0||!1,j,F;if((s=(i=S[7])==null?void 0:i[0])!=null&&s.data&&e!=0)j=(o=(a=S[7])==null?void 0:a[0])==null?void 0:o.data,F=(u=(c=S[6])==null?void 0:c[0])==null?void 0:u.data;else if((p=(d=S[4])==null?void 0:d[0])!=null&&p.data&&e!=1)j=(v=(x=S[4])==null?void 0:x[0])==null?void 0:v.data,F=(b=(_=S[3])==null?void 0:_[0])==null?void 0:b.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var z=E?4:1,A=z0(j),I=[],O=0;O<j.length/2;++O){var B=A.getUint16(O*2,!0);B<65535&&I.push([O,B])}if(I.length!=k)throw"Expected ".concat(k," cells, found ").concat(I.length);var R=[];for(O=0;O<I.length-1;++O)R[I[O][0]]=F.subarray(I[O][1]*z,I[O+1][1]*z);return I.length>=1&&(R[I[I.length-1][0]]=F.subarray(I[I.length-1][1]*z)),{R:T,cells:R}}function Coe(n,e){var t,r=yr(e.data),i=(t=r==null?void 0:r[7])!=null&&t[0]?qi(r[7][0].data)>>>0>0?1:0:-1,s=OE(r[5],function(a){return Noe(a,i)});return{nrows:qi(r[4][0].data)>>>0,data:s.reduce(function(a,o){return a[o.R]||(a[o.R]=[]),o.cells.forEach(function(c,u){if(a[o.R][u])throw new Error("Duplicate cell r=".concat(o.R," c=").concat(u));a[o.R][u]=c}),a},[])}}function koe(n,e,t){var r,i=yr(e.data),s={s:{r:0,c:0},e:{r:0,c:0}};if(s.e.r=(qi(i[6][0].data)>>>0)-1,s.e.r<0)throw new Error("Invalid row varint ".concat(i[6][0].data));if(s.e.c=(qi(i[7][0].data)>>>0)-1,s.e.c<0)throw new Error("Invalid col varint ".concat(i[7][0].data));t["!ref"]=Ln(s);var a=yr(i[4][0].data),o=s6(n,n[Oa(a[4][0].data)][0]),c=(r=a[17])!=null&&r[0]?s6(n,n[Oa(a[17][0].data)][0]):[],u=yr(a[3][0].data),d=0;u[1].forEach(function(p){var x=yr(p.data),v=n[Oa(x[2][0].data)][0],_=qi(v.meta[1][0].data);if(_!=6002)throw new Error("6001 unexpected reference to ".concat(_));var b=Coe(n,v);b.data.forEach(function(S,T){S.forEach(function(k,E){var j=Tn({r:d+T,c:E}),F=Aoe(k,o,c);F&&(t[j]=F)})}),d+=b.nrows})}function Ioe(n,e){var t=yr(e.data),r={"!ref":"A1"},i=n[Oa(t[2][0].data)],s=qi(i[0].meta[1][0].data);if(s!=6001)throw new Error("6000 unexpected reference to ".concat(s));return koe(n,i[0],r),r}function Doe(n,e){var t,r=yr(e.data),i={name:(t=r[1])!=null&&t[0]?JS(r[1][0].data):"",sheets:[]},s=OE(r[2],Oa);return s.forEach(function(a){n[a].forEach(function(o){var c=qi(o.meta[1][0].data);c==6e3&&i.sheets.push(Ioe(n,o))})}),i}function Roe(n,e){var t=zE(),r=yr(e.data),i=OE(r[1],Oa);if(i.forEach(function(s){n[s].forEach(function(a){var o=qi(a.meta[1][0].data);if(o==2){var c=Doe(n,a);c.sheets.forEach(function(u,d){UE(t,u,d==0?c.name:c.name+"_"+d,!0)})}})}),t.SheetNames.length==0)throw new Error("Empty NUMBERS file");return t}function E5(n){var e,t,r,i,s={},a=[];if(n.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),n.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Wl(c.content)}catch(p){return console.log("?? "+c.content.length+" "+(p.message||p))}var d;try{d=ql(u)}catch(p){return console.log("## "+(p.message||p))}d.forEach(function(p){s[p.id]=p.messages,a.push(p.id)})}}),!a.length)throw new Error("File has no messages");var o=((i=(r=(t=(e=s==null?void 0:s[1])==null?void 0:e[0])==null?void 0:t.meta)==null?void 0:r[1])==null?void 0:i[0].data)&&qi(s[1][0].meta[1][0].data)==1&&s[1][0];if(o||a.forEach(function(c){s[c].forEach(function(u){var d=qi(u.meta[1][0].data)>>>0;if(d==1)if(!o)o=u;else throw new Error("Document has multiple roots")})}),!o)throw new Error("Cannot find Document root");return Roe(s,o)}function Poe(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&qi(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=z0(n[7][0].data),d=0,p=[],x=z0(n[4][0].data),v=0,_=[],b=0;b<e.length;++b){if(e[b]==null){u.setUint16(b*2,65535,!0),x.setUint16(b*2,65535);continue}u.setUint16(b*2,d,!0),x.setUint16(b*2,v,!0);var S,T;switch(typeof e[b]){case"string":S=S5({t:"s",v:e[b]},t),T=T5({t:"s",v:e[b]},t);break;case"number":S=S5({t:"n",v:e[b]},t),T=T5({t:"n",v:e[b]},t);break;case"boolean":S=S5({t:"b",v:e[b]},t),T=T5({t:"b",v:e[b]},t);break;default:throw new Error("Unsupported value "+e[b])}p.push(S),d+=S.length,_.push(T),v+=T.length,++c}for(n[2][0].data=Ir(c);b<n[7][0].data.length/2;++b)u.setUint16(b*2,65535,!0),x.setUint16(b*2,65535,!0);return n[6][0].data=ld(p),n[3][0].data=ld(_),c}function joe(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=qo(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Ln(r)));var s=mb(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(W){return W.forEach(function(K){typeof K=="string"&&a.push(K)})});var o={},c=[],u=pn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(W,K){return[W,u.FullPaths[K]]}).forEach(function(W){var K=W[0],G=W[1];if(K.type==2&&K.name.match(/\.iwa/)){var te=K.content,he=Wl(te),ye=ql(he);ye.forEach(function(be){c.push(be.id),o[be.id]={deps:[],location:G,type:qi(be.messages[0].meta[1][0].data)}})}}),c.sort(function(W,K){return W-K});var d=c.filter(function(W){return W>1}).map(function(W){return[W,Ir(W)]});u.FileIndex.map(function(W,K){return[W,u.FullPaths[K]]}).forEach(function(W){var K=W[0];if(W[1],!!K.name.match(/\.iwa/)){var G=ql(Wl(K.content));G.forEach(function(te){te.messages.forEach(function(he){d.forEach(function(ye){te.messages.some(function(be){return qi(be.meta[1][0].data)!=11006&&boe(be.data,ye[1])})&&o[ye[0]].deps.push(te.id)})})})}});for(var p=pn.find(u,o[1].location),x=ql(Wl(p.content)),v,_=0;_<x.length;++_){var b=x[_];b.id==1&&(v=b)}var S=Oa(yr(v.messages[0].data)[1][0].data);for(p=pn.find(u,o[S].location),x=ql(Wl(p.content)),_=0;_<x.length;++_)b=x[_],b.id==S&&(v=b);for(S=Oa(yr(v.messages[0].data)[2][0].data),p=pn.find(u,o[S].location),x=ql(Wl(p.content)),_=0;_<x.length;++_)b=x[_],b.id==S&&(v=b);for(S=Oa(yr(v.messages[0].data)[2][0].data),p=pn.find(u,o[S].location),x=ql(Wl(p.content)),_=0;_<x.length;++_)b=x[_],b.id==S&&(v=b);var T=yr(v.messages[0].data);{T[6][0].data=Ir(r.e.r+1),T[7][0].data=Ir(r.e.c+1);var k=Oa(T[46][0].data),E=pn.find(u,o[k].location),j=ql(Wl(E.content));{for(var F=0;F<j.length&&j[F].id!=k;++F);if(j[F].id!=k)throw"Bad ColumnRowUIDMapArchive";var z=yr(j[F].messages[0].data);z[1]=[],z[2]=[],z[3]=[];for(var A=0;A<=r.e.c;++A){var I=[];I[1]=I[2]=[{type:0,data:Ir(A+420690)}],z[1].push({type:2,data:fa(I)}),z[2].push({type:0,data:Ir(A)}),z[3].push({type:0,data:Ir(A)})}z[4]=[],z[5]=[],z[6]=[];for(var O=0;O<=r.e.r;++O)I=[],I[1]=I[2]=[{type:0,data:Ir(O+726270)}],z[4].push({type:2,data:fa(I)}),z[5].push({type:0,data:Ir(O)}),z[6].push({type:0,data:Ir(O)});j[F].messages[0].data=fa(z)}E.content=Km($m(j)),E.size=E.content.length,delete T[46];var B=yr(T[4][0].data);{B[7][0].data=Ir(r.e.r+1);var R=yr(B[1][0].data),P=Oa(R[2][0].data);E=pn.find(u,o[P].location),j=ql(Wl(E.content));{if(j[0].id!=P)throw"Bad HeaderStorageBucket";var V=yr(j[0].messages[0].data);for(O=0;O<s.length;++O){var Y=yr(V[2][0].data);Y[1][0].data=Ir(O),Y[4][0].data=Ir(s[O].length),V[2][O]={type:V[2][0].type,data:fa(Y)}}j[0].messages[0].data=fa(V)}E.content=Km($m(j)),E.size=E.content.length;var ie=Oa(B[2][0].data);E=pn.find(u,o[ie].location),j=ql(Wl(E.content));{if(j[0].id!=ie)throw"Bad HeaderStorageBucket";for(V=yr(j[0].messages[0].data),A=0;A<=r.e.c;++A)Y=yr(V[2][0].data),Y[1][0].data=Ir(A),Y[4][0].data=Ir(r.e.r+1),V[2][A]={type:V[2][0].type,data:fa(Y)};j[0].messages[0].data=fa(V)}E.content=Km($m(j)),E.size=E.content.length;var q=Oa(B[4][0].data);(function(){for(var W=pn.find(u,o[q].location),K=ql(Wl(W.content)),G,te=0;te<K.length;++te){var he=K[te];he.id==q&&(G=he)}var ye=yr(G.messages[0].data);{ye[3]=[];var be=[];a.forEach(function(oe,qe){be[1]=[{type:0,data:Ir(qe)}],be[2]=[{type:0,data:Ir(1)}],be[3]=[{type:2,data:yoe(oe)}],ye[3].push({type:2,data:fa(be)})})}G.messages[0].data=fa(ye);var Ce=$m(K),ke=Km(Ce);W.content=ke,W.size=W.content.length})();var Q=yr(B[3][0].data);{var se=Q[1][0];delete Q[2];var J=yr(se.data);{var me=Oa(J[2][0].data);(function(){for(var W=pn.find(u,o[me].location),K=ql(Wl(W.content)),G,te=0;te<K.length;++te){var he=K[te];he.id==me&&(G=he)}var ye=yr(G.messages[0].data);{delete ye[6],delete Q[7];var be=new Uint8Array(ye[5][0].data);ye[5]=[];for(var Ce=0,ke=0;ke<=r.e.r;++ke){var oe=yr(be);Ce+=Poe(oe,s[ke],a),oe[1][0].data=Ir(ke),ye[5].push({data:fa(oe),type:2})}ye[1]=[{type:0,data:Ir(r.e.c+1)}],ye[2]=[{type:0,data:Ir(r.e.r+1)}],ye[3]=[{type:0,data:Ir(Ce)}],ye[4]=[{type:0,data:Ir(r.e.r+1)}]}G.messages[0].data=fa(ye);var qe=$m(K),at=Km(qe);W.content=at,W.size=W.content.length})()}se.data=fa(J)}B[3][0].data=fa(Q)}T[4][0].data=fa(B)}v.messages[0].data=fa(T);var re=$m(x),M=Km(re);return p.content=M,p.size=p.content.length,u}function UM(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function ME(n){UM([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(n)}function FE(n){UM([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Loe(n){return qn.WS.indexOf(n)>-1?"sheet":n==qn.CS?"chart":n==qn.DS?"dialog":n==qn.MS?"macro":n&&n.length?n:"sheet"}function Ooe(n,e){if(!n)return 0;try{n=e.map(function(r){return r.id||(r.id=r.strRelID),[r.name,n["!id"][r.id].Target,Loe(n["!id"][r.id].Type)]})}catch{return null}return!n||n.length===0?null:n}function Moe(n,e,t,r,i,s,a,o,c,u,d,p){try{s[r]=B1(pl(n,t,!0),e);var x=ys(n,e),v;switch(o){case"sheet":v=sae(x,e,i,c,s[r],u,d,p);break;case"chart":if(v=aae(x,e,i,c,s[r],u,d,p),!v||!v["!drawel"])break;var _=p1(v["!drawel"].Target,e),b=Ax(_),S=Gte(pl(n,_,!0),B1(pl(n,b,!0),_)),T=p1(S,_),k=Ax(T);v=Pse(pl(n,T,!0),T,c,B1(pl(n,k,!0),T),u,v);break;case"macro":v=oae(x,e,i,c,s[r],u,d,p);break;case"dialog":v=lae(x,e,i,c,s[r],u,d,p);break;default:throw new Error("Unrecognized sheet type "+o)}a[r]=v;var E=[];s&&s[r]&&Gi(s[r]).forEach(function(j){var F="";if(s[r][j].Type==qn.CMNT){F=p1(s[r][j].Target,e);var z=fae(ys(n,F,!0),F,c);if(!z||!z.length)return;qI(v,z,!1)}s[r][j].Type==qn.TCMNT&&(F=p1(s[r][j].Target,e),E=E.concat(Kte(ys(n,F,!0),c)))}),E&&E.length&&qI(v,E,!0,c.people||[])}catch(j){if(c.WTF)throw j}}function zl(n){return n.charAt(0)=="/"?n.slice(1):n}function Foe(n,e){if(og(),e=e||{},ME(e),Gl(n,"META-INF/manifest.xml")||Gl(n,"objectdata.xml"))return t6(n,e);if(Gl(n,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof E5<"u"){if(n.FileIndex)return E5(n);var t=pn.utils.cfb_new();return hI(n).forEach(function(Y){Mn(t,Y,YX(n,Y))}),E5(t)}throw new Error("Unsupported NUMBERS file")}if(!Gl(n,"[Content_Types].xml"))throw Gl(n,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Gl(n,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var r=hI(n),i=UQ(pl(n,"[Content_Types].xml")),s=!1,a,o;if(i.workbooks.length===0&&(o="xl/workbook.xml",ys(n,o,!0)&&i.workbooks.push(o)),i.workbooks.length===0){if(o="xl/workbook.bin",!ys(n,o,!0))throw new Error("Could not find workbook");i.workbooks.push(o),s=!0}i.workbooks[0].slice(-3)=="bin"&&(s=!0);var c={},u={};if(!e.bookSheets&&!e.bookProps){if(V1=[],i.sst)try{V1=hae(ys(n,zl(i.sst)),i.sst,e)}catch(Y){if(e.WTF)throw Y}e.cellStyles&&i.themes.length&&(c=uae(pl(n,i.themes[0].replace(/^\//,""),!0)||"",i.themes[0],e)),i.style&&(u=cae(ys(n,zl(i.style)),i.style,c,e))}i.links.map(function(Y){try{var ie=B1(pl(n,Ax(zl(Y))),Y);return mae(ys(n,zl(Y)),ie,Y,e)}catch{}});var d=iae(ys(n,zl(i.workbooks[0])),i.workbooks[0],e),p={},x="";i.coreprops.length&&(x=ys(n,zl(i.coreprops[0]),!0),x&&(p=IO(x)),i.extprops.length!==0&&(x=ys(n,zl(i.extprops[0]),!0),x&&YQ(x,p,e)));var v={};(!e.bookSheets||e.bookProps)&&i.custprops.length!==0&&(x=pl(n,zl(i.custprops[0]),!0),x&&(v=QQ(x,e)));var _={};if((e.bookSheets||e.bookProps)&&(d.Sheets?a=d.Sheets.map(function(ie){return ie.name}):p.Worksheets&&p.SheetNames.length>0&&(a=p.SheetNames),e.bookProps&&(_.Props=p,_.Custprops=v),e.bookSheets&&typeof a<"u"&&(_.SheetNames=a),e.bookSheets?_.SheetNames:e.bookProps))return _;a={};var b={};e.bookDeps&&i.calcchain&&(b=dae(ys(n,zl(i.calcchain)),i.calcchain));var S=0,T={},k,E;{var j=d.Sheets;p.Worksheets=j.length,p.SheetNames=[];for(var F=0;F!=j.length;++F)p.SheetNames[F]=j[F].name}var z=s?"bin":"xml",A=i.workbooks[0].lastIndexOf("/"),I=(i.workbooks[0].slice(0,A+1)+"_rels/"+i.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");Gl(n,I)||(I="xl/_rels/workbook."+z+".rels");var O=B1(pl(n,I,!0),I.replace(/_rels.*/,"s5s"));(i.metadata||[]).length>=1&&(e.xlmeta=pae(ys(n,zl(i.metadata[0])),i.metadata[0],e)),(i.people||[]).length>=1&&(e.people=Xte(ys(n,zl(i.people[0])),e)),O&&(O=Ooe(O,d.Sheets));var B=ys(n,"xl/worksheets/sheet.xml",!0)?1:0;e:for(S=0;S!=p.Worksheets;++S){var R="sheet";if(O&&O[S]?(k="xl/"+O[S][1].replace(/[\/]?xl\//,""),Gl(n,k)||(k=O[S][1]),Gl(n,k)||(k=I.replace(/_rels\/.*$/,"")+O[S][1]),R=O[S][2]):(k="xl/worksheets/sheet"+(S+1-B)+"."+z,k=k.replace(/sheet0\./,"sheet.")),E=k.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(S!=e.sheets)continue e;break;case"string":if(p.SheetNames[S].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var P=!1,V=0;V!=e.sheets.length;++V)typeof e.sheets[V]=="number"&&e.sheets[V]==S&&(P=1),typeof e.sheets[V]=="string"&&e.sheets[V].toLowerCase()==p.SheetNames[S].toLowerCase()&&(P=1);if(!P)continue e}}Moe(n,k,E,p.SheetNames[S],S,T,a,R,e,d,c,u)}return _={Directory:i,Workbook:d,Props:p,Custprops:v,Deps:b,Sheets:a,SheetNames:p.SheetNames,Strings:V1,Styles:u,Themes:c,SSF:di(wn)},e&&e.bookFiles&&(n.files?(_.keys=r,_.files=n.files):(_.keys=[],_.files={},n.FullPaths.forEach(function(Y,ie){Y=Y.replace(/^Root Entry[\/]/,""),_.keys.push(Y),_.files[Y]=n.FileIndex[ie]}))),e&&e.bookVBA&&(i.vba.length>0?_.vbaraw=ys(n,zl(i.vba[0]),!0):i.defaults&&i.defaults.bin===ine&&(_.vbaraw=ys(n,"xl/vbaProject.bin",!0))),_}function Boe(n,e){var t=e||{},r="Workbook",i=pn.find(n,r);try{if(r="/!DataSpaces/Version",i=pn.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(pee(i.content),r="/!DataSpaces/DataSpaceMap",i=pn.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var s=xee(i.content);if(s.length!==1||s[0].comps.length!==1||s[0].comps[0].t!==0||s[0].name!=="StrongEncryptionDataSpace"||s[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",i=pn.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var a=vee(i.content);if(a.length!=1||a[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+r);if(r="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",i=pn.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);bee(i.content)}catch{}if(r="/EncryptionInfo",i=pn.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);var o=_ee(i.content);if(r="/EncryptedPackage",i=pn.find(n,r),!i||!i.content)throw new Error("ECMA-376 Encrypted file missing "+r);if(o[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(o[1],i.content,t.password||"",t);if(o[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(o[1],i.content,t.password||"",t);throw new Error("File is password-protected")}function Voe(n,e){return e.bookType=="ods"?zM(n,e):e.bookType=="numbers"?joe(n,e):e.bookType=="xlsb"?zoe(n,e):Uoe(n,e)}function zoe(n,e){cp=1024,n&&!n.SSF&&(n.SSF=di(wn)),n&&n.SSF&&(og(),s_(n.SSF),e.revssf=o_(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,z1?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=pM.indexOf(e.bookType)>-1,i=SE();FE(e=e||{});var s=cE(),a="",o=0;if(e.cellXfs=[],Sd(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Mn(s,a,DO(n.Props,e)),i.coreprops.push(a),Dr(e.rels,2,a,qn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(n.SheetNames[u]);n.Props.SheetNames=c}for(n.Props.Worksheets=n.Props.SheetNames.length,Mn(s,a,jO(n.Props)),i.extprops.push(a),Dr(e.rels,3,a,qn.EXT_PROPS),n.Custprops!==n.Props&&Gi(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Mn(s,a,LO(n.Custprops)),i.custprops.push(a),Dr(e.rels,4,a,qn.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},p=n.Sheets[n.SheetNames[o-1]],x=(p||{})["!type"]||"sheet";switch(x){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Mn(s,a,xae(o-1,a,e,n,d)),i.sheets.push(a),Dr(e.wbrels,-1,"worksheets/sheet"+o+"."+t,qn.WS[0])}if(p){var v=p["!comments"],_=!1,b="";v&&v.length>0&&(b="xl/comments"+o+"."+t,Mn(s,b,bae(v,b)),i.comments.push(b),Dr(d,-1,"../comments"+o+"."+t,qn.CMNT),_=!0),p["!legacy"]&&_&&Mn(s,"xl/drawings/vmlDrawing"+o+".vml",dM(o,p["!comments"])),delete p["!comments"],delete p["!legacy"]}d["!id"].rId1&&Mn(s,Ax(a),vp(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Mn(s,a,yae(e.Strings,a,e)),i.strs.push(a),Dr(e.wbrels,-1,"sharedStrings."+t,qn.SST)),a="xl/workbook."+t,Mn(s,a,gae(n,a)),i.workbooks.push(a),Dr(e.rels,1,a,qn.WB),a="xl/theme/theme1.xml",Mn(s,a,kE(n.Themes,e)),i.themes.push(a),Dr(e.wbrels,-1,"theme/theme1.xml",qn.THEME),a="xl/styles."+t,Mn(s,a,vae(n,a,e)),i.styles.push(a),Dr(e.wbrels,-1,"styles."+t,qn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Mn(s,a,n.vbaraw),i.vba.push(a),Dr(e.wbrels,-1,"vbaProject.bin",qn.VBA)),a="xl/metadata."+t,Mn(s,a,_ae(a)),i.metadata.push(a),Dr(e.wbrels,-1,"metadata."+t,qn.XLMETA),Mn(s,"[Content_Types].xml",CO(i,e)),Mn(s,"_rels/.rels",vp(e.rels)),Mn(s,"xl/_rels/workbook."+t+".rels",vp(e.wbrels)),delete e.revssf,delete e.ssf,s}function Uoe(n,e){cp=1024,n&&!n.SSF&&(n.SSF=di(wn)),n&&n.SSF&&(og(),s_(n.SSF),e.revssf=o_(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,z1?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=pM.indexOf(e.bookType)>-1,i=SE();FE(e=e||{});var s=cE(),a="",o=0;if(e.cellXfs=[],Sd(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",Mn(s,a,DO(n.Props,e)),i.coreprops.push(a),Dr(e.rels,2,a,qn.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(n.SheetNames[u]);n.Props.SheetNames=c}n.Props.Worksheets=n.Props.SheetNames.length,Mn(s,a,jO(n.Props)),i.extprops.push(a),Dr(e.rels,3,a,qn.EXT_PROPS),n.Custprops!==n.Props&&Gi(n.Custprops||{}).length>0&&(a="docProps/custom.xml",Mn(s,a,LO(n.Custprops)),i.custprops.push(a),Dr(e.rels,4,a,qn.CUST_PROPS));var d=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var p={"!id":{}},x=n.Sheets[n.SheetNames[o-1]],v=(x||{})["!type"]||"sheet";switch(v){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,Mn(s,a,AM(o-1,e,n,p)),i.sheets.push(a),Dr(e.wbrels,-1,"worksheets/sheet"+o+"."+t,qn.WS[0])}if(x){var _=x["!comments"],b=!1,S="";if(_&&_.length>0){var T=!1;_.forEach(function(k){k[1].forEach(function(E){E.T==!0&&(T=!0)})}),T&&(S="xl/threadedComments/threadedComment"+o+"."+t,Mn(s,S,Yte(_,d,e)),i.threadedcomments.push(S),Dr(p,-1,"../threadedComments/threadedComment"+o+"."+t,qn.TCMNT)),S="xl/comments"+o+"."+t,Mn(s,S,mM(_)),i.comments.push(S),Dr(p,-1,"../comments"+o+"."+t,qn.CMNT),b=!0}x["!legacy"]&&b&&Mn(s,"xl/drawings/vmlDrawing"+o+".vml",dM(o,x["!comments"])),delete x["!comments"],delete x["!legacy"]}p["!id"].rId1&&Mn(s,Ax(a),vp(p))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,Mn(s,a,tM(e.Strings,e)),i.strs.push(a),Dr(e.wbrels,-1,"sharedStrings."+t,qn.SST)),a="xl/workbook."+t,Mn(s,a,DM(n)),i.workbooks.push(a),Dr(e.rels,1,a,qn.WB),a="xl/theme/theme1.xml",Mn(s,a,kE(n.Themes,e)),i.themes.push(a),Dr(e.wbrels,-1,"theme/theme1.xml",qn.THEME),a="xl/styles."+t,Mn(s,a,cM(n,e)),i.styles.push(a),Dr(e.wbrels,-1,"styles."+t,qn.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",Mn(s,a,n.vbaraw),i.vba.push(a),Dr(e.wbrels,-1,"vbaProject.bin",qn.VBA)),a="xl/metadata."+t,Mn(s,a,fM()),i.metadata.push(a),Dr(e.wbrels,-1,"metadata."+t,qn.XLMETA),d.length>1&&(a="xl/persons/person.xml",Mn(s,a,Qte(d)),i.people.push(a),Dr(e.wbrels,-1,"persons/person.xml",qn.PEOPLE)),Mn(s,"[Content_Types].xml",CO(i,e)),Mn(s,"_rels/.rels",vp(e.rels)),Mn(s,"xl/_rels/workbook."+t+".rels",vp(e.wbrels)),delete e.revssf,delete e.ssf,s}function BE(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=wl(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function Hoe(n,e){return pn.find(n,"EncryptedPackage")?Boe(n,e):LM(n,e)}function qoe(n,e){var t,r=n,i=e||{};return i.type||(i.type=Vn&&Buffer.isBuffer(n)?"buffer":"base64"),t=rO(r,i),Foe(t,i)}function HM(n,e){var t=0;e:for(;t<n.length;)switch(n.charCodeAt(t)){case 10:case 13:case 32:++t;break;case 60:return XS(n.slice(t),e);default:break e}return Wp.to_workbook(n,e)}function Woe(n,e){var t="",r=BE(n,e);switch(e.type){case"base64":t=wl(n);break;case"binary":t=n;break;case"buffer":t=n.toString("binary");break;case"array":t=M0(n);break;default:throw new Error("Unrecognized type "+e.type)}return r[0]==239&&r[1]==187&&r[2]==191&&(t=Gr(t)),e.type="binary",HM(t,e)}function Goe(n,e){var t=n;return e.type=="base64"&&(t=wl(t)),t=bx.utils.decode(1200,t.slice(2),"str"),e.type="binary",HM(t,e)}function $oe(n){return n.match(/[^\x00-\x7F]/)?Au(n):n}function A5(n,e,t,r){return r?(t.type="string",Wp.to_workbook(n,t)):Wp.to_workbook(e,t)}function ZS(n,e){iE();var t=e||{};if(typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer)return ZS(new Uint8Array(n),(t=di(t),t.type="array",t));typeof Uint8Array<"u"&&n instanceof Uint8Array&&!t.type&&(t.type=typeof Deno<"u"?"buffer":"array");var r=n,i=[0,0,0,0],s=!1;if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),bp={},t.dateNF&&(bp.dateNF=t.dateNF),t.type||(t.type=Vn&&Buffer.isBuffer(n)?"buffer":"base64"),t.type=="file"&&(t.type=Vn?"buffer":"binary",r=zX(n),typeof Uint8Array<"u"&&!Vn&&(t.type="array")),t.type=="string"&&(s=!0,t.type="binary",t.codepage=65001,r=$oe(n)),t.type=="array"&&typeof Uint8Array<"u"&&n instanceof Uint8Array&&typeof ArrayBuffer<"u"){var a=new ArrayBuffer(3),o=new Uint8Array(a);if(o.foo="bar",!o.foo)return t=di(t),t.type="array",ZS(sE(r),t)}switch((i=BE(r,t))[0]){case 208:if(i[1]===207&&i[2]===17&&i[3]===224&&i[4]===161&&i[5]===177&&i[6]===26&&i[7]===225)return Hoe(pn.read(r,t),t);break;case 9:if(i[1]<=8)return LM(r,t);break;case 60:return XS(r,t);case 73:if(i[1]===73&&i[2]===42&&i[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(i[1]===68)return JZ(r,t);break;case 84:if(i[1]===65&&i[2]===66&&i[3]===76)return ZO.to_workbook(r,t);break;case 80:return i[1]===75&&i[2]<9&&i[3]<9?qoe(r,t):A5(n,r,t,s);case 239:return i[3]===60?XS(r,t):A5(n,r,t,s);case 255:if(i[1]===254)return Goe(r,t);if(i[1]===0&&i[2]===2&&i[3]===0)return p0.to_workbook(r,t);break;case 0:if(i[1]===0&&(i[2]>=2&&i[3]===0||i[2]===0&&(i[3]===8||i[3]===9)))return p0.to_workbook(r,t);break;case 3:case 131:case 139:case 140:return YS.to_workbook(r,t);case 123:if(i[1]===92&&i[2]===114&&i[3]===116)return aM.to_workbook(r,t);break;case 10:case 13:case 32:return Woe(r,t);case 137:if(i[1]===80&&i[2]===78&&i[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return QZ.indexOf(i[0])>-1&&i[2]<=12&&i[3]<=31?YS.to_workbook(r,t):A5(n,r,t,s)}function qM(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return cv(e.file,pn.write(n,{type:Vn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return pn.write(n,e)}function Koe(n,e){var t=di(e||{}),r=Voe(n,t);return Yoe(r,t)}function Yoe(n,e){var t={},r=Vn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?pn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(i_(i))}return e.password&&typeof encrypt_agile<"u"?qM(encrypt_agile(i,e.password),e):e.type==="file"?cv(e.file,i):e.type=="string"?Gr(i):i}function Xoe(n,e){var t=e||{},r=$ae(n,t);return qM(r,t)}function gu(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return _x(Au(r));case"binary":return Au(r);case"string":return n;case"file":return cv(e.file,r,"utf8");case"buffer":return Vn?zh(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):gu(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Qoe(n,e){switch(e.type){case"base64":return _x(n);case"binary":return n;case"string":return n;case"file":return cv(e.file,n,"binary");case"buffer":return Vn?zh(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function D2(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?_x(t):e.type=="string"?Gr(t):t;case"file":return cv(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function WM(n,e){iE(),Hse(n);var t=di(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=WM(n,t);return t.type="array",i_(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return gu(Vae(n,t),t);case"slk":case"sylk":return gu(JO.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return gu(MM(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Qoe(GM(n.Sheets[n.SheetNames[i]],t),t);case"csv":return gu(VE(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return gu(ZO.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return D2(YS.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return gu(Wp.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return gu(aM.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return gu(eM.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return gu(zM(n,t),t);case"wk1":return D2(p0.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return D2(p0.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),D2(OM(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),Xoe(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Koe(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Joe(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function Zoe(n,e,t){var r={};return r.type="file",r.file=e,Joe(r),WM(n,r)}function ele(n,e,t,r,i,s,a,o){var c=rs(t),u=o.defval,d=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),p=!0,x=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(x,"__rowNum__",{value:t,enumerable:!1})}catch{x.__rowNum__=t}else x.__rowNum__=t;if(!a||n[t])for(var v=e.s.c;v<=e.e.c;++v){var _=a?n[t][v]:n[r[v]+c];if(_===void 0||_.t===void 0){if(u===void 0)continue;s[v]!=null&&(x[s[v]]=u);continue}var b=_.v;switch(_.t){case"z":if(b==null)break;continue;case"e":b=b==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+_.t)}if(s[v]!=null){if(b==null)if(_.t=="e"&&b===null)x[s[v]]=null;else if(u!==void 0)x[s[v]]=u;else if(d&&b===null)x[s[v]]=null;else continue;else x[s[v]]=d&&(_.t!=="n"||_.t==="n"&&o.rawNumbers!==!1)?b:Mh(_,b,o);b!=null&&(p=!1)}}return{row:x,isempty:p}}function mb(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},d=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof d){case"string":c=dr(d);break;case"number":c=dr(n["!ref"]),c.s.r=d;break;default:c=d}r>0&&(i=0);var p=rs(c.s.r),x=[],v=[],_=0,b=0,S=Array.isArray(n),T=c.s.r,k=0,E={};S&&!n[T]&&(n[T]=[]);var j=u.skipHidden&&n["!cols"]||[],F=u.skipHidden&&n["!rows"]||[];for(k=c.s.c;k<=c.e.c;++k)if(!(j[k]||{}).hidden)switch(x[k]=Ri(k),t=S?n[T][k]:n[x[k]+p],r){case 1:s[k]=k-c.s.c;break;case 2:s[k]=x[k];break;case 3:s[k]=u.header[k-c.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=Mh(t,null,u),b=E[a]||0,!b)E[a]=1;else{do o=a+"_"+b++;while(E[o]);E[a]=b,E[o]=1}s[k]=o}for(T=c.s.r+i;T<=c.e.r;++T)if(!(F[T]||{}).hidden){var z=ele(n,c,T,x,r,s,S,u);(z.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(v[_++]=z.row)}return v.length=_,v}var a6=/"/g;function tle(n,e,t,r,i,s,a,o){for(var c=!0,u=[],d="",p=rs(t),x=e.s.c;x<=e.e.c;++x)if(r[x]){var v=o.dense?(n[t]||[])[x]:n[r[x]+p];if(v==null)d="";else if(v.v!=null){c=!1,d=""+(o.rawNumbers&&v.t=="n"?v.v:Mh(v,null,o));for(var _=0,b=0;_!==d.length;++_)if((b=d.charCodeAt(_))===i||b===s||b===34||o.forceQuotes){d='"'+d.replace(a6,'""')+'"';break}d=="ID"&&(d='"ID"')}else v.f!=null&&!v.F?(c=!1,d="="+v.f,d.indexOf(",")>=0&&(d='"'+d.replace(a6,'""')+'"')):d="";u.push(d)}return o.blankrows===!1&&c?null:u.join(a)}function VE(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=dr(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),d="",p=[];r.dense=Array.isArray(n);for(var x=r.skipHidden&&n["!cols"]||[],v=r.skipHidden&&n["!rows"]||[],_=i.s.c;_<=i.e.c;++_)(x[_]||{}).hidden||(p[_]=Ri(_));for(var b=0,S=i.s.r;S<=i.e.r;++S)(v[S]||{}).hidden||(d=tle(n,i,S,p,a,c,s,r),d!=null&&(r.strip&&(d=d.replace(u,"")),(d||r.blankrows!==!1)&&t.push((b++?o:"")+d)));return delete r.dense,t.join("")}function GM(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=VE(n,e);return t}function nle(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=dr(n["!ref"]),s="",a=[],o,c=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=Ri(o);for(var d=i.s.r;d<=i.e.r;++d)for(s=rs(d),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[d]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}c[c.length]=e+"="+r}return c}function $M(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var c=typeof r.origin=="string"?Pi(r.origin):r.origin;a=c.r,o=c.c}var u,d={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var p=dr(s["!ref"]);d.e.c=Math.max(d.e.c,p.e.c),d.e.r=Math.max(d.e.r,p.e.r),a==-1&&(a=p.e.r+1,d.e.r=a+e.length-1+i)}else a==-1&&(a=0,d.e.r=e.length-1+i);var x=r.header||[],v=0;e.forEach(function(b,S){Gi(b).forEach(function(T){(v=x.indexOf(T))==-1&&(x[v=x.length]=T);var k=b[T],E="z",j="",F=Tn({c:o+v,r:a+S+i});u=Px(s,F),k&&typeof k=="object"&&!(k instanceof Date)?s[F]=k:(typeof k=="number"?E="n":typeof k=="boolean"?E="b":typeof k=="string"?E="s":k instanceof Date?(E="d",r.cellDates||(E="n",k=Bs(k)),j=r.dateNF||wn[14]):k===null&&r.nullError&&(E="e",k=0),u?(u.t=E,u.v=k,delete u.w,delete u.R,j&&(u.z=j)):s[F]=u={t:E,v:k},j&&(u.z=j))})}),d.e.c=Math.max(d.e.c,o+x.length-1);var _=rs(a);if(i)for(v=0;v<x.length;++v)s[Ri(v+o)+_]={t:"s",v:x[v]};return s["!ref"]=Ln(d),s}function rle(n,e){return $M(null,n,e)}function Px(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=Pi(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?Px(n,Tn(e)):Px(n,Tn({r:e,c:t||0}))}function ile(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function zE(){return{SheetNames:[],Sheets:{}}}function UE(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(IM(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function sle(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=ile(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function ale(n,e){return n.z=e,n}function KM(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function ole(n,e,t){return KM(n,"#"+e,t)}function lle(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function cle(n,e,t,r){for(var i=typeof e!="string"?e:dr(e),s=typeof e=="string"?e:Ln(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=Px(n,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=t,r&&(c.D=!0))}return n}var dy={encode_col:Ri,encode_row:rs,encode_cell:Tn,encode_range:Ln,decode_col:xE,decode_row:gE,split_cell:yQ,decode_cell:Pi,decode_range:qo,format_cell:Mh,sheet_add_aoa:_O,sheet_add_json:$M,sheet_add_dom:FM,aoa_to_sheet:lg,json_to_sheet:rle,table_to_sheet:BM,table_to_book:poe,sheet_to_csv:VE,sheet_to_txt:GM,sheet_to_json:mb,sheet_to_html:MM,sheet_to_formulae:nle,sheet_to_row_object_array:mb,sheet_get_cell:Px,book_new:zE,book_append_sheet:UE,book_set_sheet_visibility:sle,cell_set_number_format:ale,cell_set_hyperlink:KM,cell_set_internal_link:ole,cell_add_comment:lle,sheet_set_array_formula:cle,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const ule=n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=t,r.readAsArrayBuffer(n)}),hle=async n=>{const e=await ule(n),t=ZS(e,{type:"buffer"}),r=t.SheetNames[0],i=t.Sheets[r],s=dy.sheet_to_json(i,{header:1});if(s.length<2)return[];const a=s[0];return s.slice(1).map(c=>{const u=c,d={};return a.forEach((p,x)=>{d[p]=u[x]}),d})},fle=async n=>{const e={created:0,updated:0,errors:[]},t=await hle(n);if(t.length===0)return e.errors.push({row:0,message:"File vuoto o non valido."}),e;const r=ss(Ut,"clients"),i=await Jr(r),s=new Map;i.docs.forEach(o=>{const c=o.data();c.email&&s.set(c.email.toLowerCase(),o.id)});const a=Bc(Ut);for(let o=0;o<t.length;o++){const c=t[o],u=o+2;if(!c.email||!c.type){e.errors.push({row:u,message:'Le colonne "email" e "type" sono obbligatorie.'});continue}const d=String(c.email).toLowerCase();let p;try{if(c.type==="parent"){if(!c.firstName||!c.lastName||!c.taxCode){e.errors.push({row:u,message:'Per tipo "parent", le colonne "firstName", "lastName" e "taxCode" sono obbligatorie.'});continue}p={clientType:ur.Parent,email:String(c.email),phone:String(c.phone||""),address:String(c.address||""),zipCode:String(c.zipCode||""),city:String(c.city||""),province:String(c.province||""),firstName:String(c.firstName),lastName:String(c.lastName),taxCode:String(c.taxCode),children:[]}}else if(c.type==="institutional"){if(!c.companyName||!c.vatNumber){e.errors.push({row:u,message:'Per tipo "institutional", le colonne "companyName" e "vatNumber" sono obbligatorie.'});continue}p={clientType:ur.Institutional,email:String(c.email),phone:String(c.phone||""),address:String(c.address||""),zipCode:String(c.zipCode||""),city:String(c.city||""),province:String(c.province||""),companyName:String(c.companyName),vatNumber:String(c.vatNumber),numberOfChildren:0,ageRange:""}}else{e.errors.push({row:u,message:'Il valore nella colonna "type" deve essere "parent" o "institutional".'});continue}const x=s.get(d);if(x){const v=fn(Ut,"clients",x);a.update(v,p),e.updated++}else{const v=fn(r);a.set(v,p),e.created++}}catch(x){e.errors.push({row:u,message:x.message})}}return(e.created>0||e.updated>0)&&await a.commit(),e};var dle=uR();const mi=({children:n,onClose:e,size:t="md"})=>{const[r,i]=ne.useState(!1);ne.useEffect(()=>{i(!0);const o=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=o}},[]);const s={md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl"},a=f.jsx("div",{className:"fixed inset-0 bg-slate-900/60 z-[100] flex justify-center items-center p-4 animate-fade-in backdrop-blur-sm","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",onClick:e,children:f.jsx("div",{className:`relative w-full ${s[t]} bg-white rounded-xl shadow-2xl flex flex-col max-h-[90dvh] h-fit overflow-hidden md-card border-0`,onClick:o=>o.stopPropagation(),children:n})});return r?dle.createPortal(a,document.body):null},Ho=({isOpen:n,onClose:e,onConfirm:t,title:r,message:i,confirmText:s="Conferma",cancelText:a="Annulla",isDangerous:o=!1})=>n?f.jsxs(mi,{onClose:e,size:"md",children:[f.jsx("h2",{className:"text-xl font-bold mb-4",children:r}),f.jsx("p",{className:"text-gray-600 mb-6",children:i}),f.jsxs("div",{className:"flex justify-end space-x-3",children:[f.jsx("button",{onClick:e,className:"md-btn md-btn-flat md-btn-sm",children:a}),f.jsx("button",{onClick:()=>{t(),e()},className:`md-btn md-btn-raised md-btn-sm ${o?"md-btn-red":"md-btn-primary"}`,children:s})]})]}):null,d_=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),mle=({entityName:n,templateHeaders:e,instructions:t,onClose:r,onImport:i})=>{const[s,a]=ne.useState(null),[o,c]=ne.useState(!1),[u,d]=ne.useState(null),[p,x]=ne.useState(null),v=S=>{S.target.files&&S.target.files[0]&&(a(S.target.files[0]),x(null),d(null))},_=async()=>{if(!s){x("Per favore, seleziona un file Excel.");return}c(!0),x(null),d(null);try{const S=await i(s);d(S)}catch(S){console.error(S),x("Si  verificato un errore imprevisto durante l'importazione. Controlla la console per i dettagli.")}finally{c(!1)}},b=()=>{const S=dy.json_to_sheet([{}],{header:e}),T=dy.book_new();dy.book_append_sheet(T,S,"Template"),Zoe(T,`${n.toLowerCase()}_template.xlsx`)};return f.jsx(mi,{onClose:r,children:f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsx("div",{className:"text-center flex-shrink-0 p-6 pb-2 border-b border-gray-100",children:f.jsxs("h2",{className:"text-xl font-bold",id:"modal-title",children:["Importa ",n," da Excel"]})}),f.jsx("div",{className:"flex-1 overflow-y-auto min-h-0 p-6",children:u?f.jsxs("div",{className:"mt-4 space-y-4",children:[f.jsxs("div",{className:`p-4 rounded-md ${u.errors.length===0?"bg-green-50 text-green-800":"bg-yellow-50 text-yellow-800"}`,children:[f.jsx("h3",{className:"font-bold",children:"Importazione Completata"}),f.jsxs("p",{className:"text-sm mt-1",children:["Creati: ",u.created," | Aggiornati: ",u.updated]})]}),u.errors.length>0&&f.jsxs("div",{children:[f.jsxs("h4",{className:"font-semibold text-sm text-red-600",children:["Errori (",u.errors.length,")"]}),f.jsx("ul",{className:"mt-2 max-h-40 overflow-y-auto text-xs bg-gray-50 p-2 rounded border border-red-100 space-y-1",children:u.errors.map((S,T)=>f.jsxs("li",{className:"text-red-600",children:["Riga ",S.row,": ",S.message]},T))})]})]}):f.jsxs("div",{className:"mt-4",children:[f.jsxs("div",{className:"p-4 bg-gray-50 border rounded-md",style:{borderColor:"var(--md-divider)"},children:[f.jsx("h3",{className:"font-semibold text-sm",children:"Istruzioni"}),f.jsx("ul",{className:"list-disc list-inside text-sm mt-2 space-y-1",style:{color:"var(--md-text-secondary)"},children:t.map((S,T)=>f.jsx("li",{children:S},T))}),f.jsx("button",{onClick:b,className:"text-sm font-medium mt-3",style:{color:"var(--md-primary)"},children:"Scarica template"})]}),f.jsxs("div",{className:"mt-4",children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Seleziona File (.xlsx)"}),f.jsx("div",{className:"flex items-center justify-center w-full",children:f.jsxs("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-32 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100",children:[f.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[f.jsx(d_,{}),f.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[f.jsx("span",{className:"font-semibold",children:"Clicca per caricare"})," o trascina il file"]}),f.jsx("p",{className:"text-xs text-gray-500",children:"Excel (.xlsx)"})]}),f.jsx("input",{id:"dropzone-file",type:"file",className:"hidden",accept:".xlsx",onChange:v})]})}),s&&f.jsxs("p",{className:"mt-2 text-sm text-green-600 font-medium text-center",children:["File selezionato: ",s.name]})]}),p&&f.jsx("p",{className:"mt-4 text-sm text-red-500 text-center",children:p})]})}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",style:{borderColor:"var(--md-divider)"},children:[f.jsx("button",{onClick:r,className:"md-btn md-btn-flat md-btn-sm",children:"Chiudi"}),!u&&f.jsx("button",{onClick:_,disabled:!s||o,className:"md-btn md-btn-raised md-btn-primary md-btn-sm",children:o?f.jsx(as,{}):"Importa"})]})]})})},po=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16m8-8H4"})}),$r=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),YM=({notesHistory:n,onSave:e,label:t="Storico Note"})=>{const[r,i]=ne.useState(new Date().toISOString().split("T")[0]),[s,a]=ne.useState(""),o=()=>{if(!s.trim())return;const d=[{id:Date.now().toString(),date:new Date(r).toISOString(),content:s},...n];e(d),a(""),i(new Date().toISOString().split("T")[0])},c=u=>{if(confirm("Vuoi eliminare questa nota?")){const d=n.filter(p=>p.id!==u);e(d)}};return f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-700 uppercase mb-1",children:t}),f.jsxs("div",{className:"flex gap-2 items-end bg-gray-50 p-2 rounded border border-gray-200",children:[f.jsxs("div",{className:"w-32 flex-shrink-0",children:[f.jsx("label",{className:"block text-[10px] text-gray-500 mb-0.5",children:"Data"}),f.jsx("input",{type:"date",value:r,onChange:u=>i(u.target.value),className:"w-full p-1.5 border rounded text-xs bg-white focus:border-indigo-500"})]}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-[10px] text-gray-500 mb-0.5",children:"Nota"}),f.jsx("input",{type:"text",value:s,onChange:u=>a(u.target.value),onKeyDown:u=>u.key==="Enter"&&(u.preventDefault(),o()),placeholder:"Scrivi una nota...",className:"w-full p-1.5 border rounded text-xs bg-white focus:border-indigo-500"})]}),f.jsxs("button",{type:"button",onClick:o,disabled:!s.trim(),className:"md-btn md-btn-raised md-btn-green h-8 px-3 flex items-center justify-center disabled:opacity-50",title:"Aggiungi Nota",children:[f.jsx(po,{})," ",f.jsx("span",{className:"ml-1 text-xs hidden sm:inline",children:"Aggiungi"})]})]}),f.jsx("div",{className:"bg-white border border-gray-200 rounded-md max-h-48 overflow-y-auto",children:n.length===0?f.jsx("p",{className:"text-xs text-gray-400 italic p-3 text-center",children:"Nessuna nota presente nello storico."}):f.jsx("div",{className:"divide-y divide-gray-100",children:n.map(u=>f.jsxs("div",{className:"p-2 flex justify-between items-start hover:bg-gray-50 group",children:[f.jsxs("div",{className:"flex-1 pr-2",children:[f.jsx("div",{className:"text-[10px] font-bold text-gray-500 mb-0.5",children:new Date(u.date).toLocaleDateString("it-IT")}),f.jsx("p",{className:"text-xs text-gray-800 leading-snug",children:u.content})]}),f.jsx("button",{type:"button",onClick:()=>c(u.id),className:"text-gray-300 hover:text-red-500 p-1 opacity-0 group-hover:opacity-100 transition-opacity",title:"Elimina nota",children:f.jsx($r,{})})]},u.id))})})]})},tm=({currentPage:n,totalItems:e,itemsPerPage:t,onPageChange:r})=>{const i=Math.ceil(e/t);if(i<=1)return null;const s=(n-1)*t+1,a=Math.min(n*t,e),o=()=>{const c=[];let d=Math.max(1,n-Math.floor(2.5)),p=Math.min(i,d+5-1);p-d+1<5&&(d=Math.max(1,p-5+1));for(let x=d;x<=p;x++)c.push(x);return c};return f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center py-4 px-2 border-t border-gray-100 mt-4 gap-4",children:[f.jsxs("div",{className:"text-xs text-gray-500",children:["Mostrando ",f.jsx("span",{className:"font-bold",children:s})," - ",f.jsx("span",{className:"font-bold",children:a})," di ",f.jsx("span",{className:"font-bold",children:e})," risultati"]}),f.jsxs("div",{className:"flex items-center space-x-1",children:[f.jsx("button",{onClick:()=>r(n-1),disabled:n===1,className:"md-btn md-btn-flat px-2 py-1 text-xs disabled:opacity-30",children:"< Prec"}),o().map(c=>f.jsx("button",{onClick:()=>r(c),className:`w-8 h-8 flex items-center justify-center rounded-lg text-xs font-bold transition-all ${n===c?"bg-indigo-600 text-white shadow-sm":"text-gray-600 hover:bg-gray-100"}`,children:c},c)),f.jsx("button",{onClick:()=>r(n+1),disabled:n===i,className:"md-btn md-btn-flat px-2 py-1 text-xs disabled:opacity-30",children:"Succ >"})]})]})},mo=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),HE=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),jx=({filled:n,onClick:e,className:t})=>f.jsx("svg",{onClick:e,xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${n?"text-yellow-400":"text-gray-300"} ${e?"cursor-pointer hover:scale-110 transition-transform":""} ${t}`,viewBox:"0 0 20 20",fill:"currentColor",children:f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),ple=["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],gle=n=>{if(!n.rating)return 0;const{learning:e,behavior:t,attendance:r,hygiene:i}=n.rating,s=e+t+r+i;return s>0?(s/4).toFixed(1):0},xle=n=>{if(!n)return 0;const{availability:e,complaints:t,churnRate:r,distance:i}=n,s=e+t+r+i;return s>0?(s/4).toFixed(1):0},Cf=({label:n,value:e,onChange:t})=>f.jsxs("div",{className:"flex justify-between items-center mb-1 bg-white p-2 rounded border border-gray-100",children:[f.jsx("span",{className:"text-xs text-gray-600 font-medium",children:n}),f.jsxs("div",{className:"flex space-x-1 items-center",children:[f.jsxs("span",{className:"text-xs font-bold text-gray-400 mr-2",children:[e,"/5"]}),[1,2,3,4,5].map(r=>f.jsx(jx,{filled:r<=e,onClick:()=>t(r),className:"w-4 h-4"},r))]})]}),vle=()=>f.jsxs("div",{className:"mt-3 flex items-center justify-end gap-3 text-[10px] text-gray-400 border-t border-dashed border-gray-200 pt-2",children:[f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"font-bold mr-1",children:"1"})," ",f.jsx(jx,{filled:!0,className:"w-3 h-3 text-yellow-400 mr-1"})," ",f.jsx("span",{children:"= insufficiente"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("span",{className:"font-bold mr-1",children:"5"})," ",f.jsx(jx,{filled:!0,className:"w-3 h-3 text-yellow-400 mr-1"})," ",f.jsx("span",{children:"= eccellente"})]})]}),yle=({client:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState("general"),[s,a]=ne.useState((n==null?void 0:n.clientType)||ur.Parent),[o,c]=ne.useState((n==null?void 0:n.email)||""),[u,d]=ne.useState((n==null?void 0:n.phone)||""),[p,x]=ne.useState((n==null?void 0:n.address)||""),[v,_]=ne.useState((n==null?void 0:n.zipCode)||""),[b,S]=ne.useState((n==null?void 0:n.city)||""),[T,k]=ne.useState((n==null?void 0:n.province)||""),[E,j]=ne.useState((n==null?void 0:n.firstName)||""),[F,z]=ne.useState((n==null?void 0:n.lastName)||""),[A,I]=ne.useState((n==null?void 0:n.taxCode)||""),[O,B]=ne.useState((n==null?void 0:n.children)||[]),[R,P]=ne.useState((n==null?void 0:n.companyName)||""),[V,Y]=ne.useState((n==null?void 0:n.vatNumber)||""),[ie,q]=ne.useState((n==null?void 0:n.numberOfChildren)||0),[Q,se]=ne.useState((n==null?void 0:n.ageRange)||""),[J,me]=ne.useState((n==null?void 0:n.rating)||{availability:0,complaints:0,churnRate:0,distance:0}),[re,M]=ne.useState((n==null?void 0:n.notesHistory)||[]),[W,K]=ne.useState(""),[G,te]=ne.useState(""),he=()=>{W&&G&&(B([...O,{id:Date.now().toString(),name:W,age:G,rating:{learning:0,behavior:0,attendance:0,hygiene:0},notesHistory:[],tags:[]}]),K(""),te(""))},ye=ke=>{B(O.filter((oe,qe)=>qe!==ke))},be=(ke,oe,qe)=>{const at=[...O],Fe={...at[ke]};Fe.rating={...Fe.rating,[oe]:qe},at[ke]=Fe,B(at)},Ce=ke=>{if(ke.preventDefault(),!u||u.trim().length===0){alert("Inserisci un numero di telefono valido per il cliente.");return}const oe={email:o,phone:u,address:p,zipCode:v,city:b,province:T,clientType:s,notesHistory:re};if(s===ur.Parent){const qe={...oe,firstName:E,lastName:F,taxCode:A,children:O,rating:J};n!=null&&n.id?e({...qe,id:n.id}):e(qe)}else{const qe={...oe,companyName:R,vatNumber:V,numberOfChildren:ie,ageRange:Q};n!=null&&n.id?e({...qe,id:n.id}):e(qe)}};return f.jsxs("form",{onSubmit:Ce,className:"flex flex-col h-full max-h-full overflow-hidden",children:[f.jsxs("div",{className:"p-6 pb-2 flex-shrink-0 border-b border-gray-100",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n?"Modifica Cliente":"Nuovo Cliente"}),!n&&f.jsxs("div",{className:"flex space-x-2 bg-gray-100 p-1 rounded-lg",children:[f.jsx("button",{type:"button",onClick:()=>a(ur.Parent),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${s===ur.Parent?"bg-white shadow-sm text-indigo-600":"text-gray-500"}`,children:"Genitore"}),f.jsx("button",{type:"button",onClick:()=>a(ur.Institutional),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${s===ur.Institutional?"bg-white shadow-sm text-indigo-600":"text-gray-500"}`,children:"Ente"})]})]}),f.jsxs("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg overflow-x-auto",children:[f.jsx("button",{type:"button",onClick:()=>i("general"),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap px-2 ${r==="general"?"bg-white shadow-sm text-indigo-600":"text-gray-500"}`,children:"Anagrafica"}),s===ur.Parent&&f.jsxs("button",{type:"button",onClick:()=>i("children"),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap px-2 ${r==="children"?"bg-white shadow-sm text-indigo-600":"text-gray-500"}`,children:["Figli (",O.length,")"]}),f.jsx("button",{type:"button",onClick:()=>i("rating"),className:`flex-1 py-1.5 text-xs font-medium rounded-md transition-all whitespace-nowrap px-2 ${r==="rating"?"bg-white shadow-sm text-indigo-600":"text-gray-500"}`,children:s===ur.Parent?"Valutazione":"Note"})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-6 space-y-4",children:[r==="general"&&f.jsxs(f.Fragment,{children:[s===ur.Parent?f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:E,onChange:ke=>j(ke.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Nome"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:F,onChange:ke=>z(ke.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Cognome"})]}),f.jsxs("div",{className:"md-input-group col-span-full",children:[f.jsx("input",{type:"text",value:A,onChange:ke=>I(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Codice Fiscale"})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:R,onChange:ke=>P(ke.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Ragione Sociale"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:V,onChange:ke=>Y(ke.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"P.IVA / C.F."})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"number",value:ie,onChange:ke=>q(Number(ke.target.value)),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"N. Bambini"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:Q,onChange:ke=>se(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Fascia Et"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"email",value:o,onChange:ke=>c(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Email"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"tel",value:u,onChange:ke=>d(ke.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Telefono"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:p,onChange:ke=>x(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Indirizzo"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:v,onChange:ke=>_(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"CAP"})]}),f.jsxs("div",{className:"col-span-2 md-input-group",children:[f.jsx("input",{type:"text",value:b,onChange:ke=>S(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Citt"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:T,onChange:ke=>k(ke.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Provincia"})]})]}),r==="children"&&s===ur.Parent&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border border-gray-200",children:[f.jsx("h4",{className:"text-xs font-bold text-gray-600 uppercase mb-2",children:"Aggiungi Figlio"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",placeholder:"Nome",value:W,onChange:ke=>K(ke.target.value),className:"md-input flex-1 text-sm"}),f.jsx("input",{type:"text",placeholder:"Et",value:G,onChange:ke=>te(ke.target.value),className:"md-input w-20 text-sm"}),f.jsx("button",{type:"button",onClick:he,className:"md-btn md-btn-raised md-btn-green px-3",children:f.jsx(po,{})})]})]}),f.jsxs("div",{className:"space-y-2",children:[O.map((ke,oe)=>f.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border rounded-lg shadow-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-gray-800",children:ke.name}),f.jsx("p",{className:"text-xs text-gray-500",children:ke.age})]}),f.jsx("button",{type:"button",onClick:()=>ye(oe),className:"text-red-400 hover:text-red-600",children:f.jsx($r,{})})]},oe)),O.length===0&&f.jsx("p",{className:"text-center text-gray-400 text-sm py-4",children:"Nessun figlio aggiunto."})]})]}),r==="rating"&&f.jsxs("div",{className:"space-y-6",children:[s===ur.Parent&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[f.jsx("h4",{className:"font-bold text-blue-800 mb-3 text-sm uppercase",children:"Valutazione Genitore"}),f.jsx(Cf,{label:"Disponibilit",value:J.availability,onChange:ke=>me(oe=>({...oe,availability:ke}))}),f.jsx(Cf,{label:"Atteggiamento (Lamentele)",value:J.complaints,onChange:ke=>me(oe=>({...oe,complaints:ke}))}),f.jsx(Cf,{label:"Fedelt (Churn)",value:J.churnRate,onChange:ke=>me(oe=>({...oe,churnRate:ke}))}),f.jsx(Cf,{label:"Vicinanza Sede",value:J.distance,onChange:ke=>me(oe=>({...oe,distance:ke}))})]}),O.map((ke,oe)=>{var qe,at,Fe,_e;return f.jsxs("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[f.jsxs("h4",{className:"font-bold text-green-800 mb-3 text-sm uppercase",children:["Valutazione: ",ke.name]}),f.jsx(Cf,{label:"Apprendimento",value:((qe=ke.rating)==null?void 0:qe.learning)||0,onChange:Be=>be(oe,"learning",Be)}),f.jsx(Cf,{label:"Condotta",value:((at=ke.rating)==null?void 0:at.behavior)||0,onChange:Be=>be(oe,"behavior",Be)}),f.jsx(Cf,{label:"Frequenza",value:((Fe=ke.rating)==null?void 0:Fe.attendance)||0,onChange:Be=>be(oe,"attendance",Be)}),f.jsx(Cf,{label:"Igiene/Salute",value:((_e=ke.rating)==null?void 0:_e.hygiene)||0,onChange:Be=>be(oe,"hygiene",Be)})]},ke.id)}),f.jsx(vle,{})]}),f.jsx(YM,{notesHistory:re,onSave:M,label:`Note ${s===ur.Parent?"Famiglia":"Ente"}`})]})]}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",children:[f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-green md-btn-sm",children:"Salva"})]})]})},ble=()=>{const[n,e]=ne.useState([]),[t,r]=ne.useState([]),[i,s]=ne.useState(!0),[a,o]=ne.useState(""),[c,u]=ne.useState(!1),[d,p]=ne.useState("surname_asc"),[x,v]=ne.useState("first_last"),[_,b]=ne.useState(""),[S,T]=ne.useState(""),[k,E]=ne.useState(1),j=12,[F,z]=ne.useState(!1),[A,I]=ne.useState(null),[O,B]=ne.useState(!1),[R,P]=ne.useState(null),[V,Y]=ne.useState(!1),ie=ne.useCallback(async()=>{s(!0);try{const[G,te]=await Promise.all([Oh(),_l()]);e(G),r(te)}catch(G){console.error(G)}finally{s(!1)}},[]);ne.useEffect(()=>{ie()},[ie]),ne.useEffect(()=>{E(1)},[a,c,_,S]);const q=(G=null)=>{I(G),z(!0)},Q=async G=>{try{"id"in G?await DY(G.id,G):await IY(G),z(!1),ie()}catch(te){console.error(te),alert("Errore durante il salvataggio.")}},se=(G,te)=>{P({id:G,action:te})},J=async()=>{if(R)try{if(R.action==="delete"){const G=R.id;await RY(G)}else if(R.action==="restore")await PY(R.id);else{const G=R.id,te=await FS(G);for(const he of te)await L1(he),await j1(he.id),he.locationId&&he.locationId!=="unassigned"&&await gp(he.locationId);await Kk(G)}ie()}catch(G){console.error(G)}finally{P(null)}},me=async()=>{Y(!1),s(!0);try{const G=await Oh();for(const te of G){const he=await FS(te.id);for(const ye of he)await L1(ye),await j1(ye.id),ye.locationId&&ye.locationId!=="unassigned"&&await gp(ye.locationId);await Kk(te.id)}await ie(),alert("Tutti i clienti e i dati correlati sono stati eliminati.")}catch(G){console.error("Error deleting all:",G),alert("Errore durante l'eliminazione totale.")}finally{s(!1)}},re=async G=>{const te=await fle(G);return ie(),te},M=ne.useMemo(()=>{let G=n.filter(te=>c?te.isDeleted:!te.isDeleted);return G=G.filter(te=>{const he=(a||"").toLowerCase();let ye=!1;if(te.clientType===ur.Parent){const be=te;ye=(be.firstName||"").toLowerCase().includes(he)||(be.lastName||"").toLowerCase().includes(he)||(be.email||"").toLowerCase().includes(he)||(be.children||[]).some(Ce=>(Ce.name||"").toLowerCase().includes(he))}else{const be=te;ye=(be.companyName||"").toLowerCase().includes(he)||(be.email||"").toLowerCase().includes(he)}return!ye&&he.length>0&&(ye=t.filter(Ce=>Ce.clientId===te.id).some(Ce=>(Ce.locationName||"").toLowerCase().includes(he)||(Ce.supplierName||"").toLowerCase().includes(he))),!(!ye||(_!==""||S!=="")&&!t.filter(ke=>ke.clientId===te.id&&(ke.status===Pr.Active||ke.status===Pr.Pending)).some(ke=>ke.appointments?ke.appointments.some(oe=>{const qe=new Date(oe.date),at=_===""||qe.getDay()===parseInt(_),Fe=S===""||S>=oe.startTime&&S<=oe.endTime;return at&&Fe}):!1))}),G.sort((te,he)=>{let ye="",be="",Ce="",ke="";switch(te.clientType===ur.Parent?(ye=te.firstName||"",be=te.lastName||""):(ye=te.companyName||"",be=te.companyName||""),he.clientType===ur.Parent?(Ce=he.firstName||"",ke=he.lastName||""):(Ce=he.companyName||"",ke=he.companyName||""),d){case"surname_asc":return be.localeCompare(ke);case"surname_desc":return ke.localeCompare(be);case"name_asc":return ye.localeCompare(Ce);case"name_desc":return Ce.localeCompare(ye);default:return 0}}),G},[n,t,c,a,d,_,S]),W=ne.useMemo(()=>{const G=(k-1)*j;return M.slice(G,G+j)},[M,k]),K=G=>{const te=t.filter(ye=>ye.clientId===G&&ye.status===Pr.Active),he=new Set;return te.forEach(ye=>{ye.locationColor&&he.add(ye.locationColor)}),Array.from(he)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Clienti"}),f.jsx("p",{className:"mt-1",style:{color:"var(--md-text-secondary)"},children:"Gestisci anagrafica, valutazioni e figli."})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>Y(!0),className:"md-btn md-btn-sm bg-red-50 text-red-700 border border-red-200 hover:bg-red-100 flex items-center text-xs font-bold mr-2",children:[f.jsx($r,{})," Elimina Tutto"]}),f.jsxs("button",{onClick:()=>B(!0),className:"md-btn md-btn-flat",children:[f.jsx(d_,{})," ",f.jsx("span",{className:"ml-2 hidden sm:inline",children:"Importa"})]}),f.jsxs("button",{onClick:()=>u(!c),className:`md-btn ${c?"bg-gray-200":"md-btn-flat"}`,children:[f.jsx($r,{})," ",f.jsx("span",{className:"ml-2 hidden sm:inline",children:c?"Attivi":"Cestino"})]}),!c&&f.jsxs("button",{onClick:()=>q(),className:"md-btn md-btn-raised md-btn-green",children:[f.jsx(po,{})," ",f.jsx("span",{className:"ml-2",children:"Nuovo"})]})]})]}),f.jsxs("div",{className:"mb-6 bg-gray-50 p-3 rounded-lg border border-gray-200 flex flex-col lg:flex-row gap-3",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",placeholder:"Cerca Cliente, Figlio, Sede...",className:"block w-full bg-white border rounded-md py-2 pl-10 pr-3 text-sm focus:ring-1 focus:ring-indigo-500",value:a,onChange:G=>o(G.target.value)})]}),f.jsxs("div",{className:"flex gap-2 w-full lg:w-auto flex-wrap",children:[f.jsxs("select",{value:_,onChange:G=>b(G.target.value),className:"flex-1 lg:w-32 block bg-white border rounded-md py-2 px-3 text-sm min-w-[100px]",children:[f.jsx("option",{value:"",children:"Giorno..."}),ple.map((G,te)=>f.jsx("option",{value:te,children:G},te))]}),f.jsx("input",{type:"time",value:S,onChange:G=>T(G.target.value),className:"flex-1 lg:w-28 block bg-white border rounded-md py-2 px-2 text-sm min-w-[80px]"}),f.jsxs("select",{value:d,onChange:G=>p(G.target.value),className:"flex-1 lg:w-40 block bg-white border rounded-md py-2 px-3 text-sm min-w-[130px]",children:[f.jsx("option",{value:"surname_asc",children:"Cognome (A-Z)"}),f.jsx("option",{value:"surname_desc",children:"Cognome (Z-A)"}),f.jsx("option",{value:"name_asc",children:"Nome (A-Z)"}),f.jsx("option",{value:"name_desc",children:"Nome (Z-A)"})]}),f.jsx("button",{onClick:()=>v(G=>G==="first_last"?"last_first":"first_last"),className:"flex-1 lg:w-auto bg-white border border-gray-300 rounded-md py-2 px-3 text-sm text-gray-700 hover:bg-gray-50 font-medium whitespace-nowrap shadow-sm min-w-[130px]",title:"Cambia formato visualizzazione nome",children:x==="first_last"?"Nome Cognome":"Cognome Nome"})]})]}),i?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[W.map(G=>{const te=G.clientType===ur.Parent,he=G,be=te?x==="first_last"?`${he.firstName||""} ${he.lastName||""}`:`${he.lastName||""} ${he.firstName||""}`:G.companyName||"Senza Nome",Ce=te?xle(he.rating):0,ke=K(G.id);return f.jsxs("div",{className:`md-card flex flex-col cursor-pointer hover:shadow-md transition-shadow relative overflow-hidden ${c?"opacity-75":""}`,onClick:()=>!c&&q(G),children:[f.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-2 flex flex-col",children:ke.length>0?ke.map((oe,qe)=>f.jsx("div",{style:{backgroundColor:oe},className:"flex-1",title:"Sede Attiva"},qe)):f.jsx("div",{className:"flex-1 bg-gray-200"})}),f.jsxs("div",{className:"p-5 pl-6 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 truncate pr-2 flex-1",title:be,children:be}),f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsx("span",{className:`text-[10px] uppercase px-2 py-1 rounded font-bold ${te?"bg-blue-50 text-blue-700":"bg-purple-50 text-purple-700"}`,children:te?"Genitore":"Ente"}),te&&Number(Ce)>0&&f.jsxs("span",{className:"text-[9px] font-bold bg-yellow-50 text-yellow-700 px-1.5 py-0.5 rounded border border-yellow-200 flex items-center",children:[Ce," ",f.jsx(jx,{filled:!0,className:"w-2.5 h-2.5 ml-0.5"})]})]})]}),te&&he.children&&he.children.length>0&&f.jsxs("div",{className:"mb-3",children:[f.jsx("p",{className:"text-xs text-gray-500 mb-1",children:f.jsx("strong",{children:"Figli:"})}),f.jsx("div",{className:"flex flex-wrap gap-2",children:he.children.map(oe=>{const qe=gle(oe);return f.jsxs("span",{className:"text-xs bg-gray-50 text-gray-700 px-2 py-1 rounded border border-gray-100 flex items-center shadow-sm",children:[oe.name||"Senza nome",Number(qe)>0&&f.jsxs("span",{className:"ml-1.5 text-[9px] font-bold text-yellow-600 bg-yellow-50 px-1 rounded border border-yellow-100 flex items-center",children:[qe," ",f.jsx(jx,{filled:!0,className:"w-2 h-2 ml-0.5"})]})]},oe.id)})})]}),f.jsxs("div",{className:"text-sm text-gray-600 space-y-1 mt-auto",children:[f.jsxs("p",{className:"truncate",children:[" ",G.email]}),f.jsxs("p",{className:"truncate",children:[" ",G.phone]})]})]}),f.jsx("div",{className:"px-5 py-3 border-t border-gray-100 flex justify-end space-x-2 bg-gray-50/50 ml-2",children:c?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:oe=>{oe.stopPropagation(),se(G.id,"restore")},className:"md-icon-btn text-green-600 hover:bg-green-50",title:"Ripristina",children:f.jsx(HE,{})}),f.jsx("button",{onClick:oe=>{oe.stopPropagation(),se(G.id,"permanent")},className:"md-icon-btn text-red-600 hover:bg-red-50",title:"Elimina Definitivamente",children:f.jsx($r,{})})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:oe=>{oe.stopPropagation(),q(G)},className:"md-icon-btn edit","aria-label":`Modifica ${be}`,children:f.jsx(mo,{})}),f.jsx("button",{onClick:oe=>{oe.stopPropagation(),se(G.id,"delete")},className:"md-icon-btn delete","aria-label":`Elimina ${be}`,children:f.jsx($r,{})})]})})]},G.id)}),M.length===0&&f.jsx("div",{className:"col-span-full text-center py-12 text-gray-500",children:"Nessun cliente trovato."})]}),f.jsx(tm,{currentPage:k,totalItems:M.length,itemsPerPage:j,onPageChange:E})]}),F&&f.jsx(mi,{onClose:()=>z(!1),size:"2xl",children:f.jsx(yle,{client:A,onSave:Q,onCancel:()=>z(!1)})}),O&&f.jsx(mle,{entityName:"Clienti",templateHeaders:["email","type","firstName","lastName","taxCode","companyName","vatNumber","phone","address","zipCode","city","province"],instructions:['type: "parent" o "institutional"',"Per parent: compilare firstName, lastName, taxCode","Per institutional: compilare companyName, vatNumber"],onClose:()=>B(!1),onImport:re}),f.jsx(Ho,{isOpen:!!R,onClose:()=>P(null),onConfirm:J,title:(R==null?void 0:R.action)==="restore"?"Ripristina":"Elimina",message:(R==null?void 0:R.action)==="restore"?"Vuoi ripristinare questo cliente?":"Sei sicuro di voler eliminare questo cliente? L'eliminazione definitiva canceller anche tutte le iscrizioni, lezioni e dati finanziari collegati.",isDangerous:(R==null?void 0:R.action)!=="restore"}),f.jsx(Ho,{isOpen:V,onClose:()=>Y(!1),onConfirm:me,title:"ELIMINA TUTTI I CLIENTI",message:" ATTENZIONE: Stai per eliminare TUTTI i clienti dal database. Questa azione eliminer a cascata anche tutte le Iscrizioni, Lezioni, Transazioni e Fatture collegate. Questa operazione  irreversibile. Confermi?",isDangerous:!0,confirmText:"S, Elimina TUTTO"})]})},my=({filled:n,onClick:e,className:t})=>f.jsxs("svg",{onClick:e,xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 ${n?"text-yellow-400":"text-gray-300"} ${e?"cursor-pointer hover:scale-110 transition-transform":""} ${t}`,viewBox:"0 0 20 20",fill:"currentColor",children:[" ",f.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})," "]}),_le=n=>{if(!n)return 0;const e=(n.responsiveness||0)+(n.partnership||0)+(n.negotiation||0);return e>0?(e/3).toFixed(1):0},pb=["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],wle=({location:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState(n.name||""),[s,a]=ne.useState(n.address||""),[o,c]=ne.useState(n.city||""),[u,d]=ne.useState(n.capacity||0),[p,x]=ne.useState(n.rentalCost||0),[v,_]=ne.useState(n.distance||0),[b,S]=ne.useState(n.color||"#3b82f6"),[T,k]=ne.useState(n.availability||[]),[E,j]=ne.useState(1),[F,z]=ne.useState("16:00"),[A,I]=ne.useState("18:00"),O=()=>{k([...T,{dayOfWeek:Number(E),startTime:F,endTime:A}])},B=P=>{k(T.filter((V,Y)=>Y!==P))},R=()=>{e({...n,name:r,address:s,city:o,capacity:u,rentalCost:p,distance:v,color:b,availability:T})};return f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mt-4 animate-fade-in",children:[f.jsx("h4",{className:"font-bold text-sm text-gray-700 mb-3 uppercase",children:"id"in n?"Modifica Sede":"Nuova Sede"}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 mb-3",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:r,onChange:P=>i(P.target.value),className:"md-input text-sm",placeholder:" "}),f.jsx("label",{className:"md-input-label text-xs",children:"Nome Sede (es. Sala Grande)"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:o,onChange:P=>c(P.target.value),className:"md-input text-sm",placeholder:" "}),f.jsx("label",{className:"md-input-label text-xs",children:"Citt"})]})]}),f.jsxs("div",{className:"md-input-group mb-3",children:[f.jsx("input",{type:"text",value:s,onChange:P=>a(P.target.value),className:"md-input text-sm",placeholder:" "}),f.jsx("label",{className:"md-input-label text-xs",children:"Indirizzo"})]}),f.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] text-gray-500",children:"Capienza"}),f.jsx("input",{type:"number",value:u,onChange:P=>d(Number(P.target.value)),className:"w-full border rounded p-1 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] text-gray-500",children:"Costo Nolo ()"}),f.jsx("input",{type:"number",value:p,onChange:P=>x(Number(P.target.value)),className:"w-full border rounded p-1 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] text-gray-500",children:"Distanza (km)"}),f.jsx("input",{type:"number",value:v,onChange:P=>_(Number(P.target.value)),className:"w-full border rounded p-1 text-sm"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-[10px] text-gray-500",children:"Colore Calendario"}),f.jsx("input",{type:"color",value:b,onChange:P=>S(P.target.value),className:"w-full h-7 border rounded cursor-pointer"})]})]}),f.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-600 mb-2",children:"Disponibilit Oraria"}),f.jsxs("div",{className:"flex gap-2 items-end mb-2",children:[f.jsx("select",{value:E,onChange:P=>j(Number(P.target.value)),className:"text-xs border rounded p-1 bg-white",children:pb.map((P,V)=>f.jsx("option",{value:V,children:P},V))}),f.jsx("input",{type:"time",value:F,onChange:P=>z(P.target.value),className:"text-xs border rounded p-1"}),f.jsx("span",{className:"text-gray-400",children:"-"}),f.jsx("input",{type:"time",value:A,onChange:P=>I(P.target.value),className:"text-xs border rounded p-1"}),f.jsx("button",{type:"button",onClick:O,className:"md-btn md-btn-sm md-btn-green px-2 py-0 h-7",children:"+"})]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:T.map((P,V)=>f.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded bg-white border border-gray-300 text-[10px] font-medium text-gray-700",children:[pb[P.dayOfWeek]," ",P.startTime,"-",P.endTime,f.jsx("button",{onClick:()=>B(V),className:"ml-1 text-red-500 hover:text-red-700 font-bold",children:""})]},V))})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[f.jsx("button",{onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{onClick:R,className:"md-btn md-btn-raised md-btn-primary md-btn-sm",children:"Salva Sede"})]})]})},Sle=({supplier:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState((n==null?void 0:n.companyName)||""),[s,a]=ne.useState((n==null?void 0:n.vatNumber)||""),[o,c]=ne.useState((n==null?void 0:n.email)||""),[u,d]=ne.useState((n==null?void 0:n.phone)||""),[p,x]=ne.useState((n==null?void 0:n.address)||""),[v,_]=ne.useState((n==null?void 0:n.city)||""),[b,S]=ne.useState((n==null?void 0:n.province)||""),[T,k]=ne.useState((n==null?void 0:n.zipCode)||""),[E,j]=ne.useState((n==null?void 0:n.locations)||[]),[F,z]=ne.useState((n==null?void 0:n.rating)||{responsiveness:0,partnership:0,negotiation:0}),[A,I]=ne.useState((n==null?void 0:n.notesHistory)||[]),[O,B]=ne.useState(null),[R,P]=ne.useState(!1),V=q=>{q.preventDefault();const Q={companyName:r,vatNumber:s,email:o,phone:u,address:p,city:v,province:b,zipCode:T,locations:E,rating:F,notesHistory:A};n!=null&&n.id?e({...Q,id:n.id}):e(Q)},Y=q=>{if("id"in q&&q.id&&!String(q.id).startsWith("temp"))j(E.map(Q=>Q.id===q.id?q:Q));else{const Q={...q,id:("id"in q?q.id:void 0)||`temp-${Date.now()}`};O&&O.id?j(E.map(se=>se.id===O.id?Q:se)):j([...E,Q])}P(!1),B(null)},ie=q=>{confirm("Eliminare questa sede?")&&j(E.filter(Q=>Q.id!==q))};return f.jsxs("form",{onSubmit:V,className:"flex flex-col h-full max-h-full overflow-hidden",children:[f.jsx("div",{className:"p-6 pb-2 flex-shrink-0 border-b border-gray-100",children:f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n?"Modifica Fornitore":"Nuovo Fornitore"})}),f.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-6 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:r,onChange:q=>i(q.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Ragione Sociale"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:q=>a(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"P.IVA / C.F."})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"email",value:o,onChange:q=>c(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Email"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"tel",value:u,onChange:q=>d(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Telefono"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:p,onChange:q=>x(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Indirizzo"})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:v,onChange:q=>_(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Citt"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:b,onChange:q=>S(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Prov."})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:T,onChange:q=>k(q.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"CAP"})]})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-2 border-b pb-1",children:[f.jsx("h3",{className:"font-bold text-gray-700",children:"Sedi & Disponibilit"}),!R&&f.jsx("button",{type:"button",onClick:()=>{B({}),P(!0)},className:"text-xs text-indigo-600 font-bold hover:underline",children:"+ Aggiungi Sede"})]}),R&&O&&f.jsx(wle,{location:O,onSave:Y,onCancel:()=>P(!1)}),f.jsxs("div",{className:"space-y-2 mt-2",children:[E.map(q=>{var Q;return f.jsxs("div",{className:"bg-white border rounded p-3 flex justify-between items-center hover:shadow-sm transition-shadow",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:q.color}}),f.jsx("span",{className:"font-bold text-sm text-gray-800",children:q.name})]}),f.jsxs("p",{className:"text-xs text-gray-500",children:[q.address,", ",q.city]}),f.jsx("div",{className:"flex gap-1 mt-1",children:(Q=q.availability)==null?void 0:Q.map((se,J)=>f.jsxs("span",{className:"text-[9px] bg-gray-100 px-1 rounded text-gray-600",children:[pb[se.dayOfWeek].substring(0,3)," ",se.startTime]},J))})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{type:"button",onClick:()=>{B(q),P(!0)},className:"md-icon-btn edit p-1",children:f.jsx(mo,{})}),f.jsx("button",{type:"button",onClick:()=>ie(q.id),className:"md-icon-btn delete p-1",children:f.jsx($r,{})})]})]},q.id)}),E.length===0&&!R&&f.jsx("p",{className:"text-xs text-gray-400 italic",children:"Nessuna sede registrata."})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-bold text-gray-700 mb-2 border-b pb-1",children:"Rating"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs",children:"Reattivit"}),f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(q=>f.jsx(my,{filled:q<=F.responsiveness,onClick:()=>z({...F,responsiveness:q}),className:"w-4 h-4"},q))})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs",children:"Partnership"}),f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(q=>f.jsx(my,{filled:q<=F.partnership,onClick:()=>z({...F,partnership:q}),className:"w-4 h-4"},q))})]}),f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-xs",children:"Negoziazione"}),f.jsx("div",{className:"flex",children:[1,2,3,4,5].map(q=>f.jsx(my,{filled:q<=F.negotiation,onClick:()=>z({...F,negotiation:q}),className:"w-4 h-4"},q))})]})]})]}),f.jsx("div",{children:f.jsx(YM,{notesHistory:A,onSave:I,label:"Note Fornitore"})})]})]}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",children:[f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-green md-btn-sm",children:"Salva"})]})]})},Tle=()=>{const[n,e]=ne.useState([]),[t,r]=ne.useState(!0),[i,s]=ne.useState(!1),[a,o]=ne.useState(null),[c,u]=ne.useState(!1),[d,p]=ne.useState(!1),[x,v]=ne.useState("day_asc"),[_,b]=ne.useState(1),S=12,T=ne.useCallback(async()=>{try{r(!0);const I=await Jl();e(I)}catch(I){console.error(I)}finally{r(!1)}},[]);ne.useEffect(()=>{T()},[T]),ne.useEffect(()=>{b(1)},[c,x]);const k=(I=null)=>{o(I),s(!0)},E=async I=>{try{"id"in I?await rX(I.id,I):await nX(I),s(!1),T()}catch(O){console.error(O),alert("Errore durante il salvataggio")}},j=async()=>{p(!1),r(!0);try{const I=await Jl();for(const O of I)await Xk(O.id);await T(),alert("Tutti i fornitori sono stati eliminati. Le sedi e le lezioni collegate non saranno pi disponibili.")}catch(I){console.error(I),alert("Errore eliminazione totale.")}finally{r(!1)}},F=I=>{let O=7;return I.locations.forEach(B=>{var R;(R=B.availability)==null||R.forEach(P=>{const V=P.dayOfWeek===0?7:P.dayOfWeek;V<O&&(O=V)})}),O},z=ne.useMemo(()=>{const I=n.filter(O=>c?O.isDeleted:!O.isDeleted);return I.sort((O,B)=>{if(x==="day_asc")return F(O)-F(B);const R=(O.companyName||"").toLowerCase(),P=(B.companyName||"").toLowerCase();return x==="name_asc"?R.localeCompare(P):P.localeCompare(R)}),I},[n,c,x]),A=ne.useMemo(()=>{const I=(_-1)*S;return z.slice(I,I+S)},[z,_]);return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Fornitori"}),f.jsx("p",{className:"mt-1 text-gray-500",children:"Gestione sedi e anagrafiche."})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("button",{onClick:()=>p(!0),className:"md-btn md-btn-sm bg-red-50 text-red-700 border border-red-200 hover:bg-red-100 flex items-center text-xs font-bold mr-2",children:[f.jsx($r,{})," Elimina Tutto"]}),f.jsx("button",{onClick:()=>u(!c),className:`md-btn ${c?"bg-gray-200":"md-btn-flat"}`,children:f.jsx($r,{})}),!c&&f.jsxs("button",{onClick:()=>k(),className:"md-btn md-btn-raised md-btn-green",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2",children:"Nuovo"})]})]})]}),f.jsx("div",{className:"mt-6 flex justify-end mb-4",children:f.jsxs("select",{value:x,onChange:I=>v(I.target.value),className:"block w-48 bg-white border rounded-md py-2 px-3 text-sm",children:[f.jsx("option",{value:"day_asc",children:"Giorno Disp. (Lun-Dom)"}),f.jsx("option",{value:"name_asc",children:"Nome (A-Z)"}),f.jsx("option",{value:"name_desc",children:"Nome (Z-A)"})]})}),t?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map(I=>{const O=_le(I.rating),B=F(I);return f.jsxs("div",{className:`md-card p-6 flex flex-col ${c?"opacity-75":""} border-t-4 ${B<=5?"border-green-400":"border-gray-300"}`,children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsx("h2",{className:"text-lg font-bold",children:I.companyName}),Number(O)>0&&f.jsxs("span",{className:"text-sm font-bold text-yellow-600 flex items-center bg-yellow-50 px-2 py-1 rounded",children:[O," ",f.jsx(my,{filled:!0,className:"w-3 h-3 ml-1"})]})]}),f.jsxs("div",{className:"mt-3 text-sm text-gray-600",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"Tel:"})," ",I.phone]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Sede:"})," ",I.city]})]}),f.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[f.jsx("h4",{className:"font-semibold text-xs text-gray-500 uppercase",children:"Sedi & Slot"}),f.jsx("ul",{className:"text-xs mt-2 space-y-1",children:I.locations.map(R=>{var P;return f.jsxs("li",{className:"flex justify-between items-center bg-gray-50 p-1 rounded",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:R.color}}),f.jsx("span",{className:"truncate max-w-[120px]",children:R.name})]}),f.jsx("div",{className:"flex gap-1",children:(P=R.availability)==null?void 0:P.map((V,Y)=>f.jsx("span",{className:"px-1.5 py-0.5 bg-white border rounded text-[10px] font-bold text-indigo-600",children:pb[V.dayOfWeek].substring(0,3)},Y))})]},R.id)})})]})]}),f.jsx("div",{className:"mt-4 pt-4 border-t flex justify-end space-x-2",children:c?f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>sX(I.id).then(T),className:"md-icon-btn",children:f.jsx(HE,{})}),f.jsx("button",{onClick:()=>Xk(I.id).then(T),className:"md-icon-btn delete",children:f.jsx($r,{})})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>k(I),className:"md-icon-btn edit",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>iX(I.id).then(T),className:"md-icon-btn delete",children:f.jsx($r,{})})]})})]},I.id)})}),f.jsx(tm,{currentPage:_,totalItems:z.length,itemsPerPage:S,onPageChange:b})]}),i&&f.jsx(mi,{onClose:()=>s(!1),size:"2xl",children:f.jsx(Sle,{supplier:a,onSave:E,onCancel:()=>s(!1)})}),f.jsx(Ho,{isOpen:d,onClose:()=>p(!1),onConfirm:j,title:"ELIMINA TUTTI I FORNITORI",message:" ATTENZIONE: Stai per eliminare TUTTI i fornitori e le relative sedi. Questa operazione render orfane le lezioni collegate a queste sedi. Confermi?",isDangerous:!0,confirmText:"S, Elimina TUTTO"})]})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function xv(n){return n+.5|0}const zf=(n,e,t)=>Math.max(Math.min(n,t),e);function g1(n){return zf(xv(n*2.55),0,255)}function Zf(n){return zf(xv(n*255),0,255)}function yh(n){return zf(xv(n/2.55)/100,0,1)}function o6(n){return zf(xv(n*100),0,100)}const Ul={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},eT=[..."0123456789ABCDEF"],Ele=n=>eT[n&15],Ale=n=>eT[(n&240)>>4]+eT[n&15],R2=n=>(n&240)>>4===(n&15),Nle=n=>R2(n.r)&&R2(n.g)&&R2(n.b)&&R2(n.a);function Cle(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Ul[n[1]]*17,g:255&Ul[n[2]]*17,b:255&Ul[n[3]]*17,a:e===5?Ul[n[4]]*17:255}:(e===7||e===9)&&(t={r:Ul[n[1]]<<4|Ul[n[2]],g:Ul[n[3]]<<4|Ul[n[4]],b:Ul[n[5]]<<4|Ul[n[6]],a:e===9?Ul[n[7]]<<4|Ul[n[8]]:255})),t}const kle=(n,e)=>n<255?e(n):"";function Ile(n){var e=Nle(n)?Ele:Ale;return n?"#"+e(n.r)+e(n.g)+e(n.b)+kle(n.a,e):void 0}const Dle=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function XM(n,e,t){const r=e*Math.min(t,1-t),i=(s,a=(s+n/30)%12)=>t-r*Math.max(Math.min(a-3,9-a,1),-1);return[i(0),i(8),i(4)]}function Rle(n,e,t){const r=(i,s=(i+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function Ple(n,e,t){const r=XM(n,1,.5);let i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function jle(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function qE(n){const t=n.r/255,r=n.g/255,i=n.b/255,s=Math.max(t,r,i),a=Math.min(t,r,i),o=(s+a)/2;let c,u,d;return s!==a&&(d=s-a,u=o>.5?d/(2-s-a):d/(s+a),c=jle(t,r,i,d,s),c=c*60+.5),[c|0,u||0,o]}function WE(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Zf)}function GE(n,e,t){return WE(XM,n,e,t)}function Lle(n,e,t){return WE(Ple,n,e,t)}function Ole(n,e,t){return WE(Rle,n,e,t)}function QM(n){return(n%360+360)%360}function Mle(n){const e=Dle.exec(n);let t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?g1(+e[5]):Zf(+e[5]));const i=QM(+e[2]),s=+e[3]/100,a=+e[4]/100;return e[1]==="hwb"?r=Lle(i,s,a):e[1]==="hsv"?r=Ole(i,s,a):r=GE(i,s,a),{r:r[0],g:r[1],b:r[2],a:t}}function Fle(n,e){var t=qE(n);t[0]=QM(t[0]+e),t=GE(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Ble(n){if(!n)return;const e=qE(n),t=e[0],r=o6(e[1]),i=o6(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${yh(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}const l6={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},c6={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Vle(){const n={},e=Object.keys(c6),t=Object.keys(l6);let r,i,s,a,o;for(r=0;r<e.length;r++){for(a=o=e[r],i=0;i<t.length;i++)s=t[i],o=o.replace(s,l6[s]);s=parseInt(c6[a],16),n[o]=[s>>16&255,s>>8&255,s&255]}return n}let P2;function zle(n){P2||(P2=Vle(),P2.transparent=[0,0,0,0]);const e=P2[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Ule=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Hle(n){const e=Ule.exec(n);let t=255,r,i,s;if(e){if(e[7]!==r){const a=+e[7];t=e[8]?g1(a):zf(a*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?g1(r):zf(r,0,255)),i=255&(e[4]?g1(i):zf(i,0,255)),s=255&(e[6]?g1(s):zf(s,0,255)),{r,g:i,b:s,a:t}}}function qle(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${yh(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}const N5=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Ym=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Wle(n,e,t){const r=Ym(yh(n.r)),i=Ym(yh(n.g)),s=Ym(yh(n.b));return{r:Zf(N5(r+t*(Ym(yh(e.r))-r))),g:Zf(N5(i+t*(Ym(yh(e.g))-i))),b:Zf(N5(s+t*(Ym(yh(e.b))-s))),a:n.a+t*(e.a-n.a)}}function j2(n,e,t){if(n){let r=qE(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=GE(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function JM(n,e){return n&&Object.assign(e||{},n)}function u6(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Zf(n[3]))):(e=JM(n,{r:0,g:0,b:0,a:1}),e.a=Zf(e.a)),e}function Gle(n){return n.charAt(0)==="r"?Hle(n):Mle(n)}class Lx{constructor(e){if(e instanceof Lx)return e;const t=typeof e;let r;t==="object"?r=u6(e):t==="string"&&(r=Cle(e)||zle(e)||Gle(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=JM(this._rgb);return e&&(e.a=yh(e.a)),e}set rgb(e){this._rgb=u6(e)}rgbString(){return this._valid?qle(this._rgb):void 0}hexString(){return this._valid?Ile(this._rgb):void 0}hslString(){return this._valid?Ble(this._rgb):void 0}mix(e,t){if(e){const r=this.rgb,i=e.rgb;let s;const a=t===s?.5:t,o=2*a-1,c=r.a-i.a,u=((o*c===-1?o:(o+c)/(1+o*c))+1)/2;s=1-u,r.r=255&u*r.r+s*i.r+.5,r.g=255&u*r.g+s*i.g+.5,r.b=255&u*r.b+s*i.b+.5,r.a=a*r.a+(1-a)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=Wle(this._rgb,e._rgb,t)),this}clone(){return new Lx(this.rgb)}alpha(e){return this._rgb.a=Zf(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=xv(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return j2(this._rgb,2,e),this}darken(e){return j2(this._rgb,2,-e),this}saturate(e){return j2(this._rgb,1,e),this}desaturate(e){return j2(this._rgb,1,-e),this}rotate(e){return Fle(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function mh(){}const $le=(()=>{let n=0;return()=>n++})();function Yn(n){return n==null}function Ti(n){if(Array.isArray&&Array.isArray(n))return!0;const e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function tr(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Ui(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function ul(n,e){return Ui(n)?n:e}function jn(n,e){return typeof n>"u"?e:n}const Kle=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,ZM=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function ni(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function Rr(n,e,t,r){let i,s,a;if(Ti(n))for(s=n.length,i=0;i<s;i++)e.call(t,n[i],i);else if(tr(n))for(a=Object.keys(n),s=a.length,i=0;i<s;i++)e.call(t,n[a[i]],a[i])}function gb(n,e){let t,r,i,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],s=e[t],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function xb(n){if(Ti(n))return n.map(xb);if(tr(n)){const e=Object.create(null),t=Object.keys(n),r=t.length;let i=0;for(;i<r;++i)e[t[i]]=xb(n[t[i]]);return e}return n}function eF(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Yle(n,e,t,r){if(!eF(n))return;const i=e[n],s=t[n];tr(i)&&tr(s)?Ox(i,s,r):e[n]=xb(s)}function Ox(n,e,t){const r=Ti(e)?e:[e],i=r.length;if(!tr(n))return n;t=t||{};const s=t.merger||Yle;let a;for(let o=0;o<i;++o){if(a=r[o],!tr(a))continue;const c=Object.keys(a);for(let u=0,d=c.length;u<d;++u)s(c[u],n,a,t)}return n}function q1(n,e){return Ox(n,e,{merger:Xle})}function Xle(n,e,t){if(!eF(n))return;const r=e[n],i=t[n];tr(r)&&tr(i)?q1(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=xb(i))}const h6={"":n=>n,x:n=>n.x,y:n=>n.y};function Qle(n){const e=n.split("."),t=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function Jle(n){const e=Qle(n);return t=>{for(const r of e){if(r==="")break;t=t&&t[r]}return t}}function cd(n,e){return(h6[e]||(h6[e]=Jle(e)))(n)}function $E(n){return n.charAt(0).toUpperCase()+n.slice(1)}const Mx=n=>typeof n<"u",ud=n=>typeof n=="function",f6=(n,e)=>{if(n.size!==e.size)return!1;for(const t of n)if(!e.has(t))return!1;return!0};function Zle(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}const br=Math.PI,hi=2*br,ece=hi+br,vb=Number.POSITIVE_INFINITY,tce=br/180,ns=br/2,Hd=br/4,d6=br*2/3,Uf=Math.log10,Pu=Math.sign;function W1(n,e,t){return Math.abs(n-e)<t}function m6(n){const e=Math.round(n);n=W1(n,e,n/1e3)?e:n;const t=Math.pow(10,Math.floor(Uf(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function nce(n){const e=[],t=Math.sqrt(n);let r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,s)=>i-s).pop(),e}function rce(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function $p(n){return!rce(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function ice(n,e){const t=Math.round(n);return t-e<=n&&t+e>=n}function tF(n,e,t){let r,i,s;for(r=0,i=n.length;r<i;r++)s=n[r][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ic(n){return n*(br/180)}function KE(n){return n*(180/br)}function p6(n){if(!Ui(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function nF(n,e){const t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r);let s=Math.atan2(r,t);return s<-.5*br&&(s+=hi),{angle:s,distance:i}}function tT(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function sce(n,e){return(n-e+ece)%hi-br}function Fa(n){return(n%hi+hi)%hi}function Fx(n,e,t,r){const i=Fa(n),s=Fa(e),a=Fa(t),o=Fa(s-i),c=Fa(a-i),u=Fa(i-s),d=Fa(i-a);return i===s||i===a||r&&s===a||o>c&&u<d}function Zs(n,e,t){return Math.max(e,Math.min(t,n))}function ace(n){return Zs(n,-32768,32767)}function Th(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function YE(n,e,t){t=t||(a=>n[a]<e);let r=n.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,t(s)?i=s:r=s;return{lo:i,hi:r}}const Eh=(n,e,t,r)=>YE(n,t,r?i=>{const s=n[i][e];return s<t||s===t&&n[i+1][e]===t}:i=>n[i][e]<t),oce=(n,e,t)=>YE(n,t,r=>n[r][e]>=t);function lce(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}const rF=["push","pop","shift","splice","unshift"];function cce(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),rF.forEach(t=>{const r="_onData"+$E(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){const a=i.apply(this,s);return n._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...s)}),a}})})}function g6(n,e){const t=n._chartjs;if(!t)return;const r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(rF.forEach(s=>{delete n[s]}),delete n._chartjs)}function iF(n){const e=new Set(n);return e.size===n.length?n:Array.from(e)}const sF=(function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame})();function aF(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,sF.call(window,()=>{r=!1,n.apply(e,t)}))}}function uce(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}const XE=n=>n==="start"?"left":n==="end"?"right":"center",Pa=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,hce=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function oF(n,e,t){const r=e.length;let i=0,s=r;if(n._sorted){const{iScale:a,vScale:o,_parsed:c}=n,u=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,d=a.axis,{min:p,max:x,minDefined:v,maxDefined:_}=a.getUserBounds();if(v){if(i=Math.min(Eh(c,d,p).lo,t?r:Eh(e,d,a.getPixelForValue(p)).lo),u){const b=c.slice(0,i+1).reverse().findIndex(S=>!Yn(S[o.axis]));i-=Math.max(0,b)}i=Zs(i,0,r-1)}if(_){let b=Math.max(Eh(c,a.axis,x,!0).hi+1,t?0:Eh(e,d,a.getPixelForValue(x),!0).hi+1);if(u){const S=c.slice(b-1).findIndex(T=>!Yn(T[o.axis]));b+=Math.max(0,S)}s=Zs(b,i,r)-i}else s=r-i}return{start:i,count:s}}function lF(n){const{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),s}const L2=n=>n===0||n===1,x6=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*hi/t)),v6=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*hi/t)+1,G1={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ns)+1,easeOutSine:n=>Math.sin(n*ns),easeInOutSine:n=>-.5*(Math.cos(br*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>L2(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>L2(n)?n:x6(n,.075,.3),easeOutElastic:n=>L2(n)?n:v6(n,.075,.3),easeInOutElastic(n){return L2(n)?n:n<.5?.5*x6(n*2,.1125,.45):.5+.5*v6(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-G1.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?G1.easeInBounce(n*2)*.5:G1.easeOutBounce(n*2-1)*.5+.5};function QE(n){if(n&&typeof n=="object"){const e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function y6(n){return QE(n)?n:new Lx(n)}function C5(n){return QE(n)?n:new Lx(n).saturate(.5).darken(.1).hexString()}const fce=["x","y","borderWidth","radius","tension"],dce=["color","borderColor","backgroundColor"];function mce(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:dce},numbers:{type:"number",properties:fce}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function pce(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const b6=new Map;function gce(n,e){e=e||{};const t=n+JSON.stringify(e);let r=b6.get(t);return r||(r=new Intl.NumberFormat(n,e),b6.set(t,r)),r}function vv(n,e,t){return gce(e,t).format(n)}const cF={values(n){return Ti(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";const r=this.chart.options.locale;let i,s=n;if(t.length>1){const u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),s=xce(n,t)}const a=Uf(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),c={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(c,this.options.ticks.format),vv(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";const r=t[e].significand||n/Math.pow(10,Math.floor(Uf(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?cF.numeric.call(this,n,e,t):""}};function xce(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var m_={formatters:cF};function vce(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:m_.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const U0=Object.create(null),nT=Object.create(null);function $1(n,e){if(!e)return n;const t=e.split(".");for(let r=0,i=t.length;r<i;++r){const s=t[r];n=n[s]||(n[s]=Object.create(null))}return n}function k5(n,e,t){return typeof e=="string"?Ox($1(n,e),t):Ox($1(n,""),e)}class yce{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>C5(i.backgroundColor),this.hoverBorderColor=(r,i)=>C5(i.borderColor),this.hoverColor=(r,i)=>C5(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return k5(this,e,t)}get(e){return $1(this,e)}describe(e,t){return k5(nT,e,t)}override(e,t){return k5(U0,e,t)}route(e,t,r,i){const s=$1(this,e),a=$1(this,r),o="_"+t;Object.defineProperties(s,{[o]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){const c=this[o],u=a[i];return tr(c)?Object.assign({},u,c):jn(c,u)},set(c){this[o]=c}}})}apply(e){e.forEach(t=>t(this))}}var Hi=new yce({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[mce,pce,vce]);function bce(n){return!n||Yn(n.size)||Yn(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function yb(n,e,t,r,i){let s=e[i];return s||(s=e[i]=n.measureText(i).width,t.push(i)),s>r&&(r=s),r}function _ce(n,e,t,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let a=0;const o=t.length;let c,u,d,p,x;for(c=0;c<o;c++)if(p=t[c],p!=null&&!Ti(p))a=yb(n,i,s,a,p);else if(Ti(p))for(u=0,d=p.length;u<d;u++)x=p[u],x!=null&&!Ti(x)&&(a=yb(n,i,s,a,x));n.restore();const v=s.length/2;if(v>t.length){for(c=0;c<v;c++)delete i[s[c]];s.splice(0,v)}return a}function qd(n,e,t){const r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function _6(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function rT(n,e,t,r){uF(n,e,t,r,null)}function uF(n,e,t,r,i){let s,a,o,c,u,d,p,x;const v=e.pointStyle,_=e.rotation,b=e.radius;let S=(_||0)*tce;if(v&&typeof v=="object"&&(s=v.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(S),n.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),v){default:i?n.ellipse(t,r,i/2,b,0,0,hi):n.arc(t,r,b,0,hi),n.closePath();break;case"triangle":d=i?i/2:b,n.moveTo(t+Math.sin(S)*d,r-Math.cos(S)*b),S+=d6,n.lineTo(t+Math.sin(S)*d,r-Math.cos(S)*b),S+=d6,n.lineTo(t+Math.sin(S)*d,r-Math.cos(S)*b),n.closePath();break;case"rectRounded":u=b*.516,c=b-u,a=Math.cos(S+Hd)*c,p=Math.cos(S+Hd)*(i?i/2-u:c),o=Math.sin(S+Hd)*c,x=Math.sin(S+Hd)*(i?i/2-u:c),n.arc(t-p,r-o,u,S-br,S-ns),n.arc(t+x,r-a,u,S-ns,S),n.arc(t+p,r+o,u,S,S+ns),n.arc(t-x,r+a,u,S+ns,S+br),n.closePath();break;case"rect":if(!_){c=Math.SQRT1_2*b,d=i?i/2:c,n.rect(t-d,r-c,2*d,2*c);break}S+=Hd;case"rectRot":p=Math.cos(S)*(i?i/2:b),a=Math.cos(S)*b,o=Math.sin(S)*b,x=Math.sin(S)*(i?i/2:b),n.moveTo(t-p,r-o),n.lineTo(t+x,r-a),n.lineTo(t+p,r+o),n.lineTo(t-x,r+a),n.closePath();break;case"crossRot":S+=Hd;case"cross":p=Math.cos(S)*(i?i/2:b),a=Math.cos(S)*b,o=Math.sin(S)*b,x=Math.sin(S)*(i?i/2:b),n.moveTo(t-p,r-o),n.lineTo(t+p,r+o),n.moveTo(t+x,r-a),n.lineTo(t-x,r+a);break;case"star":p=Math.cos(S)*(i?i/2:b),a=Math.cos(S)*b,o=Math.sin(S)*b,x=Math.sin(S)*(i?i/2:b),n.moveTo(t-p,r-o),n.lineTo(t+p,r+o),n.moveTo(t+x,r-a),n.lineTo(t-x,r+a),S+=Hd,p=Math.cos(S)*(i?i/2:b),a=Math.cos(S)*b,o=Math.sin(S)*b,x=Math.sin(S)*(i?i/2:b),n.moveTo(t-p,r-o),n.lineTo(t+p,r+o),n.moveTo(t+x,r-a),n.lineTo(t-x,r+a);break;case"line":a=i?i/2:Math.cos(S)*b,o=Math.sin(S)*b,n.moveTo(t-a,r-o),n.lineTo(t+a,r+o);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(S)*(i?i/2:b),r+Math.sin(S)*b);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Ah(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function p_(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function g_(n){n.restore()}function wce(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){const s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function Sce(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function Tce(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),Yn(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function Ece(n,e,t,r,i){if(i.strikethrough||i.underline){const s=n.measureText(r),a=e-s.actualBoundingBoxLeft,o=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,d=i.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(a,d),n.lineTo(o,d),n.stroke()}}function Ace(n,e){const t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function H0(n,e,t,r,i,s={}){const a=Ti(e)?e:[e],o=s.strokeWidth>0&&s.strokeColor!=="";let c,u;for(n.save(),n.font=i.string,Tce(n,s),c=0;c<a.length;++c)u=a[c],s.backdrop&&Ace(n,s.backdrop),o&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),Yn(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,r,s.maxWidth)),n.fillText(u,t,r,s.maxWidth),Ece(n,t,r,u,s),r+=Number(i.lineHeight);n.restore()}function Bx(n,e){const{x:t,y:r,w:i,h:s,radius:a}=e;n.arc(t+a.topLeft,r+a.topLeft,a.topLeft,1.5*br,br,!0),n.lineTo(t,r+s-a.bottomLeft),n.arc(t+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,br,ns,!0),n.lineTo(t+i-a.bottomRight,r+s),n.arc(t+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,ns,0,!0),n.lineTo(t+i,r+a.topRight),n.arc(t+i-a.topRight,r+a.topRight,a.topRight,0,-ns,!0),n.lineTo(t+a.topLeft,r)}const Nce=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Cce=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kce(n,e){const t=(""+n).match(Nce);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}const Ice=n=>+n||0;function JE(n,e){const t={},r=tr(e),i=r?Object.keys(e):e,s=tr(n)?r?a=>jn(n[a],n[e[a]]):a=>n[a]:()=>n;for(const a of i)t[a]=Ice(s(a));return t}function hF(n){return JE(n,{top:"y",right:"x",bottom:"y",left:"x"})}function x0(n){return JE(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Ga(n){const e=hF(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ms(n,e){n=n||{},e=e||Hi.font;let t=jn(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=jn(n.style,e.style);r&&!(""+r).match(Cce)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:jn(n.family,e.family),lineHeight:kce(jn(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:jn(n.weight,e.weight),string:""};return i.string=bce(i),i}function x1(n,e,t,r){let i,s,a;for(i=0,s=n.length;i<s;++i)if(a=n[i],a!==void 0&&a!==void 0)return a}function Dce(n,e,t){const{min:r,max:i}=n,s=ZM(e,(i-r)/2),a=(o,c)=>t&&o===0?0:o+c;return{min:a(r,-Math.abs(s)),max:a(i,s)}}function Td(n,e){return Object.assign(Object.create(n),e)}function ZE(n,e=[""],t,r,i=()=>n[0]){const s=t||n;typeof r>"u"&&(r=pF("_fallback",n));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:r,_getTarget:i,override:o=>ZE([o,...n],e,s,r)};return new Proxy(a,{deleteProperty(o,c){return delete o[c],delete o._keys,delete n[0][c],!0},get(o,c){return dF(o,c,()=>Bce(c,e,n,o))},getOwnPropertyDescriptor(o,c){return Reflect.getOwnPropertyDescriptor(o._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(o,c){return S6(o).includes(c)},ownKeys(o){return S6(o)},set(o,c,u){const d=o._storage||(o._storage=i());return o[c]=d[c]=u,delete o._keys,!0}})}function Kp(n,e,t,r){const i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:fF(n,r),setContext:s=>Kp(n,s,t,r),override:s=>Kp(n.override(s),e,t,r)};return new Proxy(i,{deleteProperty(s,a){return delete s[a],delete n[a],!0},get(s,a,o){return dF(s,a,()=>Pce(s,a,o))},getOwnPropertyDescriptor(s,a){return s._descriptors.allKeys?Reflect.has(n,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,a)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,a){return Reflect.has(n,a)},ownKeys(){return Reflect.ownKeys(n)},set(s,a,o){return n[a]=o,delete s[a],!0}})}function fF(n,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:ud(t)?t:()=>t,isIndexable:ud(r)?r:()=>r}}const Rce=(n,e)=>n?n+$E(e):e,eA=(n,e)=>tr(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function dF(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];const r=t();return n[e]=r,r}function Pce(n,e,t){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=n;let o=r[e];return ud(o)&&a.isScriptable(e)&&(o=jce(e,o,n,t)),Ti(o)&&o.length&&(o=Lce(e,o,n,a.isIndexable)),eA(e,o)&&(o=Kp(o,i,s&&s[e],a)),o}function jce(n,e,t,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=t;if(o.has(n))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+n);o.add(n);let c=e(s,a||r);return o.delete(n),eA(n,c)&&(c=tA(i._scopes,i,n,c)),c}function Lce(n,e,t,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=t;if(typeof s.index<"u"&&r(n))return e[s.index%e.length];if(tr(e[0])){const c=e,u=i._scopes.filter(d=>d!==c);e=[];for(const d of c){const p=tA(u,i,n,d);e.push(Kp(p,s,a&&a[n],o))}}return e}function mF(n,e,t){return ud(n)?n(e,t):n}const Oce=(n,e)=>n===!0?e:typeof n=="string"?cd(e,n):void 0;function Mce(n,e,t,r,i){for(const s of e){const a=Oce(t,s);if(a){n.add(a);const o=mF(a._fallback,t,i);if(typeof o<"u"&&o!==t&&o!==r)return o}else if(a===!1&&typeof r<"u"&&t!==r)return null}return!1}function tA(n,e,t,r){const i=e._rootScopes,s=mF(e._fallback,t,r),a=[...n,...i],o=new Set;o.add(r);let c=w6(o,a,t,s||t,r);return c===null||typeof s<"u"&&s!==t&&(c=w6(o,a,s,c,r),c===null)?!1:ZE(Array.from(o),[""],i,s,()=>Fce(e,t,r))}function w6(n,e,t,r,i){for(;t;)t=Mce(n,e,t,r,i);return t}function Fce(n,e,t){const r=n._getTarget();e in r||(r[e]={});const i=r[e];return Ti(i)&&tr(t)?t:i||{}}function Bce(n,e,t,r){let i;for(const s of e)if(i=pF(Rce(s,n),t),typeof i<"u")return eA(n,i)?tA(t,r,n,i):i}function pF(n,e){for(const t of e){if(!t)continue;const r=t[n];if(typeof r<"u")return r}}function S6(n){let e=n._keys;return e||(e=n._keys=Vce(n._scopes)),e}function Vce(n){const e=new Set;for(const t of n)for(const r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function gF(n,e,t,r){const{iScale:i}=n,{key:s="r"}=this._parsing,a=new Array(r);let o,c,u,d;for(o=0,c=r;o<c;++o)u=o+t,d=e[u],a[o]={r:i.parse(cd(d,s),u)};return a}const zce=Number.EPSILON||1e-14,Yp=(n,e)=>e<n.length&&!n[e].skip&&n[e],xF=n=>n==="x"?"y":"x";function Uce(n,e,t,r){const i=n.skip?e:n,s=e,a=t.skip?e:t,o=tT(s,i),c=tT(a,s);let u=o/(o+c),d=c/(o+c);u=isNaN(u)?0:u,d=isNaN(d)?0:d;const p=r*u,x=r*d;return{previous:{x:s.x-p*(a.x-i.x),y:s.y-p*(a.y-i.y)},next:{x:s.x+x*(a.x-i.x),y:s.y+x*(a.y-i.y)}}}function Hce(n,e,t){const r=n.length;let i,s,a,o,c,u=Yp(n,0);for(let d=0;d<r-1;++d)if(c=u,u=Yp(n,d+1),!(!c||!u)){if(W1(e[d],0,zce)){t[d]=t[d+1]=0;continue}i=t[d]/e[d],s=t[d+1]/e[d],o=Math.pow(i,2)+Math.pow(s,2),!(o<=9)&&(a=3/Math.sqrt(o),t[d]=i*a*e[d],t[d+1]=s*a*e[d])}}function qce(n,e,t="x"){const r=xF(t),i=n.length;let s,a,o,c=Yp(n,0);for(let u=0;u<i;++u){if(a=o,o=c,c=Yp(n,u+1),!o)continue;const d=o[t],p=o[r];a&&(s=(d-a[t])/3,o[`cp1${t}`]=d-s,o[`cp1${r}`]=p-s*e[u]),c&&(s=(c[t]-d)/3,o[`cp2${t}`]=d+s,o[`cp2${r}`]=p+s*e[u])}}function Wce(n,e="x"){const t=xF(e),r=n.length,i=Array(r).fill(0),s=Array(r);let a,o,c,u=Yp(n,0);for(a=0;a<r;++a)if(o=c,c=u,u=Yp(n,a+1),!!c){if(u){const d=u[e]-c[e];i[a]=d!==0?(u[t]-c[t])/d:0}s[a]=o?u?Pu(i[a-1])!==Pu(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}Hce(n,i,s),qce(n,s,e)}function O2(n,e,t){return Math.max(Math.min(n,t),e)}function Gce(n,e){let t,r,i,s,a,o=Ah(n[0],e);for(t=0,r=n.length;t<r;++t)a=s,s=o,o=t<r-1&&Ah(n[t+1],e),s&&(i=n[t],a&&(i.cp1x=O2(i.cp1x,e.left,e.right),i.cp1y=O2(i.cp1y,e.top,e.bottom)),o&&(i.cp2x=O2(i.cp2x,e.left,e.right),i.cp2y=O2(i.cp2y,e.top,e.bottom)))}function $ce(n,e,t,r,i){let s,a,o,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")Wce(n,i);else{let u=r?n[n.length-1]:n[0];for(s=0,a=n.length;s<a;++s)o=n[s],c=Uce(u,o,n[Math.min(s+1,a-(r?0:1))%a],e.tension),o.cp1x=c.previous.x,o.cp1y=c.previous.y,o.cp2x=c.next.x,o.cp2y=c.next.y,u=o}e.capBezierPoints&&Gce(n,t)}function nA(){return typeof window<"u"&&typeof document<"u"}function rA(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function bb(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}const x_=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Kce(n,e){return x_(n).getPropertyValue(e)}const Yce=["top","right","bottom","left"];function v0(n,e,t){const r={};t=t?"-"+t:"";for(let i=0;i<4;i++){const s=Yce[i];r[s]=parseFloat(n[e+"-"+s+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const Xce=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Qce(n,e){const t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:s}=r;let a=!1,o,c;if(Xce(i,s,n.target))o=i,c=s;else{const u=e.getBoundingClientRect();o=r.clientX-u.left,c=r.clientY-u.top,a=!0}return{x:o,y:c,box:a}}function Xd(n,e){if("native"in n)return n;const{canvas:t,currentDevicePixelRatio:r}=e,i=x_(t),s=i.boxSizing==="border-box",a=v0(i,"padding"),o=v0(i,"border","width"),{x:c,y:u,box:d}=Qce(n,t),p=a.left+(d&&o.left),x=a.top+(d&&o.top);let{width:v,height:_}=e;return s&&(v-=a.width+o.width,_-=a.height+o.height),{x:Math.round((c-p)/v*t.width/r),y:Math.round((u-x)/_*t.height/r)}}function Jce(n,e,t){let r,i;if(e===void 0||t===void 0){const s=n&&rA(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{const a=s.getBoundingClientRect(),o=x_(s),c=v0(o,"border","width"),u=v0(o,"padding");e=a.width-u.width-c.width,t=a.height-u.height-c.height,r=bb(o.maxWidth,s,"clientWidth"),i=bb(o.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:r||vb,maxHeight:i||vb}}const Hf=n=>Math.round(n*10)/10;function Zce(n,e,t,r){const i=x_(n),s=v0(i,"margin"),a=bb(i.maxWidth,n,"clientWidth")||vb,o=bb(i.maxHeight,n,"clientHeight")||vb,c=Jce(n,e,t);let{width:u,height:d}=c;if(i.boxSizing==="content-box"){const x=v0(i,"border","width"),v=v0(i,"padding");u-=v.width+x.width,d-=v.height+x.height}return u=Math.max(0,u-s.width),d=Math.max(0,r?u/r:d-s.height),u=Hf(Math.min(u,a,c.maxWidth)),d=Hf(Math.min(d,o,c.maxHeight)),u&&!d&&(d=Hf(u/2)),(e!==void 0||t!==void 0)&&r&&c.height&&d>c.height&&(d=c.height,u=Hf(Math.floor(d*r))),{width:u,height:d}}function T6(n,e,t){const r=e||1,i=Hf(n.height*r),s=Hf(n.width*r);n.height=Hf(n.height),n.width=Hf(n.width);const a=n.canvas;return a.style&&(t||!a.style.height&&!a.style.width)&&(a.style.height=`${n.height}px`,a.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||a.height!==i||a.width!==s?(n.currentDevicePixelRatio=r,a.height=i,a.width=s,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}const eue=(function(){let n=!1;try{const e={get passive(){return n=!0,!1}};nA()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n})();function E6(n,e){const t=Kce(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Qd(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function tue(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function nue(n,e,t,r){const i={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},a=Qd(n,i,t),o=Qd(i,s,t),c=Qd(s,e,t),u=Qd(a,o,t),d=Qd(o,c,t);return Qd(u,d,t)}const rue=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},iue=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function _p(n,e,t){return n?rue(e,t):iue()}function vF(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function yF(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function bF(n){return n==="angle"?{between:Fx,compare:sce,normalize:Fa}:{between:Th,compare:(e,t)=>e-t,normalize:e=>e}}function A6({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function sue(n,e,t){const{property:r,start:i,end:s}=t,{between:a,normalize:o}=bF(r),c=e.length;let{start:u,end:d,loop:p}=n,x,v;if(p){for(u+=c,d+=c,x=0,v=c;x<v&&a(o(e[u%c][r]),i,s);++x)u--,d--;u%=c,d%=c}return d<u&&(d+=c),{start:u,end:d,loop:p,style:n.style}}function _F(n,e,t){if(!t)return[n];const{property:r,start:i,end:s}=t,a=e.length,{compare:o,between:c,normalize:u}=bF(r),{start:d,end:p,loop:x,style:v}=sue(n,e,t),_=[];let b=!1,S=null,T,k,E;const j=()=>c(i,E,T)&&o(i,E)!==0,F=()=>o(s,T)===0||c(s,E,T),z=()=>b||j(),A=()=>!b||F();for(let I=d,O=d;I<=p;++I)k=e[I%a],!k.skip&&(T=u(k[r]),T!==E&&(b=c(T,i,s),S===null&&z()&&(S=o(T,i)===0?I:O),S!==null&&A()&&(_.push(A6({start:S,end:I,loop:x,count:a,style:v})),S=null),O=I,E=T));return S!==null&&_.push(A6({start:S,end:p,loop:x,count:a,style:v})),_}function wF(n,e){const t=[],r=n.segments;for(let i=0;i<r.length;i++){const s=_F(r[i],n.points,e);s.length&&t.push(...s)}return t}function aue(n,e,t,r){let i=0,s=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(s+=i);s>i&&n[s%e].skip;)s--;return s%=e,{start:i,end:s}}function oue(n,e,t,r){const i=n.length,s=[];let a=e,o=n[e],c;for(c=e+1;c<=t;++c){const u=n[c%i];u.skip||u.stop?o.skip||(r=!1,s.push({start:e%i,end:(c-1)%i,loop:r}),e=a=u.stop?c:null):(a=c,o.skip&&(e=c)),o=u}return a!==null&&s.push({start:e%i,end:a%i,loop:r}),s}function lue(n,e){const t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];const s=!!n._loop,{start:a,end:o}=aue(t,i,s,r);if(r===!0)return N6(n,[{start:a,end:o,loop:s}],t,e);const c=o<a?o+i:o,u=!!n._fullLoop&&a===0&&o===i-1;return N6(n,oue(t,a,c,u),t,e)}function N6(n,e,t,r){return!r||!r.setContext||!t?e:cue(n,e,t,r)}function cue(n,e,t,r){const i=n._chart.getContext(),s=C6(n.options),{_datasetIndex:a,options:{spanGaps:o}}=n,c=t.length,u=[];let d=s,p=e[0].start,x=p;function v(_,b,S,T){const k=o?-1:1;if(_!==b){for(_+=c;t[_%c].skip;)_-=k;for(;t[b%c].skip;)b+=k;_%c!==b%c&&(u.push({start:_%c,end:b%c,loop:S,style:T}),d=T,p=b%c)}}for(const _ of e){p=o?p:_.start;let b=t[p%c],S;for(x=p+1;x<=_.end;x++){const T=t[x%c];S=C6(r.setContext(Td(i,{type:"segment",p0:b,p1:T,p0DataIndex:(x-1)%c,p1DataIndex:x%c,datasetIndex:a}))),uue(S,d)&&v(p,x-1,_.loop,d),b=T,d=S}p<x-1&&v(p,x-1,_.loop,d)}return u}function C6(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function uue(n,e){if(!e)return!1;const t=[],r=function(i,s){return QE(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,r)!==JSON.stringify(e,r)}function M2(n,e,t){return n.options.clip?n[t]:e[t]}function hue(n,e){const{xScale:t,yScale:r}=n;return t&&r?{left:M2(t,e,"left"),right:M2(t,e,"right"),top:M2(r,e,"top"),bottom:M2(r,e,"bottom")}:e}function SF(n,e){const t=e._clip;if(t.disabled)return!1;const r=hue(e,n.chartArea);return{left:t.left===!1?0:r.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:r.right+(t.right===!0?0:t.right),top:t.top===!1?0:r.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:r.bottom+(t.bottom===!0?0:t.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class fue{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){const s=t.listeners[i],a=t.duration;s.forEach(o=>o({chart:e,initial:t.initial,numSteps:a,currentStep:Math.min(r-t.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=sF.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let a=s.length-1,o=!1,c;for(;a>=0;--a)c=s[a],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),o=!0):(s[a]=s[s.length-1],s.pop());o&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const r=t.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var gh=new fue;const k6="transparent",due={boolean(n,e,t){return t>.5?e:n},color(n,e,t){const r=y6(n||k6),i=r.valid&&y6(e||k6);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}};class mue{constructor(e,t,r,i){const s=t[r];i=x1([e.to,i,s,e.from]);const a=x1([e.from,s,i]);this._active=!0,this._fn=e.fn||due[e.type||typeof a],this._easing=G1[e.easing]||G1.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=a,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,a=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(a,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=x1([e.to,t,i,e.from]),this._from=x1([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,r=this._duration,i=this._prop,s=this._from,a=this._loop,o=this._to;let c;if(this._active=s!==o&&(a||t<r),!this._active){this._target[i]=o,this._notify(!0);return}if(t<0){this._target[i]=s;return}c=t/r%2,c=a&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(s,o,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){const t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}}class TF{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!tr(e))return;const t=Object.keys(Hi.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!tr(s))return;const a={};for(const o of t)a[o]=s[o];(Ti(s.properties)&&s.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,a)})})}_animateOptions(e,t){const r=t.options,i=gue(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&pue(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,t){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),a=Object.keys(t),o=Date.now();let c;for(c=a.length-1;c>=0;--c){const u=a[c];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,t));continue}const d=t[u];let p=s[u];const x=r.get(u);if(p)if(x&&p.active()){p.update(x,d,o);continue}else p.cancel();if(!x||!x.duration){e[u]=d;continue}s[u]=p=new mue(x,e,u,d),i.push(p)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const r=this._createAnimations(e,t);if(r.length)return gh.add(this._chart,r),!0}}function pue(n,e){const t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=n[r[i]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function gue(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function I6(n,e){const t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function xue(n,e,t){if(t===!1)return!1;const r=I6(n,t),i=I6(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function vue(n){let e,t,r,i;return tr(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function EF(n,e){const t=[],r=n._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)t.push(r[i].index);return t}function D6(n,e,t,r={}){const i=n.keys,s=r.mode==="single";let a,o,c,u;if(e===null)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(c=+i[a],c===t){if(d=!0,r.all)continue;break}u=n.values[c],Ui(u)&&(s||e===0||Pu(e)===Pu(u))&&(e+=u)}return!d&&!r.all?0:e}function yue(n,e){const{iScale:t,vScale:r}=e,i=t.axis==="x"?"x":"y",s=r.axis==="x"?"x":"y",a=Object.keys(n),o=new Array(a.length);let c,u,d;for(c=0,u=a.length;c<u;++c)d=a[c],o[c]={[i]:d,[s]:n[d]};return o}function I5(n,e){const t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function bue(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function _ue(n){const{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function wue(n,e,t){const r=n[e]||(n[e]={});return r[t]||(r[t]={})}function R6(n,e,t,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=n[i.index];if(t&&s>0||!t&&s<0)return i.index}return null}function P6(n,e){const{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:s,vScale:a,index:o}=r,c=s.axis,u=a.axis,d=bue(s,a,r),p=e.length;let x;for(let v=0;v<p;++v){const _=e[v],{[c]:b,[u]:S}=_,T=_._stacks||(_._stacks={});x=T[u]=wue(i,d,b),x[o]=S,x._top=R6(x,a,!0,r.type),x._bottom=R6(x,a,!1,r.type);const k=x._visualValues||(x._visualValues={});k[o]=S}}function D5(n,e){const t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function Sue(n,e){return Td(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Tue(n,e,t){return Td(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Jg(n,e){const t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][t]===void 0)return;delete s[r][t],s[r]._visualValues!==void 0&&s[r]._visualValues[t]!==void 0&&delete s[r]._visualValues[t]}}}const R5=n=>n==="reset"||n==="none",j6=(n,e)=>e?n:Object.assign({},n),Eue=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:EF(t,!0),values:null};class Pc{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=I5(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Jg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,r=this.getDataset(),i=(p,x,v,_)=>p==="x"?x:p==="r"?_:v,s=t.xAxisID=jn(r.xAxisID,D5(e,"x")),a=t.yAxisID=jn(r.yAxisID,D5(e,"y")),o=t.rAxisID=jn(r.rAxisID,D5(e,"r")),c=t.indexAxis,u=t.iAxisID=i(c,s,a,o),d=t.vAxisID=i(c,a,s,o);t.xScale=this.getScaleForId(s),t.yScale=this.getScaleForId(a),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(u),t.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&g6(this._data,this),e._stacked&&Jg(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),r=this._data;if(tr(t)){const i=this._cachedMeta;this._data=yue(t,i)}else if(r!==t){if(r){g6(r,this);const i=this._cachedMeta;Jg(i),i._parsed=[]}t&&Object.isExtensible(t)&&cce(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=t._stacked;t._stacked=I5(t.vScale,t),t.stack!==r.stack&&(i=!0,Jg(t),t.stack=r.stack),this._resyncElements(e),(i||s!==t._stacked)&&(P6(this,t._parsed),t._stacked=I5(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:a}=r,o=s.axis;let c=e===0&&t===i.length?!0:r._sorted,u=e>0&&r._parsed[e-1],d,p,x;if(this._parsing===!1)r._parsed=i,r._sorted=!0,x=i;else{Ti(i[e])?x=this.parseArrayData(r,i,e,t):tr(i[e])?x=this.parseObjectData(r,i,e,t):x=this.parsePrimitiveData(r,i,e,t);const v=()=>p[o]===null||u&&p[o]<u[o];for(d=0;d<t;++d)r._parsed[d+e]=p=x[d],c&&(v()&&(c=!1),u=p);r._sorted=c}a&&P6(this,x)}parsePrimitiveData(e,t,r,i){const{iScale:s,vScale:a}=e,o=s.axis,c=a.axis,u=s.getLabels(),d=s===a,p=new Array(i);let x,v,_;for(x=0,v=i;x<v;++x)_=x+r,p[x]={[o]:d||s.parse(u[_],_),[c]:a.parse(t[_],_)};return p}parseArrayData(e,t,r,i){const{xScale:s,yScale:a}=e,o=new Array(i);let c,u,d,p;for(c=0,u=i;c<u;++c)d=c+r,p=t[d],o[c]={x:s.parse(p[0],d),y:a.parse(p[1],d)};return o}parseObjectData(e,t,r,i){const{xScale:s,yScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,u=new Array(i);let d,p,x,v;for(d=0,p=i;d<p;++d)x=d+r,v=t[x],u[d]={x:s.parse(cd(v,o),x),y:a.parse(cd(v,c),x)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,r){const i=this.chart,s=this._cachedMeta,a=t[e.axis],o={keys:EF(i,!0),values:t._stacks[e.axis]._visualValues};return D6(o,a,s.index,{mode:r})}updateRangeFromParsed(e,t,r,i){const s=r[t.axis];let a=s===null?NaN:s;const o=i&&r._stacks[t.axis];i&&o&&(i.values=o,a=D6(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,t){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,a=i.length,o=this._getOtherScale(e),c=Eue(t,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=_ue(o);let x,v;function _(){v=i[x];const b=v[o.axis];return!Ui(v[e.axis])||d>b||p<b}for(x=0;x<a&&!(!_()&&(this.updateRangeFromParsed(u,e,v,c),s));++x);if(s){for(x=a-1;x>=0;--x)if(!_()){this.updateRangeFromParsed(u,e,v,c);break}}return u}getAllParsedValues(e){const t=this._cachedMeta._parsed,r=[];let i,s,a;for(i=0,s=t.length;i<s;++i)a=t[i][e.axis],Ui(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,r=t.iScale,i=t.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=vue(jn(this.options.clip,xue(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,r=this._cachedMeta,i=r.data||[],s=t.chartArea,a=[],o=this._drawStart||0,c=this._drawCount||i.length-o,u=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,o,c),d=o;d<o+c;++d){const p=i[d];p.hidden||(p.active&&u?a.push(p):p.draw(e,s))}for(d=0;d<a.length;++d)a[d].draw(e,s)}getStyle(e,t){const r=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,t,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const a=this._cachedMeta.data[e];s=a.$context||(a.$context=Tue(this.getContext(),e,a)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Sue(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!t,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",r){const i=t==="active",s=this._cachedDataOpts,a=e+"-"+t,o=s[a],c=this.enableOptionSharing&&Mx(r);if(o)return j6(o,c);const u=this.chart.config,d=u.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],x=u.getOptionScopes(this.getDataset(),d),v=Object.keys(Hi.elements[e]),_=()=>this.getContext(r,i,t),b=u.resolveNamedOptions(x,v,_,p);return b.$shared&&(b.$shared=c,s[a]=Object.freeze(j6(b,c))),b}_resolveAnimations(e,t,r){const i=this.chart,s=this._cachedDataOpts,a=`animation-${t}`,o=s[a];if(o)return o;let c;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,t),x=d.getOptionScopes(this.getDataset(),p);c=d.createResolver(x,this.getContext(e,r,t))}const u=new TF(i,c&&c.animations);return c&&c._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||R5(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const r=this.resolveDataElementOptions(e,t),i=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(t,s)||s!==i;return this.updateSharedOptions(s,t,r),{sharedOptions:s,includeOptions:a}}updateElement(e,t,r,i){R5(i)?Object.assign(e,r):this._resolveAnimations(t,i).update(e,r)}updateSharedOptions(e,t,r){e&&!R5(t)&&this._resolveAnimations(void 0,t).update(e,r)}_setStyle(e,t,r,i){e.active=i;const s=this.getStyle(t,i);this._resolveAnimations(t,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,t,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,t,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,r=this._cachedMeta.data;for(const[o,c,u]of this._syncList)this[o](c,u);this._syncList=[];const i=r.length,s=t.length,a=Math.min(s,i);a&&this.parse(0,a),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,t,r=!0){const i=this._cachedMeta,s=i.data,a=e+t;let o;const c=u=>{for(u.length+=t,o=u.length-1;o>=a;o--)u[o]=u[o-t]};for(c(s),o=e;o<a;++o)s[o]=new this.dataElementType;this._parsing&&c(i._parsed),this.parse(e,t),r&&this.updateElements(s,e,t,"reset")}updateElements(e,t,r,i){}_removeElements(e,t){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,t);r._stacked&&Jg(r,i)}r.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,r,i]=e;this[t](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}qt(Pc,"defaults",{}),qt(Pc,"datasetElementType",null),qt(Pc,"dataElementType",null);function Aue(n,e){if(!n._cache.$bar){const t=n.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=t.length;i<s;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=iF(r.sort((i,s)=>i-s))}return n._cache.$bar}function Nue(n){const e=n.iScale,t=Aue(e,n.type);let r=e._length,i,s,a,o;const c=()=>{a===32767||a===-32768||(Mx(o)&&(r=Math.min(r,Math.abs(a-o)||r)),o=a)};for(i=0,s=t.length;i<s;++i)a=e.getPixelForValue(t[i]),c();for(o=void 0,i=0,s=e.ticks.length;i<s;++i)a=e.getPixelForTick(i),c();return r}function Cue(n,e,t,r){const i=t.barThickness;let s,a;return Yn(i)?(s=e.min*t.categoryPercentage,a=t.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:e.pixels[n]-s/2}}function kue(n,e,t,r){const i=e.pixels,s=i[n];let a=n>0?i[n-1]:null,o=n<i.length-1?i[n+1]:null;const c=t.categoryPercentage;a===null&&(a=s-(o===null?e.end-e.start:o-s)),o===null&&(o=s+s-a);const u=s-(s-Math.min(a,o))/2*c;return{chunk:Math.abs(o-a)/2*c/r,ratio:t.barPercentage,start:u}}function Iue(n,e,t,r){const i=t.parse(n[0],r),s=t.parse(n[1],r),a=Math.min(i,s),o=Math.max(i,s);let c=a,u=o;Math.abs(a)>Math.abs(o)&&(c=o,u=a),e[t.axis]=u,e._custom={barStart:c,barEnd:u,start:i,end:s,min:a,max:o}}function AF(n,e,t,r){return Ti(n)?Iue(n,e,t,r):e[t.axis]=t.parse(n,r),e}function L6(n,e,t,r){const i=n.iScale,s=n.vScale,a=i.getLabels(),o=i===s,c=[];let u,d,p,x;for(u=t,d=t+r;u<d;++u)x=e[u],p={},p[i.axis]=o||i.parse(a[u],u),c.push(AF(x,p,s,u));return c}function P5(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Due(n,e,t){return n!==0?Pu(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Rue(n){let e,t,r,i,s;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:t,end:r,reverse:e,top:i,bottom:s}}function Pue(n,e,t,r){let i=e.borderSkipped;const s={};if(!i){n.borderSkipped=s;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:o,reverse:c,top:u,bottom:d}=Rue(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=u:(t._bottom||0)===r?i=d:(s[O6(d,a,o,c)]=!0,i=u)),s[O6(i,a,o,c)]=!0,n.borderSkipped=s}function O6(n,e,t,r){return r?(n=jue(n,e,t),n=M6(n,t,e)):n=M6(n,e,t),n}function jue(n,e,t){return n===e?t:n===t?e:n}function M6(n,e,t){return n==="start"?e:n==="end"?t:n}function Lue(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}class py extends Pc{parsePrimitiveData(e,t,r,i){return L6(e,t,r,i)}parseArrayData(e,t,r,i){return L6(e,t,r,i)}parseObjectData(e,t,r,i){const{iScale:s,vScale:a}=e,{xAxisKey:o="x",yAxisKey:c="y"}=this._parsing,u=s.axis==="x"?o:c,d=a.axis==="x"?o:c,p=[];let x,v,_,b;for(x=r,v=r+i;x<v;++x)b=t[x],_={},_[s.axis]=s.parse(cd(b,u),x),p.push(AF(cd(b,d),_,a,x));return p}updateRangeFromParsed(e,t,r,i){super.updateRangeFromParsed(e,t,r,i);const s=r._custom;s&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:r,vScale:i}=t,s=this.getParsed(e),a=s._custom,o=P5(a)?"["+a.start+", "+a.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,r,i){const s=i==="reset",{index:a,_cachedMeta:{vScale:o}}=this,c=o.getBasePixel(),u=o.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:x}=this._getSharedOptions(t,i);for(let v=t;v<t+r;v++){const _=this.getParsed(v),b=s||Yn(_[o.axis])?{base:c,head:c}:this._calculateBarValuePixels(v),S=this._calculateBarIndexPixels(v,d),T=(_._stacks||{})[o.axis],k={horizontal:u,base:b.base,enableBorderRadius:!T||P5(_._custom)||a===T._top||a===T._bottom,x:u?b.head:S.center,y:u?S.center:b.head,height:u?S.size:Math.abs(b.size),width:u?Math.abs(b.size):S.size};x&&(k.options=p||this.resolveDataElementOptions(v,e[v].active?"active":i));const E=k.options||e[v].options;Pue(k,E,T,a),Lue(k,E,d.ratio),this.updateElement(e[v],v,k,i)}}_getStacks(e,t){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),s=r.options.stacked,a=[],o=this._cachedMeta.controller.getParsed(t),c=o&&o[r.axis],u=d=>{const p=d._parsed.find(v=>v[r.axis]===c),x=p&&p[d.vScale.axis];if(Yn(x)||isNaN(x))return!0};for(const d of i)if(!(t!==void 0&&u(d))&&((s===!1||a.indexOf(d.stack)===-1||s===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(r=>e[r].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)e[jn(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,r){const i=this._getStacks(e,r),s=t!==void 0?i.indexOf(t):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,t=this._cachedMeta,r=t.iScale,i=[];let s,a;for(s=0,a=t.data.length;s<a;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const o=e.barThickness;return{min:o||Nue(t),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:r,index:i},options:{base:s,minBarLength:a}}=this,o=s||0,c=this.getParsed(e),u=c._custom,d=P5(u);let p=c[t.axis],x=0,v=r?this.applyStack(t,c,r):p,_,b;v!==p&&(x=v-p,v=p),d&&(p=u.barStart,v=u.barEnd-u.barStart,p!==0&&Pu(p)!==Pu(u.barEnd)&&(x=0),x+=p);const S=!Yn(s)&&!d?s:x;let T=t.getPixelForValue(S);if(this.chart.getDataVisibility(e)?_=t.getPixelForValue(x+v):_=T,b=_-T,Math.abs(b)<a){b=Due(b,t,o)*a,p===o&&(T-=b/2);const k=t.getPixelForDecimal(0),E=t.getPixelForDecimal(1),j=Math.min(k,E),F=Math.max(k,E);T=Math.max(Math.min(T,F),j),_=T+b,r&&!d&&(c._stacks[t.axis]._visualValues[i]=t.getValueForPixel(_)-t.getValueForPixel(T))}if(T===t.getPixelForValue(o)){const k=Pu(b)*t.getLineWidthForValue(o)/2;T+=k,b-=k}return{size:b,base:T,head:_,center:_+b/2}}_calculateBarIndexPixels(e,t){const r=t.scale,i=this.options,s=i.skipNull,a=jn(i.maxBarThickness,1/0);let o,c;const u=this._getAxisCount();if(t.grouped){const d=s?this._getStackCount(e):t.stackCount,p=i.barThickness==="flex"?kue(e,t,i,d*u):Cue(e,t,i,d*u),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(jn(x,this.getFirstScaleIdForIndexAxis())),_=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+v;o=p.start+p.chunk*_+p.chunk/2,c=Math.min(a,p.chunk*p.ratio)}else o=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,t.min*t.ratio);return{base:o-c/2,head:o+c/2,center:o,size:c}}draw(){const e=this._cachedMeta,t=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[t.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}qt(py,"id","bar"),qt(py,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),qt(py,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class gy extends Pc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,r,i){const s=super.parsePrimitiveData(e,t,r,i);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(e,t,r,i){const s=super.parseArrayData(e,t,r,i);for(let a=0;a<s.length;a++){const o=t[r+a];s[a]._custom=jn(o[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(e,t,r,i){const s=super.parseObjectData(e,t,r,i);for(let a=0;a<s.length;a++){const o=t[r+a];s[a]._custom=jn(o&&o.r&&+o.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let r=e.length-1;r>=0;--r)t=Math.max(t,e[r].size(this.resolveDataElementOptions(r))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=s.getLabelForValue(a.y),u=a._custom;return{label:r[e]||"",value:"("+o+", "+c+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:a,vScale:o}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),d=a.axis,p=o.axis;for(let x=t;x<t+r;x++){const v=e[x],_=!s&&this.getParsed(x),b={},S=b[d]=s?a.getPixelForDecimal(.5):a.getPixelForValue(_[d]),T=b[p]=s?o.getBasePixel():o.getPixelForValue(_[p]);b.skip=isNaN(S)||isNaN(T),u&&(b.options=c||this.resolveDataElementOptions(x,v.active?"active":i),s&&(b.options.radius=0)),this.updateElement(v,x,b,i)}}resolveDataElementOptions(e,t){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return t!=="active"&&(i.radius=0),i.radius+=jn(r&&r._custom,s),i}}qt(gy,"id","bubble"),qt(gy,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),qt(gy,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Oue(n,e,t){let r=1,i=1,s=0,a=0;if(e<hi){const o=n,c=o+e,u=Math.cos(o),d=Math.sin(o),p=Math.cos(c),x=Math.sin(c),v=(E,j,F)=>Fx(E,o,c,!0)?1:Math.max(j,j*t,F,F*t),_=(E,j,F)=>Fx(E,o,c,!0)?-1:Math.min(j,j*t,F,F*t),b=v(0,u,p),S=v(ns,d,x),T=_(br,u,p),k=_(br+ns,d,x);r=(b-T)/2,i=(S-k)/2,s=-(b+T)/2,a=-(S+k)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}class up extends Pc{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=c=>+r[c];if(tr(r[e])){const{key:c="value"}=this._parsing;s=u=>+cd(r[u],c)}let a,o;for(a=e,o=e+t;a<o;++a)i._parsed[a]=s(a)}}_getRotation(){return Ic(this.options.rotation-90)}_getCircumference(){return Ic(this.options.circumference)}_getRotationExtents(){let e=hi,t=-hi;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),a=i._getCircumference();e=Math.min(e,s),t=Math.max(t,s+a)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:r}=t,i=this._cachedMeta,s=i.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(Kle(this.options.cutout,o),1),u=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:x,ratioY:v,offsetX:_,offsetY:b}=Oue(p,d,c),S=(r.width-a)/x,T=(r.height-a)/v,k=Math.max(Math.min(S,T)/2,0),E=ZM(this.options.radius,k),j=Math.max(E*c,0),F=(E-j)/this._getVisibleDatasetWeightTotal();this.offsetX=_*E,this.offsetY=b*E,i.total=this.calculateTotal(),this.outerRadius=E-F*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-F*u,0),this.updateElements(s,0,s.length,e)}_circumference(e,t){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return t&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/hi)}updateElements(e,t,r,i){const s=i==="reset",a=this.chart,o=a.chartArea,u=a.options.animation,d=(o.left+o.right)/2,p=(o.top+o.bottom)/2,x=s&&u.animateScale,v=x?0:this.innerRadius,_=x?0:this.outerRadius,{sharedOptions:b,includeOptions:S}=this._getSharedOptions(t,i);let T=this._getRotation(),k;for(k=0;k<t;++k)T+=this._circumference(k,s);for(k=t;k<t+r;++k){const E=this._circumference(k,s),j=e[k],F={x:d+this.offsetX,y:p+this.offsetY,startAngle:T,endAngle:T+E,circumference:E,outerRadius:_,innerRadius:v};S&&(F.options=b||this.resolveDataElementOptions(k,j.active?"active":i)),T+=E,this.updateElement(j,k,F,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let r=0,i;for(i=0;i<t.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!t[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?hi*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=vv(t._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let t=0;const r=this.chart;let i,s,a,o,c;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){a=r.getDatasetMeta(i),e=a.data,o=a.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)c=o.resolveDataElementOptions(i),c.borderAlign!=="inner"&&(t=Math.max(t,c.borderWidth||0,c.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);t=Math.max(t,s.offset||0,s.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(t+=this._getRingWeight(r));return t}_getRingWeight(e){return Math.max(jn(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}qt(up,"id","doughnut"),qt(up,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),qt(up,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),qt(up,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data,{labels:{pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return t.labels.length&&t.datasets.length?t.labels.map((c,u)=>{const p=e.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:p.backgroundColor,fontColor:s,hidden:!e.getDataVisibility(u),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:a&&(o||p.borderRadius),index:u}}):[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}}});class xy extends Pc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=t,a=this.chart._animationsDisabled;let{start:o,count:c}=oF(t,i,a);this._drawStart=o,this._drawCount=c,lF(t)&&(o=0,c=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},e),this.updateElements(i,o,c,e)}updateElements(e,t,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(t,i),x=a.axis,v=o.axis,{spanGaps:_,segment:b}=this.options,S=$p(_)?_:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||i==="none",k=t+r,E=e.length;let j=t>0&&this.getParsed(t-1);for(let F=0;F<E;++F){const z=e[F],A=T?z:{};if(F<t||F>=k){A.skip=!0;continue}const I=this.getParsed(F),O=Yn(I[v]),B=A[x]=a.getPixelForValue(I[x],F),R=A[v]=s||O?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,I,c):I[v],F);A.skip=isNaN(B)||isNaN(R)||O,A.stop=F>0&&Math.abs(I[x]-j[x])>S,b&&(A.parsed=I,A.raw=u.data[F]),p&&(A.options=d||this.resolveDataElementOptions(F,z.active?"active":i)),T||this.updateElement(z,F,A,i),j=I}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,r=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,a)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}qt(xy,"id","line"),qt(xy,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),qt(xy,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class vy extends Pc{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=vv(t._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,t,r,i){return gF.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<t.min&&(t.min=s),s>t.max&&(t.max=s))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,r=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),s=Math.max(i/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),o=(s-a)/e.getVisibleDatasetCount();this.outerRadius=s-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(e,t,r,i){const s=i==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,p=u.yCenter,x=u.getIndexAngle(0)-.5*br;let v=x,_;const b=360/this.countVisibleElements();for(_=0;_<t;++_)v+=this._computeAngle(_,i,b);for(_=t;_<t+r;_++){const S=e[_];let T=v,k=v+this._computeAngle(_,i,b),E=a.getDataVisibility(_)?u.getDistanceFromCenterForValue(this.getParsed(_).r):0;v=k,s&&(c.animateScale&&(E=0),c.animateRotate&&(T=k=x));const j={x:d,y:p,innerRadius:0,outerRadius:E,startAngle:T,endAngle:k,options:this.resolveDataElementOptions(_,S.active?"active":i)};this.updateElement(S,_,j,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&t++}),t}_computeAngle(e,t,r){return this.chart.getDataVisibility(e)?Ic(this.resolveDataElementOptions(e,t).angle||r):0}}qt(vy,"id","polarArea"),qt(vy,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),qt(vy,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return t.labels.map((s,a)=>{const c=e.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:i,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,t,r){r.chart.toggleDataVisibility(t.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class iT extends up{}qt(iT,"id","pie"),qt(iT,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class yy extends Pc{getLabelAndValue(e){const t=this._cachedMeta.vScale,r=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(r[t.axis])}}parseObjectData(e,t,r,i){return gF.bind(this)(e,t,r,i)}update(e){const t=this._cachedMeta,r=t.dataset,i=t.data||[],s=t.iScale.getLabels();if(r.points=i,e!=="resize"){const a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);const o={_loop:!0,_fullLoop:s.length===i.length,options:a};this.updateElement(r,void 0,o,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,r,i){const s=this._cachedMeta.rScale,a=i==="reset";for(let o=t;o<t+r;o++){const c=e[o],u=this.resolveDataElementOptions(o,c.active?"active":i),d=s.getPointPositionForValue(o,this.getParsed(o).r),p=a?s.xCenter:d.x,x=a?s.yCenter:d.y,v={x:p,y:x,angle:d.angle,skip:isNaN(p)||isNaN(x),options:u};this.updateElement(c,o,v,i)}}}qt(yy,"id","radar"),qt(yy,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),qt(yy,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class by extends Pc{getLabelAndValue(e){const t=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=t,a=this.getParsed(e),o=i.getLabelForValue(a.x),c=s.getLabelForValue(a.y);return{label:r[e]||"",value:"("+o+", "+c+")"}}update(e){const t=this._cachedMeta,{data:r=[]}=t,i=this.chart._animationsDisabled;let{start:s,count:a}=oF(t,r,i);if(this._drawStart=s,this._drawCount=a,lF(t)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:c}=t;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!c._decimated,o.points=r;const u=this.resolveDatasetElementOptions(e);u.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:u},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,r,i){const s=i==="reset",{iScale:a,vScale:o,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(t,i),p=this.getSharedOptions(d),x=this.includeOptions(i,p),v=a.axis,_=o.axis,{spanGaps:b,segment:S}=this.options,T=$p(b)?b:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||i==="none";let E=t>0&&this.getParsed(t-1);for(let j=t;j<t+r;++j){const F=e[j],z=this.getParsed(j),A=k?F:{},I=Yn(z[_]),O=A[v]=a.getPixelForValue(z[v],j),B=A[_]=s||I?o.getBasePixel():o.getPixelForValue(c?this.applyStack(o,z,c):z[_],j);A.skip=isNaN(O)||isNaN(B)||I,A.stop=j>0&&Math.abs(z[v]-E[v])>T,S&&(A.parsed=z,A.raw=u.data[j]),x&&(A.options=p||this.resolveDataElementOptions(j,F.active?"active":i)),k||this.updateElement(F,j,A,i),E=z}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let o=0;for(let c=t.length-1;c>=0;--c)o=Math.max(o,t[c].size(this.resolveDataElementOptions(c))/2);return o>0&&o}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!t.length)return i;const s=t[0].size(this.resolveDataElementOptions(0)),a=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,s,a)/2}}qt(by,"id","scatter"),qt(by,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),qt(by,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Wd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class iA{constructor(e){qt(this,"options");this.options=e||{}}static override(e){Object.assign(iA.prototype,e)}init(){}formats(){return Wd()}parse(){return Wd()}format(){return Wd()}add(){return Wd()}diff(){return Wd()}startOf(){return Wd()}endOf(){return Wd()}}var Mue={_date:iA};function Fue(n,e,t,r){const{controller:i,data:s,_sorted:a}=n,o=i._cachedMeta.iScale,c=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(o&&e===o.axis&&e!=="r"&&a&&s.length){const u=o._reversePixels?oce:Eh;if(r){if(i._sharedOptions){const d=s[0],p=typeof d.getRange=="function"&&d.getRange(e);if(p){const x=u(s,e,t-p),v=u(s,e,t+p);return{lo:x.lo,hi:v.hi}}}}else{const d=u(s,e,t);if(c){const{vScale:p}=i._cachedMeta,{_parsed:x}=n,v=x.slice(0,d.lo+1).reverse().findIndex(b=>!Yn(b[p.axis]));d.lo-=Math.max(0,v);const _=x.slice(d.hi).findIndex(b=>!Yn(b[p.axis]));d.hi+=Math.max(0,_)}return d}}return{lo:0,hi:s.length-1}}function v_(n,e,t,r,i){const s=n.getSortedVisibleDatasetMetas(),a=t[e];for(let o=0,c=s.length;o<c;++o){const{index:u,data:d}=s[o],{lo:p,hi:x}=Fue(s[o],e,a,i);for(let v=p;v<=x;++v){const _=d[v];_.skip||r(_,u,v)}}}function Bue(n){const e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,a=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(a,2))}}function j5(n,e,t,r,i){const s=[];return!i&&!n.isPointInArea(e)||v_(n,t,e,function(o,c,u){!i&&!Ah(o,n.chartArea,0)||o.inRange(e.x,e.y,r)&&s.push({element:o,datasetIndex:c,index:u})},!0),s}function Vue(n,e,t,r){let i=[];function s(a,o,c){const{startAngle:u,endAngle:d}=a.getProps(["startAngle","endAngle"],r),{angle:p}=nF(a,{x:e.x,y:e.y});Fx(p,u,d)&&i.push({element:a,datasetIndex:o,index:c})}return v_(n,t,e,s),i}function zue(n,e,t,r,i,s){let a=[];const o=Bue(t);let c=Number.POSITIVE_INFINITY;function u(d,p,x){const v=d.inRange(e.x,e.y,i);if(r&&!v)return;const _=d.getCenterPoint(i);if(!(!!s||n.isPointInArea(_))&&!v)return;const S=o(e,_);S<c?(a=[{element:d,datasetIndex:p,index:x}],c=S):S===c&&a.push({element:d,datasetIndex:p,index:x})}return v_(n,t,e,u),a}function L5(n,e,t,r,i,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!r?Vue(n,e,t,i):zue(n,e,t,r,i,s)}function F6(n,e,t,r,i){const s=[],a=t==="x"?"inXRange":"inYRange";let o=!1;return v_(n,t,e,(c,u,d)=>{c[a]&&c[a](e[t],i)&&(s.push({element:c,datasetIndex:u,index:d}),o=o||c.inRange(e.x,e.y,i))}),r&&!o?[]:s}var Uue={modes:{index(n,e,t,r){const i=Xd(e,n),s=t.axis||"x",a=t.includeInvisible||!1,o=t.intersect?j5(n,i,s,r,a):L5(n,i,s,!1,r,a),c=[];return o.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{const d=o[0].index,p=u.data[d];p&&!p.skip&&c.push({element:p,datasetIndex:u.index,index:d})}),c):[]},dataset(n,e,t,r){const i=Xd(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;let o=t.intersect?j5(n,i,s,r,a):L5(n,i,s,!1,r,a);if(o.length>0){const c=o[0].datasetIndex,u=n.getDatasetMeta(c).data;o=[];for(let d=0;d<u.length;++d)o.push({element:u[d],datasetIndex:c,index:d})}return o},point(n,e,t,r){const i=Xd(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;return j5(n,i,s,r,a)},nearest(n,e,t,r){const i=Xd(e,n),s=t.axis||"xy",a=t.includeInvisible||!1;return L5(n,i,s,t.intersect,r,a)},x(n,e,t,r){const i=Xd(e,n);return F6(n,i,"x",t.intersect,r)},y(n,e,t,r){const i=Xd(e,n);return F6(n,i,"y",t.intersect,r)}}};const NF=["left","top","right","bottom"];function Zg(n,e){return n.filter(t=>t.pos===e)}function B6(n,e){return n.filter(t=>NF.indexOf(t.pos)===-1&&t.box.axis===e)}function e1(n,e){return n.sort((t,r)=>{const i=e?r:t,s=e?t:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function Hue(n){const e=[];let t,r,i,s,a,o;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:s,options:{stack:a,stackWeight:o=1}}=i,e.push({index:t,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return e}function que(n){const e={};for(const t of n){const{stack:r,pos:i,stackWeight:s}=t;if(!r||!NF.includes(i))continue;const a=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=s}return e}function Wue(n,e){const t=que(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,a,o;for(s=0,a=n.length;s<a;++s){o=n[s];const{fullSize:c}=o.box,u=t[o.stack],d=u&&o.stackWeight/u.weight;o.horizontal?(o.width=d?d*r:c&&e.availableWidth,o.height=i):(o.width=r,o.height=d?d*i:c&&e.availableHeight)}return t}function Gue(n){const e=Hue(n),t=e1(e.filter(u=>u.box.fullSize),!0),r=e1(Zg(e,"left"),!0),i=e1(Zg(e,"right")),s=e1(Zg(e,"top"),!0),a=e1(Zg(e,"bottom")),o=B6(e,"x"),c=B6(e,"y");return{fullSize:t,leftAndTop:r.concat(s),rightAndBottom:i.concat(c).concat(a).concat(o),chartArea:Zg(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:s.concat(a).concat(o)}}function V6(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function CF(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function $ue(n,e,t,r){const{pos:i,box:s}=t,a=n.maxPadding;if(!tr(i)){t.size&&(n[i]-=t.size);const p=r[t.stack]||{size:0,count:1};p.size=Math.max(p.size,t.horizontal?s.height:s.width),t.size=p.size/p.count,n[i]+=t.size}s.getPadding&&CF(a,s.getPadding());const o=Math.max(0,e.outerWidth-V6(a,n,"left","right")),c=Math.max(0,e.outerHeight-V6(a,n,"top","bottom")),u=o!==n.w,d=c!==n.h;return n.w=o,n.h=c,t.horizontal?{same:u,other:d}:{same:d,other:u}}function Kue(n){const e=n.maxPadding;function t(r){const i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Yue(n,e){const t=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(a=>{s[a]=Math.max(e[a],t[a])}),s}return r(n?["left","right"]:["top","bottom"])}function v1(n,e,t,r){const i=[];let s,a,o,c,u,d;for(s=0,a=n.length,u=0;s<a;++s){o=n[s],c=o.box,c.update(o.width||e.w,o.height||e.h,Yue(o.horizontal,e));const{same:p,other:x}=$ue(e,t,o,r);u|=p&&i.length,d=d||x,c.fullSize||i.push(o)}return u&&v1(i,e,t,r)||d}function F2(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function z6(n,e,t,r){const i=t.padding;let{x:s,y:a}=e;for(const o of n){const c=o.box,u=r[o.stack]||{placed:0,weight:1},d=o.stackWeight/u.weight||1;if(o.horizontal){const p=e.w*d,x=u.size||c.height;Mx(u.start)&&(a=u.start),c.fullSize?F2(c,i.left,a,t.outerWidth-i.right-i.left,x):F2(c,e.left+u.placed,a,p,x),u.start=a,u.placed+=p,a=c.bottom}else{const p=e.h*d,x=u.size||c.width;Mx(u.start)&&(s=u.start),c.fullSize?F2(c,s,i.top,x,t.outerHeight-i.bottom-i.top):F2(c,s,e.top+u.placed,x,p),u.start=s,u.placed+=p,s=c.right}}e.x=s,e.y=a}var Ua={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){const t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;const i=Ga(n.options.layout.padding),s=Math.max(e-i.width,0),a=Math.max(t-i.height,0),o=Gue(n.boxes),c=o.vertical,u=o.horizontal;Rr(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const d=c.reduce((b,S)=>S.box.options&&S.box.options.display===!1?b:b+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),x=Object.assign({},i);CF(x,Ga(r));const v=Object.assign({maxPadding:x,w:s,h:a,x:i.left,y:i.top},i),_=Wue(c.concat(u),p);v1(o.fullSize,v,p,_),v1(c,v,p,_),v1(u,v,p,_)&&v1(c,v,p,_),Kue(v),z6(o.leftAndTop,v,p,_),v.x+=v.w,v.y+=v.h,z6(o.rightAndBottom,v,p,_),n.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},Rr(o.chartArea,b=>{const S=b.box;Object.assign(S,n.chartArea),S.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class kF{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}}class Xue extends kF{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _y="$chartjs",Que={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},U6=n=>n===null||n==="";function Jue(n,e){const t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[_y]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",U6(i)){const s=E6(n,"width");s!==void 0&&(n.width=s)}if(U6(r))if(n.style.height==="")n.height=n.width/(e||2);else{const s=E6(n,"height");s!==void 0&&(n.height=s)}return n}const IF=eue?{passive:!0}:!1;function Zue(n,e,t){n&&n.addEventListener(e,t,IF)}function ehe(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,IF)}function the(n,e){const t=Que[n.type]||n.type,{x:r,y:i}=Xd(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function _b(n,e){for(const t of n)if(t===e||t.contains(e))return!0}function nhe(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||_b(o.addedNodes,r),a=a&&!_b(o.removedNodes,r);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function rhe(n,e,t){const r=n.canvas,i=new MutationObserver(s=>{let a=!1;for(const o of s)a=a||_b(o.removedNodes,r),a=a&&!_b(o.addedNodes,r);a&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}const Vx=new Map;let H6=0;function DF(){const n=window.devicePixelRatio;n!==H6&&(H6=n,Vx.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function ihe(n,e){Vx.size||window.addEventListener("resize",DF),Vx.set(n,e)}function she(n){Vx.delete(n),Vx.size||window.removeEventListener("resize",DF)}function ahe(n,e,t){const r=n.canvas,i=r&&rA(r);if(!i)return;const s=aF((o,c)=>{const u=i.clientWidth;t(o,c),u<i.clientWidth&&t()},window),a=new ResizeObserver(o=>{const c=o[0],u=c.contentRect.width,d=c.contentRect.height;u===0&&d===0||s(u,d)});return a.observe(i),ihe(n,s),a}function O5(n,e,t){t&&t.disconnect(),e==="resize"&&she(n)}function ohe(n,e,t){const r=n.canvas,i=aF(s=>{n.ctx!==null&&t(the(s,n))},n);return Zue(r,e,i),i}class lhe extends kF{acquireContext(e,t){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(Jue(e,t),r):null}releaseContext(e){const t=e.canvas;if(!t[_y])return!1;const r=t[_y].initial;["height","width"].forEach(s=>{const a=r[s];Yn(a)?t.removeAttribute(s):t.setAttribute(s,a)});const i=r.style||{};return Object.keys(i).forEach(s=>{t.style[s]=i[s]}),t.width=t.width,delete t[_y],!0}addEventListener(e,t,r){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),a={attach:nhe,detach:rhe,resize:ahe}[t]||ohe;i[t]=a(e,t,r)}removeEventListener(e,t){const r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:O5,detach:O5,resize:O5}[t]||ehe)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return Zce(e,t,r,i)}isAttached(e){const t=e&&rA(e);return!!(t&&t.isConnected)}}function che(n){return!nA()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Xue:lhe}class Mc{constructor(){qt(this,"x");qt(this,"y");qt(this,"active",!1);qt(this,"options");qt(this,"$animations")}tooltipPosition(e){const{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return $p(this.x)&&$p(this.y)}getProps(e,t){const r=this.$animations;if(!t||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}}qt(Mc,"defaults",{}),qt(Mc,"defaultRoutes");function uhe(n,e){const t=n.options.ticks,r=hhe(n),i=Math.min(t.maxTicksLimit||r,r),s=t.major.enabled?dhe(e):[],a=s.length,o=s[0],c=s[a-1],u=[];if(a>i)return mhe(e,u,s,a/i),u;const d=fhe(s,e,i);if(a>0){let p,x;const v=a>1?Math.round((c-o)/(a-1)):null;for(B2(e,u,d,Yn(v)?0:o-v,o),p=0,x=a-1;p<x;p++)B2(e,u,d,s[p],s[p+1]);return B2(e,u,d,c,Yn(v)?e.length:c+v),u}return B2(e,u,d),u}function hhe(n){const e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function fhe(n,e,t){const r=phe(n),i=e.length/t;if(!r)return Math.max(i,1);const s=nce(r);for(let a=0,o=s.length-1;a<o;a++){const c=s[a];if(c>i)return c}return Math.max(i,1)}function dhe(n){const e=[];let t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function mhe(n,e,t,r){let i=0,s=t[0],a;for(r=Math.ceil(r),a=0;a<n.length;a++)a===s&&(e.push(n[a]),i++,s=t[i*r])}function B2(n,e,t,r,i){const s=jn(r,0),a=Math.min(jn(i,n.length),n.length);let o=0,c,u,d;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),d=s;d<0;)o++,d=Math.round(s+o*t);for(u=Math.max(s,0);u<a;u++)u===d&&(e.push(n[u]),o++,d=Math.round(s+o*t))}function phe(n){const e=n.length;let t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}const ghe=n=>n==="left"?"right":n==="right"?"left":n,q6=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,W6=(n,e)=>Math.min(e||n,n);function G6(n,e){const t=[],r=n.length/e,i=n.length;let s=0;for(;s<i;s+=r)t.push(n[Math.floor(s)]);return t}function xhe(n,e,t){const r=n.ticks.length,i=Math.min(e,r-1),s=n._startPixel,a=n._endPixel,o=1e-6;let c=n.getPixelForTick(i),u;if(!(t&&(r===1?u=Math.max(c-s,a-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(i-1))/2,c+=i<e?u:-u,c<s-o||c>a+o)))return c}function vhe(n,e){Rr(n,t=>{const r=t.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete t.data[r[s]];r.splice(0,i)}})}function t1(n){return n.drawTicks?n.tickLength:0}function $6(n,e){if(!n.display)return 0;const t=Ms(n.font,e),r=Ga(n.padding);return(Ti(n.text)?n.text.length:1)*t.lineHeight+r.height}function yhe(n,e){return Td(n,{scale:e,type:"scale"})}function bhe(n,e,t){return Td(n,{tick:t,index:e,type:"tick"})}function _he(n,e,t){let r=XE(n);return(t&&e!=="right"||!t&&e==="right")&&(r=ghe(r)),r}function whe(n,e,t,r){const{top:i,left:s,bottom:a,right:o,chart:c}=n,{chartArea:u,scales:d}=c;let p=0,x,v,_;const b=a-i,S=o-s;if(n.isHorizontal()){if(v=Pa(r,s,o),tr(t)){const T=Object.keys(t)[0],k=t[T];_=d[T].getPixelForValue(k)+b-e}else t==="center"?_=(u.bottom+u.top)/2+b-e:_=q6(n,t,e);x=o-s}else{if(tr(t)){const T=Object.keys(t)[0],k=t[T];v=d[T].getPixelForValue(k)-S+e}else t==="center"?v=(u.left+u.right)/2-S+e:v=q6(n,t,e);_=Pa(r,a,i),p=t==="left"?-ns:ns}return{titleX:v,titleY:_,maxWidth:x,rotation:p}}class nm extends Mc{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=ul(e,Number.POSITIVE_INFINITY),t=ul(t,Number.NEGATIVE_INFINITY),r=ul(r,Number.POSITIVE_INFINITY),i=ul(i,Number.NEGATIVE_INFINITY),{min:ul(e,r),max:ul(t,i),minDefined:Ui(e),maxDefined:Ui(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),a;if(i&&s)return{min:t,max:r};const o=this.getMatchingVisibleMetas();for(let c=0,u=o.length;c<u;++c)a=o[c].controller.getMinMax(this,e),i||(t=Math.min(t,a.min)),s||(r=Math.max(r,a.max));return t=s&&t>r?r:t,r=i&&t>r?t:r,{min:ul(t,ul(r,t)),max:ul(r,ul(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ni(this.options.beforeUpdate,[this])}update(e,t,r){const{beginAtZero:i,grace:s,ticks:a}=this.options,o=a.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Dce(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=o<this.ticks.length;this._convertTicksToLabels(c?G6(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=uhe(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ni(this.options.afterUpdate,[this])}beforeSetDimensions(){ni(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ni(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ni(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ni(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ni(t.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ni(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ni(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,r=W6(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,s=t.maxRotation;let a=i,o,c,u;if(!this._isVisible()||!t.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,x=d.highest.height,v=Zs(this.chart.width-p,0,this.maxWidth);o=e.offset?this.maxWidth/r:v/(r-1),p+6>o&&(o=v/(r-(e.offset?.5:1)),c=this.maxHeight-t1(e.grid)-t.padding-$6(e.title,this.chart.options.font),u=Math.sqrt(p*p+x*x),a=KE(Math.min(Math.asin(Zs((d.highest.height+6)/o,-1,1)),Math.asin(Zs(c/u,-1,1))-Math.asin(Zs(x/u,-1,1)))),a=Math.max(i,Math.min(s,a))),this.labelRotation=a}afterCalculateLabelRotation(){ni(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ni(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:s}}=this,a=this._isVisible(),o=this.isHorizontal();if(a){const c=$6(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=t1(s)+c):(e.height=this.maxHeight,e.width=t1(s)+c),r.display&&this.ticks.length){const{first:u,last:d,widest:p,highest:x}=this._getLabelSizes(),v=r.padding*2,_=Ic(this.labelRotation),b=Math.cos(_),S=Math.sin(_);if(o){const T=r.mirror?0:S*p.width+b*x.height;e.height=Math.min(this.maxHeight,e.height+T+v)}else{const T=r.mirror?0:b*p.width+S*x.height;e.width=Math.min(this.maxWidth,e.width+T+v)}this._calculatePadding(u,d,S,b)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){const{ticks:{align:s,padding:a},position:o}=this.options,c=this.labelRotation!==0,u=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let x=0,v=0;c?u?(x=i*e.width,v=r*t.height):(x=r*e.height,v=i*t.width):s==="start"?v=t.width:s==="end"?x=e.width:s!=="inner"&&(x=e.width/2,v=t.width/2),this.paddingLeft=Math.max((x-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((v-p+a)*this.width/(this.width-p),0)}else{let d=t.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=t.height,p=0),this.paddingTop=d+a,this.paddingBottom=p+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ni(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)Yn(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let r=this.ticks;t<r.length&&(r=G6(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){const{ctx:i,_longestTextCache:s}=this,a=[],o=[],c=Math.floor(t/W6(t,r));let u=0,d=0,p,x,v,_,b,S,T,k,E,j,F;for(p=0;p<t;p+=c){if(_=e[p].label,b=this._resolveTickFontOptions(p),i.font=S=b.string,T=s[S]=s[S]||{data:{},gc:[]},k=b.lineHeight,E=j=0,!Yn(_)&&!Ti(_))E=yb(i,T.data,T.gc,E,_),j=k;else if(Ti(_))for(x=0,v=_.length;x<v;++x)F=_[x],!Yn(F)&&!Ti(F)&&(E=yb(i,T.data,T.gc,E,F),j+=k);a.push(E),o.push(j),u=Math.max(E,u),d=Math.max(j,d)}vhe(s,t);const z=a.indexOf(u),A=o.indexOf(d),I=O=>({width:a[O]||0,height:o[O]||0});return{first:I(0),last:I(t-1),widest:I(z),highest:I(A),widths:a,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return ace(this._alignToPixels?qd(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const r=t[e];return r.$context||(r.$context=bhe(this.getContext(),e,r))}return this.$context||(this.$context=yhe(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=Ic(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),s=this._getLabelSizes(),a=e.autoSkipPadding||0,o=s?s.widest.width+a:0,c=s?s.highest.height+a:0;return this.isHorizontal()?c*r>o*i?o/r:c/i:c*i<o*r?c/r:o/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,r=this.chart,i=this.options,{grid:s,position:a,border:o}=i,c=s.offset,u=this.isHorizontal(),p=this.ticks.length+(c?1:0),x=t1(s),v=[],_=o.setContext(this.getContext()),b=_.display?_.width:0,S=b/2,T=function(q){return qd(r,q,b)};let k,E,j,F,z,A,I,O,B,R,P,V;if(a==="top")k=T(this.bottom),A=this.bottom-x,O=k-S,R=T(e.top)+S,V=e.bottom;else if(a==="bottom")k=T(this.top),R=e.top,V=T(e.bottom)-S,A=k+S,O=this.top+x;else if(a==="left")k=T(this.right),z=this.right-x,I=k-S,B=T(e.left)+S,P=e.right;else if(a==="right")k=T(this.left),B=e.left,P=T(e.right)-S,z=k+S,I=this.left+x;else if(t==="x"){if(a==="center")k=T((e.top+e.bottom)/2+.5);else if(tr(a)){const q=Object.keys(a)[0],Q=a[q];k=T(this.chart.scales[q].getPixelForValue(Q))}R=e.top,V=e.bottom,A=k+S,O=A+x}else if(t==="y"){if(a==="center")k=T((e.left+e.right)/2);else if(tr(a)){const q=Object.keys(a)[0],Q=a[q];k=T(this.chart.scales[q].getPixelForValue(Q))}z=k-S,I=z-x,B=e.left,P=e.right}const Y=jn(i.ticks.maxTicksLimit,p),ie=Math.max(1,Math.ceil(p/Y));for(E=0;E<p;E+=ie){const q=this.getContext(E),Q=s.setContext(q),se=o.setContext(q),J=Q.lineWidth,me=Q.color,re=se.dash||[],M=se.dashOffset,W=Q.tickWidth,K=Q.tickColor,G=Q.tickBorderDash||[],te=Q.tickBorderDashOffset;j=xhe(this,E,c),j!==void 0&&(F=qd(r,j,J),u?z=I=B=P=F:A=O=R=V=F,v.push({tx1:z,ty1:A,tx2:I,ty2:O,x1:B,y1:R,x2:P,y2:V,width:J,color:me,borderDash:re,borderDashOffset:M,tickWidth:W,tickColor:K,tickBorderDash:G,tickBorderDashOffset:te}))}return this._ticksLength=p,this._borderValue=k,v}_computeLabelItems(e){const t=this.axis,r=this.options,{position:i,ticks:s}=r,a=this.isHorizontal(),o=this.ticks,{align:c,crossAlign:u,padding:d,mirror:p}=s,x=t1(r.grid),v=x+d,_=p?-d:v,b=-Ic(this.labelRotation),S=[];let T,k,E,j,F,z,A,I,O,B,R,P,V="middle";if(i==="top")z=this.bottom-_,A=this._getXAxisLabelAlignment();else if(i==="bottom")z=this.top+_,A=this._getXAxisLabelAlignment();else if(i==="left"){const ie=this._getYAxisLabelAlignment(x);A=ie.textAlign,F=ie.x}else if(i==="right"){const ie=this._getYAxisLabelAlignment(x);A=ie.textAlign,F=ie.x}else if(t==="x"){if(i==="center")z=(e.top+e.bottom)/2+v;else if(tr(i)){const ie=Object.keys(i)[0],q=i[ie];z=this.chart.scales[ie].getPixelForValue(q)+v}A=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")F=(e.left+e.right)/2-v;else if(tr(i)){const ie=Object.keys(i)[0],q=i[ie];F=this.chart.scales[ie].getPixelForValue(q)}A=this._getYAxisLabelAlignment(x).textAlign}t==="y"&&(c==="start"?V="top":c==="end"&&(V="bottom"));const Y=this._getLabelSizes();for(T=0,k=o.length;T<k;++T){E=o[T],j=E.label;const ie=s.setContext(this.getContext(T));I=this.getPixelForTick(T)+s.labelOffset,O=this._resolveTickFontOptions(T),B=O.lineHeight,R=Ti(j)?j.length:1;const q=R/2,Q=ie.color,se=ie.textStrokeColor,J=ie.textStrokeWidth;let me=A;a?(F=I,A==="inner"&&(T===k-1?me=this.options.reverse?"left":"right":T===0?me=this.options.reverse?"right":"left":me="center"),i==="top"?u==="near"||b!==0?P=-R*B+B/2:u==="center"?P=-Y.highest.height/2-q*B+B:P=-Y.highest.height+B/2:u==="near"||b!==0?P=B/2:u==="center"?P=Y.highest.height/2-q*B:P=Y.highest.height-R*B,p&&(P*=-1),b!==0&&!ie.showLabelBackdrop&&(F+=B/2*Math.sin(b))):(z=I,P=(1-R)*B/2);let re;if(ie.showLabelBackdrop){const M=Ga(ie.backdropPadding),W=Y.heights[T],K=Y.widths[T];let G=P-M.top,te=0-M.left;switch(V){case"middle":G-=W/2;break;case"bottom":G-=W;break}switch(A){case"center":te-=K/2;break;case"right":te-=K;break;case"inner":T===k-1?te-=K:T>0&&(te-=K/2);break}re={left:te,top:G,width:K+M.width,height:W+M.height,color:ie.backdropColor}}S.push({label:j,font:O,textOffset:P,options:{rotation:b,color:Q,strokeColor:se,strokeWidth:J,textAlign:me,textBaseline:V,translation:[F,z],backdrop:re}})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Ic(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,a=this._getLabelSizes(),o=e+s,c=a.widest.width;let u,d;return t==="left"?i?(d=this.right+s,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d+=c)):(d=this.right-o,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d=this.left)):t==="right"?i?(d=this.left+s,r==="near"?u="right":r==="center"?(u="center",d-=c/2):(u="left",d-=c)):(d=this.left+o,r==="near"?u="left":r==="center"?(u="center",d+=c/2):(u="right",d=this.right)):u="right",{textAlign:u,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:r,top:i,width:s,height:a}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,s,a),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,a;const o=(c,u,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(s=0,a=i.length;s<a;++s){const c=i[s];t.drawOnChartArea&&o({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&o({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),a=r.display?s.width:0;if(!a)return;const o=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let u,d,p,x;this.isHorizontal()?(u=qd(e,this.left,a)-a/2,d=qd(e,this.right,o)+o/2,p=x=c):(p=qd(e,this.top,a)-a/2,x=qd(e,this.bottom,o)+o/2,u=d=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,p),t.lineTo(d,x),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&p_(r,i);const s=this.getLabelItems(e);for(const a of s){const o=a.options,c=a.font,u=a.label,d=a.textOffset;H0(r,u,0,d,c,o)}i&&g_(r)}drawTitle(){const{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;const s=Ms(r.font),a=Ga(r.padding),o=r.align;let c=s.lineHeight/2;t==="bottom"||t==="center"||tr(t)?(c+=a.bottom,Ti(r.text)&&(c+=s.lineHeight*(r.text.length-1))):c+=a.top;const{titleX:u,titleY:d,maxWidth:p,rotation:x}=whe(this,c,t,o);H0(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:x,textAlign:_he(o,t,i),textBaseline:"middle",translation:[u,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,r=jn(e.grid&&e.grid.z,-1),i=jn(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==nm.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,a;for(s=0,a=t.length;s<a;++s){const o=t[s];o[r]===this.id&&(!e||o.type===e)&&i.push(o)}return i}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return Ms(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class V2{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let r;Ehe(t)&&(r=this.register(t));const i=this.items,s=e.id,a=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,She(e,a,r),this.override&&Hi.override(e.id,e.overrides)),a}get(e){return this.items[e]}unregister(e){const t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Hi[i]&&(delete Hi[i][r],this.override&&delete U0[r])}}function She(n,e,t){const r=Ox(Object.create(null),[t?Hi.get(t):{},Hi.get(e),n.defaults]);Hi.set(e,r),n.defaultRoutes&&The(e,n.defaultRoutes),n.descriptors&&Hi.describe(e,n.descriptors)}function The(n,e){Object.keys(e).forEach(t=>{const r=t.split("."),i=r.pop(),s=[n].concat(r).join("."),a=e[t].split("."),o=a.pop(),c=a.join(".");Hi.route(s,i,c,o)})}function Ehe(n){return"id"in n&&"defaults"in n}class Ahe{constructor(){this.controllers=new V2(Pc,"datasets",!0),this.elements=new V2(Mc,"elements"),this.plugins=new V2(Object,"plugins"),this.scales=new V2(nm,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):Rr(i,a=>{const o=r||this._getRegistryForType(a);this._exec(e,o,a)})})}_exec(e,t,r){const i=$E(e);ni(r["before"+i],[],r),t[e](r),ni(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){const i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var yu=new Ahe;class Nhe{constructor(){this._init=void 0}notify(e,t,r,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=i?this._descriptors(e).filter(i):this._descriptors(e),a=this._notify(s,e,t,r);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),a}_notify(e,t,r,i){i=i||{};for(const s of e){const a=s.plugin,o=a[r],c=[t,i,s.options];if(ni(o,c,a)===!1&&i.cancelable)return!1}return!0}invalidate(){Yn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const r=e&&e.config,i=jn(r.options&&r.options.plugins,{}),s=Che(r);return i===!1&&!t?[]:Ihe(e,s,i,t)}_notifyStateChanges(e){const t=this._oldCache||[],r=this._cache,i=(s,a)=>s.filter(o=>!a.some(c=>o.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}}function Che(n){const e={},t=[],r=Object.keys(yu.plugins.items);for(let s=0;s<r.length;s++)t.push(yu.getPlugin(r[s]));const i=n.plugins||[];for(let s=0;s<i.length;s++){const a=i[s];t.indexOf(a)===-1&&(t.push(a),e[a.id]=!0)}return{plugins:t,localIds:e}}function khe(n,e){return!e&&n===!1?null:n===!0?{}:n}function Ihe(n,{plugins:e,localIds:t},r,i){const s=[],a=n.getContext();for(const o of e){const c=o.id,u=khe(r[c],i);u!==null&&s.push({plugin:o,options:Dhe(n.config,{plugin:o,local:t[c]},u,a)})}return s}function Dhe(n,{plugin:e,local:t},r,i){const s=n.pluginScopeKeys(e),a=n.getOptionScopes(r,s);return t&&e.defaults&&a.push(e.defaults),n.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sT(n,e){const t=Hi.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function Rhe(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function Phe(n,e){return n===e?"_index_":"_value_"}function K6(n){if(n==="x"||n==="y"||n==="r")return n}function jhe(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function aT(n,...e){if(K6(n))return n;for(const t of e){const r=t.axis||jhe(t.position)||n.length>1&&K6(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Y6(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function Lhe(n,e){if(e.data&&e.data.datasets){const t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return Y6(n,"x",t[0])||Y6(n,"y",t[0])}return{}}function Ohe(n,e){const t=U0[n.type]||{scales:{}},r=e.scales||{},i=sT(n.type,e),s=Object.create(null);return Object.keys(r).forEach(a=>{const o=r[a];if(!tr(o))return console.error(`Invalid scale configuration for scale: ${a}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=aT(a,o,Lhe(a,n),Hi.scales[o.type]),u=Phe(c,i),d=t.scales||{};s[a]=q1(Object.create(null),[{axis:c},o,d[c],d[u]])}),n.data.datasets.forEach(a=>{const o=a.type||n.type,c=a.indexAxis||sT(o,e),d=(U0[o]||{}).scales||{};Object.keys(d).forEach(p=>{const x=Rhe(p,c),v=a[x+"AxisID"]||x;s[v]=s[v]||Object.create(null),q1(s[v],[{axis:x},r[v],d[p]])})}),Object.keys(s).forEach(a=>{const o=s[a];q1(o,[Hi.scales[o.type],Hi.scale])}),s}function RF(n){const e=n.options||(n.options={});e.plugins=jn(e.plugins,{}),e.scales=Ohe(n,e)}function PF(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function Mhe(n){return n=n||{},n.data=PF(n.data),RF(n),n}const X6=new Map,jF=new Set;function z2(n,e){let t=X6.get(n);return t||(t=e(),X6.set(n,t),jF.add(t)),t}const n1=(n,e,t)=>{const r=cd(e,t);r!==void 0&&n.add(r)};class Fhe{constructor(e){this._config=Mhe(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=PF(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),RF(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return z2(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return z2(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return z2(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,r=this.type;return z2(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const r=this._scopeCache;let i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){const{options:i,type:s}=this,a=this._cachedScopes(e,r),o=a.get(t);if(o)return o;const c=new Set;t.forEach(d=>{e&&(c.add(e),d.forEach(p=>n1(c,e,p))),d.forEach(p=>n1(c,i,p)),d.forEach(p=>n1(c,U0[s]||{},p)),d.forEach(p=>n1(c,Hi,p)),d.forEach(p=>n1(c,nT,p))});const u=Array.from(c);return u.length===0&&u.push(Object.create(null)),jF.has(t)&&a.set(t,u),u}chartOptionScopes(){const{options:e,type:t}=this;return[e,U0[t]||{},Hi.datasets[t]||{},{type:t},Hi,nT]}resolveNamedOptions(e,t,r,i=[""]){const s={$shared:!0},{resolver:a,subPrefixes:o}=Q6(this._resolverCache,e,i);let c=a;if(Vhe(a,t)){s.$shared=!1,r=ud(r)?r():r;const u=this.createResolver(e,r,o);c=Kp(a,r,u)}for(const u of t)s[u]=c[u];return s}createResolver(e,t,r=[""],i){const{resolver:s}=Q6(this._resolverCache,e,r);return tr(t)?Kp(s,t,void 0,i):s}}function Q6(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));const i=t.join();let s=r.get(i);return s||(s={resolver:ZE(e,t),subPrefixes:t.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,s)),s}const Bhe=n=>tr(n)&&Object.getOwnPropertyNames(n).some(e=>ud(n[e]));function Vhe(n,e){const{isScriptable:t,isIndexable:r}=fF(n);for(const i of e){const s=t(i),a=r(i),o=(a||s)&&n[i];if(s&&(ud(o)||Bhe(o))||a&&Ti(o))return!0}return!1}var zhe="4.5.1";const Uhe=["top","bottom","left","right","chartArea"];function J6(n,e){return n==="top"||n==="bottom"||Uhe.indexOf(n)===-1&&e==="x"}function Z6(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function eD(n){const e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),ni(t&&t.onComplete,[n],e)}function Hhe(n){const e=n.chart,t=e.options.animation;ni(t&&t.onProgress,[n],e)}function LF(n){return nA()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}const wy={},tD=n=>{const e=LF(n);return Object.values(wy).filter(t=>t.canvas===e).pop()};function qhe(n,e,t){const r=Object.keys(n);for(const i of r){const s=+i;if(s>=e){const a=n[i];delete n[i],(t>0||s>e)&&(n[s+t]=a)}}}function Whe(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}class Ac{static register(...e){yu.add(...e),nD()}static unregister(...e){yu.remove(...e),nD()}constructor(e,t){const r=this.config=new Fhe(t),i=LF(e),s=tD(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||che(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,a.aspectRatio),c=o&&o.canvas,u=c&&c.height,d=c&&c.width;if(this.id=$le(),this.ctx=o,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Nhe,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=uce(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],wy[this.id]=this,!o||!c){console.error("Failed to create chart: can't acquire context from the given item");return}gh.listen(this,"complete",eD),gh.listen(this,"progress",Hhe),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:r,height:i,_aspectRatio:s}=this;return Yn(e)?t&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return yu}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():T6(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return _6(this.canvas,this.ctx),this}stop(){return gh.stop(this),this}resize(e,t){gh.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(i,e,t,s),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,T6(this,o,!0)&&(this.notifyPlugins("resize",{size:a}),ni(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};Rr(t,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,t=e.scales,r=this.scales,i=Object.keys(r).reduce((a,o)=>(a[o]=!1,a),{});let s=[];t&&(s=s.concat(Object.keys(t).map(a=>{const o=t[a],c=aT(a,o),u=c==="r",d=c==="x";return{options:o,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Rr(s,a=>{const o=a.options,c=o.id,u=aT(c,o),d=jn(o.type,a.dtype);(o.position===void 0||J6(o.position,u)!==J6(a.dposition))&&(o.position=a.dposition),i[c]=!0;let p=null;if(c in r&&r[c].type===d)p=r[c];else{const x=yu.getScale(d);p=new x({id:c,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(o,e)}),Rr(i,(a,o)=>{a||delete r[o]}),Rr(r,a=>{Ua.configure(this,a,a.options),Ua.addBox(this,a)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>t){for(let i=t;i<r;++i)this._destroyDatasetMeta(i);e.splice(t,r-t)}this._sortedMetasets=e.slice(0).sort(Z6("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((r,i)=>{t.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=t.length;r<i;r++){const s=t[r];let a=this.getDatasetMeta(r);const o=s.type||this.config.type;if(a.type&&a.type!==o&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=o,a.indexAxis=s.indexAxis||sT(o,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{const c=yu.getController(o),{datasetElementType:u,dataElementType:d}=Hi.datasets[o];Object.assign(c,{dataElementType:yu.getElement(d),datasetElementType:u&&yu.getElement(u)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Rr(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const r=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){const{controller:p}=this.getDatasetMeta(u),x=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(x),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),i||Rr(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Z6("z","_idx"));const{_active:o,_lastEvent:c}=this;c?this._eventHandler(c,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Rr(this.scales,e=>{Ua.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!f6(t,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of t){const a=r==="_removeElements"?-s:s;qhe(e,i,a)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,r=s=>new Set(e.filter(a=>a[0]===s).map((a,o)=>o+","+a.splice(1).join(","))),i=r(0);for(let s=1;s<t;s++)if(!f6(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ua.update(this,this.width,this.height,e);const t=this.chartArea,r=t.width<=0||t.height<=0;this._layers=[],Rr(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,r=this.data.datasets.length;t<r;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,r=this.data.datasets.length;t<r;++t)this._updateDataset(t,ud(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(gh.has(this)?this.attached&&!gh.running(this)&&gh.start(this):(this.draw(),eD({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,r=[];let i,s;for(i=0,s=t.length;i<s;++i){const a=t[i];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,r={meta:e,index:e.index,cancelable:!0},i=SF(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&p_(t,i),e.controller.draw(),i&&g_(t),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ah(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,r,i){const s=Uue.modes[t];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Td(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!t.hidden}setDatasetVisibility(e,t){const r=this.getDatasetMeta(e);r.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),a=s.controller._resolveAnimations(void 0,i);Mx(t)?(s.data[t].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(s,{visible:r}),this.update(o=>o.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),gh.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),_6(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete wy[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,r=(s,a)=>{t.addEventListener(this,s,a),e[s]=a},i=(s,a,o)=>{s.offsetX=a,s.offsetY=o,this._eventHandler(s)};Rr(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,r=(c,u)=>{t.addEventListener(this,c,u),e[c]=u},i=(c,u)=>{e[c]&&(t.removeEventListener(this,c,u),delete e[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)};let a;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",o)},t.isAttached(this.canvas)?o():a()}unbindEvents(){Rr(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Rr(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,r){const i=r?"set":"remove";let s,a,o,c;for(t==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),o=0,c=e.length;o<c;++o){a=e[o];const u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[i+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],r=e.map(({datasetIndex:s,index:a})=>{const o=this.getDatasetMeta(s);if(!o)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:o.data[a],index:a}});!gb(r,t)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,t))}notifyPlugins(e,t,r){return this._plugins.notify(this,e,t,r)}isPluginEnabled(e){return this._plugins._cache.filter(t=>t.plugin.id===e).length===1}_updateHoverStyles(e,t,r){const i=this.options.hover,s=(c,u)=>c.filter(d=>!u.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),a=s(t,e),o=r?e:s(e,t);a.length&&this.updateHoverStyle(a,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const r={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,t,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,t,r){const{_active:i=[],options:s}=this,a=t,o=this._getActiveElements(e,i,r,a),c=Zle(e),u=Whe(e,this._lastEvent,r,c);r&&(this._lastEvent=null,ni(s.onHover,[e,o,this],this),c&&ni(s.onClick,[e,o,this],this));const d=!gb(o,i);return(d||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=u,d}_getActiveElements(e,t,r,i){if(e.type==="mouseout")return[];if(!r)return t;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}qt(Ac,"defaults",Hi),qt(Ac,"instances",wy),qt(Ac,"overrides",U0),qt(Ac,"registry",yu),qt(Ac,"version",zhe),qt(Ac,"getChart",tD);function nD(){return Rr(Ac.instances,n=>n._plugins.invalidate())}function Ghe(n,e,t){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:c}=e,{borderWidth:u,borderJoinStyle:d}=c,p=Math.min(u/a,Fa(r-t));if(n.beginPath(),n.arc(i,s,a-u/2,r+p/2,t-p/2),o>0){const x=Math.min(u/o,Fa(r-t));n.arc(i,s,o+u/2,t-x/2,r+x/2,!0)}else{const x=Math.min(u/2,a*Fa(r-t));if(d==="round")n.arc(i,s,x,t-br/2,r+br/2,!0);else if(d==="bevel"){const v=2*x*x,_=-v*Math.cos(t+br/2)+i,b=-v*Math.sin(t+br/2)+s,S=v*Math.cos(r+br/2)+i,T=v*Math.sin(r+br/2)+s;n.lineTo(_,b),n.lineTo(S,T)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function $he(n,e,t){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:c}=e;let u=i/o;n.beginPath(),n.arc(s,a,o,r-u,t+u),c>i?(u=i/c,n.arc(s,a,c,t+u,r-u,!0)):n.arc(s,a,i,t+ns,r-ns),n.closePath(),n.clip()}function Khe(n){return JE(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Yhe(n,e,t,r){const i=Khe(n.options.borderRadius),s=(t-e)/2,a=Math.min(s,r*e/2),o=c=>{const u=(t-Math.min(s,c))*r/2;return Zs(c,0,Math.min(s,u))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:Zs(i.innerStart,0,a),innerEnd:Zs(i.innerEnd,0,a)}}function Xm(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function wb(n,e,t,r,i,s){const{x:a,y:o,startAngle:c,pixelMargin:u,innerRadius:d}=e,p=Math.max(e.outerRadius+r+t-u,0),x=d>0?d+r+t+u:0;let v=0;const _=i-c;if(r){const ie=d>0?d-r:0,q=p>0?p-r:0,Q=(ie+q)/2,se=Q!==0?_*Q/(Q+r):_;v=(_-se)/2}const b=Math.max(.001,_*p-t/br)/p,S=(_-b)/2,T=c+S+v,k=i-S-v,{outerStart:E,outerEnd:j,innerStart:F,innerEnd:z}=Yhe(e,x,p,k-T),A=p-E,I=p-j,O=T+E/A,B=k-j/I,R=x+F,P=x+z,V=T+F/R,Y=k-z/P;if(n.beginPath(),s){const ie=(O+B)/2;if(n.arc(a,o,p,O,ie),n.arc(a,o,p,ie,B),j>0){const J=Xm(I,B,a,o);n.arc(J.x,J.y,j,B,k+ns)}const q=Xm(P,k,a,o);if(n.lineTo(q.x,q.y),z>0){const J=Xm(P,Y,a,o);n.arc(J.x,J.y,z,k+ns,Y+Math.PI)}const Q=(k-z/x+(T+F/x))/2;if(n.arc(a,o,x,k-z/x,Q,!0),n.arc(a,o,x,Q,T+F/x,!0),F>0){const J=Xm(R,V,a,o);n.arc(J.x,J.y,F,V+Math.PI,T-ns)}const se=Xm(A,T,a,o);if(n.lineTo(se.x,se.y),E>0){const J=Xm(A,O,a,o);n.arc(J.x,J.y,E,T-ns,O)}}else{n.moveTo(a,o);const ie=Math.cos(O)*p+a,q=Math.sin(O)*p+o;n.lineTo(ie,q);const Q=Math.cos(B)*p+a,se=Math.sin(B)*p+o;n.lineTo(Q,se)}n.closePath()}function Xhe(n,e,t,r,i){const{fullCircles:s,startAngle:a,circumference:o}=e;let c=e.endAngle;if(s){wb(n,e,t,r,c,i);for(let u=0;u<s;++u)n.fill();isNaN(o)||(c=a+(o%hi||hi))}return wb(n,e,t,r,c,i),n.fill(),c}function Qhe(n,e,t,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:c}=e,{borderWidth:u,borderJoinStyle:d,borderDash:p,borderDashOffset:x,borderRadius:v}=c,_=c.borderAlign==="inner";if(!u)return;n.setLineDash(p||[]),n.lineDashOffset=x,_?(n.lineWidth=u*2,n.lineJoin=d||"round"):(n.lineWidth=u,n.lineJoin=d||"bevel");let b=e.endAngle;if(s){wb(n,e,t,r,b,i);for(let S=0;S<s;++S)n.stroke();isNaN(o)||(b=a+(o%hi||hi))}_&&$he(n,e,b),c.selfJoin&&b-a>=br&&v===0&&d!=="miter"&&Ghe(n,e,b),s||(wb(n,e,t,r,b,i),n.stroke())}class y1 extends Mc{constructor(t){super();qt(this,"circumference");qt(this,"endAngle");qt(this,"fullCircles");qt(this,"innerRadius");qt(this,"outerRadius");qt(this,"pixelMargin");qt(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.getProps(["x","y"],i),{angle:a,distance:o}=nF(s,{x:t,y:r}),{startAngle:c,endAngle:u,innerRadius:d,outerRadius:p,circumference:x}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,_=jn(x,u-c),b=Fx(a,c,u)&&c!==u,S=_>=hi||b,T=Th(o,d+v,p+v);return S&&T}getCenterPoint(t){const{x:r,y:i,startAngle:s,endAngle:a,innerRadius:o,outerRadius:c}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:u,spacing:d}=this.options,p=(s+a)/2,x=(o+c+d+u)/2;return{x:r+Math.cos(p)*x,y:i+Math.sin(p)*x}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:r,circumference:i}=this,s=(r.offset||0)/4,a=(r.spacing||0)/2,o=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>hi?Math.floor(i/hi):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const c=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(c)*s,Math.sin(c)*s);const u=1-Math.sin(Math.min(br,i||0)),d=s*u;t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,Xhe(t,this,d,a,o),Qhe(t,this,d,a,o),t.restore()}}qt(y1,"id","arc"),qt(y1,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),qt(y1,"defaultRoutes",{backgroundColor:"backgroundColor"}),qt(y1,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"});function OF(n,e,t=e){n.lineCap=jn(t.borderCapStyle,e.borderCapStyle),n.setLineDash(jn(t.borderDash,e.borderDash)),n.lineDashOffset=jn(t.borderDashOffset,e.borderDashOffset),n.lineJoin=jn(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=jn(t.borderWidth,e.borderWidth),n.strokeStyle=jn(t.borderColor,e.borderColor)}function Jhe(n,e,t){n.lineTo(t.x,t.y)}function Zhe(n){return n.stepped?wce:n.tension||n.cubicInterpolationMode==="monotone"?Sce:Jhe}function MF(n,e,t={}){const r=n.length,{start:i=0,end:s=r-1}=t,{start:a,end:o}=e,c=Math.max(i,a),u=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:c,loop:e.loop,ilen:u<c&&!d?r+u-c:u-c}}function efe(n,e,t,r){const{points:i,options:s}=e,{count:a,start:o,loop:c,ilen:u}=MF(i,t,r),d=Zhe(s);let{move:p=!0,reverse:x}=r||{},v,_,b;for(v=0;v<=u;++v)_=i[(o+(x?u-v:v))%a],!_.skip&&(p?(n.moveTo(_.x,_.y),p=!1):d(n,b,_,x,s.stepped),b=_);return c&&(_=i[(o+(x?u:0))%a],d(n,b,_,x,s.stepped)),!!c}function tfe(n,e,t,r){const i=e.points,{count:s,start:a,ilen:o}=MF(i,t,r),{move:c=!0,reverse:u}=r||{};let d=0,p=0,x,v,_,b,S,T;const k=j=>(a+(u?o-j:j))%s,E=()=>{b!==S&&(n.lineTo(d,S),n.lineTo(d,b),n.lineTo(d,T))};for(c&&(v=i[k(0)],n.moveTo(v.x,v.y)),x=0;x<=o;++x){if(v=i[k(x)],v.skip)continue;const j=v.x,F=v.y,z=j|0;z===_?(F<b?b=F:F>S&&(S=F),d=(p*d+j)/++p):(E(),n.lineTo(j,F),_=z,p=0,b=S=F),T=F}E()}function oT(n){const e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?tfe:efe}function nfe(n){return n.stepped?tue:n.tension||n.cubicInterpolationMode==="monotone"?nue:Qd}function rfe(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),OF(n,e.options),n.stroke(i)}function ife(n,e,t,r){const{segments:i,options:s}=e,a=oT(e);for(const o of i)OF(n,s,o.style),n.beginPath(),a(n,e,o,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}const sfe=typeof Path2D=="function";function afe(n,e,t,r){sfe&&!e.options.segment?rfe(n,e,t,r):ife(n,e,t,r)}class qf extends Mc{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;$ce(this._points,r,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=lue(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,r=e.length;return r&&t[e[r-1].end]}interpolate(e,t){const r=this.options,i=e[t],s=this.points,a=wF(this,{property:t,start:i,end:i});if(!a.length)return;const o=[],c=nfe(r);let u,d;for(u=0,d=a.length;u<d;++u){const{start:p,end:x}=a[u],v=s[p],_=s[x];if(v===_){o.push(v);continue}const b=Math.abs((i-v[t])/(_[t]-v[t])),S=c(v,_,b,r.stepped);S[t]=e[t],o.push(S)}return o.length===1?o[0]:o}pathSegment(e,t,r){return oT(this)(e,this,t,r)}path(e,t,r){const i=this.segments,s=oT(this);let a=this._loop;t=t||0,r=r||this.points.length-t;for(const o of i)a&=s(e,this,o,{start:t,end:t+r-1});return!!a}draw(e,t,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),afe(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}qt(qf,"id","line"),qt(qf,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),qt(qf,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),qt(qf,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function rD(n,e,t,r){const i=n.options,{[t]:s}=n.getProps([t],r);return Math.abs(e-s)<i.radius+i.hitRadius}class Sy extends Mc{constructor(t){super();qt(this,"parsed");qt(this,"skip");qt(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){const s=this.options,{x:a,y:o}=this.getProps(["x","y"],i);return Math.pow(t-a,2)+Math.pow(r-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,r){return rD(this,t,"x",r)}inYRange(t,r){return rD(this,t,"y",r)}getCenterPoint(t){const{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);const i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){const i=this.options;this.skip||i.radius<.1||!Ah(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,rT(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}qt(Sy,"id","point"),qt(Sy,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),qt(Sy,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function FF(n,e){const{x:t,y:r,base:i,width:s,height:a}=n.getProps(["x","y","base","width","height"],e);let o,c,u,d,p;return n.horizontal?(p=a/2,o=Math.min(t,i),c=Math.max(t,i),u=r-p,d=r+p):(p=s/2,o=t-p,c=t+p,u=Math.min(r,i),d=Math.max(r,i)),{left:o,top:u,right:c,bottom:d}}function Wf(n,e,t,r){return n?0:Zs(e,t,r)}function ofe(n,e,t){const r=n.options.borderWidth,i=n.borderSkipped,s=hF(r);return{t:Wf(i.top,s.top,0,t),r:Wf(i.right,s.right,0,e),b:Wf(i.bottom,s.bottom,0,t),l:Wf(i.left,s.left,0,e)}}function lfe(n,e,t){const{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,s=x0(i),a=Math.min(e,t),o=n.borderSkipped,c=r||tr(i);return{topLeft:Wf(!c||o.top||o.left,s.topLeft,0,a),topRight:Wf(!c||o.top||o.right,s.topRight,0,a),bottomLeft:Wf(!c||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Wf(!c||o.bottom||o.right,s.bottomRight,0,a)}}function cfe(n){const e=FF(n),t=e.right-e.left,r=e.bottom-e.top,i=ofe(n,t/2,r/2),s=lfe(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function M5(n,e,t,r){const i=e===null,s=t===null,o=n&&!(i&&s)&&FF(n,r);return o&&(i||Th(e,o.left,o.right))&&(s||Th(t,o.top,o.bottom))}function ufe(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function hfe(n,e){n.rect(e.x,e.y,e.w,e.h)}function F5(n,e,t={}){const r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-r,a=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+s,h:n.h+a,radius:n.radius}}class Ty extends Mc{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:a}=cfe(this),o=ufe(a.radius)?Bx:hfe;e.save(),(a.w!==s.w||a.h!==s.h)&&(e.beginPath(),o(e,F5(a,t,s)),e.clip(),o(e,F5(s,-t,a)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),o(e,F5(s,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return M5(this,e,t,r)}inXRange(e,t){return M5(this,e,null,t)}inYRange(e,t){return M5(this,null,e,t)}getCenterPoint(e){const{x:t,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+i)/2:t,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}qt(Ty,"id","bar"),qt(Ty,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),qt(Ty,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ffe(n,e,t,r,i){const s=i.samples||r;if(s>=t)return n.slice(e,e+t);const a=[],o=(t-2)/(s-2);let c=0;const u=e+t-1;let d=e,p,x,v,_,b;for(a[c++]=n[d],p=0;p<s-2;p++){let S=0,T=0,k;const E=Math.floor((p+1)*o)+1+e,j=Math.min(Math.floor((p+2)*o)+1,t)+e,F=j-E;for(k=E;k<j;k++)S+=n[k].x,T+=n[k].y;S/=F,T/=F;const z=Math.floor(p*o)+1+e,A=Math.min(Math.floor((p+1)*o)+1,t)+e,{x:I,y:O}=n[d];for(v=_=-1,k=z;k<A;k++)_=.5*Math.abs((I-S)*(n[k].y-O)-(I-n[k].x)*(T-O)),_>v&&(v=_,x=n[k],b=k);a[c++]=x,d=b}return a[c++]=n[u],a}function dfe(n,e,t,r){let i=0,s=0,a,o,c,u,d,p,x,v,_,b;const S=[],T=e+t-1,k=n[e].x,j=n[T].x-k;for(a=e;a<e+t;++a){o=n[a],c=(o.x-k)/j*r,u=o.y;const F=c|0;if(F===d)u<_?(_=u,p=a):u>b&&(b=u,x=a),i=(s*i+o.x)/++s;else{const z=a-1;if(!Yn(p)&&!Yn(x)){const A=Math.min(p,x),I=Math.max(p,x);A!==v&&A!==z&&S.push({...n[A],x:i}),I!==v&&I!==z&&S.push({...n[I],x:i})}a>0&&z!==v&&S.push(n[z]),S.push(o),d=F,s=0,_=b=u,p=x=v=a}}return S}function BF(n){if(n._decimated){const e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function iD(n){n.data.datasets.forEach(e=>{BF(e)})}function mfe(n,e){const t=e.length;let r=0,i;const{iScale:s}=n,{min:a,max:o,minDefined:c,maxDefined:u}=s.getUserBounds();return c&&(r=Zs(Eh(e,s.axis,a).lo,0,t-1)),u?i=Zs(Eh(e,s.axis,o).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var pfe={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){iD(n);return}const r=n.width;n.data.datasets.forEach((i,s)=>{const{_data:a,indexAxis:o}=i,c=n.getDatasetMeta(s),u=a||i.data;if(x1([o,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;const d=n.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||n.options.parsing)return;let{start:p,count:x}=mfe(c,u);const v=t.threshold||4*r;if(x<=v){BF(i);return}Yn(a)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let _;switch(t.algorithm){case"lttb":_=ffe(u,p,x,r,t);break;case"min-max":_=dfe(u,p,x,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=_})},destroy(n){iD(n)}};function gfe(n,e,t){const r=n.segments,i=n.points,s=e.points,a=[];for(const o of r){let{start:c,end:u}=o;u=y_(c,u,i);const d=lT(t,i[c],i[u],o.loop);if(!e.segments){a.push({source:o,target:d,start:i[c],end:i[u]});continue}const p=wF(e,d);for(const x of p){const v=lT(t,s[x.start],s[x.end],x.loop),_=_F(o,i,v);for(const b of _)a.push({source:b,target:x,start:{[t]:sD(d,v,"start",Math.max)},end:{[t]:sD(d,v,"end",Math.min)}})}}return a}function lT(n,e,t,r){if(r)return;let i=e[n],s=t[n];return n==="angle"&&(i=Fa(i),s=Fa(s)),{property:n,start:i,end:s}}function xfe(n,e){const{x:t=null,y:r=null}=n||{},i=e.points,s=[];return e.segments.forEach(({start:a,end:o})=>{o=y_(a,o,i);const c=i[a],u=i[o];r!==null?(s.push({x:c.x,y:r}),s.push({x:u.x,y:r})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:u.y}))}),s}function y_(n,e,t){for(;e>n;e--){const r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function sD(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function VF(n,e){let t=[],r=!1;return Ti(n)?(r=!0,t=n):t=xfe(n,e),t.length?new qf({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function aD(n){return n&&n.fill!==!1}function vfe(n,e,t){let i=n[e].fill;const s=[e];let a;if(!t)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Ui(i))return i;if(a=n[i],!a)return!1;if(a.visible)return i;s.push(i),i=a.fill}return!1}function yfe(n,e,t){const r=Sfe(n);if(tr(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Ui(i)&&Math.floor(i)===i?bfe(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function bfe(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function _fe(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:tr(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function wfe(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:tr(n)?r=n.value:r=e.getBaseValue(),r}function Sfe(n){const e=n.options,t=e.fill;let r=jn(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Tfe(n){const{scale:e,index:t,line:r}=n,i=[],s=r.segments,a=r.points,o=Efe(e,t);o.push(VF({x:null,y:e.bottom},r));for(let c=0;c<s.length;c++){const u=s[c];for(let d=u.start;d<=u.end;d++)Afe(i,a[d],o)}return new qf({points:i,options:{}})}function Efe(n,e){const t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function Afe(n,e,t){const r=[];for(let i=0;i<t.length;i++){const s=t[i],{first:a,last:o,point:c}=Nfe(s,e,"x");if(!(!c||a&&o)){if(a)r.unshift(c);else if(n.push(c),!o)break}}n.push(...r)}function Nfe(n,e,t){const r=n.interpolate(e,t);if(!r)return{};const i=r[t],s=n.segments,a=n.points;let o=!1,c=!1;for(let u=0;u<s.length;u++){const d=s[u],p=a[d.start][t],x=a[d.end][t];if(Th(i,p,x)){o=i===p,c=i===x;break}}return{first:o,last:c,point:r}}class zF{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){const{x:i,y:s,radius:a}=this;return t=t||{start:0,end:hi},e.arc(i,s,a,t.end,t.start,!0),!r.bounds}interpolate(e){const{x:t,y:r,radius:i}=this,s=e.angle;return{x:t+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Cfe(n){const{chart:e,fill:t,line:r}=n;if(Ui(t))return kfe(e,t);if(t==="stack")return Tfe(n);if(t==="shape")return!0;const i=Ife(n);return i instanceof zF?i:VF(i,r)}function kfe(n,e){const t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function Ife(n){return(n.scale||{}).getPointPositionForValue?Rfe(n):Dfe(n)}function Dfe(n){const{scale:e={},fill:t}=n,r=_fe(t,e);if(Ui(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Rfe(n){const{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,a=wfe(t,e,s),o=[];if(r.grid.circular){const c=e.getPointPositionForValue(0,s);return new zF({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(a)})}for(let c=0;c<i;++c)o.push(e.getPointPositionForValue(c,a));return o}function B5(n,e,t){const r=Cfe(e),{chart:i,index:s,line:a,scale:o,axis:c}=e,u=a.options,d=u.fill,p=u.backgroundColor,{above:x=p,below:v=p}=d||{},_=i.getDatasetMeta(s),b=SF(i,_);r&&a.points.length&&(p_(n,t),Pfe(n,{line:a,target:r,above:x,below:v,area:t,scale:o,axis:c,clip:b}),g_(n))}function Pfe(n,e){const{line:t,target:r,above:i,below:s,area:a,scale:o,clip:c}=e,u=t._loop?"angle":e.axis;n.save();let d=s;s!==i&&(u==="x"?(oD(n,r,a.top),V5(n,{line:t,target:r,color:i,scale:o,property:u,clip:c}),n.restore(),n.save(),oD(n,r,a.bottom)):u==="y"&&(lD(n,r,a.left),V5(n,{line:t,target:r,color:s,scale:o,property:u,clip:c}),n.restore(),n.save(),lD(n,r,a.right),d=i)),V5(n,{line:t,target:r,color:d,scale:o,property:u,clip:c}),n.restore()}function oD(n,e,t){const{segments:r,points:i}=e;let s=!0,a=!1;n.beginPath();for(const o of r){const{start:c,end:u}=o,d=i[c],p=i[y_(c,u,i)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,t),n.lineTo(d.x,d.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(p.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function lD(n,e,t){const{segments:r,points:i}=e;let s=!0,a=!1;n.beginPath();for(const o of r){const{start:c,end:u}=o,d=i[c],p=i[y_(c,u,i)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(t,d.y),n.lineTo(d.x,d.y)),a=!!e.pathSegment(n,o,{move:a}),a?n.closePath():n.lineTo(t,p.y)}n.lineTo(t,e.first().y),n.closePath(),n.clip()}function V5(n,e){const{line:t,target:r,property:i,color:s,scale:a,clip:o}=e,c=gfe(t,r,i);for(const{source:u,target:d,start:p,end:x}of c){const{style:{backgroundColor:v=s}={}}=u,_=r!==!0;n.save(),n.fillStyle=v,jfe(n,a,o,_&&lT(i,p,x)),n.beginPath();const b=!!t.pathSegment(n,u);let S;if(_){b?n.closePath():cD(n,r,x,i);const T=!!r.pathSegment(n,d,{move:b,reverse:!0});S=b&&T,S||cD(n,r,p,i)}n.closePath(),n.fill(S?"evenodd":"nonzero"),n.restore()}}function jfe(n,e,t,r){const i=e.chart.chartArea,{property:s,start:a,end:o}=r||{};if(s==="x"||s==="y"){let c,u,d,p;s==="x"?(c=a,u=i.top,d=o,p=i.bottom):(c=i.left,u=a,d=i.right,p=o),n.beginPath(),t&&(c=Math.max(c,t.left),d=Math.min(d,t.right),u=Math.max(u,t.top),p=Math.min(p,t.bottom)),n.rect(c,u,d-c,p-u),n.clip()}}function cD(n,e,t,r){const i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var Lfe={id:"filler",afterDatasetsUpdate(n,e,t){const r=(n.data.datasets||[]).length,i=[];let s,a,o,c;for(a=0;a<r;++a)s=n.getDatasetMeta(a),o=s.dataset,c=null,o&&o.options&&o instanceof qf&&(c={visible:n.isDatasetVisible(a),index:a,fill:yfe(o,a,r),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=c,i.push(c);for(a=0;a<r;++a)c=i[a],!(!c||c.fill===!1)&&(c.fill=vfe(i,a,t.propagate))},beforeDraw(n,e,t){const r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let a=i.length-1;a>=0;--a){const o=i[a].$filler;o&&(o.line.updateControlPoints(s,o.axis),r&&o.fill&&B5(n.ctx,o,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;aD(s)&&B5(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){const r=e.meta.$filler;!aD(r)||t.drawTime!=="beforeDatasetDraw"||B5(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const uD=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},Ofe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index;class hD extends Mc{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=ni(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=Ms(r.font),s=i.size,a=this._computeTitleHeight(),{boxWidth:o,itemHeight:c}=uD(r,s);let u,d;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,d=this._fitRows(a,s,o,c)+10):(d=this.maxHeight,u=this._fitCols(a,i,o,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){const{ctx:s,maxWidth:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],d=i+o;let p=e;s.textAlign="left",s.textBaseline="middle";let x=-1,v=-d;return this.legendItems.forEach((_,b)=>{const S=r+t/2+s.measureText(_.text).width;(b===0||u[u.length-1]+S+2*o>a)&&(p+=d,u[u.length-(b>0?0:1)]=0,v+=d,x++),c[b]={left:0,top:v,row:x,width:S,height:i},u[u.length-1]+=S+o}),p}_fitCols(e,t,r,i){const{ctx:s,maxHeight:a,options:{labels:{padding:o}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],d=a-e;let p=o,x=0,v=0,_=0,b=0;return this.legendItems.forEach((S,T)=>{const{itemWidth:k,itemHeight:E}=Mfe(r,t,s,S,i);T>0&&v+E+2*o>d&&(p+=x+o,u.push({width:x,height:v}),_+=x+o,b++,x=v=0),c[T]={left:_,top:v,col:b,width:k,height:E},x=Math.max(x,k),v+=E+o}),p+=x,u.push({width:x,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:s}}=this,a=_p(s,this.left,this.width);if(this.isHorizontal()){let o=0,c=Pa(r,this.left+i,this.right-this.lineWidths[o]);for(const u of t)o!==u.row&&(o=u.row,c=Pa(r,this.left+i,this.right-this.lineWidths[o])),u.top+=this.top+e+i,u.left=a.leftForLtr(a.x(c),u.width),c+=u.width+i}else{let o=0,c=Pa(r,this.top+e+i,this.bottom-this.columnSizes[o].height);for(const u of t)u.col!==o&&(o=u.col,c=Pa(r,this.top+e+i,this.bottom-this.columnSizes[o].height)),u.top=c,u.left+=this.left+i,u.left=a.leftForLtr(a.x(u.left),u.width),c+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;p_(e,this),this._draw(),g_(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:s,labels:a}=e,o=Hi.color,c=_p(e.rtl,this.left,this.width),u=Ms(a.font),{padding:d}=a,p=u.size,x=p/2;let v;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;const{boxWidth:_,boxHeight:b,itemHeight:S}=uD(a,p),T=function(z,A,I){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;i.save();const O=jn(I.lineWidth,1);if(i.fillStyle=jn(I.fillStyle,o),i.lineCap=jn(I.lineCap,"butt"),i.lineDashOffset=jn(I.lineDashOffset,0),i.lineJoin=jn(I.lineJoin,"miter"),i.lineWidth=O,i.strokeStyle=jn(I.strokeStyle,o),i.setLineDash(jn(I.lineDash,[])),a.usePointStyle){const B={radius:b*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:O},R=c.xPlus(z,_/2),P=A+x;uF(i,B,R,P,a.pointStyleWidth&&_)}else{const B=A+Math.max((p-b)/2,0),R=c.leftForLtr(z,_),P=x0(I.borderRadius);i.beginPath(),Object.values(P).some(V=>V!==0)?Bx(i,{x:R,y:B,w:_,h:b,radius:P}):i.rect(R,B,_,b),i.fill(),O!==0&&i.stroke()}i.restore()},k=function(z,A,I){H0(i,I.text,z,A+S/2,u,{strikethrough:I.hidden,textAlign:c.textAlign(I.textAlign)})},E=this.isHorizontal(),j=this._computeTitleHeight();E?v={x:Pa(s,this.left+d,this.right-r[0]),y:this.top+d+j,line:0}:v={x:this.left+d,y:Pa(s,this.top+j+d,this.bottom-t[0].height),line:0},vF(this.ctx,e.textDirection);const F=S+d;this.legendItems.forEach((z,A)=>{i.strokeStyle=z.fontColor,i.fillStyle=z.fontColor;const I=i.measureText(z.text).width,O=c.textAlign(z.textAlign||(z.textAlign=a.textAlign)),B=_+x+I;let R=v.x,P=v.y;c.setWidth(this.width),E?A>0&&R+B+d>this.right&&(P=v.y+=F,v.line++,R=v.x=Pa(s,this.left+d,this.right-r[v.line])):A>0&&P+F>this.bottom&&(R=v.x=R+t[v.line].width+d,v.line++,P=v.y=Pa(s,this.top+j+d,this.bottom-t[v.line].height));const V=c.x(R);if(T(V,P,z),R=hce(O,R+_+x,E?R+B:this.right,e.rtl),k(c.x(R),P,z),E)v.x+=B+d;else if(typeof z.text!="string"){const Y=u.lineHeight;v.y+=UF(z,Y)+d}else v.y+=F}),yF(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,r=Ms(t.font),i=Ga(t.padding);if(!t.display)return;const s=_p(e.rtl,this.left,this.width),a=this.ctx,o=t.position,c=r.size/2,u=i.top+c;let d,p=this.left,x=this.width;if(this.isHorizontal())x=Math.max(...this.lineWidths),d=this.top+u,p=Pa(e.align,p,this.right-x);else{const _=this.columnSizes.reduce((b,S)=>Math.max(b,S.height),0);d=u+Pa(e.align,this.top,this.bottom-_-e.labels.padding-this._computeTitleHeight())}const v=Pa(o,p,p+x);a.textAlign=s.textAlign(XE(o)),a.textBaseline="middle",a.strokeStyle=t.color,a.fillStyle=t.color,a.font=r.string,H0(a,t.text,v,d,r)}_computeTitleHeight(){const e=this.options.title,t=Ms(e.font),r=Ga(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,s;if(Th(e,this.left,this.right)&&Th(t,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Th(e,i.left,i.left+i.width)&&Th(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const t=this.options;if(!Vfe(e.type,t))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=Ofe(i,r);i&&!s&&ni(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ni(t.onHover,[e,r,this],this)}else r&&ni(t.onClick,[e,r,this],this)}}function Mfe(n,e,t,r,i){const s=Ffe(r,n,e,t),a=Bfe(i,r,e.lineHeight);return{itemWidth:s,itemHeight:a}}function Ffe(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((s,a)=>s.length>a.length?s:a)),e+t.size/2+r.measureText(i).width}function Bfe(n,e,t){let r=n;return typeof e.text!="string"&&(r=UF(e,t)),r}function UF(n,e){const t=n.text?n.text.length:0;return e*t}function Vfe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var zfe={id:"legend",_element:hD,start(n,e,t){const r=n.legend=new hD({ctx:n.ctx,options:t,chart:n});Ua.configure(n,r,t),Ua.addBox(n,r)},stop(n){Ua.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){const r=n.legend;Ua.configure(n,r,t),r.options=t},afterUpdate(n){const e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){const r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){const e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{const u=c.controller.getStyle(t?0:void 0),d=Ga(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:a&&(o||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}};class sA extends Mc{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const i=Ti(r.text)?r.text.length:1;this._padding=Ga(r.padding);const s=i*Ms(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:r,bottom:i,right:s,options:a}=this,o=a.align;let c=0,u,d,p;return this.isHorizontal()?(d=Pa(o,r,s),p=t+e,u=s-r):(a.position==="left"?(d=r+e,p=Pa(o,i,t),c=br*-.5):(d=s-e,p=Pa(o,t,i),c=br*.5),u=i-t),{titleX:d,titleY:p,maxWidth:u,rotation:c}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const r=Ms(t.font),s=r.lineHeight/2+this._padding.top,{titleX:a,titleY:o,maxWidth:c,rotation:u}=this._drawArgs(s);H0(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:u,textAlign:XE(t.align),textBaseline:"middle",translation:[a,o]})}}function Ufe(n,e){const t=new sA({ctx:n.ctx,options:e,chart:n});Ua.configure(n,t,e),Ua.addBox(n,t),n.titleBlock=t}var Hfe={id:"title",_element:sA,start(n,e,t){Ufe(n,t)},stop(n){const e=n.titleBlock;Ua.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){const r=n.titleBlock;Ua.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const U2=new WeakMap;var qfe={id:"subtitle",start(n,e,t){const r=new sA({ctx:n.ctx,options:t,chart:n});Ua.configure(n,r,t),Ua.addBox(n,r),U2.set(n,r)},stop(n){Ua.removeBox(n,U2.get(n)),U2.delete(n)},beforeUpdate(n,e,t){const r=U2.get(n);Ua.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const b1={average(n){if(!n.length)return!1;let e,t,r=new Set,i=0,s=0;for(e=0,t=n.length;e<t;++e){const o=n[e].element;if(o&&o.hasValue()){const c=o.tooltipPosition();r.add(c.x),i+=c.y,++s}}return s===0||r.size===0?!1:{x:[...r].reduce((o,c)=>o+c)/r.size,y:i/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,a,o;for(s=0,a=n.length;s<a;++s){const c=n[s].element;if(c&&c.hasValue()){const u=c.getCenterPoint(),d=tT(e,u);d<i&&(i=d,o=c)}}if(o){const c=o.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function xu(n,e){return e&&(Ti(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function xh(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function Wfe(n,e){const{element:t,datasetIndex:r,index:i}=e,s=n.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:n,label:a,parsed:s.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function fD(n,e){const t=n.chart.ctx,{body:r,footer:i,title:s}=n,{boxWidth:a,boxHeight:o}=e,c=Ms(e.bodyFont),u=Ms(e.titleFont),d=Ms(e.footerFont),p=s.length,x=i.length,v=r.length,_=Ga(e.padding);let b=_.height,S=0,T=r.reduce((j,F)=>j+F.before.length+F.lines.length+F.after.length,0);if(T+=n.beforeBody.length+n.afterBody.length,p&&(b+=p*u.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),T){const j=e.displayColors?Math.max(o,c.lineHeight):c.lineHeight;b+=v*j+(T-v)*c.lineHeight+(T-1)*e.bodySpacing}x&&(b+=e.footerMarginTop+x*d.lineHeight+(x-1)*e.footerSpacing);let k=0;const E=function(j){S=Math.max(S,t.measureText(j).width+k)};return t.save(),t.font=u.string,Rr(n.title,E),t.font=c.string,Rr(n.beforeBody.concat(n.afterBody),E),k=e.displayColors?a+2+e.boxPadding:0,Rr(r,j=>{Rr(j.before,E),Rr(j.lines,E),Rr(j.after,E)}),k=0,t.font=d.string,Rr(n.footer,E),t.restore(),S+=_.width,{width:S,height:b}}function Gfe(n,e){const{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function $fe(n,e,t,r){const{x:i,width:s}=r,a=t.caretSize+t.caretPadding;if(n==="left"&&i+s+a>e.width||n==="right"&&i-s-a<0)return!0}function Kfe(n,e,t,r){const{x:i,width:s}=t,{width:a,chartArea:{left:o,right:c}}=n;let u="center";return r==="center"?u=i<=(o+c)/2?"left":"right":i<=s/2?u="left":i>=a-s/2&&(u="right"),$fe(u,n,e,t)&&(u="center"),u}function dD(n,e,t){const r=t.yAlign||e.yAlign||Gfe(n,t);return{xAlign:t.xAlign||e.xAlign||Kfe(n,e,t,r),yAlign:r}}function Yfe(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Xfe(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function mD(n,e,t,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=n,{xAlign:o,yAlign:c}=t,u=i+s,{topLeft:d,topRight:p,bottomLeft:x,bottomRight:v}=x0(a);let _=Yfe(e,o);const b=Xfe(e,c,u);return c==="center"?o==="left"?_+=u:o==="right"&&(_-=u):o==="left"?_-=Math.max(d,x)+i:o==="right"&&(_+=Math.max(p,v)+i),{x:Zs(_,0,r.width-e.width),y:Zs(b,0,r.height-e.height)}}function H2(n,e,t){const r=Ga(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function pD(n){return xu([],xh(n))}function Qfe(n,e,t){return Td(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function gD(n,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}const HF={beforeTitle:mh,title(n){if(n.length>0){const e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:mh,beforeBody:mh,beforeLabel:mh,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");const t=n.formattedValue;return Yn(t)||(e+=t),e},labelColor(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){const t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mh,afterBody:mh,beforeFooter:mh,footer:mh,afterFooter:mh};function Oo(n,e,t,r){const i=n[e].call(t,r);return typeof i>"u"?HF[e].call(t,r):i}class cT extends Mc{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&t.options.animation&&r.animations,s=new TF(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Qfe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:r}=t,i=Oo(r,"beforeTitle",this,e),s=Oo(r,"title",this,e),a=Oo(r,"afterTitle",this,e);let o=[];return o=xu(o,xh(i)),o=xu(o,xh(s)),o=xu(o,xh(a)),o}getBeforeBody(e,t){return pD(Oo(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:r}=t,i=[];return Rr(e,s=>{const a={before:[],lines:[],after:[]},o=gD(r,s);xu(a.before,xh(Oo(o,"beforeLabel",this,s))),xu(a.lines,Oo(o,"label",this,s)),xu(a.after,xh(Oo(o,"afterLabel",this,s))),i.push(a)}),i}getAfterBody(e,t){return pD(Oo(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:r}=t,i=Oo(r,"beforeFooter",this,e),s=Oo(r,"footer",this,e),a=Oo(r,"afterFooter",this,e);let o=[];return o=xu(o,xh(i)),o=xu(o,xh(s)),o=xu(o,xh(a)),o}_createItems(e){const t=this._active,r=this.chart.data,i=[],s=[],a=[];let o=[],c,u;for(c=0,u=t.length;c<u;++c)o.push(Wfe(this.chart,t[c]));return e.filter&&(o=o.filter((d,p,x)=>e.filter(d,p,x,r))),e.itemSort&&(o=o.sort((d,p)=>e.itemSort(d,p,r))),Rr(o,d=>{const p=gD(e.callbacks,d);i.push(Oo(p,"labelColor",this,d)),s.push(Oo(p,"labelPointStyle",this,d)),a.push(Oo(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=o,o}update(e,t){const r=this.options.setContext(this.getContext()),i=this._active;let s,a=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const o=b1[r.position].call(this,i,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=fD(this,r),u=Object.assign({},o,c),d=dD(this.chart,r,u),p=mD(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:c.width,height:c.height,caretX:o.x,caretY:o.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,r,i){const s=this.getCaretPosition(e,r,i);t.lineTo(s.x1,s.y1),t.lineTo(s.x2,s.y2),t.lineTo(s.x3,s.y3)}getCaretPosition(e,t,r){const{xAlign:i,yAlign:s}=this,{caretSize:a,cornerRadius:o}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:p}=x0(o),{x,y:v}=e,{width:_,height:b}=t;let S,T,k,E,j,F;return s==="center"?(j=v+b/2,i==="left"?(S=x,T=S-a,E=j+a,F=j-a):(S=x+_,T=S+a,E=j-a,F=j+a),k=S):(i==="left"?T=x+Math.max(c,d)+a:i==="right"?T=x+_-Math.max(u,p)-a:T=this.caretX,s==="top"?(E=v,j=E-a,S=T-a,k=T+a):(E=v+b,j=E+a,S=T+a,k=T-a),F=E),{x1:S,x2:T,x3:k,y1:E,y2:j,y3:F}}drawTitle(e,t,r){const i=this.title,s=i.length;let a,o,c;if(s){const u=_p(r.rtl,this.x,this.width);for(e.x=H2(this,r.titleAlign,r),t.textAlign=u.textAlign(r.titleAlign),t.textBaseline="middle",a=Ms(r.titleFont),o=r.titleSpacing,t.fillStyle=r.titleColor,t.font=a.string,c=0;c<s;++c)t.fillText(i[c],u.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+o,c+1===s&&(e.y+=r.titleMarginBottom-o)}}_drawColorBox(e,t,r,i,s){const a=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=s,d=Ms(s.bodyFont),p=H2(this,"left",s),x=i.x(p),v=c<d.lineHeight?(d.lineHeight-c)/2:0,_=t.y+v;if(s.usePointStyle){const b={radius:Math.min(u,c)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},S=i.leftForLtr(x,u)+u/2,T=_+c/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,rT(e,b,S,T),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,rT(e,b,S,T)}else{e.lineWidth=tr(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;const b=i.leftForLtr(x,u),S=i.leftForLtr(i.xPlus(x,1),u-2),T=x0(a.borderRadius);Object.values(T).some(k=>k!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Bx(e,{x:b,y:_,w:u,h:c,radius:T}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Bx(e,{x:S,y:_+1,w:u-2,h:c-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(b,_,u,c),e.strokeRect(b,_,u,c),e.fillStyle=a.backgroundColor,e.fillRect(S,_+1,u-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,t,r){const{body:i}=this,{bodySpacing:s,bodyAlign:a,displayColors:o,boxHeight:c,boxWidth:u,boxPadding:d}=r,p=Ms(r.bodyFont);let x=p.lineHeight,v=0;const _=_p(r.rtl,this.x,this.width),b=function(I){t.fillText(I,_.x(e.x+v),e.y+x/2),e.y+=x+s},S=_.textAlign(a);let T,k,E,j,F,z,A;for(t.textAlign=a,t.textBaseline="middle",t.font=p.string,e.x=H2(this,S,r),t.fillStyle=r.bodyColor,Rr(this.beforeBody,b),v=o&&S!=="right"?a==="center"?u/2+d:u+2+d:0,j=0,z=i.length;j<z;++j){for(T=i[j],k=this.labelTextColors[j],t.fillStyle=k,Rr(T.before,b),E=T.lines,o&&E.length&&(this._drawColorBox(t,e,j,_,r),x=Math.max(p.lineHeight,c)),F=0,A=E.length;F<A;++F)b(E[F]),x=p.lineHeight;Rr(T.after,b)}v=0,x=p.lineHeight,Rr(this.afterBody,b),e.y-=s}drawFooter(e,t,r){const i=this.footer,s=i.length;let a,o;if(s){const c=_p(r.rtl,this.x,this.width);for(e.x=H2(this,r.footerAlign,r),e.y+=r.footerMarginTop,t.textAlign=c.textAlign(r.footerAlign),t.textBaseline="middle",a=Ms(r.footerFont),t.fillStyle=r.footerColor,t.font=a.string,o=0;o<s;++o)t.fillText(i[o],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,t,r,i){const{xAlign:s,yAlign:a}=this,{x:o,y:c}=e,{width:u,height:d}=r,{topLeft:p,topRight:x,bottomLeft:v,bottomRight:_}=x0(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+p,c),a==="top"&&this.drawCaret(e,t,r,i),t.lineTo(o+u-x,c),t.quadraticCurveTo(o+u,c,o+u,c+x),a==="center"&&s==="right"&&this.drawCaret(e,t,r,i),t.lineTo(o+u,c+d-_),t.quadraticCurveTo(o+u,c+d,o+u-_,c+d),a==="bottom"&&this.drawCaret(e,t,r,i),t.lineTo(o+v,c+d),t.quadraticCurveTo(o,c+d,o,c+d-v),a==="center"&&s==="left"&&this.drawCaret(e,t,r,i),t.lineTo(o,c+p),t.quadraticCurveTo(o,c,o+p,c),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const a=b1[e.position].call(this,this._active,this._eventPosition);if(!a)return;const o=this._size=fD(this,e),c=Object.assign({},a,this._size),u=dD(t,e,c),d=mD(e,c,u,t);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=o.width,this.height=o.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Ga(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,t),vF(e,t.textDirection),s.y+=a.top,this.drawTitle(s,e,t),this.drawBody(s,e,t),this.drawFooter(s,e,t),yF(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const r=this._active,i=e.map(({datasetIndex:o,index:c})=>{const u=this.chart.getDatasetMeta(o);if(!u)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:u.data[c],index:c}}),s=!gb(r,i),a=this._positionChanged(i,t);(s||a)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,r=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],a=this._getActiveElements(e,s,t,r),o=this._positionChanged(a,e),c=t||!gb(a,s)||o;return c&&(this._active=a,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),c}_getActiveElements(e,t,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return t.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const a=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(e,t){const{caretX:r,caretY:i,options:s}=this,a=b1[s.position].call(this,e,t);return a!==!1&&(r!==a.x||i!==a.y)}}qt(cT,"positioners",b1);var Jfe={id:"tooltip",_element:cT,positioners:b1,afterInit(n,e,t){t&&(n.tooltip=new cT({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){const e=n.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",{...t,cancelable:!0})===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){const t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HF},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Zfe=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function ede(n,e,t,r){const i=n.indexOf(e);if(i===-1)return Zfe(n,e,t,r);const s=n.lastIndexOf(e);return i!==s?t:i}const tde=(n,e)=>n===null?null:Zs(Math.round(n),0,e);function xD(n){const e=this.getLabels();return n>=0&&n<e.length?e[n]:n}class uT extends nm{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const r=this.getLabels();for(const{index:i,label:s}of t)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Yn(e))return null;const r=this.getLabels();return t=isFinite(t)&&r[t]===e?t:ede(r,e,jn(t,e),this._addedLabels),tde(t,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),t||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,t=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&t===s.length-1?s:s.slice(e,t+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=t;a++)i.push({value:a});return i}getLabelForValue(e){return xD.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}qt(uT,"id","category"),qt(uT,"defaults",{ticks:{callback:xD}});function nde(n,e){const t=[],{bounds:i,step:s,min:a,max:o,precision:c,count:u,maxTicks:d,maxDigits:p,includeBounds:x}=n,v=s||1,_=d-1,{min:b,max:S}=e,T=!Yn(a),k=!Yn(o),E=!Yn(u),j=(S-b)/(p+1);let F=m6((S-b)/_/v)*v,z,A,I,O;if(F<1e-14&&!T&&!k)return[{value:b},{value:S}];O=Math.ceil(S/F)-Math.floor(b/F),O>_&&(F=m6(O*F/_/v)*v),Yn(c)||(z=Math.pow(10,c),F=Math.ceil(F*z)/z),i==="ticks"?(A=Math.floor(b/F)*F,I=Math.ceil(S/F)*F):(A=b,I=S),T&&k&&s&&ice((o-a)/s,F/1e3)?(O=Math.round(Math.min((o-a)/F,d)),F=(o-a)/O,A=a,I=o):E?(A=T?a:A,I=k?o:I,O=u-1,F=(I-A)/O):(O=(I-A)/F,W1(O,Math.round(O),F/1e3)?O=Math.round(O):O=Math.ceil(O));const B=Math.max(p6(F),p6(A));z=Math.pow(10,Yn(c)?B:c),A=Math.round(A*z)/z,I=Math.round(I*z)/z;let R=0;for(T&&(x&&A!==a?(t.push({value:a}),A<a&&R++,W1(Math.round((A+R*F)*z)/z,a,vD(a,j,n))&&R++):A<a&&R++);R<O;++R){const P=Math.round((A+R*F)*z)/z;if(k&&P>o)break;t.push({value:P})}return k&&x&&I!==o?t.length&&W1(t[t.length-1].value,o,vD(o,j,n))?t[t.length-1].value=o:t.push({value:o}):(!k||I===o)&&t.push({value:I}),t}function vD(n,e,{horizontal:t,minRotation:r}){const i=Ic(r),s=(t?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+n).length;return Math.min(e/s,a)}class Sb extends nm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Yn(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const a=c=>i=t?i:c,o=c=>s=r?s:c;if(e){const c=Pu(i),u=Pu(s);c<0&&u<0?o(0):c>0&&u>0&&a(0)}if(i===s){let c=s===0?1:Math.abs(s*.05);o(s+c),e||a(i-c)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,a=nde(i,s);return e.bounds==="ticks"&&tF(a,this,"value"),e.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const e=this.ticks;let t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return vv(e,this.chart.options.locale,this.options.ticks.format)}}class hT extends Sb{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ui(e)?e:0,this.max=Ui(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,r=Ic(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}qt(hT,"id","linear"),qt(hT,"defaults",{ticks:{callback:m_.formatters.numeric}});const zx=n=>Math.floor(Uf(n)),Gd=(n,e)=>Math.pow(10,zx(n)+e);function yD(n){return n/Math.pow(10,zx(n))===1}function bD(n,e,t){const r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function rde(n,e){const t=e-n;let r=zx(t);for(;bD(n,e,r)>10;)r++;for(;bD(n,e,r)<10;)r--;return Math.min(r,zx(n))}function ide(n,{min:e,max:t}){e=ul(n.min,e);const r=[],i=zx(e);let s=rde(e,t),a=s<0?Math.pow(10,Math.abs(s)):1;const o=Math.pow(10,s),c=i>s?Math.pow(10,i):0,u=Math.round((e-c)*a)/a,d=Math.floor((e-c)/o/10)*o*10;let p=Math.floor((u-d)/Math.pow(10,s)),x=ul(n.min,Math.round((c+d+p*Math.pow(10,s))*a)/a);for(;x<t;)r.push({value:x,major:yD(x),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,a=s>=0?1:a),x=Math.round((c+d+p*Math.pow(10,s))*a)/a;const v=ul(n.max,x);return r.push({value:v,major:yD(v),significand:p}),r}class fT extends nm{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const r=Sb.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Ui(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Ui(e)?Math.max(0,e):null,this.max=Ui(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ui(this._userMin)&&(this.min=e===Gd(this.min,0)?Gd(this.min,-1):Gd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let r=this.min,i=this.max;const s=o=>r=e?r:o,a=o=>i=t?i:o;r===i&&(r<=0?(s(1),a(10)):(s(Gd(r,-1)),a(Gd(i,1)))),r<=0&&s(Gd(i,-1)),i<=0&&a(Gd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},r=ide(t,this);return e.bounds==="ticks"&&tF(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":vv(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Uf(e),this._valueRange=Uf(this.max)-Uf(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Uf(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}qt(fT,"id","logarithmic"),qt(fT,"defaults",{ticks:{callback:m_.formatters.logarithmic,major:{enabled:!0}}});function dT(n){const e=n.ticks;if(e.display&&n.display){const t=Ga(e.backdropPadding);return jn(e.font&&e.font.size,Hi.font.size)+t.height}return 0}function sde(n,e,t){return t=Ti(t)?t:[t],{w:_ce(n,e.string,t),h:t.length*e.lineHeight}}function _D(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function ade(n){const e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],s=n._pointLabels.length,a=n.options.pointLabels,o=a.centerPointLabels?br/s:0;for(let c=0;c<s;c++){const u=a.setContext(n.getPointLabelContext(c));i[c]=u.padding;const d=n.getPointPosition(c,n.drawingArea+i[c],o),p=Ms(u.font),x=sde(n.ctx,p,n._pointLabels[c]);r[c]=x;const v=Fa(n.getIndexAngle(c)+o),_=Math.round(KE(v)),b=_D(_,d.x,x.w,0,180),S=_D(_,d.y,x.h,90,270);ode(t,e,v,b,S)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=ude(n,r,i)}function ode(n,e,t,r,i){const s=Math.abs(Math.sin(t)),a=Math.abs(Math.cos(t));let o=0,c=0;r.start<e.l?(o=(e.l-r.start)/s,n.l=Math.min(n.l,e.l-o)):r.end>e.r&&(o=(r.end-e.r)/s,n.r=Math.max(n.r,e.r+o)),i.start<e.t?(c=(e.t-i.start)/a,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/a,n.b=Math.max(n.b,e.b+c))}function lde(n,e,t){const r=n.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=t,c=n.getPointPosition(e,r+i+a,s),u=Math.round(KE(Fa(c.angle+ns))),d=dde(c.y,o.h,u),p=hde(u),x=fde(c.x,o.w,p);return{visible:!0,x:c.x,y:d,textAlign:p,left:x,top:d,right:x+o.w,bottom:d+o.h}}function cde(n,e){if(!e)return!0;const{left:t,top:r,right:i,bottom:s}=n;return!(Ah({x:t,y:r},e)||Ah({x:t,y:s},e)||Ah({x:i,y:r},e)||Ah({x:i,y:s},e))}function ude(n,e,t){const r=[],i=n._pointLabels.length,s=n.options,{centerPointLabels:a,display:o}=s.pointLabels,c={extra:dT(s)/2,additionalAngle:a?br/i:0};let u;for(let d=0;d<i;d++){c.padding=t[d],c.size=e[d];const p=lde(n,d,c);r.push(p),o==="auto"&&(p.visible=cde(p,u),p.visible&&(u=p))}return r}function hde(n){return n===0||n===180?"center":n<180?"left":"right"}function fde(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function dde(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function mde(n,e,t){const{left:r,top:i,right:s,bottom:a}=t,{backdropColor:o}=e;if(!Yn(o)){const c=x0(e.borderRadius),u=Ga(e.backdropPadding);n.fillStyle=o;const d=r-u.left,p=i-u.top,x=s-r+u.width,v=a-i+u.height;Object.values(c).some(_=>_!==0)?(n.beginPath(),Bx(n,{x:d,y:p,w:x,h:v,radius:c}),n.fill()):n.fillRect(d,p,x,v)}}function pde(n,e){const{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){const s=n._pointLabelItems[i];if(!s.visible)continue;const a=r.setContext(n.getPointLabelContext(i));mde(t,a,s);const o=Ms(a.font),{x:c,y:u,textAlign:d}=s;H0(t,n._pointLabels[i],c,u+o.lineHeight/2,o,{color:a.color,textAlign:d,textBaseline:"middle"})}}function qF(n,e,t,r){const{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,hi);else{let s=n.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let a=1;a<r;a++)s=n.getPointPosition(a,e),i.lineTo(s.x,s.y)}}function gde(n,e,t,r,i){const s=n.ctx,a=e.circular,{color:o,lineWidth:c}=e;!a&&!r||!o||!c||t<0||(s.save(),s.strokeStyle=o,s.lineWidth=c,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),qF(n,t,a,r),s.closePath(),s.stroke(),s.restore())}function xde(n,e,t){return Td(n,{label:t,index:e,type:"pointLabel"})}class _1 extends Sb{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Ga(dT(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Ui(e)&&!isNaN(e)?e:0,this.max=Ui(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dT(this.options))}generateTickLabels(e){Sb.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{const i=ni(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?ade(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){const t=hi/(this._pointLabels.length||1),r=this.options.startAngle||0;return Fa(e*t+Ic(r))}getDistanceFromCenterForValue(e){if(Yn(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Yn(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const r=t[e];return xde(this.getContext(),e,r)}}getPointPosition(e,t,r=0){const i=this.getIndexAngle(e)-ns+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),qF(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:r,grid:i,border:s}=t,a=this._pointLabels.length;let o,c,u;if(t.pointLabels.display&&pde(this,a),i.display&&this.ticks.forEach((d,p)=>{if(p!==0||p===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);const x=this.getContext(p),v=i.setContext(x),_=s.setContext(x);gde(this,v,c,a,_)}}),r.display){for(e.save(),o=a-1;o>=0;o--){const d=r.setContext(this.getPointLabelContext(o)),{color:p,lineWidth:x}=d;!x||!p||(e.lineWidth=x,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),u=this.getPointPosition(o,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,a;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((o,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;const u=r.setContext(this.getContext(c)),d=Ms(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=d.string,a=e.measureText(o.label).width,e.fillStyle=u.backdropColor;const p=Ga(u.backdropPadding);e.fillRect(-a/2-p.left,-s-d.size/2-p.top,a+p.width,d.size+p.height)}H0(e,o.label,0,-s,d,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}}qt(_1,"id","radialLinear"),qt(_1,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:m_.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),qt(_1,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),qt(_1,"descriptors",{angleLines:{_fallback:"grid"}});const b_={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Fo=Object.keys(b_);function wD(n,e){return n-e}function SD(n,e){if(Yn(e))return null;const t=n._adapter,{parser:r,round:i,isoWeekday:s}=n._parseOpts;let a=e;return typeof r=="function"&&(a=r(a)),Ui(a)||(a=typeof r=="string"?t.parse(a,r):t.parse(a)),a===null?null:(i&&(a=i==="week"&&($p(s)||s===!0)?t.startOf(a,"isoWeek",s):t.startOf(a,i)),+a)}function TD(n,e,t,r){const i=Fo.length;for(let s=Fo.indexOf(n);s<i-1;++s){const a=b_[Fo[s]],o=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((t-e)/(o*a.size))<=r)return Fo[s]}return Fo[i-1]}function vde(n,e,t,r,i){for(let s=Fo.length-1;s>=Fo.indexOf(t);s--){const a=Fo[s];if(b_[a].common&&n._adapter.diff(i,r,a)>=e-1)return a}return Fo[t?Fo.indexOf(t):0]}function yde(n){for(let e=Fo.indexOf(n)+1,t=Fo.length;e<t;++e)if(b_[Fo[e]].common)return Fo[e]}function ED(n,e,t){if(!t)n[e]=!0;else if(t.length){const{lo:r,hi:i}=YE(t,e),s=t[r]>=e?t[r]:t[i];n[s]=!0}}function bde(n,e,t,r){const i=n._adapter,s=+i.startOf(e[0].value,r),a=e[e.length-1].value;let o,c;for(o=s;o<=a;o=+i.add(o,1,r))c=t[o],c>=0&&(e[c].major=!0);return e}function AD(n,e,t){const r=[],i={},s=e.length;let a,o;for(a=0;a<s;++a)o=e[a],i[o]=a,r.push({value:o,major:!1});return s===0||!t?r:bde(n,r,i,t)}class Ux extends nm{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t={}){const r=e.time||(e.time={}),i=this._adapter=new Mue._date(e.adapters.date);i.init(t),q1(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:SD(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:a,maxDefined:o}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(i=Math.min(i,u.min)),!o&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!o)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),i=Ui(i)&&!isNaN(i)?i:+t.startOf(Date.now(),r),s=Ui(s)&&!isNaN(s)?s:+t.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],r=e[e.length-1]),{min:t,max:r}}buildTicks(){const e=this.options,t=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,a=this.max,o=lce(i,s,a);return this._unit=t.unit||(r.autoSkip?TD(t.minUnit,this.min,this.max,this._getLabelCapacity(s)):vde(this,o.length,t.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:yde(this._unit),this.initOffsets(i),e.reverse&&o.reverse(),AD(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let t=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?t=1-i:t=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const a=e.length<3?.5:.25;t=Zs(t,0,a),r=Zs(r,0,a),this._offsets={start:t,end:r,factor:1/(t+1+r)}}_generate(){const e=this._adapter,t=this.min,r=this.max,i=this.options,s=i.time,a=s.unit||TD(s.minUnit,t,r,this._getLabelCapacity(t)),o=jn(i.ticks.stepSize,1),c=a==="week"?s.isoWeekday:!1,u=$p(c)||c===!0,d={};let p=t,x,v;if(u&&(p=+e.startOf(p,"isoWeek",c)),p=+e.startOf(p,u?"day":a),e.diff(r,t,a)>1e5*o)throw new Error(t+" and "+r+" are too far apart with stepSize of "+o+" "+a);const _=i.ticks.source==="data"&&this.getDataTimestamps();for(x=p,v=0;x<r;x=+e.add(x,o,a),v++)ED(d,x,_);return(x===r||i.bounds==="ticks"||v===1)&&ED(d,x,_),Object.keys(d).sort(wD).map(b=>+b)}getLabelForValue(e){const t=this._adapter,r=this.options.time;return r.tooltipFormat?t.format(e,r.tooltipFormat):t.format(e,r.displayFormats.datetime)}format(e,t){const i=this.options.time.displayFormats,s=this._unit,a=t||i[s];return this._adapter.format(e,a)}_tickFormatFunction(e,t,r,i){const s=this.options,a=s.ticks.callback;if(a)return ni(a,[e,t,r],this);const o=s.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&o[c],p=u&&o[u],x=r[t],v=u&&p&&x&&x.major;return this._adapter.format(e,i||(v?p:d))}generateTickLabels(e){let t,r,i;for(t=0,r=e.length;t<r;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+r)*t.factor)}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,r=this.ctx.measureText(e).width,i=Ic(this.isHorizontal()?t.maxRotation:t.minRotation),s=Math.cos(i),a=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*s+o*a,h:r*a+o*s}}_getLabelCapacity(e){const t=this.options.time,r=t.displayFormats,i=r[t.unit]||r.millisecond,s=this._tickFormatFunction(e,0,AD(this,[e],this._majorUnit),i),a=this._getLabelSize(s),o=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return o>0?o:1}getDataTimestamps(){let e=this._cache.data||[],t,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,r=i.length;t<r;++t)e=e.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,r;if(e.length)return e;const i=this.getLabels();for(t=0,r=i.length;t<r;++t)e.push(SD(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return iF(e.sort(wD))}}qt(Ux,"id","time"),qt(Ux,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function q2(n,e,t){let r=0,i=n.length-1,s,a,o,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=Eh(n,"pos",e)),{pos:s,time:o}=n[r],{pos:a,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=Eh(n,"time",e)),{time:s,pos:o}=n[r],{time:a,pos:c}=n[i]);const u=a-s;return u?o+(c-o)*(e-s)/u:o}class mT extends Ux{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=q2(t,this.min),this._tableRange=q2(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:r}=this,i=[],s=[];let a,o,c,u,d;for(a=0,o=e.length;a<o;++a)u=e[a],u>=t&&u<=r&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(a=0,o=i.length;a<o;++a)d=i[a+1],c=i[a-1],u=i[a],Math.round((d+c)/2)!==u&&s.push({time:u,pos:a/(o-1)});return s}_generate(){const e=this.min,t=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(q2(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return q2(this._table,r*this._tableRange+this._minPos,!0)}}qt(mT,"id","timeseries"),qt(mT,"defaults",Ux.defaults);const _de="modulepreload",wde=function(n){return"/"+n},ND={},pT=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let a=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=a(t.map(u=>{if(u=wde(u),u in ND)return;ND[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const x=document.createElement("link");if(x.rel=d?"stylesheet":_de,d||(x.as="script"),x.crossOrigin="",x.href=u,c&&x.setAttribute("nonce",c),document.head.appendChild(x),d)return new Promise((v,_)=>{x.addEventListener("load",v),x.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function Mr(n){"@babel/helpers - typeof";return Mr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mr(n)}var zo=Uint8Array,co=Uint16Array,Hx=Uint32Array,__=new zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),w_=new zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gT=new zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),WF=function(n,e){for(var t=new co(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Hx(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},GF=WF(__,2),$F=GF[0],xT=GF[1];$F[28]=258,xT[258]=28;var KF=WF(w_,0),Sde=KF[0],CD=KF[1],vT=new co(32768);for(var ui=0;ui<32768;++ui){var kf=(ui&43690)>>>1|(ui&21845)<<1;kf=(kf&52428)>>>2|(kf&13107)<<2,kf=(kf&61680)>>>4|(kf&3855)<<4,vT[ui]=((kf&65280)>>>8|(kf&255)<<8)>>>1}var ju=(function(n,e,t){for(var r=n.length,i=0,s=new co(e);i<r;++i)++s[n[i]-1];var a=new co(e);for(i=0;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new co(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],d=e-n[i],p=a[n[i]-1]++<<d,x=p|(1<<d)-1;p<=x;++p)o[vT[p]>>>c]=u}else for(o=new co(r),i=0;i<r;++i)o[i]=vT[a[n[i]-1]++]>>>15-n[i];return o}),hd=new zo(288);for(var ui=0;ui<144;++ui)hd[ui]=8;for(var ui=144;ui<256;++ui)hd[ui]=9;for(var ui=256;ui<280;++ui)hd[ui]=7;for(var ui=280;ui<288;++ui)hd[ui]=8;var qx=new zo(32);for(var ui=0;ui<32;++ui)qx[ui]=5;var Tde=ju(hd,9,0),Ede=ju(hd,9,1),Ade=ju(qx,5,0),Nde=ju(qx,5,1),z5=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},wc=function(n,e,t){var r=e/8>>0;return(n[r]|n[r+1]<<8)>>>(e&7)&t},U5=function(n,e){var t=e/8>>0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>>(e&7)},aA=function(n){return(n/8>>0)+(n&7&&1)},YF=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof co?co:n instanceof Hx?Hx:zo)(t-e);return r.set(n.subarray(e,t)),r},Cde=function(n,e,t){var r=n.length,i=!e||t,s=!t||t.i;t||(t={}),e||(e=new zo(r*3));var a=function(te){var he=e.length;if(te>he){var ye=new zo(Math.max(he*2,te));ye.set(e),e=ye}},o=t.f||0,c=t.p||0,u=t.b||0,d=t.l,p=t.d,x=t.m,v=t.n,_=r*8;do{if(!d){t.f=o=wc(n,c,1);var b=wc(n,c+1,3);if(c+=3,b)if(b==1)d=Ede,p=Nde,x=9,v=5;else if(b==2){var E=wc(n,c,31)+257,j=wc(n,c+10,15)+4,F=E+wc(n,c+5,31)+1;c+=14;for(var z=new zo(F),A=new zo(19),I=0;I<j;++I)A[gT[I]]=wc(n,c+I*3,7);c+=j*3;var O=z5(A),B=(1<<O)-1;if(!s&&c+F*(O+7)>_)break;for(var R=ju(A,O,1),I=0;I<F;){var P=R[wc(n,c,B)];c+=P&15;var S=P>>>4;if(S<16)z[I++]=S;else{var V=0,Y=0;for(S==16?(Y=3+wc(n,c,3),c+=2,V=z[I-1]):S==17?(Y=3+wc(n,c,7),c+=3):S==18&&(Y=11+wc(n,c,127),c+=7);Y--;)z[I++]=V}}var ie=z.subarray(0,E),q=z.subarray(E);x=z5(ie),v=z5(q),d=ju(ie,x,1),p=ju(q,v,1)}else throw"invalid block type";else{var S=aA(c)+4,T=n[S-4]|n[S-3]<<8,k=S+T;if(k>r){if(s)throw"unexpected EOF";break}i&&a(u+T),e.set(n.subarray(S,k),u),t.b=u+=T,t.p=c=k*8;continue}if(c>_)throw"unexpected EOF"}i&&a(u+131072);for(var Q=(1<<x)-1,se=(1<<v)-1,J=x+v+18;s||c+J<_;){var V=d[U5(n,c)&Q],me=V>>>4;if(c+=V&15,c>_)throw"unexpected EOF";if(!V)throw"invalid length/literal";if(me<256)e[u++]=me;else if(me==256){d=null;break}else{var re=me-254;if(me>264){var I=me-257,M=__[I];re=wc(n,c,(1<<M)-1)+$F[I],c+=M}var W=p[U5(n,c)&se],K=W>>>4;if(!W)throw"invalid distance";c+=W&15;var q=Sde[K];if(K>3){var M=w_[K];q+=U5(n,c)&(1<<M)-1,c+=M}if(c>_)throw"unexpected EOF";i&&a(u+131072);for(var G=u+re;u<G;u+=4)e[u]=e[u-q],e[u+1]=e[u+1-q],e[u+2]=e[u+2-q],e[u+3]=e[u+3-q];u=G}}t.l=d,t.p=c,t.b=u,d&&(o=1,t.m=x,t.d=p,t.n=v)}while(!o);return u==e.length?e:YF(e,0,u)},ph=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8},r1=function(n,e,t){t<<=e&7;var r=e/8>>0;n[r]|=t,n[r+1]|=t>>>8,n[r+2]|=t>>>16},H5=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return[new zo(0),0];if(i==1){var a=new zo(t[0].s+1);return a[t[0].s]=1,[a,1]}t.sort(function(F,z){return F.f-z.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,d=1,p=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};d!=i-1;)o=t[t[u].f<t[p].f?u++:p++],c=t[u!=d&&t[u].f<t[p].f?u++:p++],t[d++]={s:-1,f:o.f+c.f,l:o,r:c};for(var x=s[0].s,r=1;r<i;++r)s[r].s>x&&(x=s[r].s);var v=new co(x+1),_=yT(t[d-1],v,0);if(_>e){var r=0,b=0,S=_-e,T=1<<S;for(s.sort(function(z,A){return v[A.s]-v[z.s]||z.f-A.f});r<i;++r){var k=s[r].s;if(v[k]>e)b+=T-(1<<_-v[k]),v[k]=e;else break}for(b>>>=S;b>0;){var E=s[r].s;v[E]<e?b-=1<<e-v[E]++-1:++r}for(;r>=0&&b;--r){var j=s[r].s;v[j]==e&&(--v[j],++b)}_=e}return[new zo(v),_]},yT=function(n,e,t){return n.s==-1?Math.max(yT(n.l,e,t+1),yT(n.r,e,t+1)):e[n.s]=t},kD=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new co(++e),r=0,i=n[0],s=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(n[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[o]}return[t.subarray(0,r),e]},i1=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},bT=function(n,e,t){var r=t.length,i=aA(e+2);n[i]=r&255,n[i+1]=r>>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},ID=function(n,e,t,r,i,s,a,o,c,u,d){ph(e,d++,t),++i[256];for(var p=H5(i,15),x=p[0],v=p[1],_=H5(s,15),b=_[0],S=_[1],T=kD(x),k=T[0],E=T[1],j=kD(b),F=j[0],z=j[1],A=new co(19),I=0;I<k.length;++I)A[k[I]&31]++;for(var I=0;I<F.length;++I)A[F[I]&31]++;for(var O=H5(A,7),B=O[0],R=O[1],P=19;P>4&&!B[gT[P-1]];--P);var V=u+5<<3,Y=i1(i,hd)+i1(s,qx)+a,ie=i1(i,x)+i1(s,b)+a+14+3*P+i1(A,B)+(2*A[16]+3*A[17]+7*A[18]);if(V<=Y&&V<=ie)return bT(e,d,n.subarray(c,c+u));var q,Q,se,J;if(ph(e,d,1+(ie<Y)),d+=2,ie<Y){q=ju(x,v,0),Q=x,se=ju(b,S,0),J=b;var me=ju(B,R,0);ph(e,d,E-257),ph(e,d+5,z-1),ph(e,d+10,P-4),d+=14;for(var I=0;I<P;++I)ph(e,d+3*I,B[gT[I]]);d+=3*P;for(var re=[k,F],M=0;M<2;++M)for(var W=re[M],I=0;I<W.length;++I){var K=W[I]&31;ph(e,d,me[K]),d+=B[K],K>15&&(ph(e,d,W[I]>>>5&127),d+=W[I]>>>12)}}else q=Tde,Q=hd,se=Ade,J=qx;for(var I=0;I<o;++I)if(r[I]>255){var K=r[I]>>>18&31;r1(e,d,q[K+257]),d+=Q[K+257],K>7&&(ph(e,d,r[I]>>>23&31),d+=__[K]);var G=r[I]&31;r1(e,d,se[G]),d+=J[G],G>3&&(r1(e,d,r[I]>>>5&8191),d+=w_[G])}else r1(e,d,q[r[I]]),d+=Q[r[I]];return r1(e,d,q[256]),d+Q[256]},kde=new Hx([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Ide=function(n,e,t,r,i,s){var a=n.length,o=new zo(r+a+5*(1+Math.floor(a/7e3))+i),c=o.subarray(r,o.length-i),u=0;if(!e||a<8)for(var d=0;d<=a;d+=65535){var p=d+65535;p<a?u=bT(c,u,n.subarray(d,p)):(c[d]=s,u=bT(c,u,n.subarray(d,a)))}else{for(var x=kde[e-1],v=x>>>13,_=x&8191,b=(1<<t)-1,S=new co(32768),T=new co(b+1),k=Math.ceil(t/3),E=2*k,j=function(at){return(n[at]^n[at+1]<<k^n[at+2]<<E)&b},F=new Hx(25e3),z=new co(288),A=new co(32),I=0,O=0,d=0,B=0,R=0,P=0;d<a;++d){var V=j(d),Y=d&32767,ie=T[V];if(S[Y]=ie,T[V]=Y,R<=d){var q=a-d;if((I>7e3||B>24576)&&q>423){u=ID(n,c,0,F,z,A,O,B,P,d-P,u),B=I=O=0,P=d;for(var Q=0;Q<286;++Q)z[Q]=0;for(var Q=0;Q<30;++Q)A[Q]=0}var se=2,J=0,me=_,re=Y-ie&32767;if(q>2&&V==j(d-re))for(var M=Math.min(v,q)-1,W=Math.min(32767,d),K=Math.min(258,q);re<=W&&--me&&Y!=ie;){if(n[d+se]==n[d+se-re]){for(var G=0;G<K&&n[d+G]==n[d+G-re];++G);if(G>se){if(se=G,J=re,G>M)break;for(var te=Math.min(re,G-2),he=0,Q=0;Q<te;++Q){var ye=d-re+Q+32768&32767,be=S[ye],Ce=ye-be+32768&32767;Ce>he&&(he=Ce,ie=ye)}}}Y=ie,ie=S[Y],re+=Y-ie+32768&32767}if(J){F[B++]=268435456|xT[se]<<18|CD[J];var ke=xT[se]&31,oe=CD[J]&31;O+=__[ke]+w_[oe],++z[257+ke],++A[oe],R=d+se,++I}else F[B++]=n[d],++z[n[d]]}}u=ID(n,c,s,F,z,A,O,B,P,d-P,u)}return YF(o,0,r+aA(u)+i)},Dde=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length,a=0;a!=s;){for(var o=Math.min(a+5552,s);a<o;++a)r+=t[a],i+=r;r%=65521,i%=65521}n=r,e=i},d:function(){return(n>>>8<<16|(e&255)<<8|e>>>8)+((n&255)<<23)*2}}},Rde=function(n,e,t,r,i){return Ide(n,e.level==null?6:e.level,e.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):12+e.mem,t,r,!0)},Pde=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},jde=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;n[0]=120,n[1]=r<<6|(r?32-2*r:1)},Lde=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function _T(n,e){e===void 0&&(e={});var t=Dde();t.p(n);var r=Rde(n,e,2,4);return jde(r,e),Pde(r,r.length-4,t.d()),r}function Ode(n,e){return Cde((Lde(n),n.subarray(2,-4)),e)}var Sn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function q5(){Sn.console&&typeof Sn.console.log=="function"&&Sn.console.log.apply(Sn.console,arguments)}var Qr={log:q5,warn:function(n){Sn.console&&(typeof Sn.console.warn=="function"?Sn.console.warn.apply(Sn.console,arguments):q5.call(null,arguments))},error:function(n){Sn.console&&(typeof Sn.console.error=="function"?Sn.console.error.apply(Sn.console,arguments):q5(n))}};function W5(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Jd(r.response,e,t)},r.onerror=function(){Qr.error("could not download file")},r.send()}function DD(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function W2(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var K1,wT,Jd=Sn.saveAs||((typeof window>"u"?"undefined":Mr(window))!=="object"||window!==Sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Sn.URL||Sn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?DD(i.href)?W5(n,e,t):W2(i,i.target="_blank"):W2(i)):(i.href=r.createObjectURL(n),setTimeout((function(){r.revokeObjectURL(i.href)}),4e4),setTimeout((function(){W2(i)}),0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(DD(n))W5(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout((function(){W2(r)}))}else navigator.msSaveOrOpenBlob((function(i,s){return s===void 0?s={autoBom:!1}:Mr(s)!=="object"&&(Qr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return W5(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Sn.HTMLElement)||Sn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":Mr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var d=o.result;d=a?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},o.readAsDataURL(n)}else{var c=Sn.URL||Sn.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout((function(){c.revokeObjectURL(u)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function XF(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function G5(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=ka(t,r,i,s,e[0],7,-680876936),s=ka(s,t,r,i,e[1],12,-389564586),i=ka(i,s,t,r,e[2],17,606105819),r=ka(r,i,s,t,e[3],22,-1044525330),t=ka(t,r,i,s,e[4],7,-176418897),s=ka(s,t,r,i,e[5],12,1200080426),i=ka(i,s,t,r,e[6],17,-1473231341),r=ka(r,i,s,t,e[7],22,-45705983),t=ka(t,r,i,s,e[8],7,1770035416),s=ka(s,t,r,i,e[9],12,-1958414417),i=ka(i,s,t,r,e[10],17,-42063),r=ka(r,i,s,t,e[11],22,-1990404162),t=ka(t,r,i,s,e[12],7,1804603682),s=ka(s,t,r,i,e[13],12,-40341101),i=ka(i,s,t,r,e[14],17,-1502002290),t=Ia(t,r=ka(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ia(s,t,r,i,e[6],9,-1069501632),i=Ia(i,s,t,r,e[11],14,643717713),r=Ia(r,i,s,t,e[0],20,-373897302),t=Ia(t,r,i,s,e[5],5,-701558691),s=Ia(s,t,r,i,e[10],9,38016083),i=Ia(i,s,t,r,e[15],14,-660478335),r=Ia(r,i,s,t,e[4],20,-405537848),t=Ia(t,r,i,s,e[9],5,568446438),s=Ia(s,t,r,i,e[14],9,-1019803690),i=Ia(i,s,t,r,e[3],14,-187363961),r=Ia(r,i,s,t,e[8],20,1163531501),t=Ia(t,r,i,s,e[13],5,-1444681467),s=Ia(s,t,r,i,e[2],9,-51403784),i=Ia(i,s,t,r,e[7],14,1735328473),t=Da(t,r=Ia(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Da(s,t,r,i,e[8],11,-2022574463),i=Da(i,s,t,r,e[11],16,1839030562),r=Da(r,i,s,t,e[14],23,-35309556),t=Da(t,r,i,s,e[1],4,-1530992060),s=Da(s,t,r,i,e[4],11,1272893353),i=Da(i,s,t,r,e[7],16,-155497632),r=Da(r,i,s,t,e[10],23,-1094730640),t=Da(t,r,i,s,e[13],4,681279174),s=Da(s,t,r,i,e[0],11,-358537222),i=Da(i,s,t,r,e[3],16,-722521979),r=Da(r,i,s,t,e[6],23,76029189),t=Da(t,r,i,s,e[9],4,-640364487),s=Da(s,t,r,i,e[12],11,-421815835),i=Da(i,s,t,r,e[15],16,530742520),t=Ra(t,r=Da(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Ra(s,t,r,i,e[7],10,1126891415),i=Ra(i,s,t,r,e[14],15,-1416354905),r=Ra(r,i,s,t,e[5],21,-57434055),t=Ra(t,r,i,s,e[12],6,1700485571),s=Ra(s,t,r,i,e[3],10,-1894986606),i=Ra(i,s,t,r,e[10],15,-1051523),r=Ra(r,i,s,t,e[1],21,-2054922799),t=Ra(t,r,i,s,e[8],6,1873313359),s=Ra(s,t,r,i,e[15],10,-30611744),i=Ra(i,s,t,r,e[6],15,-1560198380),r=Ra(r,i,s,t,e[13],21,1309151649),t=Ra(t,r,i,s,e[4],6,-145523070),s=Ra(s,t,r,i,e[11],10,-1120210379),i=Ra(i,s,t,r,e[2],15,718787259),r=Ra(r,i,s,t,e[9],21,-343485551),n[0]=Gf(t,n[0]),n[1]=Gf(r,n[1]),n[2]=Gf(i,n[2]),n[3]=Gf(s,n[3])}function S_(n,e,t,r,i,s){return e=Gf(Gf(e,n),Gf(r,s)),Gf(e<<i|e>>>32-i,t)}function ka(n,e,t,r,i,s,a){return S_(e&t|~e&r,n,e,i,s,a)}function Ia(n,e,t,r,i,s,a){return S_(e&r|t&~r,n,e,i,s,a)}function Da(n,e,t,r,i,s,a){return S_(e^t^r,n,e,i,s,a)}function Ra(n,e,t,r,i,s,a){return S_(t^(e|~r),n,e,i,s,a)}function QF(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)G5(r,Mde(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(G5(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,G5(r,i),r}function Mde(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}K1=Sn.atob.bind(Sn),wT=Sn.btoa.bind(Sn);var RD="0123456789abcdef".split("");function Fde(n){for(var e="",t=0;t<4;t++)e+=RD[n>>8*t+4&15]+RD[n>>8*t&15];return e}function Bde(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function ST(n){return QF(n).map(Bde).join("")}var Vde=(function(n){for(var e=0;e<n.length;e++)n[e]=Fde(n[e]);return n.join("")})(QF("hello"))!="5d41402abc4b2a76b9719d911017c592";function Gf(n,e){if(Vde){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function TT(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var d=o[c];u=(u+d+a.charCodeAt(c))%256,o[c]=o[u],o[u]=d}t=n,r=o}else o=r;var p=e.length,x=0,v=0,_="";for(c=0;c<p;c++)v=(v+(d=o[x=(x+1)%256]))%256,o[x]=o[v],o[v]=d,a=o[(o[x]+o[v])%256],_+=String.fromCharCode(e.charCodeAt(c)^a);return _}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var PD={print:4,modify:8,copy:16,"annot-forms":32};function ap(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach((function(o){if(PD.perm!==void 0)throw new Error("Invalid permission: "+o);i+=PD[o]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=ST(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=TT(this.encryptionKey,this.padding)}function op(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function jD(n){if(Mr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(o){Sn.console&&Qr.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Wx(n){if(!(this instanceof Wx))return new Wx(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function JF(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Mf(n,e,t,r,i){if(!(this instanceof Mf))return new Mf(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,JF.call(this,r,i)}function o0(n,e,t,r,i){if(!(this instanceof o0))return new o0(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,JF.call(this,r,i)}function vn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,c=16,u="S",d=null;Mr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(d=n.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var p=n.putOnlyUsedFonts||!1,x={},v={internal:{},__private__:{}};v.__private__.PubSub=jD;var _="1.3",b=v.__private__.getPdfVersion=function(){return _};v.__private__.setPdfVersion=function(g){_=g};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return S};var T=v.__private__.getPageFormat=function(g){return S[g]};i=i||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},E=k.COMPAT;function j(){this.saveGraphicsState(),_e(new sn(At,0,0,-At,0,nl()*At).toString()+" cm"),this.setFontSize(this.getFontSize()/At),u="n",E=k.ADVANCED}function F(){this.restoreGraphicsState(),u="S",E=k.COMPAT}var z=v.__private__.combineFontStyleAndFontWeight=function(g,N){if(g=="bold"&&N=="normal"||g=="bold"&&N==400||g=="normal"&&N=="italic"||g=="bold"&&N=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return N&&(g=N==400||N==="normal"?g==="italic"?"italic":"normal":N!=700&&N!=="bold"||g!=="normal"?(N==700?"bold":N)+""+g:"bold"),g};v.advancedAPI=function(g){var N=E===k.COMPAT;return N&&j.call(this),typeof g!="function"||(g(this),N&&F.call(this)),this},v.compatAPI=function(g){var N=E===k.ADVANCED;return N&&F.call(this),typeof g!="function"||(g(this),N&&j.call(this)),this},v.isAdvancedAPI=function(){return E===k.ADVANCED};var A,I=function(g){if(E!==k.ADVANCED)throw new Error(g+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=v.roundToPrecision=v.__private__.roundToPrecision=function(g,N){var U=e||N;if(isNaN(g)||isNaN(U))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return g.toFixed(U).replace(/0+$/,"")};A=v.hpf=v.__private__.hpf=typeof c=="number"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return O(g,c)}:c==="smart"?function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return O(g,g>-1&&g<1?16:5)}:function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.hpf");return O(g,16)};var B=v.f2=v.__private__.f2=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f2");return O(g,2)},R=v.__private__.f3=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.f3");return O(g,3)},P=v.scale=v.__private__.scale=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.scale");return E===k.COMPAT?g*At:E===k.ADVANCED?g:void 0},V=function(g){return E===k.COMPAT?nl()-g:E===k.ADVANCED?g:void 0},Y=function(g){return P(V(g))};v.__private__.setPrecision=v.setPrecision=function(g){typeof parseInt(g,10)=="number"&&(e=parseInt(g,10))};var ie,q="00000000000000000000000000000000",Q=v.__private__.getFileId=function(){return q},se=v.__private__.setFileId=function(g){return q=g!==void 0&&/^[a-fA-F0-9]{32}$/.test(g)?g.toUpperCase():q.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),d!==null&&(Vr=new ap(d.userPermissions,d.userPassword,d.ownerPassword,q)),q};v.setFileId=function(g){return se(g),this},v.getFileId=function(){return Q()};var J=v.__private__.convertDateToPDFDate=function(g){var N=g.getTimezoneOffset(),U=N<0?"+":"-",Z=Math.floor(Math.abs(N/60)),pe=Math.abs(N%60),Ae=[U,K(Z),"'",K(pe),"'"].join("");return["D:",g.getFullYear(),K(g.getMonth()+1),K(g.getDate()),K(g.getHours()),K(g.getMinutes()),K(g.getSeconds()),Ae].join("")},me=v.__private__.convertPDFDateToDate=function(g){var N=parseInt(g.substr(2,4),10),U=parseInt(g.substr(6,2),10)-1,Z=parseInt(g.substr(8,2),10),pe=parseInt(g.substr(10,2),10),Ae=parseInt(g.substr(12,2),10),Ve=parseInt(g.substr(14,2),10);return new Date(N,U,Z,pe,Ae,Ve,0)},re=v.__private__.setCreationDate=function(g){var N;if(g===void 0&&(g=new Date),g instanceof Date)N=J(g);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(g))throw new Error("Invalid argument passed to jsPDF.setCreationDate");N=g}return ie=N},M=v.__private__.getCreationDate=function(g){var N=ie;return g==="jsDate"&&(N=me(ie)),N};v.setCreationDate=function(g){return re(g),this},v.getCreationDate=function(g){return M(g)};var W,K=v.__private__.padd2=function(g){return("0"+parseInt(g)).slice(-2)},G=v.__private__.padd2Hex=function(g){return("00"+(g=g.toString())).substr(g.length)},te=0,he=[],ye=[],be=0,Ce=[],ke=[],oe=!1,qe=ye,at=function(){te=0,be=0,ye=[],he=[],Ce=[],xe=sr(),ve=sr()};v.__private__.setCustomOutputDestination=function(g){oe=!0,qe=g};var Fe=function(g){oe||(qe=g)};v.__private__.resetCustomOutputDestination=function(){oe=!1,qe=ye};var _e=v.__private__.out=function(g){return g=g.toString(),be+=g.length+1,qe.push(g),qe},Be=v.__private__.write=function(g){return _e(arguments.length===1?g.toString():Array.prototype.join.call(arguments," "))},lt=v.__private__.getArrayBuffer=function(g){for(var N=g.length,U=new ArrayBuffer(N),Z=new Uint8Array(U);N--;)Z[N]=g.charCodeAt(N);return U},Ke=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return Ke};var We=n.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(g){return We=E===k.ADVANCED?g/At:g,this};var Et,Oe=v.__private__.getFontSize=v.getFontSize=function(){return E===k.COMPAT?We:We*At},Dt=n.R2L||!1;v.__private__.setR2L=v.setR2L=function(g){return Dt=g,this},v.__private__.getR2L=v.getR2L=function(){return Dt};var Rt,Wt=v.__private__.setZoomMode=function(g){var N=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(g))Et=g;else if(isNaN(g)){if(N.indexOf(g)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+g+'" is not recognized.');Et=g}else Et=parseInt(g,10)};v.__private__.getZoomMode=function(){return Et};var Jt,yn=v.__private__.setPageMode=function(g){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(g)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+g+'" is not recognized.');Rt=g};v.__private__.getPageMode=function(){return Rt};var ln=v.__private__.setLayoutMode=function(g){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(g)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+g+'" is not recognized.');Jt=g};v.__private__.getLayoutMode=function(){return Jt},v.__private__.setDisplayMode=v.setDisplayMode=function(g,N,U){return Wt(g),ln(N),yn(U),this};var Zt={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(g){if(Object.keys(Zt).indexOf(g)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Zt[g]},v.__private__.getDocumentProperties=function(){return Zt},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(g){for(var N in Zt)Zt.hasOwnProperty(N)&&g[N]&&(Zt[N]=g[N]);return this},v.__private__.setDocumentProperty=function(g,N){if(Object.keys(Zt).indexOf(g)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Zt[g]=N};var Ft,At,De,nt,ct,Nt={},gt={},$t=[],wt={},In={},Ne={},tt={},Pt=null,kt=0,St=[],jt=new jD(v),Fn=n.hotfixes||[],hn={},nr={},Tr=[],sn=function g(N,U,Z,pe,Ae,Ve){if(!(this instanceof g))return new g(N,U,Z,pe,Ae,Ve);isNaN(N)&&(N=1),isNaN(U)&&(U=0),isNaN(Z)&&(Z=0),isNaN(pe)&&(pe=1),isNaN(Ae)&&(Ae=0),isNaN(Ve)&&(Ve=0),this._matrix=[N,U,Z,pe,Ae,Ve]};Object.defineProperty(sn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(sn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(sn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(sn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(sn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(sn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(sn.prototype,"a",{get:function(){return this._matrix[0]},set:function(g){this._matrix[0]=g}}),Object.defineProperty(sn.prototype,"b",{get:function(){return this._matrix[1]},set:function(g){this._matrix[1]=g}}),Object.defineProperty(sn.prototype,"c",{get:function(){return this._matrix[2]},set:function(g){this._matrix[2]=g}}),Object.defineProperty(sn.prototype,"d",{get:function(){return this._matrix[3]},set:function(g){this._matrix[3]=g}}),Object.defineProperty(sn.prototype,"e",{get:function(){return this._matrix[4]},set:function(g){this._matrix[4]=g}}),Object.defineProperty(sn.prototype,"f",{get:function(){return this._matrix[5]},set:function(g){this._matrix[5]=g}}),Object.defineProperty(sn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(sn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(sn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(sn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),sn.prototype.join=function(g){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(g)},sn.prototype.multiply=function(g){var N=g.sx*this.sx+g.shy*this.shx,U=g.sx*this.shy+g.shy*this.sy,Z=g.shx*this.sx+g.sy*this.shx,pe=g.shx*this.shy+g.sy*this.sy,Ae=g.tx*this.sx+g.ty*this.shx+this.tx,Ve=g.tx*this.shy+g.ty*this.sy+this.ty;return new sn(N,U,Z,pe,Ae,Ve)},sn.prototype.decompose=function(){var g=this.sx,N=this.shy,U=this.shx,Z=this.sy,pe=this.tx,Ae=this.ty,Ve=Math.sqrt(g*g+N*N),vt=(g/=Ve)*U+(N/=Ve)*Z;U-=g*vt,Z-=N*vt;var Kt=Math.sqrt(U*U+Z*Z);return vt/=Kt,g*(Z/=Kt)<N*(U/=Kt)&&(g=-g,N=-N,vt=-vt,Ve=-Ve),{scale:new sn(Ve,0,0,Kt,0,0),translate:new sn(1,0,0,1,pe,Ae),rotate:new sn(g,N,-N,g,0,0),skew:new sn(1,0,vt,1,0,0)}},sn.prototype.toString=function(g){return this.join(" ")},sn.prototype.inversed=function(){var g=this.sx,N=this.shy,U=this.shx,Z=this.sy,pe=this.tx,Ae=this.ty,Ve=1/(g*Z-N*U),vt=Z*Ve,Kt=-N*Ve,Xt=-U*Ve,tn=g*Ve;return new sn(vt,Kt,Xt,tn,-vt*pe-Xt*Ae,-Kt*pe-tn*Ae)},sn.prototype.applyToPoint=function(g){var N=g.x*this.sx+g.y*this.shx+this.tx,U=g.x*this.shy+g.y*this.sy+this.ty;return new ia(N,U)},sn.prototype.applyToRectangle=function(g){var N=this.applyToPoint(g),U=this.applyToPoint(new ia(g.x+g.w,g.y+g.h));return new $c(N.x,N.y,U.x-N.x,U.y-N.y)},sn.prototype.clone=function(){var g=this.sx,N=this.shy,U=this.shx,Z=this.sy,pe=this.tx,Ae=this.ty;return new sn(g,N,U,Z,pe,Ae)},v.Matrix=sn;var Br=v.matrixMult=function(g,N){return N.multiply(g)},Ar=new sn(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=Ar;var ei=function(g,N){if(!In[g]){var U=(N instanceof Mf?"Sh":"P")+(Object.keys(wt).length+1).toString(10);N.id=U,In[g]=U,wt[U]=N,jt.publish("addPattern",N)}};v.ShadingPattern=Mf,v.TilingPattern=o0,v.addShadingPattern=function(g,N){return I("addShadingPattern()"),ei(g,N),this},v.beginTilingPattern=function(g){I("beginTilingPattern()"),$u(g.boundingBox[0],g.boundingBox[1],g.boundingBox[2]-g.boundingBox[0],g.boundingBox[3]-g.boundingBox[1],g.matrix)},v.endTilingPattern=function(g,N){I("endTilingPattern()"),N.stream=ke[W].join(`
`),ei(g,N),jt.publish("endTilingPattern",N),Tr.pop().restore()};var Er=v.__private__.newObject=function(){var g=sr();return le(g,!0),g},sr=v.__private__.newObjectDeferred=function(){return te++,he[te]=function(){return be},te},le=function(g,N){return N=typeof N=="boolean"&&N,he[g]=be,N&&_e(g+" 0 obj"),g},Te=v.__private__.newAdditionalObject=function(){var g={objId:sr(),content:""};return Ce.push(g),g},xe=sr(),ve=sr(),we=v.__private__.decodeColorString=function(g){var N=g.split(" ");if(N.length!==2||N[1]!=="g"&&N[1]!=="G")N.length===5&&(N[4]==="k"||N[4]==="K")&&(N=[(1-N[0])*(1-N[3]),(1-N[1])*(1-N[3]),(1-N[2])*(1-N[3]),"r"]);else{var U=parseFloat(N[0]);N=[U,U,U,"r"]}for(var Z="#",pe=0;pe<3;pe++)Z+=("0"+Math.floor(255*parseFloat(N[pe])).toString(16)).slice(-2);return Z},Ee=v.__private__.encodeColorString=function(g){var N;typeof g=="string"&&(g={ch1:g});var U=g.ch1,Z=g.ch2,pe=g.ch3,Ae=g.ch4,Ve=g.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof U=="string"&&U.charAt(0)!=="#"){var vt=new XF(U);if(vt.ok)U=vt.toHex();else if(!/^\d*\.?\d*$/.test(U))throw new Error('Invalid color "'+U+'" passed to jsPDF.encodeColorString.')}if(typeof U=="string"&&/^#[0-9A-Fa-f]{3}$/.test(U)&&(U="#"+U[1]+U[1]+U[2]+U[2]+U[3]+U[3]),typeof U=="string"&&/^#[0-9A-Fa-f]{6}$/.test(U)){var Kt=parseInt(U.substr(1),16);U=Kt>>16&255,Z=Kt>>8&255,pe=255&Kt}if(Z===void 0||Ae===void 0&&U===Z&&Z===pe)if(typeof U=="string")N=U+" "+Ve[0];else switch(g.precision){case 2:N=B(U/255)+" "+Ve[0];break;case 3:default:N=R(U/255)+" "+Ve[0]}else if(Ae===void 0||Mr(Ae)==="object"){if(Ae&&!isNaN(Ae.a)&&Ae.a===0)return N=["1.","1.","1.",Ve[1]].join(" ");if(typeof U=="string")N=[U,Z,pe,Ve[1]].join(" ");else switch(g.precision){case 2:N=[B(U/255),B(Z/255),B(pe/255),Ve[1]].join(" ");break;default:case 3:N=[R(U/255),R(Z/255),R(pe/255),Ve[1]].join(" ")}}else if(typeof U=="string")N=[U,Z,pe,Ae,Ve[2]].join(" ");else switch(g.precision){case 2:N=[B(U),B(Z),B(pe),B(Ae),Ve[2]].join(" ");break;case 3:default:N=[R(U),R(Z),R(pe),R(Ae),Ve[2]].join(" ")}return N},Ue=v.__private__.getFilters=function(){return a},rt=v.__private__.putStream=function(g){var N=(g=g||{}).data||"",U=g.filters||Ue(),Z=g.alreadyAppliedFilters||[],pe=g.addLength1||!1,Ae=N.length,Ve=g.objectId,vt=function(pi){return pi};if(d!==null&&Ve===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(vt=Vr.encryptor(Ve,0));var Kt={};U===!0&&(U=["FlateEncode"]);var Xt=g.additionalKeyValues||[],tn=(Kt=vn.API.processDataByFilters!==void 0?vn.API.processDataByFilters(N,U):{data:N,reverseChain:[]}).reverseChain+(Array.isArray(Z)?Z.join(" "):Z.toString());if(Kt.data.length!==0&&(Xt.push({key:"Length",value:Kt.data.length}),pe===!0&&Xt.push({key:"Length1",value:Ae})),tn.length!=0)if(tn.split("/").length-1==1)Xt.push({key:"Filter",value:tn});else{Xt.push({key:"Filter",value:"["+tn+"]"});for(var Nn=0;Nn<Xt.length;Nn+=1)if(Xt[Nn].key==="DecodeParms"){for(var ar=[],or=0;or<Kt.reverseChain.split("/").length-1;or+=1)ar.push("null");ar.push(Xt[Nn].value),Xt[Nn].value="["+ar.join(" ")+"]"}}_e("<<");for(var pr=0;pr<Xt.length;pr++)_e("/"+Xt[pr].key+" "+Xt[pr].value);_e(">>"),Kt.data.length!==0&&(_e("stream"),_e(vt(Kt.data)),_e("endstream"))},He=v.__private__.putPage=function(g){var N=g.number,U=g.data,Z=g.objId,pe=g.contentsObjId;le(Z,!0),_e("<</Type /Page"),_e("/Parent "+g.rootDictionaryObjId+" 0 R"),_e("/Resources "+g.resourceDictionaryObjId+" 0 R"),_e("/MediaBox ["+parseFloat(A(g.mediaBox.bottomLeftX))+" "+parseFloat(A(g.mediaBox.bottomLeftY))+" "+A(g.mediaBox.topRightX)+" "+A(g.mediaBox.topRightY)+"]"),g.cropBox!==null&&_e("/CropBox ["+A(g.cropBox.bottomLeftX)+" "+A(g.cropBox.bottomLeftY)+" "+A(g.cropBox.topRightX)+" "+A(g.cropBox.topRightY)+"]"),g.bleedBox!==null&&_e("/BleedBox ["+A(g.bleedBox.bottomLeftX)+" "+A(g.bleedBox.bottomLeftY)+" "+A(g.bleedBox.topRightX)+" "+A(g.bleedBox.topRightY)+"]"),g.trimBox!==null&&_e("/TrimBox ["+A(g.trimBox.bottomLeftX)+" "+A(g.trimBox.bottomLeftY)+" "+A(g.trimBox.topRightX)+" "+A(g.trimBox.topRightY)+"]"),g.artBox!==null&&_e("/ArtBox ["+A(g.artBox.bottomLeftX)+" "+A(g.artBox.bottomLeftY)+" "+A(g.artBox.topRightX)+" "+A(g.artBox.topRightY)+"]"),typeof g.userUnit=="number"&&g.userUnit!==1&&_e("/UserUnit "+g.userUnit),jt.publish("putPage",{objId:Z,pageContext:St[N],pageNumber:N,page:U}),_e("/Contents "+pe+" 0 R"),_e(">>"),_e("endobj");var Ae=U.join(`
`);return E===k.ADVANCED&&(Ae+=`
Q`),le(pe,!0),rt({data:Ae,filters:Ue(),objectId:pe}),_e("endobj"),Z},$e=v.__private__.putPages=function(){var g,N,U=[];for(g=1;g<=kt;g++)St[g].objId=sr(),St[g].contentsObjId=sr();for(g=1;g<=kt;g++)U.push(He({number:g,data:ke[g],objId:St[g].objId,contentsObjId:St[g].contentsObjId,mediaBox:St[g].mediaBox,cropBox:St[g].cropBox,bleedBox:St[g].bleedBox,trimBox:St[g].trimBox,artBox:St[g].artBox,userUnit:St[g].userUnit,rootDictionaryObjId:xe,resourceDictionaryObjId:ve}));le(xe,!0),_e("<</Type /Pages");var Z="/Kids [";for(N=0;N<kt;N++)Z+=U[N]+" 0 R ";_e(Z+"]"),_e("/Count "+kt),_e(">>"),_e("endobj"),jt.publish("postPutPages")},Ye=function(g){jt.publish("putFont",{font:g,out:_e,newObject:Er,putStream:rt}),g.isAlreadyPutted!==!0&&(g.objectNumber=Er(),_e("<<"),_e("/Type /Font"),_e("/BaseFont /"+op(g.postScriptName)),_e("/Subtype /Type1"),typeof g.encoding=="string"&&_e("/Encoding /"+g.encoding),_e("/FirstChar 32"),_e("/LastChar 255"),_e(">>"),_e("endobj"))},yt=function(){for(var g in Nt)Nt.hasOwnProperty(g)&&(p===!1||p===!0&&x.hasOwnProperty(g))&&Ye(Nt[g])},It=function(g){g.objectNumber=Er();var N=[];N.push({key:"Type",value:"/XObject"}),N.push({key:"Subtype",value:"/Form"}),N.push({key:"BBox",value:"["+[A(g.x),A(g.y),A(g.x+g.width),A(g.y+g.height)].join(" ")+"]"}),N.push({key:"Matrix",value:"["+g.matrix.toString()+"]"});var U=g.pages[1].join(`
`);rt({data:U,additionalKeyValues:N,objectId:g.objectNumber}),_e("endobj")},Lt=function(){for(var g in hn)hn.hasOwnProperty(g)&&It(hn[g])},bt=function(g,N){var U,Z=[],pe=1/(N-1);for(U=0;U<1;U+=pe)Z.push(U);if(Z.push(1),g[0].offset!=0){var Ae={offset:0,color:g[0].color};g.unshift(Ae)}if(g[g.length-1].offset!=1){var Ve={offset:1,color:g[g.length-1].color};g.push(Ve)}for(var vt="",Kt=0,Xt=0;Xt<Z.length;Xt++){for(U=Z[Xt];U>g[Kt+1].offset;)Kt++;var tn=g[Kt].offset,Nn=(U-tn)/(g[Kt+1].offset-tn),ar=g[Kt].color,or=g[Kt+1].color;vt+=G(Math.round((1-Nn)*ar[0]+Nn*or[0]).toString(16))+G(Math.round((1-Nn)*ar[1]+Nn*or[1]).toString(16))+G(Math.round((1-Nn)*ar[2]+Nn*or[2]).toString(16))}return vt.trim()},Ot=function(g,N){N||(N=21);var U=Er(),Z=bt(g.colors,N),pe=[];pe.push({key:"FunctionType",value:"0"}),pe.push({key:"Domain",value:"[0.0 1.0]"}),pe.push({key:"Size",value:"["+N+"]"}),pe.push({key:"BitsPerSample",value:"8"}),pe.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),pe.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),rt({data:Z,additionalKeyValues:pe,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:U}),_e("endobj"),g.objectNumber=Er(),_e("<< /ShadingType "+g.type),_e("/ColorSpace /DeviceRGB");var Ae="/Coords ["+A(parseFloat(g.coords[0]))+" "+A(parseFloat(g.coords[1]))+" ";g.type===2?Ae+=A(parseFloat(g.coords[2]))+" "+A(parseFloat(g.coords[3])):Ae+=A(parseFloat(g.coords[2]))+" "+A(parseFloat(g.coords[3]))+" "+A(parseFloat(g.coords[4]))+" "+A(parseFloat(g.coords[5])),_e(Ae+="]"),g.matrix&&_e("/Matrix ["+g.matrix.toString()+"]"),_e("/Function "+U+" 0 R"),_e("/Extend [true true]"),_e(">>"),_e("endobj")},Qt=function(g,N){var U=sr(),Z=Er();N.push({resourcesOid:U,objectOid:Z}),g.objectNumber=Z;var pe=[];pe.push({key:"Type",value:"/Pattern"}),pe.push({key:"PatternType",value:"1"}),pe.push({key:"PaintType",value:"1"}),pe.push({key:"TilingType",value:"1"}),pe.push({key:"BBox",value:"["+g.boundingBox.map(A).join(" ")+"]"}),pe.push({key:"XStep",value:A(g.xStep)}),pe.push({key:"YStep",value:A(g.yStep)}),pe.push({key:"Resources",value:U+" 0 R"}),g.matrix&&pe.push({key:"Matrix",value:"["+g.matrix.toString()+"]"}),rt({data:g.stream,additionalKeyValues:pe,objectId:g.objectNumber}),_e("endobj")},Un=function(g){var N;for(N in wt)wt.hasOwnProperty(N)&&(wt[N]instanceof Mf?Ot(wt[N]):wt[N]instanceof o0&&Qt(wt[N],g))},gn=function(g){for(var N in g.objectNumber=Er(),_e("<<"),g)switch(N){case"opacity":_e("/ca "+B(g[N]));break;case"stroke-opacity":_e("/CA "+B(g[N]))}_e(">>"),_e("endobj")},Hn=function(){var g;for(g in Ne)Ne.hasOwnProperty(g)&&gn(Ne[g])},ti=function(){for(var g in _e("/XObject <<"),hn)hn.hasOwnProperty(g)&&hn[g].objectNumber>=0&&_e("/"+g+" "+hn[g].objectNumber+" 0 R");jt.publish("putXobjectDict"),_e(">>")},xa=function(){Vr.oid=Er(),_e("<<"),_e("/Filter /Standard"),_e("/V "+Vr.v),_e("/R "+Vr.r),_e("/U <"+Vr.toHexString(Vr.U)+">"),_e("/O <"+Vr.toHexString(Vr.O)+">"),_e("/P "+Vr.P),_e(">>"),_e("endobj")},zs=function(){for(var g in _e("/Font <<"),Nt)Nt.hasOwnProperty(g)&&(p===!1||p===!0&&x.hasOwnProperty(g))&&_e("/"+g+" "+Nt[g].objectNumber+" 0 R");_e(">>")},Ki=function(){if(Object.keys(wt).length>0){for(var g in _e("/Shading <<"),wt)wt.hasOwnProperty(g)&&wt[g]instanceof Mf&&wt[g].objectNumber>=0&&_e("/"+g+" "+wt[g].objectNumber+" 0 R");jt.publish("putShadingPatternDict"),_e(">>")}},ea=function(g){if(Object.keys(wt).length>0){for(var N in _e("/Pattern <<"),wt)wt.hasOwnProperty(N)&&wt[N]instanceof v.TilingPattern&&wt[N].objectNumber>=0&&wt[N].objectNumber<g&&_e("/"+N+" "+wt[N].objectNumber+" 0 R");jt.publish("putTilingPatternDict"),_e(">>")}},ls=function(){if(Object.keys(Ne).length>0){var g;for(g in _e("/ExtGState <<"),Ne)Ne.hasOwnProperty(g)&&Ne[g].objectNumber>=0&&_e("/"+g+" "+Ne[g].objectNumber+" 0 R");jt.publish("putGStateDict"),_e(">>")}},rr=function(g){le(g.resourcesOid,!0),_e("<<"),_e("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),zs(),Ki(),ea(g.objectOid),ls(),ti(),_e(">>"),_e("endobj")},si=function(){var g=[];yt(),Hn(),Lt(),Un(g),jt.publish("putResources"),g.forEach(rr),rr({resourcesOid:ve,objectOid:Number.MAX_SAFE_INTEGER}),jt.publish("postPutResources")},Ei=function(){jt.publish("putAdditionalObjects");for(var g=0;g<Ce.length;g++){var N=Ce[g];le(N.objId,!0),_e(N.content),_e("endobj")}jt.publish("postPutAdditionalObjects")},Ko=function(g){gt[g.fontName]=gt[g.fontName]||{},gt[g.fontName][g.fontStyle]=g.id},tc=function(g,N,U,Z,pe){var Ae={id:"F"+(Object.keys(Nt).length+1).toString(10),postScriptName:g,fontName:N,fontStyle:U,encoding:Z,isStandardFont:pe||!1,metadata:{}};return jt.publish("addFont",{font:Ae,instance:this}),Nt[Ae.id]=Ae,Ko(Ae),Ae.id},hr=function(g){for(var N=0,U=Ke.length;N<U;N++){var Z=tc.call(this,g[N][0],g[N][1],g[N][2],Ke[N][3],!0);p===!1&&(x[Z]=!0);var pe=g[N][0].split("-");Ko({id:Z,fontName:pe[0],fontStyle:pe[1]||""})}jt.publish("addFonts",{fonts:Nt,dictionary:gt})},Ss=function(g){return g.foo=function(){try{return g.apply(this,arguments)}catch(Z){var N=Z.stack||"";~N.indexOf(" at ")&&(N=N.split(" at ")[1]);var U="Error in function "+N.split(`
`)[0].split("<")[0]+": "+Z.message;if(!Sn.console)throw new Error(U);Sn.console.error(U,Z),Sn.alert&&alert(U)}},g.foo.bar=g,g.foo},ta=function(g,N){var U,Z,pe,Ae,Ve,vt,Kt,Xt,tn;if(pe=(N=N||{}).sourceEncoding||"Unicode",Ve=N.outputEncoding,(N.autoencode||Ve)&&Nt[Ft].metadata&&Nt[Ft].metadata[pe]&&Nt[Ft].metadata[pe].encoding&&(Ae=Nt[Ft].metadata[pe].encoding,!Ve&&Nt[Ft].encoding&&(Ve=Nt[Ft].encoding),!Ve&&Ae.codePages&&(Ve=Ae.codePages[0]),typeof Ve=="string"&&(Ve=Ae[Ve]),Ve)){for(Kt=!1,vt=[],U=0,Z=g.length;U<Z;U++)(Xt=Ve[g.charCodeAt(U)])?vt.push(String.fromCharCode(Xt)):vt.push(g[U]),vt[U].charCodeAt(0)>>8&&(Kt=!0);g=vt.join("")}for(U=g.length;Kt===void 0&&U!==0;)g.charCodeAt(U-1)>>8&&(Kt=!0),U--;if(!Kt)return g;for(vt=N.noBOM?[]:[254,255],U=0,Z=g.length;U<Z;U++){if((tn=(Xt=g.charCodeAt(U))>>8)>>8)throw new Error("Character at position "+U+" of string '"+g+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");vt.push(tn),vt.push(Xt-(tn<<8))}return String.fromCharCode.apply(void 0,vt)},ji=v.__private__.pdfEscape=v.pdfEscape=function(g,N){return ta(g,N).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cs=v.__private__.beginPage=function(g){ke[++kt]=[],St[kt]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(g[0]),topRightY:Number(g[1])}},Uc(kt),Fe(ke[W])},nc=function(g,N){var U,Z,pe;switch(t=N||t,typeof g=="string"&&(U=T(g.toLowerCase()),Array.isArray(U)&&(Z=U[0],pe=U[1])),Array.isArray(g)&&(Z=g[0]*At,pe=g[1]*At),isNaN(Z)&&(Z=i[0],pe=i[1]),(Z>14400||pe>14400)&&(Qr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Z=Math.min(14400,Z),pe=Math.min(14400,pe)),i=[Z,pe],t.substr(0,1)){case"l":pe>Z&&(i=[pe,Z]);break;case"p":Z>pe&&(i=[pe,Z])}cs(i),Ya(Ai),_e(Ns),Nl!==0&&_e(Nl+" J"),Gc!==0&&_e(Gc+" j"),jt.publish("addPage",{pageNumber:kt})},qh=function(g){g>0&&g<=kt&&(ke.splice(g,1),St.splice(g,1),kt--,W>kt&&(W=kt),this.setPage(W))},Uc=function(g){g>0&&g<=kt&&(W=g)},Sl=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return ke.length-1},zu=function(g,N,U){var Z,pe=void 0;return U=U||{},g=g!==void 0?g:Nt[Ft].fontName,N=N!==void 0?N:Nt[Ft].fontStyle,Z=g.toLowerCase(),gt[Z]!==void 0&&gt[Z][N]!==void 0?pe=gt[Z][N]:gt[g]!==void 0&&gt[g][N]!==void 0?pe=gt[g][N]:U.disableWarning===!1&&Qr.warn("Unable to look up font label for font '"+g+"', '"+N+"'. Refer to getFontList() for available fonts."),pe||U.noFallback||(pe=gt.times[N])==null&&(pe=gt.times.normal),pe},Tl=v.__private__.putInfo=function(){var g=Er(),N=function(Z){return Z};for(var U in d!==null&&(N=Vr.encryptor(g,0)),_e("<<"),_e("/Producer ("+ji(N("jsPDF "+vn.version))+")"),Zt)Zt.hasOwnProperty(U)&&Zt[U]&&_e("/"+U.substr(0,1).toUpperCase()+U.substr(1)+" ("+ji(N(Zt[U]))+")");_e("/CreationDate ("+ji(N(ie))+")"),_e(">>"),_e("endobj")},us=v.__private__.putCatalog=function(g){var N=(g=g||{}).rootDictionaryObjId||xe;switch(Er(),_e("<<"),_e("/Type /Catalog"),_e("/Pages "+N+" 0 R"),Et||(Et="fullwidth"),Et){case"fullwidth":_e("/OpenAction [3 0 R /FitH null]");break;case"fullheight":_e("/OpenAction [3 0 R /FitV null]");break;case"fullpage":_e("/OpenAction [3 0 R /Fit]");break;case"original":_e("/OpenAction [3 0 R /XYZ null null 1]");break;default:var U=""+Et;U.substr(U.length-1)==="%"&&(Et=parseInt(Et)/100),typeof Et=="number"&&_e("/OpenAction [3 0 R /XYZ null null "+B(Et)+"]")}switch(Jt||(Jt="continuous"),Jt){case"continuous":_e("/PageLayout /OneColumn");break;case"single":_e("/PageLayout /SinglePage");break;case"two":case"twoleft":_e("/PageLayout /TwoColumnLeft");break;case"tworight":_e("/PageLayout /TwoColumnRight")}Rt&&_e("/PageMode /"+Rt),jt.publish("putCatalog"),_e(">>"),_e("endobj")},Wh=v.__private__.putTrailer=function(){_e("trailer"),_e("<<"),_e("/Size "+(te+1)),_e("/Root "+te+" 0 R"),_e("/Info "+(te-1)+" 0 R"),d!==null&&_e("/Encrypt "+Vr.oid+" 0 R"),_e("/ID [ <"+q+"> <"+q+"> ]"),_e(">>")},Uu=v.__private__.putHeader=function(){_e("%PDF-"+_),_e("%")},Hu=v.__private__.putXRef=function(){var g="0000000000";_e("xref"),_e("0 "+(te+1)),_e("0000000000 65535 f ");for(var N=1;N<=te;N++)typeof he[N]=="function"?_e((g+he[N]()).slice(-10)+" 00000 n "):he[N]!==void 0?_e((g+he[N]).slice(-10)+" 00000 n "):_e("0000000000 00000 n ")},va=v.__private__.buildDocument=function(){at(),Fe(ye),jt.publish("buildDocument"),Uu(),$e(),Ei(),si(),d!==null&&xa(),Tl(),us();var g=be;return Hu(),Wh(),_e("startxref"),_e(""+g),_e("%%EOF"),Fe(ke[W]),ye.join(`
`)},rc=v.__private__.getBlob=function(g){return new Blob([lt(g)],{type:"application/pdf"})},Ka=v.output=v.__private__.output=Ss((function(g,N){switch(typeof(N=N||{})=="string"?N={filename:N}:N.filename=N.filename||"generated.pdf",g){case void 0:return va();case"save":v.save(N.filename);break;case"arraybuffer":return lt(va());case"blob":return rc(va());case"bloburi":case"bloburl":if(Sn.URL!==void 0&&typeof Sn.URL.createObjectURL=="function")return Sn.URL&&Sn.URL.createObjectURL(rc(va()))||void 0;Qr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var U="",Z=va();try{U=wT(Z)}catch{U=wT(unescape(encodeURIComponent(Z)))}return"data:application/pdf;filename="+N.filename+";base64,"+U;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var pe="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ae=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';N.pdfObjectUrl&&(pe=N.pdfObjectUrl,Ae="");var Ve='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+pe+'"'+Ae+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(N)+");<\/script></body></html>",vt=Sn.open();return vt!==null&&vt.document.write(Ve),vt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var Kt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(N.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+N.filename+'" width="500px" height="400px" /></body></html>',Xt=Sn.open();if(Xt!==null){Xt.document.write(Kt);var tn=this;Xt.document.documentElement.querySelector("#pdfViewer").onload=function(){Xt.document.title=N.filename,Xt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(tn.output("bloburl"))}}return Xt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Nn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",N)+'"></iframe></body></html>',ar=Sn.open();if(ar!==null&&(ar.document.write(Nn),ar.document.title=N.filename),ar||typeof safari>"u")return ar;break;case"datauri":case"dataurl":return Sn.document.location.href=this.output("datauristring",N);default:return null}})),ic=function(g){return Array.isArray(Fn)===!0&&Fn.indexOf(g)>-1};switch(r){case"pt":At=1;break;case"mm":At=72/25.4;break;case"cm":At=72/2.54;break;case"in":At=72;break;case"px":At=ic("px_scaling")==1?.75:96/72;break;case"pc":case"em":At=12;break;case"ex":At=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);At=r}var Vr=null;re(),se();var qu=function(g){return d!==null?Vr.encryptor(g,0):function(N){return N}},na=v.__private__.getPageInfo=v.getPageInfo=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:St[g].objId,pageNumber:g,pageContext:St[g]}},xn=v.__private__.getPageInfoByObjId=function(g){if(isNaN(g)||g%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var N in St)if(St[N].objId===g)break;return na(N)},go=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:St[W].objId,pageNumber:W,pageContext:St[W]}};v.addPage=function(){return nc.apply(this,arguments),this},v.setPage=function(){return Uc.apply(this,arguments),Fe.call(this,ke[W]),this},v.insertPage=function(g){return this.addPage(),this.movePage(W,g),this},v.movePage=function(g,N){var U,Z;if(g>N){U=ke[g],Z=St[g];for(var pe=g;pe>N;pe--)ke[pe]=ke[pe-1],St[pe]=St[pe-1];ke[N]=U,St[N]=Z,this.setPage(N)}else if(g<N){U=ke[g],Z=St[g];for(var Ae=g;Ae<N;Ae++)ke[Ae]=ke[Ae+1],St[Ae]=St[Ae+1];ke[N]=U,St[N]=Z,this.setPage(N)}return this},v.deletePage=function(){return qh.apply(this,arguments),this},v.__private__.text=v.text=function(g,N,U,Z,pe){var Ae,Ve,vt,Kt,Xt,tn,Nn,ar,or,pr=(Z=Z||{}).scope||this;if(typeof g=="number"&&typeof N=="number"&&(typeof U=="string"||Array.isArray(U))){var pi=U;U=N,N=g,g=pi}if(arguments[3]instanceof sn?(I("The transform parameter of text() with a Matrix value"),or=pe):(vt=arguments[4],Kt=arguments[5],Mr(Nn=arguments[3])==="object"&&Nn!==null||(typeof vt=="string"&&(Kt=vt,vt=null),typeof Nn=="string"&&(Kt=Nn,Nn=null),typeof Nn=="number"&&(vt=Nn,Nn=null),Z={flags:Nn,angle:vt,align:Kt})),isNaN(N)||isNaN(U)||g==null)throw new Error("Invalid arguments passed to jsPDF.text");if(g.length===0)return pr;var ai="",Us=!1,Ja=typeof Z.lineHeightFactor=="number"?Z.lineHeightFactor:Es,oc=pr.internal.scaleFactor;function im(zr){return zr=zr.split("	").join(Array(Z.TabLen||9).join(" ")),ji(zr,Nn)}function Kh(zr){for(var Ur,Ci=zr.concat(),Li=[],Dl=Ci.length;Dl--;)typeof(Ur=Ci.shift())=="string"?Li.push(Ur):Array.isArray(zr)&&(Ur.length===1||Ur[1]===void 0&&Ur[2]===void 0)?Li.push(Ur[0]):Li.push([Ur[0],Ur[1],Ur[2]]);return Li}function Yh(zr,Ur){var Ci;if(typeof zr=="string")Ci=Ur(zr)[0];else if(Array.isArray(zr)){for(var Li,Dl,Rl=zr.concat(),qs=[],Yu=Rl.length;Yu--;)typeof(Li=Rl.shift())=="string"?qs.push(Ur(Li)[0]):Array.isArray(Li)&&typeof Li[0]=="string"&&(Dl=Ur(Li[0],Li[1],Li[2]),qs.push([Dl[0],Dl[1],Dl[2]]));Ci=qs}return Ci}var Cl=!1,lc=!0;if(typeof g=="string")Cl=!0;else if(Array.isArray(g)){var Ed=g.concat();Ve=[];for(var cc,sa=Ed.length;sa--;)(typeof(cc=Ed.shift())!="string"||Array.isArray(cc)&&typeof cc[0]!="string")&&(lc=!1);Cl=lc}if(Cl===!1)throw new Error('Type of text must be string or Array. "'+g+'" is not recognized.');typeof g=="string"&&(g=g.match(/[\r?\n]/)?g.split(/\r\n|\r|\n/g):[g]);var Ku=We/pr.internal.scaleFactor,Xc=Ku*(Ja-1);switch(Z.baseline){case"bottom":U-=Xc;break;case"top":U+=Ku-Xc;break;case"hanging":U+=Ku-2*Xc;break;case"middle":U+=Ku/2-Xc}if((tn=Z.maxWidth||0)>0&&(typeof g=="string"?g=pr.splitTextToSize(g,tn):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce((function(zr,Ur){return zr.concat(pr.splitTextToSize(Ur,tn))}),[]))),Ae={text:g,x:N,y:U,options:Z,mutex:{pdfEscape:ji,activeFontKey:Ft,fonts:Nt,activeFontSize:We}},jt.publish("preProcessText",Ae),g=Ae.text,vt=(Z=Ae.options).angle,!(or instanceof sn)&&vt&&typeof vt=="number"){vt*=Math.PI/180,Z.rotationDirection===0&&(vt=-vt),E===k.ADVANCED&&(vt=-vt);var Qc=Math.cos(vt),Xh=Math.sin(vt);or=new sn(Qc,Xh,-Xh,Qc,0,0)}else vt&&vt instanceof sn&&(or=vt);E!==k.ADVANCED||or||(or=Ar),(Xt=Z.charSpace||Al)!==void 0&&(ai+=A(P(Xt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ar=Z.horizontalScale)!==void 0&&(ai+=A(100*ar)+` Tz
`),Z.lang;var aa=-1,sm=Z.renderingMode!==void 0?Z.renderingMode:Z.stroke,Ad=pr.internal.getCurrentPageInfo().pageContext;switch(sm){case 0:case!1:case"fill":aa=0;break;case 1:case!0:case"stroke":aa=1;break;case 2:case"fillThenStroke":aa=2;break;case 3:case"invisible":aa=3;break;case 4:case"fillAndAddForClipping":aa=4;break;case 5:case"strokeAndAddPathForClipping":aa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":aa=6;break;case 7:case"addToPathForClipping":aa=7}var am=Ad.usedRenderingMode!==void 0?Ad.usedRenderingMode:-1;aa!==-1?ai+=aa+` Tr
`:am!==-1&&(ai+=`0 Tr
`),aa!==-1&&(Ad.usedRenderingMode=aa),Kt=Z.align||"left";var rl,Nd=We*Ja,ug=pr.internal.pageSize.getWidth(),oa=Nt[Ft];Xt=Z.charSpace||Al,tn=Z.maxWidth||0,Nn=Object.assign({autoencode:!0,noBOM:!0},Z.flags);var yo=[];if(Object.prototype.toString.call(g)==="[object Array]"){var Za;Ve=Kh(g),Kt!=="left"&&(rl=Ve.map((function(zr){return pr.getStringUnitWidth(zr,{font:oa,charSpace:Xt,fontSize:We,doKerning:!1})*We/oc})));var bo,uc=0;if(Kt==="right"){N-=rl[0],g=[],sa=Ve.length;for(var il=0;il<sa;il++)il===0?(bo=wa(N),Za=As(U)):(bo=P(uc-rl[il]),Za=-Nd),g.push([Ve[il],bo,Za]),uc=rl[il]}else if(Kt==="center"){N-=rl[0]/2,g=[],sa=Ve.length;for(var sl=0;sl<sa;sl++)sl===0?(bo=wa(N),Za=As(U)):(bo=P((uc-rl[sl])/2),Za=-Nd),g.push([Ve[sl],bo,Za]),uc=rl[sl]}else if(Kt==="left"){g=[],sa=Ve.length;for(var Qh=0;Qh<sa;Qh++)g.push(Ve[Qh])}else{if(Kt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');g=[],sa=Ve.length,tn=tn!==0?tn:ug;for(var Hs=0;Hs<sa;Hs++)Za=Hs===0?As(U):-Nd,bo=Hs===0?wa(N):0,Hs<sa-1?yo.push(A(P((tn-rl[Hs])/(Ve[Hs].split(" ").length-1)))):yo.push(0),g.push([Ve[Hs],bo,Za])}}var Jc=typeof Z.R2L=="boolean"?Z.R2L:Dt;Jc===!0&&(g=Yh(g,(function(zr,Ur,Ci){return[zr.split("").reverse().join(""),Ur,Ci]}))),Ae={text:g,x:N,y:U,options:Z,mutex:{pdfEscape:ji,activeFontKey:Ft,fonts:Nt,activeFontSize:We}},jt.publish("postProcessText",Ae),g=Ae.text,Us=Ae.mutex.isHex||!1;var hc=Nt[Ft].encoding;hc!=="WinAnsiEncoding"&&hc!=="StandardEncoding"||(g=Yh(g,(function(zr,Ur,Ci){return[im(zr),Ur,Ci]}))),Ve=Kh(g),g=[];for(var kl,_o,la,wo=0,Zc=1,eu=Array.isArray(Ve[0])?Zc:wo,Sa="",Jh=function(zr,Ur,Ci){var Li="";return Ci instanceof sn?(Ci=typeof Z.angle=="number"?Br(Ci,new sn(1,0,0,1,zr,Ur)):Br(new sn(1,0,0,1,zr,Ur),Ci),E===k.ADVANCED&&(Ci=Br(new sn(1,0,0,-1,0,0),Ci)),Li=Ci.join(" ")+` Tm
`):Li=A(zr)+" "+A(Ur)+` Td
`,Li},eo=0;eo<Ve.length;eo++){switch(Sa="",eu){case Zc:la=(Us?"<":"(")+Ve[eo][0]+(Us?">":")"),kl=parseFloat(Ve[eo][1]),_o=parseFloat(Ve[eo][2]);break;case wo:la=(Us?"<":"(")+Ve[eo]+(Us?">":")"),kl=wa(N),_o=As(U)}yo!==void 0&&yo[eo]!==void 0&&(Sa=yo[eo]+` Tw
`),eo===0?g.push(Sa+Jh(kl,_o,or)+la):eu===wo?g.push(Sa+la):eu===Zc&&g.push(Sa+Jh(kl,_o,or)+la)}g=eu===wo?g.join(` Tj
T* `):g.join(` Tj
`),g+=` Tj
`;var Il=`BT
/`;return Il+=Ft+" "+We+` Tf
`,Il+=A(We*Ja)+` TL
`,Il+=El+`
`,Il+=ai,Il+=g,_e(Il+="ET"),x[Ft]=!0,pr};var sc=v.__private__.clip=v.clip=function(g){return _e(g==="evenodd"?"W*":"W"),this};v.clipEvenOdd=function(){return sc("evenodd")},v.__private__.discardPath=v.discardPath=function(){return _e("n"),this};var ra=v.__private__.isValidStyle=function(g){var N=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(g)!==-1&&(N=!0),N};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(g){return ra(g)&&(u=g),this};var Yo=v.__private__.getStyle=v.getStyle=function(g){var N=u;switch(g){case"D":case"S":N="S";break;case"F":N="f";break;case"FD":case"DF":N="B";break;case"f":case"f*":case"B":case"B*":N=g}return N},ya=v.close=function(){return _e("h"),this};v.stroke=function(){return _e("S"),this},v.fill=function(g){return Ts("f",g),this},v.fillEvenOdd=function(g){return Ts("f*",g),this},v.fillStroke=function(g){return Ts("B",g),this},v.fillStrokeEvenOdd=function(g){return Ts("B*",g),this};var Ts=function(g,N){Mr(N)==="object"?xo(N,g):_e(g)},Xo=function(g){g===null||E===k.ADVANCED&&g===void 0||(g=Yo(g),_e(g))};function mr(g,N,U,Z,pe){var Ae=new o0(N||this.boundingBox,U||this.xStep,Z||this.yStep,this.gState,pe||this.matrix);Ae.stream=this.stream;var Ve=g+"$$"+this.cloneIndex+++"$$";return ei(Ve,Ae),Ae}var xo=function(g,N){var U=In[g.key],Z=wt[U];if(Z instanceof Mf)_e("q"),_e(Wu(N)),Z.gState&&v.setGState(Z.gState),_e(g.matrix.toString()+" cm"),_e("/"+U+" sh"),_e("Q");else if(Z instanceof o0){var pe=new sn(1,0,0,-1,0,nl());g.matrix&&(pe=pe.multiply(g.matrix||Ar),U=mr.call(Z,g.key,g.boundingBox,g.xStep,g.yStep,pe).id),_e("q"),_e("/Pattern cs"),_e("/"+U+" scn"),Z.gState&&v.setGState(Z.gState),_e(N),_e("Q")}},Wu=function(g){switch(g){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qo=v.moveTo=function(g,N){return _e(A(P(g))+" "+A(Y(N))+" m"),this},Jo=v.lineTo=function(g,N){return _e(A(P(g))+" "+A(Y(N))+" l"),this},ba=v.curveTo=function(g,N,U,Z,pe,Ae){return _e([A(P(g)),A(Y(N)),A(P(U)),A(Y(Z)),A(P(pe)),A(Y(Ae)),"c"].join(" ")),this};v.__private__.line=v.line=function(g,N,U,Z,pe){if(isNaN(g)||isNaN(N)||isNaN(U)||isNaN(Z)||!ra(pe))throw new Error("Invalid arguments passed to jsPDF.line");return E===k.COMPAT?this.lines([[U-g,Z-N]],g,N,[1,1],pe||"S"):this.lines([[U-g,Z-N]],g,N,[1,1]).stroke()},v.__private__.lines=v.lines=function(g,N,U,Z,pe,Ae){var Ve,vt,Kt,Xt,tn,Nn,ar,or,pr,pi,ai,Us;if(typeof g=="number"&&(Us=U,U=N,N=g,g=Us),Z=Z||[1,1],Ae=Ae||!1,isNaN(N)||isNaN(U)||!Array.isArray(g)||!Array.isArray(Z)||!ra(pe)||typeof Ae!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qo(N,U),Ve=Z[0],vt=Z[1],Xt=g.length,pi=N,ai=U,Kt=0;Kt<Xt;Kt++)(tn=g[Kt]).length===2?(pi=tn[0]*Ve+pi,ai=tn[1]*vt+ai,Jo(pi,ai)):(Nn=tn[0]*Ve+pi,ar=tn[1]*vt+ai,or=tn[2]*Ve+pi,pr=tn[3]*vt+ai,pi=tn[4]*Ve+pi,ai=tn[5]*vt+ai,ba(Nn,ar,or,pr,pi,ai));return Ae&&ya(),Xo(pe),this},v.path=function(g){for(var N=0;N<g.length;N++){var U=g[N],Z=U.c;switch(U.op){case"m":Qo(Z[0],Z[1]);break;case"l":Jo(Z[0],Z[1]);break;case"c":ba.apply(this,Z);break;case"h":ya()}}return this},v.__private__.rect=v.rect=function(g,N,U,Z,pe){if(isNaN(g)||isNaN(N)||isNaN(U)||isNaN(Z)||!ra(pe))throw new Error("Invalid arguments passed to jsPDF.rect");return E===k.COMPAT&&(Z=-Z),_e([A(P(g)),A(Y(N)),A(P(U)),A(P(Z)),"re"].join(" ")),Xo(pe),this},v.__private__.triangle=v.triangle=function(g,N,U,Z,pe,Ae,Ve){if(isNaN(g)||isNaN(N)||isNaN(U)||isNaN(Z)||isNaN(pe)||isNaN(Ae)||!ra(Ve))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[U-g,Z-N],[pe-U,Ae-Z],[g-pe,N-Ae]],g,N,[1,1],Ve,!0),this},v.__private__.roundedRect=v.roundedRect=function(g,N,U,Z,pe,Ae,Ve){if(isNaN(g)||isNaN(N)||isNaN(U)||isNaN(Z)||isNaN(pe)||isNaN(Ae)||!ra(Ve))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var vt=4/3*(Math.SQRT2-1);return pe=Math.min(pe,.5*U),Ae=Math.min(Ae,.5*Z),this.lines([[U-2*pe,0],[pe*vt,0,pe,Ae-Ae*vt,pe,Ae],[0,Z-2*Ae],[0,Ae*vt,-pe*vt,Ae,-pe,Ae],[2*pe-U,0],[-pe*vt,0,-pe,-Ae*vt,-pe,-Ae],[0,2*Ae-Z],[0,-Ae*vt,pe*vt,-Ae,pe,-Ae]],g+pe,N,[1,1],Ve,!0),this},v.__private__.ellipse=v.ellipse=function(g,N,U,Z,pe){if(isNaN(g)||isNaN(N)||isNaN(U)||isNaN(Z)||!ra(pe))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ae=4/3*(Math.SQRT2-1)*U,Ve=4/3*(Math.SQRT2-1)*Z;return Qo(g+U,N),ba(g+U,N-Ve,g+Ae,N-Z,g,N-Z),ba(g-Ae,N-Z,g-U,N-Ve,g-U,N),ba(g-U,N+Ve,g-Ae,N+Z,g,N+Z),ba(g+Ae,N+Z,g+U,N+Ve,g+U,N),Xo(pe),this},v.__private__.circle=v.circle=function(g,N,U,Z){if(isNaN(g)||isNaN(N)||isNaN(U)||!ra(Z))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(g,N,U,U,Z)},v.setFont=function(g,N,U){return U&&(N=z(N,U)),Ft=zu(g,N,{disableWarning:!1}),this};var Zo=v.__private__.getFont=v.getFont=function(){return Nt[zu.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var g,N,U={};for(g in gt)if(gt.hasOwnProperty(g))for(N in U[g]=[],gt[g])gt[g].hasOwnProperty(N)&&U[g].push(N);return U},v.addFont=function(g,N,U,Z,pe){var Ae=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ae.indexOf(arguments[3])!==-1?pe=arguments[3]:arguments[3]&&Ae.indexOf(arguments[3])==-1&&(U=z(U,Z)),pe=pe||"Identity-H",tc.call(this,g,N,U,pe)};var Es,Ai=n.lineWidth||.200025,_a=v.__private__.getLineWidth=v.getLineWidth=function(){return Ai},Ya=v.__private__.setLineWidth=v.setLineWidth=function(g){return Ai=g,_e(A(P(g))+" w"),this};v.__private__.setLineDash=vn.API.setLineDash=vn.API.setLineDashPattern=function(g,N){if(g=g||[],N=N||0,isNaN(N)||!Array.isArray(g))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return g=g.map((function(U){return A(P(U))})).join(" "),N=A(P(N)),_e("["+g+"] "+N+" d"),this};var el=v.__private__.getLineHeight=v.getLineHeight=function(){return We*Es};v.__private__.getLineHeight=v.getLineHeight=function(){return We*Es};var Hc=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(g){return typeof(g=g||1.15)=="number"&&(Es=g),this},tl=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Es};Hc(n.lineHeight);var wa=v.__private__.getHorizontalCoordinate=function(g){return P(g)},As=v.__private__.getVerticalCoordinate=function(g){return E===k.ADVANCED?g:St[W].mediaBox.topRightY-St[W].mediaBox.bottomLeftY-P(g)},qc=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(g){return A(wa(g))},vo=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(g){return A(As(g))},Ns=n.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return we(Ns)},v.__private__.setStrokeColor=v.setDrawColor=function(g,N,U,Z){return Ns=Ee({ch1:g,ch2:N,ch3:U,ch4:Z,pdfColorType:"draw",precision:2}),_e(Ns),this};var Wc=n.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return we(Wc)},v.__private__.setFillColor=v.setFillColor=function(g,N,U,Z){return Wc=Ee({ch1:g,ch2:N,ch3:U,ch4:Z,pdfColorType:"fill",precision:2}),_e(Wc),this};var El=n.textColor||"0 g",ac=v.__private__.getTextColor=v.getTextColor=function(){return we(El)};v.__private__.setTextColor=v.setTextColor=function(g,N,U,Z){return El=Ee({ch1:g,ch2:N,ch3:U,ch4:Z,pdfColorType:"text",precision:3}),this};var Al=n.charSpace,Gh=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(Al||0)};v.__private__.setCharSpace=v.setCharSpace=function(g){if(isNaN(g))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Al=g,this};var Nl=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(g){var N=v.CapJoinStyles[g];if(N===void 0)throw new Error("Line cap style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Nl=N,_e(N+" J"),this};var Gc=0;v.__private__.setLineJoin=v.setLineJoin=function(g){var N=v.CapJoinStyles[g];if(N===void 0)throw new Error("Line join style of '"+g+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gc=N,_e(N+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(g){if(g=g||0,isNaN(g))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return _e(A(P(g))+" M"),this},v.GState=Wx,v.setGState=function(g){(g=typeof g=="string"?Ne[tt[g]]:Gu(null,g)).equals(Pt)||(_e("/"+g.id+" gs"),Pt=g)};var Gu=function(g,N){if(!g||!tt[g]){var U=!1;for(var Z in Ne)if(Ne.hasOwnProperty(Z)&&Ne[Z].equals(N)){U=!0;break}if(U)N=Ne[Z];else{var pe="GS"+(Object.keys(Ne).length+1).toString(10);Ne[pe]=N,N.id=pe}return g&&(tt[g]=N.id),jt.publish("addGState",N),N}};v.addGState=function(g,N){return Gu(g,N),this},v.saveGraphicsState=function(){return _e("q"),$t.push({key:Ft,size:We,color:El}),this},v.restoreGraphicsState=function(){_e("Q");var g=$t.pop();return Ft=g.key,We=g.size,El=g.color,Pt=null,this},v.setCurrentTransformationMatrix=function(g){return _e(g.toString()+" cm"),this},v.comment=function(g){return _e("#"+g),this};var ia=function(g,N){var U=g||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return U},set:function(Ae){isNaN(Ae)||(U=parseFloat(Ae))}});var Z=N||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Z},set:function(Ae){isNaN(Ae)||(Z=parseFloat(Ae))}});var pe="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return pe},set:function(Ae){pe=Ae.toString()}}),this},$c=function(g,N,U,Z){ia.call(this,g,N),this.type="rect";var pe=U||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return pe},set:function(Ve){isNaN(Ve)||(pe=parseFloat(Ve))}});var Ae=Z||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ae},set:function(Ve){isNaN(Ve)||(Ae=parseFloat(Ve))}}),this},Kc=function(){this.page=kt,this.currentPage=W,this.pages=ke.slice(0),this.pagesContext=St.slice(0),this.x=De,this.y=nt,this.matrix=ct,this.width=Ni(W),this.height=nl(W),this.outputDestination=qe,this.id="",this.objectNumber=-1};Kc.prototype.restore=function(){kt=this.page,W=this.currentPage,St=this.pagesContext,ke=this.pages,De=this.x,nt=this.y,ct=this.matrix,Yc(W,this.width),Qa(W,this.height),qe=this.outputDestination};var $u=function(g,N,U,Z,pe){Tr.push(new Kc),kt=W=0,ke=[],De=g,nt=N,ct=pe,cs([U,Z])},$h=function(g){if(nr[g])Tr.pop().restore();else{var N=new Kc,U="Xo"+(Object.keys(hn).length+1).toString(10);N.id=U,nr[g]=U,hn[U]=N,jt.publish("addFormObject",N),Tr.pop().restore()}};for(var Xa in v.beginFormObject=function(g,N,U,Z,pe){return $u(g,N,U,Z,pe),this},v.endFormObject=function(g){return $h(g),this},v.doFormObject=function(g,N){var U=hn[nr[g]];return _e("q"),_e(N.toString()+" cm"),_e("/"+U.id+" Do"),_e("Q"),this},v.getFormObject=function(g){var N=hn[nr[g]];return{x:N.x,y:N.y,width:N.width,height:N.height,matrix:N.matrix}},v.save=function(g,N){return g=g||"generated.pdf",(N=N||{}).returnPromise=N.returnPromise||!1,N.returnPromise===!1?(Jd(rc(va()),g),typeof Jd.unload=="function"&&Sn.setTimeout&&setTimeout(Jd.unload,911),this):new Promise((function(U,Z){try{var pe=Jd(rc(va()),g);typeof Jd.unload=="function"&&Sn.setTimeout&&setTimeout(Jd.unload,911),U(pe)}catch(Ae){Z(Ae.message)}}))},vn.API)vn.API.hasOwnProperty(Xa)&&(Xa==="events"&&vn.API.events.length?(function(g,N){var U,Z,pe;for(pe=N.length-1;pe!==-1;pe--)U=N[pe][0],Z=N[pe][1],g.subscribe.apply(g,[U].concat(typeof Z=="function"?[Z]:Z))})(jt,vn.API.events):v[Xa]=vn.API[Xa]);var Ni=v.getPageWidth=function(g){return(St[g=g||W].mediaBox.topRightX-St[g].mediaBox.bottomLeftX)/At},Yc=v.setPageWidth=function(g,N){St[g].mediaBox.topRightX=N*At+St[g].mediaBox.bottomLeftX},nl=v.getPageHeight=function(g){return(St[g=g||W].mediaBox.topRightY-St[g].mediaBox.bottomLeftY)/At},Qa=v.setPageHeight=function(g,N){St[g].mediaBox.topRightY=N*At+St[g].mediaBox.bottomLeftY};return v.internal={pdfEscape:ji,getStyle:Yo,getFont:Zo,getFontSize:Oe,getCharSpace:Gh,getTextColor:ac,getLineHeight:el,getLineHeightFactor:tl,getLineWidth:_a,write:Be,getHorizontalCoordinate:wa,getVerticalCoordinate:As,getCoordinateString:qc,getVerticalCoordinateString:vo,collections:{},newObject:Er,newAdditionalObject:Te,newObjectDeferred:sr,newObjectDeferredBegin:le,getFilters:Ue,putStream:rt,events:jt,scaleFactor:At,pageSize:{getWidth:function(){return Ni(W)},setWidth:function(g){Yc(W,g)},getHeight:function(){return nl(W)},setHeight:function(g){Qa(W,g)}},encryptionOptions:d,encryption:Vr,getEncryptor:qu,output:Ka,getNumberOfPages:Sl,pages:ke,out:_e,f2:B,f3:R,getPageInfo:na,getPageInfoByObjId:xn,getCurrentPageInfo:go,getPDFVersion:b,Point:ia,Rectangle:$c,Matrix:sn,hasHotfix:ic},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return Ni(W)},set:function(g){Yc(W,g)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return nl(W)},set:function(g){Qa(W,g)},enumerable:!0,configurable:!0}),hr.call(v,Ke),Ft="F1",nc(i,t),jt.publish("initialized"),v}ap.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},ap.prototype.toHexString=function(n){return n.split("").map((function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)})).join("")},ap.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},ap.prototype.processOwnerPassword=function(n,e){return TT(ST(e).substr(0,5),n)},ap.prototype.encryptor=function(n,e){var t=ST(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return TT(t,r)}},Wx.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Mr(n)!==Mr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},vn.API={events:[]},vn.version="2.5.1";var Bi=vn.API,oA=1,rm=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Qm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Pn=function(n){return n.toFixed(2)},If=function(n){return n.toFixed(5)};Bi.__acroform__={};var $o=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},LD=function(n){return n*oA},vu=function(n){var e=new e7,t=rn.internal.getHeight(n)||0,r=rn.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Pn(r)),Number(Pn(t))],e},zde=Bi.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Ude=Bi.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},Hde=Bi.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<e)==0?0:1},Qi=Bi.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Hde(n,e-1)},Ji=Bi.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zde(n,e-1)},Zi=Bi.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Ude(n,e-1)},qde=Bi.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Pn(c.lowerLeft_X)),Number(Pn(c.lowerLeft_Y)),Number(Pn(c.upperRight_X)),Number(Pn(c.upperRight_Y))]},Wde=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=ET(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Pn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=vu(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},ET=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map((function(R){return R.split(`
`)})):i.map((function(R){return[R]}));var s=t,a=rn.internal.getHeight(n)||0;a=a<0?-a:a;var o=rn.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(R,P,V){if(R+1<i.length){var Y=P+" "+i[R+1][0];return G2(Y,n,V).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,d,p=G2("3",n,s).height,x=n.multiline?a-s:(a-p)/2,v=x+=2,_=0,b=0,S=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+G2(e,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var T="",k=0,E=0;E<i.length;E++)if(i.hasOwnProperty(E)){var j=!1;if(i[E].length!==1&&S!==i[E].length-1){if((p+2)*(k+2)+2>a)continue e;T+=i[E][S],j=!0,b=E,E--}else{T=(T+=i[E][S]+" ").substr(T.length-1)==" "?T.substr(0,T.length-1):T;var F=parseInt(E),z=c(F,T,s),A=E>=i.length-1;if(z&&!A){T+=" ",S=0;continue}if(z||A){if(A)b=F;else if(n.multiline&&(p+2)*(k+2)+2>a)continue e}else{if(!n.multiline||(p+2)*(k+2)+2>a)continue e;b=F}}for(var I="",O=_;O<=b;O++){var B=i[O];if(n.multiline){if(O===b){I+=B[S]+" ",S=(S+1)%B.length;continue}if(O===_){I+=B[B.length-1]+" ";continue}}I+=B[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=G2(I,n,s).width,n.textAlign){case"right":u=o-d-2;break;case"center":u=(o-d)/2;break;case"left":default:u=2}e+=Pn(u)+" "+Pn(v)+` Td
`,e+="("+rm(I)+`) Tj
`,e+=-Pn(u)+` 0 Td
`,v=-(s+2),d=0,_=j?b:b+1,k++,T=""}break}return r.text=e,r.fontSize=s,r},G2=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Gde={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$de=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find((function(r){return r.type===t.type&&r.object===t.object}))===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Kde=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Mr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Yde=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Vc.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Gde)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");oA=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new t7,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",(function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)})),n.internal.events.subscribe("buildDocument",(function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&$de(s,t)}})(n)})),n.internal.events.subscribe("putCatalog",(function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)})),n.internal.events.subscribe("postPutPages",(function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=qde(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=rn.createDefaultAppearanceStream(o),Mr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var d=Wde(o);c.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(o.appearanceStreamContent){var p="";for(var x in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(x)){var v=o.appearanceStreamContent[x];if(p+="/"+x+" ",p+="<<",Object.keys(v).length>=1||Array.isArray(v)){for(var a in v)if(v.hasOwnProperty(a)){var _=v[a];typeof _=="function"&&(_=_.call(i,o)),p+="/"+a+" "+_+" ",i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_)}}else typeof(_=v)=="function"&&(_=_.call(i,o)),p+="/"+a+" "+_,i.internal.acroformPlugin.xForms.indexOf(_)>=0||i.internal.acroformPlugin.xForms.push(_);p+=">>"}c.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&Kde(i.internal.acroformPlugin.xForms,i)})(t,n)})),n.internal.acroformPlugin.isInitialized=!0}},ZF=Bi.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Mr(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+rm(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},$5=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+rm(r(n))+")"},Nu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Nu.prototype.toString=function(){return this.objId+" 0 R"},Nu.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Nu.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter((function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"}));for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:ZF(i,this.objId,this.scope)}):i instanceof Nu?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var e7=function(){Nu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};$o(e7,Nu);var t7=function(){Nu.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+rm(t(n))+")"}},set:function(t){n=t}})};$o(t7,Nu);var Vc=function n(){Nu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute F supplied.');e=T}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Qi(e,3)},set:function(T){T?this.F=Ji(e,3):this.F=Zi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(T){if(isNaN(T))throw new Error('Invalid value "'+T+'" for attribute Ff supplied.');t=T}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(T){r=T!==void 0?T:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(T){r[0]=T}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(T){r[1]=T}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(T){r[2]=T}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(T){r[3]=T}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(T){switch(T){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=T;break;default:throw new Error('Invalid value "'+T+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Tb)return;s="FieldObject"+n.FieldNum++}var T=function(k){return k};return this.scope&&(T=this.scope.internal.getEncryptor(this.objId)),"("+rm(T(s))+")"},set:function(T){s=T.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(T){s=T}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(T){a=T}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(T){o=T}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(T){c=T}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/oA:u},set:function(T){u=T}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(T){d=T}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Tb||this instanceof ed))return $5(p,this.objId,this.scope)},set:function(T){T=T.toString(),p=T}});var x=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof js?x:$5(x,this.objId,this.scope)},set:function(T){T=T.toString(),x=this instanceof js?T:T.substr(0,1)==="("?Qm(T.substr(1,T.length-2)):Qm(T)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof js?Qm(x.substr(1,x.length-1)):x},set:function(T){T=T.toString(),x=this instanceof js?"/"+T:T}});var v=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(v)return v},set:function(T){this.V=T}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof js?v:$5(v,this.objId,this.scope)},set:function(T){T=T.toString(),v=this instanceof js?T:T.substr(0,1)==="("?Qm(T.substr(1,T.length-2)):Qm(T)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof js?Qm(v.substr(1,v.length-1)):v},set:function(T){T=T.toString(),v=this instanceof js?"/"+T:T}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var _,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(T){T=!!T,b=T}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(_)return _},set:function(T){_=T}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,1)},set:function(T){T?this.Ff=Ji(this.Ff,1):this.Ff=Zi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,2)},set:function(T){T?this.Ff=Ji(this.Ff,2):this.Ff=Zi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,3)},set:function(T){T?this.Ff=Ji(this.Ff,3):this.Ff=Zi(this.Ff,3)}});var S=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(S!==null)return S},set:function(T){if([0,1,2].indexOf(T)===-1)throw new Error('Invalid value "'+T+'" for attribute Q supplied.');S=T}}),Object.defineProperty(this,"textAlign",{get:function(){var T;switch(S){case 0:default:T="left";break;case 1:T="center";break;case 2:T="right"}return T},configurable:!0,enumerable:!0,set:function(T){switch(T){case"right":case 2:S=2;break;case"center":case 1:S=1;break;case"left":case 0:default:S=0}}})};$o(Vc,Nu);var y0=function(){Vc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZF(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=(function(s,a,o){o||(o=1);for(var c,u=[];c=a.exec(s);)u.push(c[o]);return u})(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,18)},set:function(t){t?this.Ff=Ji(this.Ff,18):this.Ff=Zi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=Ji(this.Ff,19):this.Ff=Zi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,20)},set:function(t){t?(this.Ff=Ji(this.Ff,20),e.sort()):this.Ff=Zi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,22)},set:function(t){t?this.Ff=Ji(this.Ff,22):this.Ff=Zi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,23)},set:function(t){t?this.Ff=Ji(this.Ff,23):this.Ff=Zi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,27)},set:function(t){t?this.Ff=Ji(this.Ff,27):this.Ff=Zi(this.Ff,27)}}),this.hasAppearanceStream=!1};$o(y0,Vc);var b0=function(){y0.call(this),this.fontName="helvetica",this.combo=!1};$o(b0,y0);var _0=function(){b0.call(this),this.combo=!0};$o(_0,b0);var Y1=function(){_0.call(this),this.edit=!0};$o(Y1,_0);var js=function(){Vc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,15)},set:function(t){t?this.Ff=Ji(this.Ff,15):this.Ff=Zi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,16)},set:function(t){t?this.Ff=Ji(this.Ff,16):this.Ff=Zi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,17)},set:function(t){t?this.Ff=Ji(this.Ff,17):this.Ff=Zi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,26)},set:function(t){t?this.Ff=Ji(this.Ff,26):this.Ff=Zi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+rm(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Mr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};$o(js,Vc);var X1=function(){js.call(this),this.pushButton=!0};$o(X1,js);var w0=function(){js.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};$o(w0,js);var Tb=function(){var n,e;Vc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+rm(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){Mr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$o(Tb,Vc),w0.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},w0.prototype.createOption=function(n){var e=new Tb;return e.Parent=this,e.optionName=n,this.Kids.push(e),Xde.call(this.scope,e),e};var Q1=function(){js.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rn.CheckBox.createAppearanceStream()};$o(Q1,js);var ed=function(){Vc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,13)},set:function(e){e?this.Ff=Ji(this.Ff,13):this.Ff=Zi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,21)},set:function(e){e?this.Ff=Ji(this.Ff,21):this.Ff=Zi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,23)},set:function(e){e?this.Ff=Ji(this.Ff,23):this.Ff=Zi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,24)},set:function(e){e?this.Ff=Ji(this.Ff,24):this.Ff=Zi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,25)},set:function(e){e?this.Ff=Ji(this.Ff,25):this.Ff=Zi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,26)},set:function(e){e?this.Ff=Ji(this.Ff,26):this.Ff=Zi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$o(ed,Vc);var J1=function(){ed.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Qi(this.Ff,14)},set:function(n){n?this.Ff=Ji(this.Ff,14):this.Ff=Zi(this.Ff,14)}}),this.password=!0};$o(J1,ed);var rn={CheckBox:{createAppearanceStream:function(){return{N:{On:rn.CheckBox.YesNormal},D:{On:rn.CheckBox.YesPushDown,Off:rn.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=ET(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Pn(rn.internal.getWidth(n))+" "+Pn(rn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Pn(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=rn.internal.getHeight(n),a=rn.internal.getWidth(n),o=ET(n,n.caption);return i.push("1 g"),i.push("0 0 "+Pn(a)+" "+Pn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Pn(a-1)+" "+Pn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Pn(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Pn(rn.internal.getWidth(n))+" "+Pn(rn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:rn.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=rn.RadioButton.Circle.YesNormal,e.D[n]=rn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=rn.internal.getWidth(n)<=rn.internal.getHeight(n)?rn.internal.getWidth(n)/4:rn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=rn.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+If(rn.internal.getWidth(n)/2)+" "+If(rn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=rn.internal.getWidth(n)<=rn.internal.getHeight(n)?rn.internal.getWidth(n)/4:rn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*rn.internal.Bezier_C).toFixed(5)),a=Number((r*rn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+If(rn.internal.getWidth(n)/2)+" "+If(rn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+If(rn.internal.getWidth(n)/2)+" "+If(rn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=rn.internal.getWidth(n)<=rn.internal.getHeight(n)?rn.internal.getWidth(n)/4:rn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*rn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+If(rn.internal.getWidth(n)/2)+" "+If(rn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:rn.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=rn.RadioButton.Cross.YesNormal,e.D[n]=rn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=rn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Pn(rn.internal.getWidth(n)-2)+" "+Pn(rn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Pn(r.x1.x)+" "+Pn(r.x1.y)+" m"),t.push(Pn(r.x2.x)+" "+Pn(r.x2.y)+" l"),t.push(Pn(r.x4.x)+" "+Pn(r.x4.y)+" m"),t.push(Pn(r.x3.x)+" "+Pn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=rn.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Pn(rn.internal.getWidth(n))+" "+Pn(rn.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Pn(rn.internal.getWidth(n)-2)+" "+Pn(rn.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Pn(t.x1.x)+" "+Pn(t.x1.y)+" m"),r.push(Pn(t.x2.x)+" "+Pn(t.x2.y)+" l"),r.push(Pn(t.x4.x)+" "+Pn(t.x4.y)+" m"),r.push(Pn(t.x3.x)+" "+Pn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Pn(rn.internal.getWidth(n))+" "+Pn(rn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};rn.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=rn.internal.getWidth(n),t=rn.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},rn.internal.getWidth=function(n){var e=0;return Mr(n)==="object"&&(e=LD(n.Rect[2])),e},rn.internal.getHeight=function(n){var e=0;return Mr(n)==="object"&&(e=LD(n.Rect[3])),e};var Xde=Bi.addField=function(n){if(Yde(this,n),!(n instanceof Vc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Bi.AcroFormChoiceField=y0,Bi.AcroFormListBox=b0,Bi.AcroFormComboBox=_0,Bi.AcroFormEditBox=Y1,Bi.AcroFormButton=js,Bi.AcroFormPushButton=X1,Bi.AcroFormRadioButton=w0,Bi.AcroFormCheckBox=Q1,Bi.AcroFormTextField=ed,Bi.AcroFormPasswordField=J1,Bi.AcroFormAppearance=rn,Bi.AcroForm={ChoiceField:y0,ListBox:b0,ComboBox:_0,EditBox:Y1,Button:js,PushButton:X1,RadioButton:w0,CheckBox:Q1,TextField:ed,PasswordField:J1,Appearance:rn},vn.AcroForm={ChoiceField:y0,ListBox:b0,ComboBox:_0,EditBox:Y1,Button:js,PushButton:X1,RadioButton:w0,CheckBox:Q1,TextField:ed,PasswordField:J1,Appearance:rn};var Qde=vn.AcroForm;function n7(n){return n.reduce((function(e,t,r){return e[t]=r,e}),{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(R,P){var V,Y,ie,q,Q,se=e;if((P=P||e)==="RGBA"||R.data!==void 0&&R.data instanceof Uint8ClampedArray&&"height"in R&&"width"in R)return"RGBA";if(z(R))for(Q in t)for(ie=t[Q],V=0;V<ie.length;V+=1){for(q=!0,Y=0;Y<ie[V].length;Y+=1)if(ie[V][Y]!==void 0&&ie[V][Y]!==R[Y]){q=!1;break}if(q===!0){se=Q;break}}else for(Q in t)for(ie=t[Q],V=0;V<ie.length;V+=1){for(q=!0,Y=0;Y<ie[V].length;Y+=1)if(ie[V][Y]!==void 0&&ie[V][Y]!==R.charCodeAt(Y)){q=!1;break}if(q===!0){se=Q;break}}return se===e&&P!==e&&(se=P),se},i=function R(P){for(var V=this.internal.write,Y=this.internal.putStream,ie=(0,this.internal.getFilters)();ie.indexOf("FlateEncode")!==-1;)ie.splice(ie.indexOf("FlateEncode"),1);P.objectId=this.internal.newObject();var q=[];if(q.push({key:"Type",value:"/XObject"}),q.push({key:"Subtype",value:"/Image"}),q.push({key:"Width",value:P.width}),q.push({key:"Height",value:P.height}),P.colorSpace===S.INDEXED?q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(P.palette.length/3-1)+" "+("sMask"in P&&P.sMask!==void 0?P.objectId+2:P.objectId+1)+" 0 R]"}):(q.push({key:"ColorSpace",value:"/"+P.colorSpace}),P.colorSpace===S.DEVICE_CMYK&&q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),q.push({key:"BitsPerComponent",value:P.bitsPerComponent}),"decodeParameters"in P&&P.decodeParameters!==void 0&&q.push({key:"DecodeParms",value:"<<"+P.decodeParameters+">>"}),"transparency"in P&&Array.isArray(P.transparency)){for(var Q="",se=0,J=P.transparency.length;se<J;se++)Q+=P.transparency[se]+" "+P.transparency[se]+" ";q.push({key:"Mask",value:"["+Q+"]"})}P.sMask!==void 0&&q.push({key:"SMask",value:P.objectId+1+" 0 R"});var me=P.filter!==void 0?["/"+P.filter]:void 0;if(Y({data:P.data,additionalKeyValues:q,alreadyAppliedFilters:me,objectId:P.objectId}),V("endobj"),"sMask"in P&&P.sMask!==void 0){var re="/Predictor "+P.predictor+" /Colors 1 /BitsPerComponent "+P.bitsPerComponent+" /Columns "+P.width,M={width:P.width,height:P.height,colorSpace:"DeviceGray",bitsPerComponent:P.bitsPerComponent,decodeParameters:re,data:P.sMask};"filter"in P&&(M.filter=P.filter),R.call(this,M)}if(P.colorSpace===S.INDEXED){var W=this.internal.newObject();Y({data:I(new Uint8Array(P.palette)),objectId:W}),V("endobj")}},s=function(){var R=this.internal.collections.addImage_images;for(var P in R)i.call(this,R[P])},a=function(){var R,P=this.internal.collections.addImage_images,V=this.internal.write;for(var Y in P)V("/I"+(R=P[Y]).index,R.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var R=this.internal.collections.addImage_images;return o.call(this),R},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(R){return typeof n["process"+R.toUpperCase()]=="function"},p=function(R){return Mr(R)==="object"&&R.nodeType===1},x=function(R,P){if(R.nodeName==="IMG"&&R.hasAttribute("src")){var V=""+R.getAttribute("src");if(V.indexOf("data:image/")===0)return K1(unescape(V).split("base64,").pop());var Y=n.loadFile(V,!0);if(Y!==void 0)return Y}if(R.nodeName==="CANVAS"){if(R.width===0||R.height===0)throw new Error("Given canvas must have data. Canvas width: "+R.width+", height: "+R.height);var ie;switch(P){case"PNG":ie="image/png";break;case"WEBP":ie="image/webp";break;case"JPEG":case"JPG":default:ie="image/jpeg"}return K1(R.toDataURL(ie,1).split("base64,").pop())}},v=function(R){var P=this.internal.collections.addImage_images;if(P){for(var V in P)if(R===P[V].alias)return P[V]}},_=function(R,P,V){return R||P||(R=-96,P=-96),R<0&&(R=-1*V.width*72/R/this.internal.scaleFactor),P<0&&(P=-1*V.height*72/P/this.internal.scaleFactor),R===0&&(R=P*V.width/V.height),P===0&&(P=R*V.height/V.width),[R,P]},b=function(R,P,V,Y,ie,q){var Q=_.call(this,V,Y,ie),se=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,me=c.call(this);if(V=Q[0],Y=Q[1],me[ie.index]=ie,q){q*=Math.PI/180;var re=Math.cos(q),M=Math.sin(q),W=function(G){return G.toFixed(4)},K=[W(re),W(M),W(-1*M),W(re),0,0,"cm"]}this.internal.write("q"),q?(this.internal.write([1,"0","0",1,se(R),J(P+Y),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([se(V),"0","0",se(Y),"0","0","cm"].join(" "))):this.internal.write([se(V),"0","0",se(Y),se(R),J(P+Y),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ie.index+" Do"),this.internal.write("Q")},S=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=n.__addimage__.sHashCode=function(R){var P,V,Y=0;if(typeof R=="string")for(V=R.length,P=0;P<V;P++)Y=(Y<<5)-Y+R.charCodeAt(P),Y|=0;else if(z(R))for(V=R.byteLength/2,P=0;P<V;P++)Y=(Y<<5)-Y+R[P],Y|=0;return Y},E=n.__addimage__.validateStringAsBase64=function(R){(R=R||"").toString().trim();var P=!0;return R.length===0&&(P=!1),R.length%4!=0&&(P=!1),/^[A-Za-z0-9+/]+$/.test(R.substr(0,R.length-2))===!1&&(P=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(R.substr(-2))===!1&&(P=!1),P},j=n.__addimage__.extractImageFromDataUrl=function(R){var P=(R=R||"").split("base64,"),V=null;if(P.length===2){var Y=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(P[0]);Array.isArray(Y)&&(V={mimeType:Y[1],charset:Y[2],data:P[1]})}return V},F=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(R){return F()&&R instanceof ArrayBuffer};var z=n.__addimage__.isArrayBufferView=function(R){return F()&&typeof Uint32Array<"u"&&(R instanceof Int8Array||R instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&R instanceof Uint8ClampedArray||R instanceof Int16Array||R instanceof Uint16Array||R instanceof Int32Array||R instanceof Uint32Array||R instanceof Float32Array||R instanceof Float64Array)},A=n.__addimage__.binaryStringToUint8Array=function(R){for(var P=R.length,V=new Uint8Array(P),Y=0;Y<P;Y++)V[Y]=R.charCodeAt(Y);return V},I=n.__addimage__.arrayBufferToBinaryString=function(R){for(var P="",V=z(R)?R:new Uint8Array(R),Y=0;Y<V.length;Y+=8192)P+=String.fromCharCode.apply(null,V.subarray(Y,Y+8192));return P};n.addImage=function(){var R,P,V,Y,ie,q,Q,se,J;if(typeof arguments[1]=="number"?(P=e,V=arguments[1],Y=arguments[2],ie=arguments[3],q=arguments[4],Q=arguments[5],se=arguments[6],J=arguments[7]):(P=arguments[1],V=arguments[2],Y=arguments[3],ie=arguments[4],q=arguments[5],Q=arguments[6],se=arguments[7],J=arguments[8]),Mr(R=arguments[0])==="object"&&!p(R)&&"imageData"in R){var me=R;R=me.imageData,P=me.format||P||e,V=me.x||V||0,Y=me.y||Y||0,ie=me.w||me.width||ie,q=me.h||me.height||q,Q=me.alias||Q,se=me.compression||se,J=me.rotation||me.angle||J}var re=this.internal.getFilters();if(se===void 0&&re.indexOf("FlateEncode")!==-1&&(se="SLOW"),isNaN(V)||isNaN(Y))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var M=O.call(this,R,P,Q,se);return b.call(this,V,Y,ie,q,M,J),this};var O=function(R,P,V,Y){var ie,q,Q;if(typeof R=="string"&&r(R)===e){R=unescape(R);var se=B(R,!1);(se!==""||(se=n.loadFile(R,!0))!==void 0)&&(R=se)}if(p(R)&&(R=x(R,P)),P=r(R,P),!d(P))throw new Error("addImage does not support files of type '"+P+"', please ensure that a plugin for '"+P+"' support is added.");if(((Q=V)==null||Q.length===0)&&(V=(function(J){return typeof J=="string"||z(J)?k(J):z(J.data)?k(J.data):null})(R)),(ie=v.call(this,V))||(F()&&(R instanceof Uint8Array||P==="RGBA"||(q=R,R=A(R))),ie=this["process"+P.toUpperCase()](R,u.call(this),V,(function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in n.image_compression?J:T.NONE})(Y),q)),!ie)throw new Error("An unknown error occurred whilst processing the image.");return ie},B=n.__addimage__.convertBase64ToBinaryString=function(R,P){var V;P=typeof P!="boolean"||P;var Y,ie="";if(typeof R=="string"){Y=(V=j(R))!==null?V.data:R;try{ie=K1(Y)}catch(q){if(P)throw E(Y)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ie};n.getImageProperties=function(R){var P,V,Y="";if(p(R)&&(R=x(R)),typeof R=="string"&&r(R)===e&&((Y=B(R,!1))===""&&(Y=n.loadFile(R)||""),R=Y),V=r(R),!d(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!F()||R instanceof Uint8Array||(R=A(R)),!(P=this["process"+V.toUpperCase()](R)))throw new Error("An unknown error occurred whilst processing the image");return P.fileType=V,P}})(vn.API),(function(n){var e=function(t){if(t!==void 0&&t!="")return!0};vn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,d=!1,p=0;p<u.length&&!d;p++)switch((r=u[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var x=0;x<u.length;x++){r=u[x];var v=this.internal.pdfEscape,_=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),S=this.internal.newAdditionalObject(),T=this.internal.getEncryptor(b.objId),k=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+v(T(r.contents))+")",s+=" /Popup "+S.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+v(T(k))+") >>",b.content=s;var E=b.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+E,r.open&&(s+=" /Open true"),s+=" >>",S.content=s,this.internal.write(b.objId,"0 R",S.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var j=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+v(_(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+j+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var F=this.annotations._nameMap[r.options.name];r.options.pageNumber=F.page,r.options.top=F.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+v(_(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var z=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+z+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+i),h:u(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var d=this.splitTextToSize(t,o).length;a=Math.ceil(u*d)}else o=c,a=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,o,a,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}})(vn.API),(function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},o=n.__arabicParser__.isArabicEndLetter=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(b){return a(b)&&i.indexOf(b.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length>=3};var d=n.__arabicParser__.arabicLetterHasMedialForm=function(b){return a(b)&&s(b)&&e[b.charCodeAt(0)].length==4},p=n.__arabicParser__.resolveLigatures=function(b){var S=0,T=t,k="",E=0;for(S=0;S<b.length;S+=1)T[b.charCodeAt(S)]!==void 0?(E++,typeof(T=T[b.charCodeAt(S)])=="number"&&(k+=String.fromCharCode(T),T=t,E=0),S===b.length-1&&(T=t,k+=b.charAt(S-(E-1)),S-=E-1,E=0)):(T=t,k+=b.charAt(S-E),S-=E,E=0);return k};n.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&r[b.charCodeAt(0)]!==void 0};var x=n.__arabicParser__.getCorrectForm=function(b,S,T){return a(b)?s(b)===!1?-1:!u(b)||!a(S)&&!a(T)||!a(T)&&o(S)||o(b)&&!a(S)||o(b)&&c(S)||o(b)&&o(S)?0:d(b)&&a(S)&&!o(S)&&a(T)&&u(T)?3:o(b)||!a(T)?1:2:-1},v=function(b){var S=0,T=0,k=0,E="",j="",F="",z=(b=b||"").split("\\s+"),A=[];for(S=0;S<z.length;S+=1){for(A.push(""),T=0;T<z[S].length;T+=1)E=z[S][T],j=z[S][T-1],F=z[S][T+1],a(E)?(k=x(E,j,F),A[S]+=k!==-1?String.fromCharCode(e[E.charCodeAt(0)][k]):E):A[S]+=E;A[S]=p(A[S])}return A.join(" ")},_=n.__arabicParser__.processArabic=n.processArabic=function(){var b,S=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,T=[];if(Array.isArray(S)){var k=0;for(T=[],k=0;k<S.length;k+=1)Array.isArray(S[k])?T.push([v(S[k][0]),S[k][1],S[k][2]]):T.push([v(S[k])]);b=T}else b=v(S);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};n.events.push(["preProcessText",_])})(vn.API),vn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},(function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(vn.API),(function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(b){c=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(b){d=b}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(b){p=b}});var x=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return x},set:function(b){x=b}});var v=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return v},set:function(b){v=b}});var _=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return _},set:function(b){_=b}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var d=(u=u||{}).fontSize||this.getFontSize(),p=u.font||this.getFont(),x=u.scaleFactor||this.internal.scaleFactor,v=0,_=0,b=0,S=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var T=u.maxWidth;T>0?typeof c=="string"?c=this.splitTextToSize(c,T):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(E,j){return E.concat(S.splitTextToSize(j,T))}),[])):c=Array.isArray(c)?c:[c];for(var k=0;k<c.length;k++)v<(b=this.getStringUnitWidth(c[k],{font:p})*d)&&(v=b);return v!==0&&(_=c.length),{w:v/=x,h:Math.max((_*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/x,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,x=this.internal.__cell__.tableHeaderRow,v=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=p.top,v&&x&&(this.printHeaderRow(c.lineNumber,!0),c.y+=x[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-d,c.y+d,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+d,{align:"center",baseline:"top",maxWidth:c.width-d-d}):this.text(c.text,c.x+d,c.y+d,{align:"left",baseline:"top",maxWidth:c.width-d-d})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,d,p,x){if(r.call(this),!d)throw new Error("No data for PDF table.");var v,_,b,S,T=[],k=[],E=[],j={},F={},z=[],A=[],I=(x=x||{}).autoSize||!1,O=x.printHeaders!==!1,B=x.css&&x.css["font-size"]!==void 0?16*x.css["font-size"]:x.fontSize||12,R=x.margins||Object.assign({width:this.getPageWidth()},e),P=typeof x.padding=="number"?x.padding:3,V=x.headerBackgroundColor||"#c8c8c8",Y=x.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=O,this.internal.__cell__.margins=R,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=P,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=Y,this.setFontSize(B),p==null)k=T=Object.keys(d[0]),E=T.map((function(){return"left"}));else if(Array.isArray(p)&&Mr(p[0])==="object")for(T=p.map((function(me){return me.name})),k=p.map((function(me){return me.prompt||me.name||""})),E=p.map((function(me){return me.align||"left"})),v=0;v<p.length;v+=1)F[p[v].name]=p[v].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(k=T=p,E=T.map((function(){return"left"})));if(I||Array.isArray(p)&&typeof p[0]=="string")for(v=0;v<T.length;v+=1){for(j[S=T[v]]=d.map((function(me){return me[S]})),this.setFont(void 0,"bold"),z.push(this.getTextDimensions(k[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),_=j[S],this.setFont(void 0,"normal"),b=0;b<_.length;b+=1)z.push(this.getTextDimensions(_[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);F[S]=Math.max.apply(null,z)+P+P,z=[]}if(O){var ie={};for(v=0;v<T.length;v+=1)ie[T[v]]={},ie[T[v]].text=k[v],ie[T[v]].align=E[v];var q=o.call(this,ie,F);A=T.map((function(me){return new s(c,u,F[me],q,ie[me].text,void 0,ie[me].align)})),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var Q=p.reduce((function(me,re){return me[re.name]=re.align,me}),{});for(v=0;v<d.length;v+=1){"rowStart"in x&&x.rowStart instanceof Function&&x.rowStart({row:v,data:d[v]},this);var se=o.call(this,d[v],F);for(b=0;b<T.length;b+=1){var J=d[v][T[b]];"cellStart"in x&&x.cellStart instanceof Function&&x.cellStart({row:v,col:b,data:J},this),a.call(this,new s(c,u,F[T[b]],se,J,v+2,Q[T[b]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,x=this.internal.scaleFactor;return Object.keys(c).map((function(v){var _=c[v];return this.splitTextToSize(_.hasOwnProperty("text")?_.text:_,u[v]-d-d)}),this).map((function(v){return this.getLineHeightFactor()*v.length*p/x+d+d}),this).reduce((function(v,_){return Math.max(v,_)}),0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var x=[],v=0;v<this.internal.__cell__.tableHeaderRow.length;v+=1){d=this.internal.__cell__.tableHeaderRow[v].clone(),u&&(d.y=this.internal.__cell__.margins.top||0,x.push(d)),d.lineNumber=c;var _=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,d),this.setTextColor(_)}x.length>0&&this.setTableHeaderRow(x),this.setFont(void 0,"normal"),t=!1}})(vn.API);var r7={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},i7=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],AT=n7(i7),s7=[100,200,300,400,500,600,700,800,900],Jde=n7(s7);function NT(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=(function(s){return r7[s=s||"normal"]?s:"normal"})(n.style),r=(function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}})(n.weight),i=(function(s){return typeof AT[s=s||"normal"]=="number"?s:"normal"})(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function OD(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Zde={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},MD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function FD(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function e0e(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Zde,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=NT(e[o])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+FD(s)+"' and default family '"+r+"'.");if(a=(function(c,u){if(u[c])return u[c];var d=AT[c],p=d<=AT.normal?-1:1,x=OD(u,i7,d,p);if(!x)throw new Error("Could not find a matching font-stretch value for "+c);return x})(s.stretch,a),a=(function(c,u){if(u[c])return u[c];for(var d=r7[c],p=0;p<d.length;++p)if(u[d[p]])return u[d[p]];throw new Error("Could not find a matching font-style for "+c)})(s.style,a),!(a=(function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var d=Jde[c],p=OD(u,s7,d,c<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+c);return p})(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+FD(s)+"'.");return a}function BD(n){return n.trimLeft()}function t0e(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function n0e(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var $2,VD,zD,K5=["times"];(function(n){var e,t,r,i,s,a,o,c,u,d=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new a,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new a,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new d}]);var p=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var W=M;Object.defineProperty(this,"pdf",{get:function(){return W}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(Fe){K=!!Fe}});var G=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return G},set:function(Fe){G=!!Fe}});var te=0;Object.defineProperty(this,"posX",{get:function(){return te},set:function(Fe){isNaN(Fe)||(te=Fe)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(Fe){isNaN(Fe)||(he=Fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Fe){var _e;typeof Fe=="number"?_e=[Fe,Fe,Fe,Fe]:((_e=new Array(4))[0]=Fe[0],_e[1]=Fe.length>=2?Fe[1]:_e[0],_e[2]=Fe.length>=3?Fe[2]:_e[0],_e[3]=Fe.length>=4?Fe[3]:_e[1]),u.margin=_e}});var ye=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ye},set:function(Fe){ye=Fe}});var be=0;Object.defineProperty(this,"lastBreak",{get:function(){return be},set:function(Fe){be=Fe}});var Ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ce},set:function(Fe){Ce=Fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Fe){Fe instanceof d&&(u=Fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Fe){u.path=Fe}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Fe){ke=Fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Fe){var _e;_e=x(Fe),this.ctx.fillStyle=_e.style,this.ctx.isFillTransparent=_e.a===0,this.ctx.fillOpacity=_e.a,this.pdf.setFillColor(_e.r,_e.g,_e.b,{a:_e.a}),this.pdf.setTextColor(_e.r,_e.g,_e.b,{a:_e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Fe){var _e=x(Fe);this.ctx.strokeStyle=_e.style,this.ctx.isStrokeTransparent=_e.a===0,this.ctx.strokeOpacity=_e.a,_e.a===0?this.pdf.setDrawColor(255,255,255):(_e.a,this.pdf.setDrawColor(_e.r,_e.g,_e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Fe){["butt","round","square"].indexOf(Fe)!==-1&&(this.ctx.lineCap=Fe,this.pdf.setLineCap(Fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Fe){isNaN(Fe)||(this.ctx.lineWidth=Fe,this.pdf.setLineWidth(Fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Fe){["bevel","round","miter"].indexOf(Fe)!==-1&&(this.ctx.lineJoin=Fe,this.pdf.setLineJoin(Fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Fe){isNaN(Fe)||(this.ctx.miterLimit=Fe,this.pdf.setMiterLimit(Fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Fe){this.ctx.textBaseline=Fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Fe){["right","end","center","left","start"].indexOf(Fe)!==-1&&(this.ctx.textAlign=Fe)}});var oe=null;function qe(Fe,_e){if(oe===null){var Be=(function(lt){var Ke=[];return Object.keys(lt).forEach((function(We){lt[We].forEach((function(Et){var Oe=null;switch(Et){case"bold":Oe={family:We,weight:"bold"};break;case"italic":Oe={family:We,style:"italic"};break;case"bolditalic":Oe={family:We,weight:"bold",style:"italic"};break;case"":case"normal":Oe={family:We}}Oe!==null&&(Oe.ref={name:We,style:Et},Ke.push(Oe))}))})),Ke})(Fe.getFontList());oe=(function(lt){for(var Ke={},We=0;We<lt.length;++We){var Et=NT(lt[We]),Oe=Et.family,Dt=Et.stretch,Rt=Et.style,Wt=Et.weight;Ke[Oe]=Ke[Oe]||{},Ke[Oe][Dt]=Ke[Oe][Dt]||{},Ke[Oe][Dt][Rt]=Ke[Oe][Dt][Rt]||{},Ke[Oe][Dt][Rt][Wt]=Et}return Ke})(Be.concat(_e))}return oe}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(Fe){oe=null,at=Fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Fe){var _e;if(this.ctx.font=Fe,(_e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Fe))!==null){var Be=_e[1],lt=(_e[2],_e[3]),Ke=_e[4],We=(_e[5],_e[6]),Et=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ke)[2];Ke=Math.floor(Et==="px"?parseFloat(Ke)*this.pdf.internal.scaleFactor:Et==="em"?parseFloat(Ke)*this.pdf.getFontSize():parseFloat(Ke)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ke);var Oe=(function(Zt){var Ft,At,De=[],nt=Zt.trim();if(nt==="")return K5;if(nt in MD)return[MD[nt]];for(;nt!=="";){switch(At=null,Ft=(nt=BD(nt)).charAt(0)){case'"':case"'":At=t0e(nt.substring(1),Ft);break;default:At=n0e(nt)}if(At===null||(De.push(At[0]),(nt=BD(At[1]))!==""&&nt.charAt(0)!==","))return K5;nt=nt.replace(/^,/,"")}return De})(We);if(this.fontFaces){var Dt=e0e(qe(this.pdf,this.fontFaces),Oe.map((function(Zt){return{family:Zt,stretch:"normal",weight:lt,style:Be}})));this.pdf.setFont(Dt.ref.name,Dt.ref.style)}else{var Rt="";(lt==="bold"||parseInt(lt,10)>=700||Be==="bold")&&(Rt="bold"),Be==="italic"&&(Rt+="italic"),Rt.length===0&&(Rt="normal");for(var Wt="",Jt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yn=0;yn<Oe.length;yn++){if(this.pdf.internal.getFont(Oe[yn],Rt,{noFallback:!0,disableWarning:!0})!==void 0){Wt=Oe[yn];break}if(Rt==="bolditalic"&&this.pdf.internal.getFont(Oe[yn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Wt=Oe[yn],Rt="bold";else if(this.pdf.internal.getFont(Oe[yn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Wt=Oe[yn],Rt="normal";break}}if(Wt===""){for(var ln=0;ln<Oe.length;ln++)if(Jt[Oe[ln]]){Wt=Jt[Oe[ln]];break}}Wt=Wt===""?"Times":Wt,this.pdf.setFont(Wt,Rt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Fe){this.ctx.globalCompositeOperation=Fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Fe){this.ctx.globalAlpha=Fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Fe){this.ctx.lineDashOffset=Fe,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Fe){this.ctx.lineDash=Fe,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Fe){this.ctx.ignoreClearRect=!!Fe}})};p.prototype.setLineDash=function(M){this.lineDash=M},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){j.call(this,"fill",!1)},p.prototype.stroke=function(){j.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(M,W){if(isNaN(M)||isNaN(W))throw Qr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new a(M,W));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(M,W)},p.prototype.closePath=function(){var M=new a(0,0),W=0;for(W=this.path.length-1;W!==-1;W--)if(this.path[W].type==="begin"&&Mr(this.path[W+1])==="object"&&typeof this.path[W+1].x=="number"){M=new a(this.path[W+1].x,this.path[W+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(M.x,M.y)},p.prototype.lineTo=function(M,W){if(isNaN(M)||isNaN(W))throw Qr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new a(M,W));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new a(K.x,K.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),j.call(this,null,!0)},p.prototype.quadraticCurveTo=function(M,W,K,G){if(isNaN(K)||isNaN(G)||isNaN(M)||isNaN(W))throw Qr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var te=this.ctx.transform.applyToPoint(new a(K,G)),he=this.ctx.transform.applyToPoint(new a(M,W));this.path.push({type:"qct",x1:he.x,y1:he.y,x:te.x,y:te.y}),this.ctx.lastPoint=new a(te.x,te.y)},p.prototype.bezierCurveTo=function(M,W,K,G,te,he){if(isNaN(te)||isNaN(he)||isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G))throw Qr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ye=this.ctx.transform.applyToPoint(new a(te,he)),be=this.ctx.transform.applyToPoint(new a(M,W)),Ce=this.ctx.transform.applyToPoint(new a(K,G));this.path.push({type:"bct",x1:be.x,y1:be.y,x2:Ce.x,y2:Ce.y,x:ye.x,y:ye.y}),this.ctx.lastPoint=new a(ye.x,ye.y)},p.prototype.arc=function(M,W,K,G,te,he){if(isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G)||isNaN(te))throw Qr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var ye=this.ctx.transform.applyToPoint(new a(M,W));M=ye.x,W=ye.y;var be=this.ctx.transform.applyToPoint(new a(0,K)),Ce=this.ctx.transform.applyToPoint(new a(0,0));K=Math.sqrt(Math.pow(be.x-Ce.x,2)+Math.pow(be.y-Ce.y,2))}Math.abs(te-G)>=2*Math.PI&&(G=0,te=2*Math.PI),this.path.push({type:"arc",x:M,y:W,radius:K,startAngle:G,endAngle:te,counterclockwise:he})},p.prototype.arcTo=function(M,W,K,G,te){throw new Error("arcTo not implemented.")},p.prototype.rect=function(M,W,K,G){if(isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G))throw Qr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,W),this.lineTo(M+K,W),this.lineTo(M+K,W+G),this.lineTo(M,W+G),this.lineTo(M,W),this.lineTo(M+K,W),this.lineTo(M,W)},p.prototype.fillRect=function(M,W,K,G){if(isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G))throw Qr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!v.call(this)){var te={};this.lineCap!=="butt"&&(te.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(te.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,W,K,G),this.fill(),te.hasOwnProperty("lineCap")&&(this.lineCap=te.lineCap),te.hasOwnProperty("lineJoin")&&(this.lineJoin=te.lineJoin)}},p.prototype.strokeRect=function(M,W,K,G){if(isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G))throw Qr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");_.call(this)||(this.beginPath(),this.rect(M,W,K,G),this.stroke())},p.prototype.clearRect=function(M,W,K,G){if(isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G))throw Qr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,W,K,G))},p.prototype.save=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(W),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var G=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=G}},p.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var W=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(W),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var x=function(M){var W,K,G,te;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))W=0,K=0,G=0,te=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(he!==null)W=parseInt(he[1]),K=parseInt(he[2]),G=parseInt(he[3]),te=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)W=parseInt(he[1]),K=parseInt(he[2]),G=parseInt(he[3]),te=parseFloat(he[4]);else{if(te=1,typeof M=="string"&&M.charAt(0)!=="#"){var ye=new XF(M);M=ye.ok?ye.toHex():"#000000"}M.length===4?(W=M.substring(1,2),W+=W,K=M.substring(2,3),K+=K,G=M.substring(3,4),G+=G):(W=M.substring(1,3),K=M.substring(3,5),G=M.substring(5,7)),W=parseInt(W,16),K=parseInt(K,16),G=parseInt(G,16)}}return{r:W,g:K,b:G,a:te,style:M}},v=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},_=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(M,W,K,G){if(isNaN(W)||isNaN(K)||typeof M!="string")throw Qr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(G=isNaN(G)?void 0:G,!v.call(this)){var te=se(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;P.call(this,{text:M,x:W,y:K,scale:he,angle:te,align:this.textAlign,maxWidth:G})}},p.prototype.strokeText=function(M,W,K,G){if(isNaN(W)||isNaN(K)||typeof M!="string")throw Qr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!_.call(this)){G=isNaN(G)?void 0:G;var te=se(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;P.call(this,{text:M,x:W,y:K,scale:he,renderingMode:"stroke",angle:te,align:this.textAlign,maxWidth:G})}},p.prototype.measureText=function(M){if(typeof M!="string")throw Qr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var W=this.pdf,K=this.pdf.internal.scaleFactor,G=W.internal.getFontSize(),te=W.getStringUnitWidth(M)*G/W.internal.scaleFactor,he=function(ye){var be=(ye=ye||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return be}}),this};return new he({width:te*=Math.round(96*K/72*1e4)/1e4})},p.prototype.scale=function(M,W){if(isNaN(M)||isNaN(W))throw Qr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new c(M,0,0,W,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.rotate=function(M){if(isNaN(M))throw Qr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var W=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(W)},p.prototype.translate=function(M,W){if(isNaN(M)||isNaN(W))throw Qr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new c(1,0,0,1,M,W);this.ctx.transform=this.ctx.transform.multiply(K)},p.prototype.transform=function(M,W,K,G,te,he){if(isNaN(M)||isNaN(W)||isNaN(K)||isNaN(G)||isNaN(te)||isNaN(he))throw Qr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ye=new c(M,W,K,G,te,he);this.ctx.transform=this.ctx.transform.multiply(ye)},p.prototype.setTransform=function(M,W,K,G,te,he){M=isNaN(M)?1:M,W=isNaN(W)?0:W,K=isNaN(K)?0:K,G=isNaN(G)?1:G,te=isNaN(te)?0:te,he=isNaN(he)?0:he,this.ctx.transform=new c(M,W,K,G,te,he)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(M,W,K,G,te,he,ye,be,Ce){var ke=this.pdf.getImageProperties(M),oe=1,qe=1,at=1,Fe=1;G!==void 0&&be!==void 0&&(at=be/G,Fe=Ce/te,oe=ke.width/G*be/G,qe=ke.height/te*Ce/te),he===void 0&&(he=W,ye=K,W=0,K=0),G!==void 0&&be===void 0&&(be=G,Ce=te),G===void 0&&be===void 0&&(be=ke.width,Ce=ke.height);for(var _e,Be=this.ctx.transform.decompose(),lt=se(Be.rotate.shx),Ke=new c,We=(Ke=(Ke=(Ke=Ke.multiply(Be.translate)).multiply(Be.skew)).multiply(Be.scale)).applyToRectangle(new o(he-W*at,ye-K*Fe,G*oe,te*qe)),Et=S.call(this,We),Oe=[],Dt=0;Dt<Et.length;Dt+=1)Oe.indexOf(Et[Dt])===-1&&Oe.push(Et[Dt]);if(E(Oe),this.autoPaging)for(var Rt=Oe[0],Wt=Oe[Oe.length-1],Jt=Rt;Jt<Wt+1;Jt++){this.pdf.setPage(Jt);var yn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ln=Jt===1?this.posY+this.margin[0]:this.margin[0],Zt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=Jt===1?0:Zt+(Jt-2)*Ft;if(this.ctx.clip_path.length!==0){var De=this.path;_e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(_e,this.posX+this.margin[3],-At+ln+this.ctx.prevPageLastElemOffset),F.call(this,"fill",!0),this.path=De}var nt=JSON.parse(JSON.stringify(We));nt=k([nt],this.posX+this.margin[3],-At+ln+this.ctx.prevPageLastElemOffset)[0];var ct=(Jt>Rt||Jt<Wt)&&b.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],yn,Ft,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,lt),ct&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",We.x,We.y,We.w,We.h,null,null,lt)};var S=function(M,W,K){var G=[];W=W||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var te=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":G.push(Math.floor((M.y+te)/K)+1);break;case"arc":G.push(Math.floor((M.y+te-M.radius)/K)+1),G.push(Math.floor((M.y+te+M.radius)/K)+1);break;case"qct":var he=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);G.push(Math.floor((he.y+te)/K)+1),G.push(Math.floor((he.y+he.h+te)/K)+1);break;case"bct":var ye=me(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);G.push(Math.floor((ye.y+te)/K)+1),G.push(Math.floor((ye.y+ye.h+te)/K)+1);break;case"rect":G.push(Math.floor((M.y+te)/K)+1),G.push(Math.floor((M.y+M.h+te)/K)+1)}for(var be=0;be<G.length;be+=1)for(;this.pdf.internal.getNumberOfPages()<G[be];)T.call(this);return G},T=function(){var M=this.fillStyle,W=this.strokeStyle,K=this.font,G=this.lineCap,te=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=W,this.font=K,this.lineCap=G,this.lineWidth=te,this.lineJoin=he},k=function(M,W,K){for(var G=0;G<M.length;G++)switch(M[G].type){case"bct":M[G].x2+=W,M[G].y2+=K;case"qct":M[G].x1+=W,M[G].y1+=K;case"mt":case"lt":case"arc":default:M[G].x+=W,M[G].y+=K}return M},E=function(M){return M.sort((function(W,K){return W-K}))},j=function(M,W){for(var K,G,te=this.fillStyle,he=this.strokeStyle,ye=this.lineCap,be=this.lineWidth,Ce=Math.abs(be*this.ctx.transform.scaleX),ke=this.lineJoin,oe=JSON.parse(JSON.stringify(this.path)),qe=JSON.parse(JSON.stringify(this.path)),at=[],Fe=0;Fe<qe.length;Fe++)if(qe[Fe].x!==void 0)for(var _e=S.call(this,qe[Fe]),Be=0;Be<_e.length;Be+=1)at.indexOf(_e[Be])===-1&&at.push(_e[Be]);for(var lt=0;lt<at.length;lt++)for(;this.pdf.internal.getNumberOfPages()<at[lt];)T.call(this);if(E(at),this.autoPaging)for(var Ke=at[0],We=at[at.length-1],Et=Ke;Et<We+1;Et++){this.pdf.setPage(Et),this.fillStyle=te,this.strokeStyle=he,this.lineCap=ye,this.lineWidth=Ce,this.lineJoin=ke;var Oe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Dt=Et===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Wt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Jt=Et===1?0:Rt+(Et-2)*Wt;if(this.ctx.clip_path.length!==0){var yn=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(K,this.posX+this.margin[3],-Jt+Dt+this.ctx.prevPageLastElemOffset),F.call(this,M,!0),this.path=yn}if(G=JSON.parse(JSON.stringify(oe)),this.path=k(G,this.posX+this.margin[3],-Jt+Dt+this.ctx.prevPageLastElemOffset),W===!1||Et===0){var ln=(Et>Ke||Et<We)&&b.call(this);ln&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Oe,Wt,null).clip().discardPath()),F.call(this,M,W),ln&&this.pdf.restoreGraphicsState()}this.lineWidth=be}else this.lineWidth=Ce,F.call(this,M,W),this.lineWidth=be;this.path=oe},F=function(M,W){if((M!=="stroke"||W||!_.call(this))&&(M==="stroke"||W||!v.call(this))){for(var K,G,te=[],he=this.path,ye=0;ye<he.length;ye++){var be=he[ye];switch(be.type){case"begin":te.push({begin:!0});break;case"close":te.push({close:!0});break;case"mt":te.push({start:be,deltas:[],abs:[]});break;case"lt":var Ce=te.length;if(he[ye-1]&&!isNaN(he[ye-1].x)&&(K=[be.x-he[ye-1].x,be.y-he[ye-1].y],Ce>0)){for(;Ce>=0;Ce--)if(te[Ce-1].close!==!0&&te[Ce-1].begin!==!0){te[Ce-1].deltas.push(K),te[Ce-1].abs.push(be);break}}break;case"bct":K=[be.x1-he[ye-1].x,be.y1-he[ye-1].y,be.x2-he[ye-1].x,be.y2-he[ye-1].y,be.x-he[ye-1].x,be.y-he[ye-1].y],te[te.length-1].deltas.push(K);break;case"qct":var ke=he[ye-1].x+2/3*(be.x1-he[ye-1].x),oe=he[ye-1].y+2/3*(be.y1-he[ye-1].y),qe=be.x+2/3*(be.x1-be.x),at=be.y+2/3*(be.y1-be.y),Fe=be.x,_e=be.y;K=[ke-he[ye-1].x,oe-he[ye-1].y,qe-he[ye-1].x,at-he[ye-1].y,Fe-he[ye-1].x,_e-he[ye-1].y],te[te.length-1].deltas.push(K);break;case"arc":te.push({deltas:[],abs:[],arc:!0}),Array.isArray(te[te.length-1].abs)&&te[te.length-1].abs.push(be)}}G=W?null:M==="stroke"?"stroke":"fill";for(var Be=!1,lt=0;lt<te.length;lt++)if(te[lt].arc)for(var Ke=te[lt].abs,We=0;We<Ke.length;We++){var Et=Ke[We];Et.type==="arc"?I.call(this,Et.x,Et.y,Et.radius,Et.startAngle,Et.endAngle,Et.counterclockwise,void 0,W,!Be):V.call(this,Et.x,Et.y),Be=!0}else if(te[lt].close===!0)this.pdf.internal.out("h"),Be=!1;else if(te[lt].begin!==!0){var Oe=te[lt].start.x,Dt=te[lt].start.y;Y.call(this,te[lt].deltas,Oe,Dt),Be=!0}G&&O.call(this,G),W&&B.call(this)}},z=function(M){var W=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=W*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-K;case"top":return M+W-K;case"hanging":return M+W-2*K;case"middle":return M+W/2-K;case"ideographic":return M;case"alphabetic":default:return M}},A=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(W,K){this.colorStops.push([W,K])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(M,W,K,G,te,he,ye,be,Ce){for(var ke=q.call(this,K,G,te,he),oe=0;oe<ke.length;oe++){var qe=ke[oe];oe===0&&(Ce?R.call(this,qe.x1+M,qe.y1+W):V.call(this,qe.x1+M,qe.y1+W)),ie.call(this,M,W,qe.x2,qe.y2,qe.x3,qe.y3,qe.x4,qe.y4)}be?B.call(this):O.call(this,ye)},O=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},R=function(M,W){this.pdf.internal.out(t(M)+" "+r(W)+" m")},P=function(M){var W;switch(M.align){case"right":case"end":W="right";break;case"center":W="center";break;case"left":case"start":default:W="left"}var K=this.pdf.getTextDimensions(M.text),G=z.call(this,M.y),te=A.call(this,G)-K.h,he=this.ctx.transform.applyToPoint(new a(M.x,G)),ye=this.ctx.transform.decompose(),be=new c;be=(be=(be=be.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale);for(var Ce,ke,oe,qe=this.ctx.transform.applyToRectangle(new o(M.x,G,K.w,K.h)),at=be.applyToRectangle(new o(M.x,te,K.w,K.h)),Fe=S.call(this,at),_e=[],Be=0;Be<Fe.length;Be+=1)_e.indexOf(Fe[Be])===-1&&_e.push(Fe[Be]);if(E(_e),this.autoPaging)for(var lt=_e[0],Ke=_e[_e.length-1],We=lt;We<Ke+1;We++){this.pdf.setPage(We);var Et=We===1?this.posY+this.margin[0]:this.margin[0],Oe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Dt=this.pdf.internal.pageSize.height-this.margin[2],Rt=Dt-this.margin[0],Wt=this.pdf.internal.pageSize.width-this.margin[1],Jt=Wt-this.margin[3],yn=We===1?0:Oe+(We-2)*Rt;if(this.ctx.clip_path.length!==0){var ln=this.path;Ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(Ce,this.posX+this.margin[3],-1*yn+Et),F.call(this,"fill",!0),this.path=ln}var Zt=k([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-yn+Et+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*M.scale),oe=this.lineWidth,this.lineWidth=oe*M.scale);var Ft=this.autoPaging!=="text";if(Ft||Zt.y+Zt.h<=Dt){if(Ft||Zt.y>=Et&&Zt.x<=Wt){var At=Ft?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Wt-Zt.x)[0],De=k([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-yn+Et+this.ctx.prevPageLastElemOffset)[0],nt=Ft&&(We>lt||We<Ke)&&b.call(this);nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Jt,Rt,null).clip().discardPath()),this.pdf.text(At,De.x,De.y,{angle:M.angle,align:W,renderingMode:M.renderingMode}),nt&&this.pdf.restoreGraphicsState()}}else Zt.y<Dt&&(this.ctx.prevPageLastElemOffset+=Dt-Zt.y);M.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=oe)}else M.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*M.scale),oe=this.lineWidth,this.lineWidth=oe*M.scale),this.pdf.text(M.text,he.x+this.posX,he.y+this.posY,{angle:M.angle,align:W,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=oe)},V=function(M,W,K,G){K=K||0,G=G||0,this.pdf.internal.out(t(M+K)+" "+r(W+G)+" l")},Y=function(M,W,K){return this.pdf.lines(M,W,K,null,null)},ie=function(M,W,K,G,te,he,ye,be){this.pdf.internal.out([e(i(K+M)),e(s(G+W)),e(i(te+M)),e(s(he+W)),e(i(ye+M)),e(s(be+W)),"c"].join(" "))},q=function(M,W,K,G){for(var te=2*Math.PI,he=Math.PI/2;W>K;)W-=te;var ye=Math.abs(K-W);ye<te&&G&&(ye=te-ye);for(var be=[],Ce=G?-1:1,ke=W;ye>1e-5;){var oe=ke+Ce*Math.min(ye,he);be.push(Q.call(this,M,ke,oe)),ye-=Math.abs(oe-ke),ke=oe}return be},Q=function(M,W,K){var G=(K-W)/2,te=M*Math.cos(G),he=M*Math.sin(G),ye=te,be=-he,Ce=ye*ye+be*be,ke=Ce+ye*te+be*he,oe=4/3*(Math.sqrt(2*Ce*ke)-ke)/(ye*he-be*te),qe=ye-oe*be,at=be+oe*ye,Fe=qe,_e=-at,Be=G+W,lt=Math.cos(Be),Ke=Math.sin(Be);return{x1:M*Math.cos(W),y1:M*Math.sin(W),x2:qe*lt-at*Ke,y2:qe*Ke+at*lt,x3:Fe*lt-_e*Ke,y3:Fe*Ke+_e*lt,x4:M*Math.cos(K),y4:M*Math.sin(K)}},se=function(M){return 180*M/Math.PI},J=function(M,W,K,G,te,he){var ye=M+.5*(K-M),be=W+.5*(G-W),Ce=te+.5*(K-te),ke=he+.5*(G-he),oe=Math.min(M,te,ye,Ce),qe=Math.max(M,te,ye,Ce),at=Math.min(W,he,be,ke),Fe=Math.max(W,he,be,ke);return new o(oe,at,qe-oe,Fe-at)},me=function(M,W,K,G,te,he,ye,be){var Ce,ke,oe,qe,at,Fe,_e,Be,lt,Ke,We,Et,Oe,Dt,Rt=K-M,Wt=G-W,Jt=te-K,yn=he-G,ln=ye-te,Zt=be-he;for(ke=0;ke<41;ke++)lt=(_e=(oe=M+(Ce=ke/40)*Rt)+Ce*((at=K+Ce*Jt)-oe))+Ce*(at+Ce*(te+Ce*ln-at)-_e),Ke=(Be=(qe=W+Ce*Wt)+Ce*((Fe=G+Ce*yn)-qe))+Ce*(Fe+Ce*(he+Ce*Zt-Fe)-Be),ke==0?(We=lt,Et=Ke,Oe=lt,Dt=Ke):(We=Math.min(We,lt),Et=Math.min(Et,Ke),Oe=Math.max(Oe,lt),Dt=Math.max(Dt,Ke));return new o(Math.round(We),Math.round(Et),Math.round(Oe-We),Math.round(Dt-Et))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,W,K=(M=this.ctx.lineDash,W=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:W}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(vn.API),(function(n){var e=function(s){var a,o,c,u,d,p,x,v,_,b;for(o=[],c=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(d=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(p=(d=((d=((d=((d=(d-(b=d%85))/85)-(_=d%85))/85)-(v=d%85))/85)-(x=d%85))/85)%85,o.push(p+33,x+33,v+33,_+33,b+33)):o.push(122);return(function(S,T){for(var k=T;k>0;k--)S.pop()})(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,c,u,d,p=String,x="length",v=255,_="charCodeAt",b="slice",S="replace";for(s[b](-2),s=s[b](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),c=[],u=0,d=(s+=a="uuuuu"[b](s[x]%5||5))[x];d>u;u+=5)o=52200625*(s[_](u)-33)+614125*(s[_](u+1)-33)+7225*(s[_](u+2)-33)+85*(s[_](u+3)-33)+(s[_](u+4)-33),c.push(v&o>>24,v&o>>16,v&o>>8,v&o);return(function(T,k){for(var E=k;E>0;E--)T.pop()})(c,a[x]),p.fromCharCode.apply(p,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=_T(a)).reduce((function(c,u){return c+String.fromCharCode(u)}),"")};n.processDataByFilters=function(s,a){var o=0,c=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)})).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}})(vn.API),(function(n){n.loadFile=function(e,t,r){return(function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=(function(c,u,d){var p=new XMLHttpRequest,x=0,v=function(_){var b=_.length,S=[],T=String.fromCharCode;for(x=0;x<b;x+=1)S.push(T(255&_.charCodeAt(x)));return S.join("")};if(p.open("GET",c,!u),p.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(p.onload=function(){p.status===200?d(v(this.responseText)):d(void 0)}),p.send(null),u&&p.status===200)return v(p.responseText)})(i,s,a)}catch{}return o})(e,t,r)},n.loadImageFile=n.loadFile})(vn.API),(function(n){function e(){return(Sn.html2canvas?Promise.resolve(Sn.html2canvas):pT(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))})).then((function(a){return a.default?a.default:a}))}function t(){return(Sn.DOMPurify?Promise.resolve(Sn.DOMPurify):pT(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load dompurify: "+a))})).then((function(a){return a.default?a.default:a}))}var r=function(a){var o=Mr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then((function(){switch(o=o||(function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a)){case"string":return this.then(t).then((function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})}));case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}}))},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=(function c(u,d){for(var p=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),x=u.firstChild;x;x=x.nextSibling)d!==!0&&x.nodeType===1&&x.nodeName==="SCRIPT"||p.appendChild(c(x,d));return u.nodeType===1&&(u.nodeName==="CANVAS"?(p.width=u.width,p.height=u.height,p.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(p.value=u.value),p.addEventListener("load",(function(){p.scrollTop=u.scrollTop,p.scrollLeft=u.scrollLeft}),!0)),p})(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then((function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)})).then((function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)}))},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then((function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var x=0;x<u.length;++x){var v=u[x],_=v.src.find((function(b){return b.format==="truetype"}));_&&c.addFont(_.url,v.ref.name,v.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,c.context2d.save(!0),o(this.prop.container,p)})).then((function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)}))},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a}))},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},s.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(a,o)}))},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}}))},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map((function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}}),this);return this.then((function(){return this.thenList(o)}))},s.prototype.get=function(a,o){return this.then((function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(c):c}))},s.prototype.setMargin=function(a){return this.then((function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a})).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then((function(){(a=a||vn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a}))},s.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,(function(u,d){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,(function(p){return c.updateProgress(null,u),p})).then(u,d).then((function(p){return c.updateProgress(1),p}))}))},s.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=c.call(u,a,o);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach((function(c){o=o.thenCore(c)})),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then((function(){throw new Error(a)}))},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,vn.getPageSize=function(a,o,c){if(Mr(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var d,p=(""+c).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+o}var v,_=0,b=0;if(x.hasOwnProperty(p))_=x[p][1]/d,b=x[p][0]/d;else try{_=c[1],b=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",b>_&&(v=b,b=_,_=v);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",_>b&&(v=b,b=_,_=v)}return{width:b,height:_,unit:o,k:d,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(NT):null;var c=new s(o);return o.worker?c:c.from(a).doCallback()}})(vn.API),vn.API.addJS=function(n){return zD=n,this.internal.events.subscribe("postPutResources",(function(){$2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+($2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),VD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+zD+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){$2!==void 0&&VD!==void 0&&this.internal.out("/Names <</JavaScript "+$2+" 0 R>>")})),this},(function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,d=[];for(s=0;s<u;s++){var p=t.internal.newObject();d.push(p);var x=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+x.objId+" 0 R /XYZ null null null]>> endobj")}var v=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<d.length;s++)t.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+v+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])})(vn.API),(function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,o){var c,u=this.decode.DCT_DECODE,d=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=(function(p){for(var x,v=256*p.charCodeAt(4)+p.charCodeAt(5),_=p.length,b={width:0,height:0,numcomponents:1},S=4;S<_;S+=2){if(S+=v,e.indexOf(p.charCodeAt(S+1))!==-1){x=256*p.charCodeAt(S+5)+p.charCodeAt(S+6),b={width:256*p.charCodeAt(S+7)+p.charCodeAt(S+8),height:x,numcomponents:p.charCodeAt(S+9)};break}v=256*p.charCodeAt(S+2)+p.charCodeAt(S+3)}return b})(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}d={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return d}})(vn.API);var Jm,K2,UD,HD,qD,r0e=(function(){var n,e,t;function r(s){var a,o,c,u,d,p,x,v,_,b,S,T,k,E;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(a=this.readUInt32(),_=(function(){var j,F;for(F=[],j=0;j<4;++j)F.push(String.fromCharCode(this.data[this.pos++]));return F}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),u=this.readUInt16()||100,p.delay=1e3*d/u,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(_==="fdAT"&&(this.pos+=4,a-=4),s=(p!=null?p.data:void 0)||this.imgData,T=0;0<=a?T<a:T>a;0<=a?++T:--T)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((b=c-this.transparency.indexed.length)>0)for(k=0;0<=b?k<b:k>b;0<=b?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":x=(S=this.read(a)).indexOf(0),v=String.fromCharCode.apply(String,S.slice(0,x)),this.text[v]=String.fromCharCode.apply(String,S.slice(x+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(E=this.colorType)===4||E===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,x,v,_){var b,S,T,k,E,j,F,z,A,I,O,B,R,P,V,Y,ie,q,Q,se,J,me=Math.ceil((u.width-p)/v),re=Math.ceil((u.height-x)/_),M=u.width==me&&u.height==re;for(P=a*me,B=M?o:new Uint8Array(P*re),j=s.length,R=0,S=0;R<re&&c<j;){switch(s[c++]){case 0:for(k=ie=0;ie<P;k=ie+=1)B[S++]=s[c++];break;case 1:for(k=q=0;q<P;k=q+=1)b=s[c++],E=k<a?0:B[S-a],B[S++]=(b+E)%256;break;case 2:for(k=Q=0;Q<P;k=Q+=1)b=s[c++],T=(k-k%a)/a,V=R&&B[(R-1)*P+T*a+k%a],B[S++]=(V+b)%256;break;case 3:for(k=se=0;se<P;k=se+=1)b=s[c++],T=(k-k%a)/a,E=k<a?0:B[S-a],V=R&&B[(R-1)*P+T*a+k%a],B[S++]=(b+Math.floor((E+V)/2))%256;break;case 4:for(k=J=0;J<P;k=J+=1)b=s[c++],T=(k-k%a)/a,E=k<a?0:B[S-a],R===0?V=Y=0:(V=B[(R-1)*P+T*a+k%a],Y=T&&B[(R-1)*P+(T-1)*a+k%a]),F=E+V-Y,z=Math.abs(F-E),I=Math.abs(F-V),O=Math.abs(F-Y),A=z<=I&&z<=O?E:I<=O?V:Y,B[S++]=(b+A)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!M){var W=((x+R*_)*u.width+p)*a,K=R*P;for(k=0;k<me;k+=1){for(var G=0;G<a;G+=1)o[W++]=B[K++];W+=(v-1)*a}}R++}}return s=Ode(s),u.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,c,u,d,p,x,v;for(o=this.palette,d=this.transparency.indexed||[],u=new Uint8Array((d.length||0)+o.length),c=0,s=0,a=p=0,x=o.length;p<x;a=p+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(v=d[s++])!=null?v:255;return u},r.prototype.copyToImageData=function(s,a){var o,c,u,d,p,x,v,_,b,S,T;if(c=this.colors,b=null,o=this.hasAlphaChannel,this.palette.length&&(b=(T=this._decodedPalette)!=null?T:this._decodedPalette=this.decodePalette(),c=4,o=!0),_=(u=s.data||s).length,p=b||a,d=x=0,c===1)for(;d<_;)v=b?4*a[d/4]:x,S=p[v++],u[d++]=S,u[d++]=S,u[d++]=S,u[d++]=o?p[v++]:255,x=v;else for(;d<_;)v=b?4*a[d/4]:x,u[d++]=p[v++],u[d++]=p[v++],u[d++]=p[v++],u[d++]=o?p[v++]:255,x=v},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Sn)==="[object Window]"){try{e=Sn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,c,u,d,p,x,v;if(this.animation){for(v=[],o=d=0,p=(x=this.animation.frames).length;d<p;o=++d)a=x[o],c=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,v.push(a.image=n(c));return v}},r.prototype.renderFrame=function(s,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,c,u,d,p,x=this;return o=0,p=this.animation,u=p.numFrames,c=p.frames,d=p.numPlays,(a=function(){var v,_;if(v=o++%u,_=c[v],x.renderFrame(s,v),u>1&&o/u<d)return x.animation._timeout=setTimeout(a,_.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function i0e(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var o=null,c=null;s&&(o=e,c=a,e+=3*a);var u=!0,d=[],p=0,x=null,v=0,_=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,_=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=n[e++];p=n[e++]|n[e++]<<8,x=n[e++],(1&b)==0&&(x=null),v=b>>2&7,e++;break;case 254:for(;;){if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var S=n[e++]|n[e++]<<8,T=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,E=n[e++]|n[e++]<<8,j=n[e++],F=j>>6&1,z=1<<(7&j)+1,A=o,I=c,O=!1;j>>7&&(O=!0,A=e,I=z,e+=3*z);var B=e;for(e++;;){var R;if(!((R=n[e++])>=0))throw Error("Invalid block size");if(R===0)break;e+=R}d.push({x:S,y:T,width:k,height:E,has_local_palette:O,palette_offset:A,palette_size:I,data_offset:B,data_length:e-B,transparent_index:x,interlaced:!!F,delay:p,disposal:v});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return _},this.frameInfo=function(P){if(P<0||P>=d.length)throw new Error("Frame index out of range.");return d[P]},this.decodeAndBlitFrameBGRA=function(P,V){var Y=this.frameInfo(P),ie=Y.width*Y.height,q=new Uint8Array(ie);WD(n,Y.data_offset,q,ie);var Q=Y.palette_offset,se=Y.transparent_index;se===null&&(se=256);var J=Y.width,me=t-J,re=J,M=4*(Y.y*t+Y.x),W=4*((Y.y+Y.height)*t+Y.x),K=M,G=4*me;Y.interlaced===!0&&(G+=4*t*7);for(var te=8,he=0,ye=q.length;he<ye;++he){var be=q[he];if(re===0&&(re=J,(K+=G)>=W&&(G=4*me+4*t*(te-1),K=M+(J+me)*(te<<1),te>>=1)),be===se)K+=4;else{var Ce=n[Q+3*be],ke=n[Q+3*be+1],oe=n[Q+3*be+2];V[K++]=oe,V[K++]=ke,V[K++]=Ce,V[K++]=255}--re}},this.decodeAndBlitFrameRGBA=function(P,V){var Y=this.frameInfo(P),ie=Y.width*Y.height,q=new Uint8Array(ie);WD(n,Y.data_offset,q,ie);var Q=Y.palette_offset,se=Y.transparent_index;se===null&&(se=256);var J=Y.width,me=t-J,re=J,M=4*(Y.y*t+Y.x),W=4*((Y.y+Y.height)*t+Y.x),K=M,G=4*me;Y.interlaced===!0&&(G+=4*t*7);for(var te=8,he=0,ye=q.length;he<ye;++he){var be=q[he];if(re===0&&(re=J,(K+=G)>=W&&(G=4*me+4*t*(te-1),K=M+(J+me)*(te<<1),te>>=1)),be===se)K+=4;else{var Ce=n[Q+3*be],ke=n[Q+3*be+1],oe=n[Q+3*be+2];V[K++]=Ce,V[K++]=ke,V[K++]=oe,V[K++]=255}--re}}}function WD(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,o=a+1,c=i+1,u=(1<<c)-1,d=0,p=0,x=0,v=n[e++],_=new Int32Array(4096),b=null;;){for(;d<16&&v!==0;)p|=n[e++]<<d,d+=8,v===1?v=n[e++]:--v;if(d<c)break;var S=p&u;if(p>>=c,d-=c,S!==s){if(S===a)break;for(var T=S<o?S:b,k=0,E=T;E>s;)E=_[E]>>8,++k;var j=E;if(x+k+(T!==S?1:0)>r)return void Qr.log("Warning, gif stream longer than expected.");t[x++]=j;var F=x+=k;for(T!==S&&(t[x++]=j),E=T;k--;)E=_[E],t[--F]=255&E,E>>=8;b!==null&&o<4096&&(_[o++]=b<<8|j,o>=u+1&&c<12&&(++c,u=u<<1|1)),b=S}else o=a+1,u=(1<<(c=i+1))-1,b=null}return x!==r&&Qr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Y5(n){var e,t,r,i,s,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),d=new Array(64),p=new Array(65535),x=new Array(65535),v=new Array(64),_=new Array(64),b=[],S=0,T=7,k=new Array(64),E=new Array(64),j=new Array(64),F=new Array(256),z=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],O=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],R=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],P=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],Y=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ie=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function q(M,W){for(var K=0,G=0,te=new Array,he=1;he<=16;he++){for(var ye=1;ye<=M[he];ye++)te[W[G]]=[],te[W[G]][0]=K,te[W[G]][1]=he,G++,K++;K*=2}return te}function Q(M){for(var W=M[0],K=M[1]-1;K>=0;)W&1<<K&&(S|=1<<T),K--,--T<0&&(S==255?(se(255),se(0)):se(S),T=7,S=0)}function se(M){b.push(M)}function J(M){se(M>>8&255),se(255&M)}function me(M,W,K,G,te){for(var he,ye=te[0],be=te[240],Ce=(function(Ke,We){var Et,Oe,Dt,Rt,Wt,Jt,yn,ln,Zt,Ft,At=0;for(Zt=0;Zt<8;++Zt){Et=Ke[At],Oe=Ke[At+1],Dt=Ke[At+2],Rt=Ke[At+3],Wt=Ke[At+4],Jt=Ke[At+5],yn=Ke[At+6];var De=Et+(ln=Ke[At+7]),nt=Et-ln,ct=Oe+yn,Nt=Oe-yn,gt=Dt+Jt,$t=Dt-Jt,wt=Rt+Wt,In=Rt-Wt,Ne=De+wt,tt=De-wt,Pt=ct+gt,kt=ct-gt;Ke[At]=Ne+Pt,Ke[At+4]=Ne-Pt;var St=.707106781*(kt+tt);Ke[At+2]=tt+St,Ke[At+6]=tt-St;var jt=.382683433*((Ne=In+$t)-(kt=Nt+nt)),Fn=.5411961*Ne+jt,hn=1.306562965*kt+jt,nr=.707106781*(Pt=$t+Nt),Tr=nt+nr,sn=nt-nr;Ke[At+5]=sn+Fn,Ke[At+3]=sn-Fn,Ke[At+1]=Tr+hn,Ke[At+7]=Tr-hn,At+=8}for(At=0,Zt=0;Zt<8;++Zt){Et=Ke[At],Oe=Ke[At+8],Dt=Ke[At+16],Rt=Ke[At+24],Wt=Ke[At+32],Jt=Ke[At+40],yn=Ke[At+48];var Br=Et+(ln=Ke[At+56]),Ar=Et-ln,ei=Oe+yn,Er=Oe-yn,sr=Dt+Jt,le=Dt-Jt,Te=Rt+Wt,xe=Rt-Wt,ve=Br+Te,we=Br-Te,Ee=ei+sr,Ue=ei-sr;Ke[At]=ve+Ee,Ke[At+32]=ve-Ee;var rt=.707106781*(Ue+we);Ke[At+16]=we+rt,Ke[At+48]=we-rt;var He=.382683433*((ve=xe+le)-(Ue=Er+Ar)),$e=.5411961*ve+He,Ye=1.306562965*Ue+He,yt=.707106781*(Ee=le+Er),It=Ar+yt,Lt=Ar-yt;Ke[At+40]=Lt+$e,Ke[At+24]=Lt-$e,Ke[At+8]=It+Ye,Ke[At+56]=It-Ye,At++}for(Zt=0;Zt<64;++Zt)Ft=Ke[Zt]*We[Zt],v[Zt]=Ft>0?Ft+.5|0:Ft-.5|0;return v})(M,W),ke=0;ke<64;++ke)_[A[ke]]=Ce[ke];var oe=_[0]-K;K=_[0],oe==0?Q(G[0]):(Q(G[x[he=32767+oe]]),Q(p[he]));for(var qe=63;qe>0&&_[qe]==0;)qe--;if(qe==0)return Q(ye),K;for(var at,Fe=1;Fe<=qe;){for(var _e=Fe;_[Fe]==0&&Fe<=qe;)++Fe;var Be=Fe-_e;if(Be>=16){at=Be>>4;for(var lt=1;lt<=at;++lt)Q(be);Be&=15}he=32767+_[Fe],Q(te[(Be<<4)+x[he]]),Q(p[he]),Fe++}return qe!=63&&Q(ye),K}function re(M){M=Math.min(Math.max(M,1),100),s!=M&&((function(W){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],G=0;G<64;G++){var te=a((K[G]*W+50)/100);te=Math.min(Math.max(te,1),255),o[A[G]]=te}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ye=0;ye<64;ye++){var be=a((he[ye]*W+50)/100);be=Math.min(Math.max(be,1),255),c[A[ye]]=be}for(var Ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,oe=0;oe<8;oe++)for(var qe=0;qe<8;qe++)u[ke]=1/(o[A[ke]]*Ce[oe]*Ce[qe]*8),d[ke]=1/(c[A[ke]]*Ce[oe]*Ce[qe]*8),ke++})(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),s=M)}this.encode=function(M,W){W&&re(W),b=new Array,S=0,T=7,J(65496),J(65504),J(16),se(74),se(70),se(73),se(70),se(0),se(1),se(1),se(0),J(1),J(1),se(0),se(0),(function(){J(65499),J(132),se(0);for(var Oe=0;Oe<64;Oe++)se(o[Oe]);se(1);for(var Dt=0;Dt<64;Dt++)se(c[Dt])})(),(function(Oe,Dt){J(65472),J(17),se(8),J(Dt),J(Oe),se(3),se(1),se(17),se(0),se(2),se(17),se(1),se(3),se(17),se(1)})(M.width,M.height),(function(){J(65476),J(418),se(0);for(var Oe=0;Oe<16;Oe++)se(I[Oe+1]);for(var Dt=0;Dt<=11;Dt++)se(O[Dt]);se(16);for(var Rt=0;Rt<16;Rt++)se(B[Rt+1]);for(var Wt=0;Wt<=161;Wt++)se(R[Wt]);se(1);for(var Jt=0;Jt<16;Jt++)se(P[Jt+1]);for(var yn=0;yn<=11;yn++)se(V[yn]);se(17);for(var ln=0;ln<16;ln++)se(Y[ln+1]);for(var Zt=0;Zt<=161;Zt++)se(ie[Zt])})(),J(65498),J(12),se(3),se(1),se(0),se(2),se(17),se(3),se(17),se(0),se(63),se(0);var K=0,G=0,te=0;S=0,T=7,this.encode.displayName="_encode_";for(var he,ye,be,Ce,ke,oe,qe,at,Fe,_e=M.data,Be=M.width,lt=M.height,Ke=4*Be,We=0;We<lt;){for(he=0;he<Ke;){for(ke=Ke*We+he,qe=-1,at=0,Fe=0;Fe<64;Fe++)oe=ke+(at=Fe>>3)*Ke+(qe=4*(7&Fe)),We+at>=lt&&(oe-=Ke*(We+1+at-lt)),he+qe>=Ke&&(oe-=he+qe-Ke+4),ye=_e[oe++],be=_e[oe++],Ce=_e[oe++],k[Fe]=(z[ye]+z[be+256>>0]+z[Ce+512>>0]>>16)-128,E[Fe]=(z[ye+768>>0]+z[be+1024>>0]+z[Ce+1280>>0]>>16)-128,j[Fe]=(z[ye+1280>>0]+z[be+1536>>0]+z[Ce+1792>>0]>>16)-128;K=me(k,u,K,e,r),G=me(E,d,G,t,i),te=me(j,d,te,t,i),he+=32}We+=8}if(T>=0){var Et=[];Et[1]=T+1,Et[0]=(1<<T+1)-1,Q(Et)}return J(65497),new Uint8Array(b)},n=n||50,(function(){for(var M=String.fromCharCode,W=0;W<256;W++)F[W]=M(W)})(),e=q(I,O),t=q(P,V),r=q(B,R),i=q(Y,ie),(function(){for(var M=1,W=2,K=1;K<=15;K++){for(var G=M;G<W;G++)x[32767+G]=K,p[32767+G]=[],p[32767+G][1]=K,p[32767+G][0]=G;for(var te=-(W-1);te<=-M;te++)x[32767+te]=K,p[32767+te]=[],p[32767+te][1]=K,p[32767+te][0]=W-1+te;M<<=1,W<<=1}})(),(function(){for(var M=0;M<256;M++)z[M]=19595*M,z[M+256>>0]=38470*M,z[M+512>>0]=7471*M+32768,z[M+768>>0]=-11059*M,z[M+1024>>0]=-21709*M,z[M+1280>>0]=32768*M+8421375,z[M+1536>>0]=-27439*M,z[M+1792>>0]=-5329*M})(),re(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Sc(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function GD(n){function e(I){if(!I)throw Error("assert :P")}function t(I,O,B){for(var R=0;4>R;R++)if(I[O+R]!=B.charCodeAt(R))return!0;return!1}function r(I,O,B,R,P){for(var V=0;V<P;V++)I[O+V]=B[R+V]}function i(I,O,B,R){for(var P=0;P<R;P++)I[O+P]=B}function s(I){return new Int32Array(I)}function a(I,O){for(var B=[],R=0;R<I;R++)B.push(new O);return B}function o(I,O){var B=[];return(function R(P,V,Y){for(var ie=Y[V],q=0;q<ie&&(P.push(Y.length>V+1?[]:new O),!(Y.length<V+1));q++)R(P[q],V+1,Y)})(B,0,I),B}var c=function(){var I=this;function O(w,D){for(var H=1<<D-1>>>0;w&H;)H>>>=1;return H?(w&H-1)+H:w}function B(w,D,H,X,ae){e(!(X%H));do w[D+(X-=H)]=ae;while(0<X)}function R(w,D,H,X,ae){if(e(2328>=ae),512>=ae)var ce=s(512);else if((ce=s(ae))==null)return 0;return(function(ue,fe,ge,Se,Re,Qe){var Xe,Me,pt=fe,st=1<<ge,Pe=s(16),Le=s(16);for(e(Re!=0),e(Se!=null),e(ue!=null),e(0<ge),Me=0;Me<Re;++Me){if(15<Se[Me])return 0;++Pe[Se[Me]]}if(Pe[0]==Re)return 0;for(Le[1]=0,Xe=1;15>Xe;++Xe){if(Pe[Xe]>1<<Xe)return 0;Le[Xe+1]=Le[Xe]+Pe[Xe]}for(Me=0;Me<Re;++Me)Xe=Se[Me],0<Se[Me]&&(Qe[Le[Xe]++]=Me);if(Le[15]==1)return(Se=new P).g=0,Se.value=Qe[0],B(ue,pt,1,st,Se),st;var dt,_t=-1,ft=st-1,Yt=0,Vt=1,un=1,Ht=1<<ge;for(Me=0,Xe=1,Re=2;Xe<=ge;++Xe,Re<<=1){if(Vt+=un<<=1,0>(un-=Pe[Xe]))return 0;for(;0<Pe[Xe];--Pe[Xe])(Se=new P).g=Xe,Se.value=Qe[Me++],B(ue,pt+Yt,Re,Ht,Se),Yt=O(Yt,Xe)}for(Xe=ge+1,Re=2;15>=Xe;++Xe,Re<<=1){if(Vt+=un<<=1,0>(un-=Pe[Xe]))return 0;for(;0<Pe[Xe];--Pe[Xe]){if(Se=new P,(Yt&ft)!=_t){for(pt+=Ht,dt=1<<(_t=Xe)-ge;15>_t&&!(0>=(dt-=Pe[_t]));)++_t,dt<<=1;st+=Ht=1<<(dt=_t-ge),ue[fe+(_t=Yt&ft)].g=dt+ge,ue[fe+_t].value=pt-fe-_t}Se.g=Xe-ge,Se.value=Qe[Me++],B(ue,pt+(Yt>>ge),Re,Ht,Se),Yt=O(Yt,Xe)}}return Vt!=2*Le[15]-1?0:st})(w,D,H,X,ae,ce)}function P(){this.value=this.g=0}function V(){this.value=this.g=0}function Y(){this.G=a(5,P),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(sa,V)}function ie(w,D,H,X){e(w!=null),e(D!=null),e(2147483648>X),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=D,w.pa=H,w.Jd=D,w.Yc=H+X,w.Zc=4<=X?H+X-4+1:H,he(w)}function q(w,D){for(var H=0;0<D--;)H|=be(w,128)<<D;return H}function Q(w,D){var H=q(w,D);return ye(w)?-H:H}function se(w,D,H,X){var ae,ce=0;for(e(w!=null),e(D!=null),e(4294967288>X),w.Sb=X,w.Ra=0,w.u=0,w.h=0,4<X&&(X=4),ae=0;ae<X;++ae)ce+=D[H+ae]<<8*ae;w.Ra=ce,w.bb=X,w.oa=D,w.pa=H}function J(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Qc-8>>>0,++w.bb,w.u-=8;K(w)&&(w.h=1,w.u=0)}function me(w,D){if(e(0<=D),!w.h&&D<=Xc){var H=W(w)&Ku[D];return w.u+=D,J(w),H}return w.h=1,w.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function W(w){return w.Ra>>>(w.u&Qc-1)>>>0}function K(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Qc}function G(w,D){w.u=D,w.h=K(w)}function te(w){w.u>=Xh&&(e(w.u>=Xh),J(w))}function he(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ye(w){return q(w,1)}function be(w,D){var H=w.Ca;0>w.b&&he(w);var X=w.b,ae=H*D>>>8,ce=(w.I>>>X>ae)+0;for(ce?(H-=ae,w.I-=ae+1<<X>>>0):H=ae+1,X=H,ae=0;256<=X;)ae+=8,X>>=8;return X=7^ae+aa[X],w.b-=X,w.Ca=(H<<X)-1,ce}function Ce(w,D,H){w[D+0]=H>>24&255,w[D+1]=H>>16&255,w[D+2]=H>>8&255,w[D+3]=H>>0&255}function ke(w,D){return w[D+0]<<0|w[D+1]<<8}function oe(w,D){return ke(w,D)|w[D+2]<<16}function qe(w,D){return ke(w,D)|ke(w,D+2)<<16}function at(w,D){var H=1<<D;return e(w!=null),e(0<D),w.X=s(H),w.X==null?0:(w.Mb=32-D,w.Xa=D,1)}function Fe(w,D){e(w!=null),e(D!=null),e(w.Xa==D.Xa),r(D.X,0,w.X,0,1<<D.Xa)}function _e(){this.X=[],this.Xa=this.Mb=0}function Be(w,D,H,X){e(H!=null),e(X!=null);var ae=H[0],ce=X[0];return ae==0&&(ae=(w*ce+D/2)/D),ce==0&&(ce=(D*ae+w/2)/w),0>=ae||0>=ce?0:(H[0]=ae,X[0]=ce,1)}function lt(w,D){return w+(1<<D)-1>>>D}function Ke(w,D){return((4278255360&w)+(4278255360&D)>>>0&4278255360)+((16711935&w)+(16711935&D)>>>0&16711935)>>>0}function We(w,D){I[D]=function(H,X,ae,ce,ue,fe,ge){var Se;for(Se=0;Se<ue;++Se){var Re=I[w](fe[ge+Se-1],ae,ce+Se);fe[ge+Se]=Ke(H[X+Se],Re)}}}function Et(){this.ud=this.hd=this.jd=0}function Oe(w,D){return((4278124286&(w^D))>>>1)+(w&D)>>>0}function Dt(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Rt(w,D){return Dt(w+(w-D+.5>>1))}function Wt(w,D,H){return Math.abs(D-H)-Math.abs(w-H)}function Jt(w,D,H,X,ae,ce,ue){for(X=ce[ue-1],H=0;H<ae;++H)ce[ue+H]=X=Ke(w[D+H],X)}function yn(w,D,H,X,ae){var ce;for(ce=0;ce<H;++ce){var ue=w[D+ce],fe=ue>>8&255,ge=16711935&(ge=(ge=16711935&ue)+((fe<<16)+fe));X[ae+ce]=(4278255360&ue)+ge>>>0}}function ln(w,D){D.jd=w>>0&255,D.hd=w>>8&255,D.ud=w>>16&255}function Zt(w,D,H,X,ae,ce){var ue;for(ue=0;ue<X;++ue){var fe=D[H+ue],ge=fe>>>8,Se=fe,Re=255&(Re=(Re=fe>>>16)+((w.jd<<24>>24)*(ge<<24>>24)>>>5));Se=255&(Se=(Se=Se+((w.hd<<24>>24)*(ge<<24>>24)>>>5))+((w.ud<<24>>24)*(Re<<24>>24)>>>5)),ae[ce+ue]=(4278255360&fe)+(Re<<16)+Se}}function Ft(w,D,H,X,ae){I[D]=function(ce,ue,fe,ge,Se,Re,Qe,Xe,Me){for(ge=Qe;ge<Xe;++ge)for(Qe=0;Qe<Me;++Qe)Se[Re++]=ae(fe[X(ce[ue++])])},I[w]=function(ce,ue,fe,ge,Se,Re,Qe){var Xe=8>>ce.b,Me=ce.Ea,pt=ce.K[0],st=ce.w;if(8>Xe)for(ce=(1<<ce.b)-1,st=(1<<Xe)-1;ue<fe;++ue){var Pe,Le=0;for(Pe=0;Pe<Me;++Pe)Pe&ce||(Le=X(ge[Se++])),Re[Qe++]=ae(pt[Le&st]),Le>>=Xe}else I["VP8LMapColor"+H](ge,Se,pt,st,Re,Qe,ue,fe,Me)}}function At(w,D,H,X,ae){for(H=D+H;D<H;){var ce=w[D++];X[ae++]=ce>>16&255,X[ae++]=ce>>8&255,X[ae++]=ce>>0&255}}function De(w,D,H,X,ae){for(H=D+H;D<H;){var ce=w[D++];X[ae++]=ce>>16&255,X[ae++]=ce>>8&255,X[ae++]=ce>>0&255,X[ae++]=ce>>24&255}}function nt(w,D,H,X,ae){for(H=D+H;D<H;){var ce=(ue=w[D++])>>16&240|ue>>12&15,ue=ue>>0&240|ue>>28&15;X[ae++]=ce,X[ae++]=ue}}function ct(w,D,H,X,ae){for(H=D+H;D<H;){var ce=(ue=w[D++])>>16&248|ue>>13&7,ue=ue>>5&224|ue>>3&31;X[ae++]=ce,X[ae++]=ue}}function Nt(w,D,H,X,ae){for(H=D+H;D<H;){var ce=w[D++];X[ae++]=ce>>0&255,X[ae++]=ce>>8&255,X[ae++]=ce>>16&255}}function gt(w,D,H,X,ae,ce){if(ce==0)for(H=D+H;D<H;)Ce(X,((ce=w[D++])[0]>>24|ce[1]>>8&65280|ce[2]<<8&16711680|ce[3]<<24)>>>0),ae+=32;else r(X,ae,w,D,H)}function $t(w,D){I[D][0]=I[w+"0"],I[D][1]=I[w+"1"],I[D][2]=I[w+"2"],I[D][3]=I[w+"3"],I[D][4]=I[w+"4"],I[D][5]=I[w+"5"],I[D][6]=I[w+"6"],I[D][7]=I[w+"7"],I[D][8]=I[w+"8"],I[D][9]=I[w+"9"],I[D][10]=I[w+"10"],I[D][11]=I[w+"11"],I[D][12]=I[w+"12"],I[D][13]=I[w+"13"],I[D][14]=I[w+"0"],I[D][15]=I[w+"0"]}function wt(w){return w==Rd||w==hm||w==ef||w==fm}function In(){this.eb=[],this.size=this.A=this.fb=0}function Ne(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function tt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new In,this.f.kb=new Ne,this.sd=null}function Pt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function kt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function St(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function jt(w,D){var H=w.T,X=D.ba.f.RGBA,ae=X.eb,ce=X.fb+w.ka*X.A,ue=Is[D.ba.S],fe=w.y,ge=w.O,Se=w.f,Re=w.N,Qe=w.ea,Xe=w.W,Me=D.cc,pt=D.dc,st=D.Mc,Pe=D.Nc,Le=w.ka,dt=w.ka+w.T,_t=w.U,ft=_t+1>>1;for(Le==0?ue(fe,ge,null,null,Se,Re,Qe,Xe,Se,Re,Qe,Xe,ae,ce,null,null,_t):(ue(D.ec,D.fc,fe,ge,Me,pt,st,Pe,Se,Re,Qe,Xe,ae,ce-X.A,ae,ce,_t),++H);Le+2<dt;Le+=2)Me=Se,pt=Re,st=Qe,Pe=Xe,Re+=w.Rc,Xe+=w.Rc,ce+=2*X.A,ue(fe,(ge+=2*w.fa)-w.fa,fe,ge,Me,pt,st,Pe,Se,Re,Qe,Xe,ae,ce-X.A,ae,ce,_t);return ge+=w.fa,w.j+dt<w.o?(r(D.ec,D.fc,fe,ge,_t),r(D.cc,D.dc,Se,Re,ft),r(D.Mc,D.Nc,Qe,Xe,ft),H--):1&dt||ue(fe,ge,null,null,Se,Re,Qe,Xe,Se,Re,Qe,Xe,ae,ce+X.A,null,null,_t),H}function Fn(w,D,H){var X=w.F,ae=[w.J];if(X!=null){var ce=w.U,ue=D.ba.S,fe=ue==Dd||ue==ef;D=D.ba.f.RGBA;var ge=[0],Se=w.ka;ge[0]=w.T,w.Kb&&(Se==0?--ge[0]:(--Se,ae[0]-=w.width),w.j+w.ka+w.T==w.o&&(ge[0]=w.o-w.j-Se));var Re=D.eb;Se=D.fb+Se*D.A,w=Yu(X,ae[0],w.width,ce,ge,Re,Se+(fe?0:3),D.A),e(H==ge),w&&wt(ue)&&Rl(Re,Se,fe,ce,ge,D.A)}return 0}function hn(w){var D=w.ma,H=D.ba.S,X=11>H,ae=H==Gs||H==So||H==Dd||H==Zh||H==12||wt(H);if(D.memory=null,D.Ib=null,D.Jb=null,D.Nd=null,!lc(D.Oa,w,ae?11:12))return 0;if(ae&&wt(H)&&Ve(),w.da)alert("todo:use_scaling");else{if(X){if(D.Ib=St,w.Kb){if(H=w.U+1>>1,D.memory=s(w.U+2*H),D.memory==null)return 0;D.ec=D.memory,D.fc=0,D.cc=D.ec,D.dc=D.fc+w.U,D.Mc=D.cc,D.Nc=D.dc+H,D.Ib=jt,Ve()}}else alert("todo:EmitYUV");ae&&(D.Jb=Fn,X&&pe())}if(X&&!ou){for(w=0;256>w;++w)Ds[w]=89858*(w-128)+rf>>ko,T_[w]=-22014*(w-128)+rf,_v[w]=-45773*(w-128),xm[w]=113618*(w-128)+rf>>ko;for(w=Zu;w<au;++w)D=76283*(w-16)+rf>>ko,E_[w-Zu]=Ja(D,255),A_[w-Zu]=Ja(D+8>>4,15);ou=1}return 1}function nr(w){var D=w.ma,H=w.U,X=w.T;return e(!(1&w.ka)),0>=H||0>=X?0:(H=D.Ib(w,D),D.Jb!=null&&D.Jb(w,D,H),D.Dc+=H,1)}function Tr(w){w.ma.memory=null}function sn(w,D,H,X){return me(w,8)!=47?0:(D[0]=me(w,14)+1,H[0]=me(w,14)+1,X[0]=me(w,1),me(w,3)!=0?0:!w.h)}function Br(w,D){if(4>w)return w+1;var H=w-2>>1;return(2+(1&w)<<H)+me(D,H)+1}function Ar(w,D){return 120<D?D-120:1<=(H=((H=Eo[D-1])>>4)*w+(8-(15&H)))?H:1;var H}function ei(w,D,H){var X=W(H),ae=w[D+=255&X].g-8;return 0<ae&&(G(H,H.u+8),X=W(H),D+=w[D].value,D+=X&(1<<ae)-1),G(H,H.u+w[D].g),w[D].value}function Er(w,D,H){return H.g+=w.g,H.value+=w.value<<D>>>0,e(8>=H.g),w.g}function sr(w,D,H){var X=w.xc;return e((D=X==0?0:w.vc[w.md*(H>>X)+(D>>X)])<w.Wb),w.Ya[D]}function le(w,D,H,X){var ae=w.ab,ce=w.c*D,ue=w.C;D=ue+D;var fe=H,ge=X;for(X=w.Ta,H=w.Ua;0<ae--;){var Se=w.gc[ae],Re=ue,Qe=D,Xe=fe,Me=ge,pt=(ge=X,fe=H,Se.Ea);switch(e(Re<Qe),e(Qe<=Se.nc),Se.hc){case 2:am(Xe,Me,(Qe-Re)*pt,ge,fe);break;case 0:var st=Re,Pe=Qe,Le=ge,dt=fe,_t=(Ht=Se).Ea;st==0&&(sm(Xe,Me,null,null,1,Le,dt),Jt(Xe,Me+1,0,0,_t-1,Le,dt+1),Me+=_t,dt+=_t,++st);for(var ft=1<<Ht.b,Yt=ft-1,Vt=lt(_t,Ht.b),un=Ht.K,Ht=Ht.w+(st>>Ht.b)*Vt;st<Pe;){var lr=un,Gn=Ht,Xn=1;for(Ad(Xe,Me,Le,dt-_t,1,Le,dt);Xn<_t;){var Dn=(Xn&~Yt)+ft;Dn>_t&&(Dn=_t),(0,yo[lr[Gn++]>>8&15])(Xe,Me+ +Xn,Le,dt+Xn-_t,Dn-Xn,Le,dt+Xn),Xn=Dn}Me+=_t,dt+=_t,++st&Yt||(Ht+=Vt)}Qe!=Se.nc&&r(ge,fe-pt,ge,fe+(Qe-Re-1)*pt,pt);break;case 1:for(pt=Xe,Pe=Me,_t=(Xe=Se.Ea)-(dt=Xe&~(Le=(Me=1<<Se.b)-1)),st=lt(Xe,Se.b),ft=Se.K,Se=Se.w+(Re>>Se.b)*st;Re<Qe;){for(Yt=ft,Vt=Se,un=new Et,Ht=Pe+dt,lr=Pe+Xe;Pe<Ht;)ln(Yt[Vt++],un),Za(un,pt,Pe,Me,ge,fe),Pe+=Me,fe+=Me;Pe<lr&&(ln(Yt[Vt++],un),Za(un,pt,Pe,_t,ge,fe),Pe+=_t,fe+=_t),++Re&Le||(Se+=st)}break;case 3:if(Xe==ge&&Me==fe&&0<Se.b){for(Pe=ge,Xe=pt=fe+(Qe-Re)*pt-(dt=(Qe-Re)*lt(Se.Ea,Se.b)),Me=ge,Le=fe,st=[],dt=(_t=dt)-1;0<=dt;--dt)st[dt]=Me[Le+dt];for(dt=_t-1;0<=dt;--dt)Pe[Xe+dt]=st[dt];rl(Se,Re,Qe,ge,pt,ge,fe)}else rl(Se,Re,Qe,Xe,Me,ge,fe)}fe=X,ge=H}ge!=H&&r(X,H,fe,ge,ce)}function Te(w,D){var H=w.V,X=w.Ba+w.c*w.C,ae=D-w.C;if(e(D<=w.l.o),e(16>=ae),0<ae){var ce=w.l,ue=w.Ta,fe=w.Ua,ge=ce.width;if(le(w,ae,H,X),ae=fe=[fe],e((H=w.C)<(X=D)),e(ce.v<ce.va),X>ce.o&&(X=ce.o),H<ce.j){var Se=ce.j-H;H=ce.j,ae[0]+=Se*ge}if(H>=X?H=0:(ae[0]+=4*ce.v,ce.ka=H-ce.j,ce.U=ce.va-ce.v,ce.T=X-H,H=1),H){if(fe=fe[0],11>(H=w.ca).S){var Re=H.f.RGBA,Qe=(X=H.S,ae=ce.U,ce=ce.T,Se=Re.eb,Re.A),Xe=ce;for(Re=Re.fb+w.Ma*Re.A;0<Xe--;){var Me=ue,pt=fe,st=ae,Pe=Se,Le=Re;switch(X){case cm:bo(Me,pt,st,Pe,Le);break;case Gs:uc(Me,pt,st,Pe,Le);break;case Rd:uc(Me,pt,st,Pe,Le),Rl(Pe,Le,0,st,1,0);break;case um:Qh(Me,pt,st,Pe,Le);break;case So:gt(Me,pt,st,Pe,Le,1);break;case hm:gt(Me,pt,st,Pe,Le,1),Rl(Pe,Le,0,st,1,0);break;case Dd:gt(Me,pt,st,Pe,Le,0);break;case ef:gt(Me,pt,st,Pe,Le,0),Rl(Pe,Le,1,st,1,0);break;case Zh:il(Me,pt,st,Pe,Le);break;case fm:il(Me,pt,st,Pe,Le),qs(Pe,Le,st,1,0);break;case tu:sl(Me,pt,st,Pe,Le);break;default:e(0)}fe+=ge,Re+=Qe}w.Ma+=ce}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=H.height)}}w.C=D,e(w.C<=w.i)}function xe(w){var D;if(0<w.ua)return 0;for(D=0;D<w.Wb;++D){var H=w.Ya[D].G,X=w.Ya[D].H;if(0<H[1][X[1]+0].g||0<H[2][X[2]+0].g||0<H[3][X[3]+0].g)return 0}return 1}function ve(w,D,H,X,ae,ce){if(w.Z!=0){var ue=w.qd,fe=w.rd;for(e(dc[w.Z]!=null);D<H;++D)dc[w.Z](ue,fe,X,ae,X,ae,ce),ue=X,fe=ae,ae+=ce;w.qd=ue,w.rd=fe}}function we(w,D){var H=w.l.ma,X=H.Z==0||H.Z==1?w.l.j:w.C;if(X=w.C<X?X:w.C,e(D<=w.l.o),D>X){var ae=w.l.width,ce=H.ca,ue=H.tb+ae*X,fe=w.V,ge=w.Ba+w.c*X,Se=w.gc;e(w.ab==1),e(Se[0].hc==3),ug(Se[0],X,D,fe,ge,ce,ue),ve(H,X,D,ce,ue,ae)}w.C=w.Ma=D}function Ee(w,D,H,X,ae,ce,ue){var fe=w.$/X,ge=w.$%X,Se=w.m,Re=w.s,Qe=H+w.$,Xe=Qe;ae=H+X*ae;var Me=H+X*ce,pt=280+Re.ua,st=w.Pb?fe:16777216,Pe=0<Re.ua?Re.Wa:null,Le=Re.wc,dt=Qe<Me?sr(Re,ge,fe):null;e(w.C<ce),e(Me<=ae);var _t=!1;e:for(;;){for(;_t||Qe<Me;){var ft=0;if(fe>=st){var Yt=Qe-H;e((st=w).Pb),st.wd=st.m,st.xd=Yt,0<st.s.ua&&Fe(st.s.Wa,st.s.vb),st=fe+nu}if(ge&Le||(dt=sr(Re,ge,fe)),e(dt!=null),dt.Qb&&(D[Qe]=dt.qb,_t=!0),!_t)if(te(Se),dt.jc){ft=Se,Yt=D;var Vt=Qe,un=dt.pd[W(ft)&sa-1];e(dt.jc),256>un.g?(G(ft,ft.u+un.g),Yt[Vt]=un.value,ft=0):(G(ft,ft.u+un.g-256),e(256<=un.value),ft=un.value),ft==0&&(_t=!0)}else ft=ei(dt.G[0],dt.H[0],Se);if(Se.h)break;if(_t||256>ft){if(!_t)if(dt.nd)D[Qe]=(dt.qb|ft<<8)>>>0;else{if(te(Se),_t=ei(dt.G[1],dt.H[1],Se),te(Se),Yt=ei(dt.G[2],dt.H[2],Se),Vt=ei(dt.G[3],dt.H[3],Se),Se.h)break;D[Qe]=(Vt<<24|_t<<16|ft<<8|Yt)>>>0}if(_t=!1,++Qe,++ge>=X&&(ge=0,++fe,ue!=null&&fe<=ce&&!(fe%16)&&ue(w,fe),Pe!=null))for(;Xe<Qe;)ft=D[Xe++],Pe.X[(506832829*ft&4294967295)>>>Pe.Mb]=ft}else if(280>ft){if(ft=Br(ft-256,Se),Yt=ei(dt.G[4],dt.H[4],Se),te(Se),Yt=Ar(X,Yt=Br(Yt,Se)),Se.h)break;if(Qe-H<Yt||ae-Qe<ft)break e;for(Vt=0;Vt<ft;++Vt)D[Qe+Vt]=D[Qe+Vt-Yt];for(Qe+=ft,ge+=ft;ge>=X;)ge-=X,++fe,ue!=null&&fe<=ce&&!(fe%16)&&ue(w,fe);if(e(Qe<=ae),ge&Le&&(dt=sr(Re,ge,fe)),Pe!=null)for(;Xe<Qe;)ft=D[Xe++],Pe.X[(506832829*ft&4294967295)>>>Pe.Mb]=ft}else{if(!(ft<pt))break e;for(_t=ft-280,e(Pe!=null);Xe<Qe;)ft=D[Xe++],Pe.X[(506832829*ft&4294967295)>>>Pe.Mb]=ft;ft=Qe,e(!(_t>>>(Yt=Pe).Xa)),D[ft]=Yt.X[_t],_t=!0}_t||e(Se.h==K(Se))}if(w.Pb&&Se.h&&Qe<ae)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Fe(w.s.vb,w.s.Wa);else{if(Se.h)break e;ue!=null&&ue(w,fe>ce?ce:fe),w.a=0,w.$=Qe-H}return 1}return w.a=3,0}function Ue(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var D=w.Wa;D!=null&&(D.X=null),w.vb=null,e(w!=null)}function rt(){var w=new $h;return w==null?null:(w.a=0,w.xb=fg,$t("Predictor","VP8LPredictors"),$t("Predictor","VP8LPredictors_C"),$t("PredictorAdd","VP8LPredictorsAdd"),$t("PredictorAdd","VP8LPredictorsAdd_C"),am=yn,Za=Zt,bo=At,uc=De,il=nt,sl=ct,Qh=Nt,I.VP8LMapColor32b=Nd,I.VP8LMapColor8b=oa,w)}function He(w,D,H,X,ae){var ce=1,ue=[w],fe=[D],ge=X.m,Se=X.s,Re=null,Qe=0;e:for(;;){if(H)for(;ce&&me(ge,1);){var Xe=ue,Me=fe,pt=X,st=1,Pe=pt.m,Le=pt.gc[pt.ab],dt=me(Pe,2);if(pt.Oc&1<<dt)ce=0;else{switch(pt.Oc|=1<<dt,Le.hc=dt,Le.Ea=Xe[0],Le.nc=Me[0],Le.K=[null],++pt.ab,e(4>=pt.ab),dt){case 0:case 1:Le.b=me(Pe,3)+2,st=He(lt(Le.Ea,Le.b),lt(Le.nc,Le.b),0,pt,Le.K),Le.K=Le.K[0];break;case 3:var _t,ft=me(Pe,8)+1,Yt=16<ft?0:4<ft?1:2<ft?2:3;if(Xe[0]=lt(Le.Ea,Yt),Le.b=Yt,_t=st=He(ft,1,0,pt,Le.K)){var Vt,un=ft,Ht=Le,lr=1<<(8>>Ht.b),Gn=s(lr);if(Gn==null)_t=0;else{var Xn=Ht.K[0],Dn=Ht.w;for(Gn[0]=Ht.K[0][0],Vt=1;Vt<1*un;++Vt)Gn[Vt]=Ke(Xn[Dn+Vt],Gn[Vt-1]);for(;Vt<4*lr;++Vt)Gn[Vt]=0;Ht.K[0]=null,Ht.K[0]=Gn,_t=1}}st=_t;break;case 2:break;default:e(0)}ce=st}}if(ue=ue[0],fe=fe[0],ce&&me(ge,1)&&!(ce=1<=(Qe=me(ge,4))&&11>=Qe)){X.a=3;break e}var _r;if(_r=ce)t:{var gr,bn,Nr,hs=X,xi=ue,$s=fe,ir=Qe,Rs=H,Ta=hs.m,Yi=hs.s,vi=[null],fs=1,ro=0,Io=Ao[ir];n:for(;;){if(Rs&&me(Ta,1)){var Oi=me(Ta,3)+2,Ii=lt(xi,Oi),ds=lt($s,Oi),io=Ii*ds;if(!He(Ii,ds,0,hs,vi))break n;for(vi=vi[0],Yi.xc=Oi,gr=0;gr<io;++gr){var jl=vi[gr]>>8&65535;vi[gr]=jl,jl>=fs&&(fs=jl+1)}}if(Ta.h)break n;for(bn=0;5>bn;++bn){var oi=Qu[bn];!bn&&0<ir&&(oi+=1<<ir),ro<oi&&(ro=oi)}var Ll=a(fs*Io,P),Ea=fs,yi=a(Ea,Y);if(yi==null)var eh=null;else e(65536>=Ea),eh=yi;var so=s(ro);if(eh==null||so==null||Ll==null){hs.a=1;break n}var Cn=Ll;for(gr=Nr=0;gr<fs;++gr){var Bn=eh[gr],Yr=Bn.G,mc=Bn.H,th=0,Ol=1,Od=0;for(bn=0;5>bn;++bn){oi=Qu[bn],Yr[bn]=Cn,mc[bn]=Nr,!bn&&0<ir&&(oi+=1<<ir);i:{var lu,cu=oi,ym=hs,Hr=so,mg=Cn,pg=Nr,bm=0,pc=ym.m,N_=me(pc,1);if(i(Hr,0,0,cu),N_){var gg=me(pc,1)+1,xg=me(pc,1),_m=me(pc,xg==0?1:8);Hr[_m]=1,gg==2&&(Hr[_m=me(pc,8)]=1);var ms=1}else{var bi=s(19),Md=me(pc,4)+4;if(19<Md){ym.a=3;var uu=0;break i}for(lu=0;lu<Md;++lu)bi[Pd[lu]]=me(pc,3);var af=void 0,nh=void 0,Ml=ym,wm=bi,of=cu,Sm=Hr,Tm=0,gc=Ml.m,vg=8,yg=a(128,P);r:for(;R(yg,0,7,wm,19);){if(me(gc,1)){var wv=2+2*me(gc,3);if((af=2+me(gc,wv))>of)break r}else af=of;for(nh=0;nh<of&&af--;){te(gc);var bg=yg[0+(127&W(gc))];G(gc,gc.u+bg.g);var hu=bg.value;if(16>hu)Sm[nh++]=hu,hu!=0&&(vg=hu);else{var Sv=hu==16,Tv=hu-16,Ev=tf[Tv],_g=me(gc,To[Tv])+Ev;if(nh+_g>of)break r;for(var Av=Sv?vg:0;0<_g--;)Sm[nh++]=Av}}Tm=1;break r}Tm||(Ml.a=3),ms=Tm}(ms=ms&&!pc.h)&&(bm=R(mg,pg,8,Hr,cu)),ms&&bm!=0?uu=bm:(ym.a=3,uu=0)}if(uu==0)break n;if(Ol&&dm[bn]==1&&(Ol=Cn[Nr].g==0),th+=Cn[Nr].g,Nr+=uu,3>=bn){var rh,Em=so[0];for(rh=1;rh<oi;++rh)so[rh]>Em&&(Em=so[rh]);Od+=Em}}if(Bn.nd=Ol,Bn.Qb=0,Ol&&(Bn.qb=(Yr[3][mc[3]+0].value<<24|Yr[1][mc[1]+0].value<<16|Yr[2][mc[2]+0].value)>>>0,th==0&&256>Yr[0][mc[0]+0].value&&(Bn.Qb=1,Bn.qb+=Yr[0][mc[0]+0].value<<8)),Bn.jc=!Bn.Qb&&6>Od,Bn.jc){var Fd,Fl=Bn;for(Fd=0;Fd<sa;++Fd){var xc=Fd,vc=Fl.pd[xc],Am=Fl.G[0][Fl.H[0]+xc];256<=Am.value?(vc.g=Am.g+256,vc.value=Am.value):(vc.g=0,vc.value=0,xc>>=Er(Am,8,vc),xc>>=Er(Fl.G[1][Fl.H[1]+xc],16,vc),xc>>=Er(Fl.G[2][Fl.H[2]+xc],0,vc),Er(Fl.G[3][Fl.H[3]+xc],24,vc))}}}Yi.vc=vi,Yi.Wb=fs,Yi.Ya=eh,Yi.yc=Ll,_r=1;break t}_r=0}if(!(ce=_r)){X.a=3;break e}if(0<Qe){if(Se.ua=1<<Qe,!at(Se.Wa,Qe)){X.a=1,ce=0;break e}}else Se.ua=0;var Nm=X,ih=ue,Nv=fe,lf=Nm.s,cf=lf.xc;if(Nm.c=ih,Nm.i=Nv,lf.md=lt(ih,cf),lf.wc=cf==0?-1:(1<<cf)-1,H){X.xb=ru;break e}if((Re=s(ue*fe))==null){X.a=1,ce=0;break e}ce=(ce=Ee(X,Re,0,ue,fe,fe,null))&&!ge.h;break e}return ce?(ae!=null?ae[0]=Re:(e(Re==null),e(H)),X.$=0,H||Ue(Se)):Ue(Se),ce}function $e(w,D){var H=w.c*w.i,X=H+D+16*D;return e(w.c<=D),w.V=s(X),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+H+D,1)}function Ye(w,D){var H=w.C,X=D-H,ae=w.V,ce=w.Ba+w.c*H;for(e(D<=w.l.o);0<X;){var ue=16<X?16:X,fe=w.l.ma,ge=w.l.width,Se=ge*ue,Re=fe.ca,Qe=fe.tb+ge*H,Xe=w.Ta,Me=w.Ua;le(w,ue,ae,ce),to(Xe,Me,Re,Qe,Se),ve(fe,H,H+ue,Re,Qe,ge),X-=ue,ae+=ue*w.c,H+=ue}e(H==D),w.C=w.Ma=D}function yt(){this.ub=this.yd=this.td=this.Rb=0}function It(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Lt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function bt(){this.Yb=(function(){var w=[];return(function D(H,X,ae){for(var ce=ae[X],ue=0;ue<ce&&(H.push(ae.length>X+1?[]:0),!(ae.length<X+1));ue++)D(H[ue],X+1,ae)})(w,0,[3,11]),w})()}function Ot(){this.jb=s(3),this.Wc=o([4,8],bt),this.Xc=o([4,17],bt)}function Qt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Un(){this.ld=this.La=this.dd=this.tc=0}function gn(){this.Na=this.la=0}function Hn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ti(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function xa(){this.uc=this.M=this.Nb=0,this.wa=Array(new Un),this.Y=0,this.ya=Array(new ti),this.aa=0,this.l=new ea}function zs(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ki(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new yt,this.Kc=new It,this.ed=new Qt,this.Qa=new Lt,this.Ic=this.$c=this.Aa=0,this.D=new xa,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,re),this.ia=0,this.pb=a(4,Hn),this.Pa=new Ot,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zs),this.Hd=0,this.rb=Array(new gn),this.sb=0,this.wa=Array(new Un),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ti),this.L=this.aa=0,this.gd=o([4,2],Un),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ea(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ls(){var w=new Ki;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,no||(no=Ko)),w}function rr(w,D,H){return w.a==0&&(w.a=D,w.sc=H,w.cb=0),0}function si(w,D,H){return 3<=H&&w[D+0]==157&&w[D+1]==1&&w[D+2]==42}function Ei(w,D){if(w==null)return 0;if(w.a=0,w.sc="OK",D==null)return rr(w,2,"null VP8Io passed to VP8GetHeaders()");var H=D.data,X=D.w,ae=D.ha;if(4>ae)return rr(w,7,"Truncated header.");var ce=H[X+0]|H[X+1]<<8|H[X+2]<<16,ue=w.Od;if(ue.Rb=!(1&ce),ue.td=ce>>1&7,ue.yd=ce>>4&1,ue.ub=ce>>5,3<ue.td)return rr(w,3,"Incorrect keyframe parameters.");if(!ue.yd)return rr(w,4,"Frame not displayable.");X+=3,ae-=3;var fe=w.Kc;if(ue.Rb){if(7>ae)return rr(w,7,"cannot parse picture header");if(!si(H,X,ae))return rr(w,3,"Bad code word");fe.c=16383&(H[X+4]<<8|H[X+3]),fe.Td=H[X+4]>>6,fe.i=16383&(H[X+6]<<8|H[X+5]),fe.Ud=H[X+6]>>6,X+=7,ae-=7,w.za=fe.c+15>>4,w.Ub=fe.i+15>>4,D.width=fe.c,D.height=fe.i,D.Da=0,D.j=0,D.v=0,D.va=D.width,D.o=D.height,D.da=0,D.ib=D.width,D.hb=D.height,D.U=D.width,D.T=D.height,i((ce=w.Pa).jb,0,255,ce.jb.length),e((ce=w.Qa)!=null),ce.Cb=0,ce.Bb=0,ce.Fb=1,i(ce.Zb,0,0,ce.Zb.length),i(ce.Lb,0,0,ce.Lb)}if(ue.ub>ae)return rr(w,7,"bad partition length");ie(ce=w.m,H,X,ue.ub),X+=ue.ub,ae-=ue.ub,ue.Rb&&(fe.Ld=ye(ce),fe.Kd=ye(ce)),fe=w.Qa;var ge,Se=w.Pa;if(e(ce!=null),e(fe!=null),fe.Cb=ye(ce),fe.Cb){if(fe.Bb=ye(ce),ye(ce)){for(fe.Fb=ye(ce),ge=0;4>ge;++ge)fe.Zb[ge]=ye(ce)?Q(ce,7):0;for(ge=0;4>ge;++ge)fe.Lb[ge]=ye(ce)?Q(ce,6):0}if(fe.Bb)for(ge=0;3>ge;++ge)Se.jb[ge]=ye(ce)?q(ce,8):255}else fe.Bb=0;if(ce.Ka)return rr(w,3,"cannot parse segment header");if((fe=w.ed).zd=ye(ce),fe.Tb=q(ce,6),fe.wb=q(ce,3),fe.Pc=ye(ce),fe.Pc&&ye(ce)){for(Se=0;4>Se;++Se)ye(ce)&&(fe.vd[Se]=Q(ce,6));for(Se=0;4>Se;++Se)ye(ce)&&(fe.od[Se]=Q(ce,6))}if(w.L=fe.Tb==0?0:fe.zd?1:2,ce.Ka)return rr(w,3,"cannot parse filter header");var Re=ae;if(ae=ge=X,X=ge+Re,fe=Re,w.Xb=(1<<q(w.m,2))-1,Re<3*(Se=w.Xb))H=7;else{for(ge+=3*Se,fe-=3*Se,Re=0;Re<Se;++Re){var Qe=H[ae+0]|H[ae+1]<<8|H[ae+2]<<16;Qe>fe&&(Qe=fe),ie(w.Jc[+Re],H,ge,Qe),ge+=Qe,fe-=Qe,ae+=3}ie(w.Jc[+Se],H,ge,fe),H=ge<X?0:5}if(H!=0)return rr(w,H,"cannot parse partitions");for(H=q(ge=w.m,7),ae=ye(ge)?Q(ge,4):0,X=ye(ge)?Q(ge,4):0,fe=ye(ge)?Q(ge,4):0,Se=ye(ge)?Q(ge,4):0,ge=ye(ge)?Q(ge,4):0,Re=w.Qa,Qe=0;4>Qe;++Qe){if(Re.Cb){var Xe=Re.Zb[Qe];Re.Fb||(Xe+=H)}else{if(0<Qe){w.pb[Qe]=w.pb[0];continue}Xe=H}var Me=w.pb[Qe];Me.Sc[0]=No[Ja(Xe+ae,127)],Me.Sc[1]=Co[Ja(Xe+0,127)],Me.Eb[0]=2*No[Ja(Xe+X,127)],Me.Eb[1]=101581*Co[Ja(Xe+fe,127)]>>16,8>Me.Eb[1]&&(Me.Eb[1]=8),Me.Qc[0]=No[Ja(Xe+Se,117)],Me.Qc[1]=Co[Ja(Xe+ge,127)],Me.lc=Xe+ge}if(!ue.Rb)return rr(w,4,"Not a key frame.");for(ye(ce),ue=w.Pa,H=0;4>H;++H){for(ae=0;8>ae;++ae)for(X=0;3>X;++X)for(fe=0;11>fe;++fe)Se=be(ce,Kr[H][ae][X][fe])?q(ce,8):bv[H][ae][X][fe],ue.Wc[H][ae].Yb[X][fe]=Se;for(ae=0;17>ae;++ae)ue.Xc[H][ae]=ue.Wc[H][Wn[ae]]}return w.kc=ye(ce),w.kc&&(w.Bd=q(ce,8)),w.cb=1}function Ko(w,D,H,X,ae,ce,ue){var fe=D[ae].Yb[H];for(H=0;16>ae;++ae){if(!be(w,fe[H+0]))return ae;for(;!be(w,fe[H+1]);)if(fe=D[++ae].Yb[0],H=0,ae==16)return 16;var ge=D[ae+1].Yb;if(be(w,fe[H+2])){var Se=w,Re=0;if(be(Se,(Xe=fe)[(Qe=H)+3]))if(be(Se,Xe[Qe+6])){for(fe=0,Qe=2*(Re=be(Se,Xe[Qe+8]))+(Xe=be(Se,Xe[Qe+9+Re])),Re=0,Xe=yv[Qe];Xe[fe];++fe)Re+=Re+be(Se,Xe[fe]);Re+=3+(8<<Qe)}else be(Se,Xe[Qe+7])?(Re=7+2*be(Se,165),Re+=be(Se,145)):Re=5+be(Se,159);else Re=be(Se,Xe[Qe+4])?3+be(Se,Xe[Qe+5]):2;fe=ge[2]}else Re=1,fe=ge[1];ge=ue+hg[ae],0>(Se=w).b&&he(Se);var Qe,Xe=Se.b,Me=(Qe=Se.Ca>>1)-(Se.I>>Xe)>>31;--Se.b,Se.Ca+=Me,Se.Ca|=1,Se.I-=(Qe+1&Me)<<Xe,ce[ge]=((Re^Me)-Me)*X[(0<ae)+0]}return 16}function tc(w){var D=w.rb[w.sb-1];D.la=0,D.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function hr(w,D){if(w==null)return 0;if(D==null)return rr(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!Ei(w,D))return 0;if(e(w.cb),D.ac==null||D.ac(D)){D.ob&&(w.L=0);var H=sf[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=D.v-H>>4,w.zb=D.j-H>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=D.o+15+H>>4,w.Hb=D.va+15+H>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var X=w.ed;for(H=0;4>H;++H){var ae;if(w.Qa.Cb){var ce=w.Qa.Lb[H];w.Qa.Fb||(ce+=X.Tb)}else ce=X.Tb;for(ae=0;1>=ae;++ae){var ue=w.gd[H][ae],fe=ce;if(X.Pc&&(fe+=X.vd[0],ae&&(fe+=X.od[0])),0<(fe=0>fe?0:63<fe?63:fe)){var ge=fe;0<X.wb&&(ge=4<X.wb?ge>>2:ge>>1)>9-X.wb&&(ge=9-X.wb),1>ge&&(ge=1),ue.dd=ge,ue.tc=2*fe+ge,ue.ld=40<=fe?2:15<=fe?1:0}else ue.tc=0;ue.La=ae}}}H=0}else rr(w,6,"Frame setup failed"),H=w.a;if(H=H==0){if(H){w.$c=0,0<w.Aa||(w.Ic=Ld);e:{H=w.Ic,X=4*(ge=w.za);var Se=32*ge,Re=ge+1,Qe=0<w.L?ge*(0<w.Aa?2:1):0,Xe=(w.Aa==2?2:1)*ge;if((ue=X+832+(ae=3*(16*H+sf[w.L])/2*Se)+(ce=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=ue)H=0;else{if(ue>w.Vb){if(w.Vb=0,w.Ec=s(ue),w.Fc=0,w.Ec==null){H=rr(w,1,"no memory during frame initialization.");break e}w.Vb=ue}ue=w.Ec,fe=w.Fc,w.Ac=ue,w.Bc=fe,fe+=X,w.Gd=a(Se,zs),w.Hd=0,w.rb=a(Re+1,gn),w.sb=1,w.wa=Qe?a(Qe,Un):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=ge),e(!0),w.oc=ue,w.pc=fe,fe+=832,w.ya=a(Xe,ti),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=ge),w.R=16*ge,w.B=8*ge,ge=(Se=sf[w.L])*w.R,Se=Se/2*w.B,w.sa=ue,w.ta=fe+ge,w.qa=w.sa,w.ra=w.ta+16*H*w.R+Se,w.Ha=w.qa,w.Ia=w.ra+8*H*w.B+Se,w.$c=0,fe+=ae,w.mb=ce?ue:null,w.nb=ce?fe:null,e(fe+ce<=w.Fc+w.Vb),tc(w),i(w.Ac,w.Bc,0,X),H=1}}if(H){if(D.ka=0,D.y=w.sa,D.O=w.ta,D.f=w.qa,D.N=w.ra,D.ea=w.Ha,D.Vd=w.Ia,D.fa=w.R,D.Rc=w.B,D.F=null,D.J=0,!lm){for(H=-255;255>=H;++H)Xu[255+H]=0>H?-H:H;for(H=-1020;1020>=H;++H)om[1020+H]=-128>H?-128:127<H?127:H;for(H=-112;112>=H;++H)Cd[112+H]=-16>H?-16:15<H?15:H;for(H=-255;510>=H;++H)kd[255+H]=0>H?0:255<H?255:H;lm=1}Hs=Tl,Jc=qh,kl=Uc,_o=Sl,la=zu,hc=nc,wo=Wc,Zc=El,eu=Gh,Sa=Nl,Jh=ac,eo=Al,Il=Gc,zr=Gu,Ur=tl,Ci=wa,Li=As,Dl=qc,gi[0]=ra,gi[1]=Wh,gi[2]=go,gi[3]=sc,gi[4]=Yo,gi[5]=Ts,gi[6]=ya,gi[7]=Xo,gi[8]=xo,gi[9]=mr,ca[0]=ic,ca[1]=Hu,ca[2]=va,ca[3]=rc,ca[4]=Vr,ca[5]=qu,ca[6]=na,al[0]=ba,al[1]=Uu,al[2]=Wu,al[3]=Qo,al[4]=Es,al[5]=Zo,al[6]=Ai,H=1}else H=0}H&&(H=(function(Me,pt){for(Me.M=0;Me.M<Me.Va;++Me.M){var st,Pe=Me.Jc[Me.M&Me.Xb],Le=Me.m,dt=Me;for(st=0;st<dt.za;++st){var _t=Le,ft=dt,Yt=ft.Ac,Vt=ft.Bc+4*st,un=ft.zc,Ht=ft.ya[ft.aa+st];if(ft.Qa.Bb?Ht.$b=be(_t,ft.Pa.jb[0])?2+be(_t,ft.Pa.jb[2]):be(_t,ft.Pa.jb[1]):Ht.$b=0,ft.kc&&(Ht.Ad=be(_t,ft.Bd)),Ht.Za=!be(_t,145)+0,Ht.Za){var lr=Ht.Ob,Gn=0;for(ft=0;4>ft;++ft){var Xn,Dn=un[0+ft];for(Xn=0;4>Xn;++Xn){Dn=ks[Yt[Vt+Xn]][Dn];for(var _r=mm[be(_t,Dn[0])];0<_r;)_r=mm[2*_r+be(_t,Dn[_r])];Dn=-_r,Yt[Vt+Xn]=Dn}r(lr,Gn,Yt,Vt,4),Gn+=4,un[0+ft]=Dn}}else Dn=be(_t,156)?be(_t,128)?1:3:be(_t,163)?2:0,Ht.Ob[0]=Dn,i(Yt,Vt,Dn,4),i(un,0,Dn,4);Ht.Dd=be(_t,142)?be(_t,114)?be(_t,183)?1:3:2:0}if(dt.m.Ka)return rr(Me,7,"Premature end-of-partition0 encountered.");for(;Me.ja<Me.za;++Me.ja){if(dt=Pe,_t=(Le=Me).rb[Le.sb-1],Yt=Le.rb[Le.sb+Le.ja],st=Le.ya[Le.aa+Le.ja],Vt=Le.kc?st.Ad:0)_t.la=Yt.la=0,st.Za||(_t.Na=Yt.Na=0),st.Hc=0,st.Gc=0,st.ia=0;else{var gr,bn;if(_t=Yt,Yt=dt,Vt=Le.Pa.Xc,un=Le.ya[Le.aa+Le.ja],Ht=Le.pb[un.$b],ft=un.ad,lr=0,Gn=Le.rb[Le.sb-1],Dn=Xn=0,i(ft,lr,0,384),un.Za)var Nr=0,hs=Vt[3];else{_r=s(16);var xi=_t.Na+Gn.Na;if(xi=no(Yt,Vt[1],xi,Ht.Eb,0,_r,0),_t.Na=Gn.Na=(0<xi)+0,1<xi)Hs(_r,0,ft,lr);else{var $s=_r[0]+3>>3;for(_r=0;256>_r;_r+=16)ft[lr+_r]=$s}Nr=1,hs=Vt[0]}var ir=15&_t.la,Rs=15&Gn.la;for(_r=0;4>_r;++_r){var Ta=1&Rs;for($s=bn=0;4>$s;++$s)ir=ir>>1|(Ta=(xi=no(Yt,hs,xi=Ta+(1&ir),Ht.Sc,Nr,ft,lr))>Nr)<<7,bn=bn<<2|(3<xi?3:1<xi?2:ft[lr+0]!=0),lr+=16;ir>>=4,Rs=Rs>>1|Ta<<7,Xn=(Xn<<8|bn)>>>0}for(hs=ir,Nr=Rs>>4,gr=0;4>gr;gr+=2){for(bn=0,ir=_t.la>>4+gr,Rs=Gn.la>>4+gr,_r=0;2>_r;++_r){for(Ta=1&Rs,$s=0;2>$s;++$s)xi=Ta+(1&ir),ir=ir>>1|(Ta=0<(xi=no(Yt,Vt[2],xi,Ht.Qc,0,ft,lr)))<<3,bn=bn<<2|(3<xi?3:1<xi?2:ft[lr+0]!=0),lr+=16;ir>>=2,Rs=Rs>>1|Ta<<5}Dn|=bn<<4*gr,hs|=ir<<4<<gr,Nr|=(240&Rs)<<gr}_t.la=hs,Gn.la=Nr,un.Hc=Xn,un.Gc=Dn,un.ia=43690&Dn?0:Ht.ia,Vt=!(Xn|Dn)}if(0<Le.L&&(Le.wa[Le.Y+Le.ja]=Le.gd[st.$b][st.Za],Le.wa[Le.Y+Le.ja].La|=!Vt),dt.Ka)return rr(Me,7,"Premature end-of-file encountered.")}if(tc(Me),Le=pt,dt=1,st=(Pe=Me).D,_t=0<Pe.L&&Pe.M>=Pe.zb&&Pe.M<=Pe.Va,Pe.Aa==0)e:{if(st.M=Pe.M,st.uc=_t,Yh(Pe,st),dt=1,st=(bn=Pe.D).Nb,_t=(Dn=sf[Pe.L])*Pe.R,Yt=Dn/2*Pe.B,_r=16*st*Pe.R,$s=8*st*Pe.B,Vt=Pe.sa,un=Pe.ta-_t+_r,Ht=Pe.qa,ft=Pe.ra-Yt+$s,lr=Pe.Ha,Gn=Pe.Ia-Yt+$s,Rs=(ir=bn.M)==0,Xn=ir>=Pe.Va-1,Pe.Aa==2&&Yh(Pe,bn),bn.uc)for(Ta=(xi=Pe).D.M,e(xi.D.uc),bn=xi.yb;bn<xi.Hb;++bn){Nr=bn,hs=Ta;var Yi=(vi=(oi=xi).D).Nb;gr=oi.R;var vi=vi.wa[vi.Y+Nr],fs=oi.sa,ro=oi.ta+16*Yi*gr+16*Nr,Io=vi.dd,Oi=vi.tc;if(Oi!=0)if(e(3<=Oi),oi.L==1)0<Nr&&Ci(fs,ro,gr,Oi+4),vi.La&&Dl(fs,ro,gr,Oi),0<hs&&Ur(fs,ro,gr,Oi+4),vi.La&&Li(fs,ro,gr,Oi);else{var Ii=oi.B,ds=oi.qa,io=oi.ra+8*Yi*Ii+8*Nr,jl=oi.Ha,oi=oi.Ia+8*Yi*Ii+8*Nr;Yi=vi.ld,0<Nr&&(Zc(fs,ro,gr,Oi+4,Io,Yi),Sa(ds,io,jl,oi,Ii,Oi+4,Io,Yi)),vi.La&&(eo(fs,ro,gr,Oi,Io,Yi),zr(ds,io,jl,oi,Ii,Oi,Io,Yi)),0<hs&&(wo(fs,ro,gr,Oi+4,Io,Yi),eu(ds,io,jl,oi,Ii,Oi+4,Io,Yi)),vi.La&&(Jh(fs,ro,gr,Oi,Io,Yi),Il(ds,io,jl,oi,Ii,Oi,Io,Yi))}}if(Pe.ia&&alert("todo:DitherRow"),Le.put!=null){if(bn=16*ir,ir=16*(ir+1),Rs?(Le.y=Pe.sa,Le.O=Pe.ta+_r,Le.f=Pe.qa,Le.N=Pe.ra+$s,Le.ea=Pe.Ha,Le.W=Pe.Ia+$s):(bn-=Dn,Le.y=Vt,Le.O=un,Le.f=Ht,Le.N=ft,Le.ea=lr,Le.W=Gn),Xn||(ir-=Dn),ir>Le.o&&(ir=Le.o),Le.F=null,Le.J=null,Pe.Fa!=null&&0<Pe.Fa.length&&bn<ir&&(Le.J=Qa(Pe,Le,bn,ir-bn),Le.F=Pe.mb,Le.F==null&&Le.F.length==0)){dt=rr(Pe,3,"Could not decode alpha data.");break e}bn<Le.j&&(Dn=Le.j-bn,bn=Le.j,e(!(1&Dn)),Le.O+=Pe.R*Dn,Le.N+=Pe.B*(Dn>>1),Le.W+=Pe.B*(Dn>>1),Le.F!=null&&(Le.J+=Le.width*Dn)),bn<ir&&(Le.O+=Le.v,Le.N+=Le.v>>1,Le.W+=Le.v>>1,Le.F!=null&&(Le.J+=Le.v),Le.ka=bn-Le.j,Le.U=Le.va-Le.v,Le.T=ir-bn,dt=Le.put(Le))}st+1!=Pe.Ic||Xn||(r(Pe.sa,Pe.ta-_t,Vt,un+16*Pe.R,_t),r(Pe.qa,Pe.ra-Yt,Ht,ft+8*Pe.B,Yt),r(Pe.Ha,Pe.Ia-Yt,lr,Gn+8*Pe.B,Yt))}if(!dt)return rr(Me,6,"Output aborted.")}return 1})(w,D)),D.bc!=null&&D.bc(D),H&=1}return H?(w.cb=0,H):0}function Ss(w,D,H,X,ae){ae=w[D+H+32*X]+(ae>>3),w[D+H+32*X]=-256&ae?0>ae?0:255:ae}function ta(w,D,H,X,ae,ce){Ss(w,D,0,H,X+ae),Ss(w,D,1,H,X+ce),Ss(w,D,2,H,X-ce),Ss(w,D,3,H,X-ae)}function ji(w){return(20091*w>>16)+w}function cs(w,D,H,X){var ae,ce=0,ue=s(16);for(ae=0;4>ae;++ae){var fe=w[D+0]+w[D+8],ge=w[D+0]-w[D+8],Se=(35468*w[D+4]>>16)-ji(w[D+12]),Re=ji(w[D+4])+(35468*w[D+12]>>16);ue[ce+0]=fe+Re,ue[ce+1]=ge+Se,ue[ce+2]=ge-Se,ue[ce+3]=fe-Re,ce+=4,D++}for(ae=ce=0;4>ae;++ae)fe=(w=ue[ce+0]+4)+ue[ce+8],ge=w-ue[ce+8],Se=(35468*ue[ce+4]>>16)-ji(ue[ce+12]),Ss(H,X,0,0,fe+(Re=ji(ue[ce+4])+(35468*ue[ce+12]>>16))),Ss(H,X,1,0,ge+Se),Ss(H,X,2,0,ge-Se),Ss(H,X,3,0,fe-Re),ce++,X+=32}function nc(w,D,H,X){var ae=w[D+0]+4,ce=35468*w[D+4]>>16,ue=ji(w[D+4]),fe=35468*w[D+1]>>16;ta(H,X,0,ae+ue,w=ji(w[D+1]),fe),ta(H,X,1,ae+ce,w,fe),ta(H,X,2,ae-ce,w,fe),ta(H,X,3,ae-ue,w,fe)}function qh(w,D,H,X,ae){cs(w,D,H,X),ae&&cs(w,D+16,H,X+4)}function Uc(w,D,H,X){Jc(w,D+0,H,X,1),Jc(w,D+32,H,X+128,1)}function Sl(w,D,H,X){var ae;for(w=w[D+0]+4,ae=0;4>ae;++ae)for(D=0;4>D;++D)Ss(H,X,D,ae,w)}function zu(w,D,H,X){w[D+0]&&_o(w,D+0,H,X),w[D+16]&&_o(w,D+16,H,X+4),w[D+32]&&_o(w,D+32,H,X+128),w[D+48]&&_o(w,D+48,H,X+128+4)}function Tl(w,D,H,X){var ae,ce=s(16);for(ae=0;4>ae;++ae){var ue=w[D+0+ae]+w[D+12+ae],fe=w[D+4+ae]+w[D+8+ae],ge=w[D+4+ae]-w[D+8+ae],Se=w[D+0+ae]-w[D+12+ae];ce[0+ae]=ue+fe,ce[8+ae]=ue-fe,ce[4+ae]=Se+ge,ce[12+ae]=Se-ge}for(ae=0;4>ae;++ae)ue=(w=ce[0+4*ae]+3)+ce[3+4*ae],fe=ce[1+4*ae]+ce[2+4*ae],ge=ce[1+4*ae]-ce[2+4*ae],Se=w-ce[3+4*ae],H[X+0]=ue+fe>>3,H[X+16]=Se+ge>>3,H[X+32]=ue-fe>>3,H[X+48]=Se-ge>>3,X+=64}function us(w,D,H){var X,ae=D-32,ce=Ws,ue=255-w[ae-1];for(X=0;X<H;++X){var fe,ge=ce,Se=ue+w[D-1];for(fe=0;fe<H;++fe)w[D+fe]=ge[Se+w[ae+fe]];D+=32}}function Wh(w,D){us(w,D,4)}function Uu(w,D){us(w,D,8)}function Hu(w,D){us(w,D,16)}function va(w,D){var H;for(H=0;16>H;++H)r(w,D+32*H,w,D-32,16)}function rc(w,D){var H;for(H=16;0<H;--H)i(w,D,w[D-1],16),D+=32}function Ka(w,D,H){var X;for(X=0;16>X;++X)i(D,H+32*X,w,16)}function ic(w,D){var H,X=16;for(H=0;16>H;++H)X+=w[D-1+32*H]+w[D+H-32];Ka(X>>5,w,D)}function Vr(w,D){var H,X=8;for(H=0;16>H;++H)X+=w[D-1+32*H];Ka(X>>4,w,D)}function qu(w,D){var H,X=8;for(H=0;16>H;++H)X+=w[D+H-32];Ka(X>>4,w,D)}function na(w,D){Ka(128,w,D)}function xn(w,D,H){return w+2*D+H+2>>2}function go(w,D){var H,X=D-32;for(X=new Uint8Array([xn(w[X-1],w[X+0],w[X+1]),xn(w[X+0],w[X+1],w[X+2]),xn(w[X+1],w[X+2],w[X+3]),xn(w[X+2],w[X+3],w[X+4])]),H=0;4>H;++H)r(w,D+32*H,X,0,X.length)}function sc(w,D){var H=w[D-1],X=w[D-1+32],ae=w[D-1+64],ce=w[D-1+96];Ce(w,D+0,16843009*xn(w[D-1-32],H,X)),Ce(w,D+32,16843009*xn(H,X,ae)),Ce(w,D+64,16843009*xn(X,ae,ce)),Ce(w,D+96,16843009*xn(ae,ce,ce))}function ra(w,D){var H,X=4;for(H=0;4>H;++H)X+=w[D+H-32]+w[D-1+32*H];for(X>>=3,H=0;4>H;++H)i(w,D+32*H,X,4)}function Yo(w,D){var H=w[D-1+0],X=w[D-1+32],ae=w[D-1+64],ce=w[D-1-32],ue=w[D+0-32],fe=w[D+1-32],ge=w[D+2-32],Se=w[D+3-32];w[D+0+96]=xn(X,ae,w[D-1+96]),w[D+1+96]=w[D+0+64]=xn(H,X,ae),w[D+2+96]=w[D+1+64]=w[D+0+32]=xn(ce,H,X),w[D+3+96]=w[D+2+64]=w[D+1+32]=w[D+0+0]=xn(ue,ce,H),w[D+3+64]=w[D+2+32]=w[D+1+0]=xn(fe,ue,ce),w[D+3+32]=w[D+2+0]=xn(ge,fe,ue),w[D+3+0]=xn(Se,ge,fe)}function ya(w,D){var H=w[D+1-32],X=w[D+2-32],ae=w[D+3-32],ce=w[D+4-32],ue=w[D+5-32],fe=w[D+6-32],ge=w[D+7-32];w[D+0+0]=xn(w[D+0-32],H,X),w[D+1+0]=w[D+0+32]=xn(H,X,ae),w[D+2+0]=w[D+1+32]=w[D+0+64]=xn(X,ae,ce),w[D+3+0]=w[D+2+32]=w[D+1+64]=w[D+0+96]=xn(ae,ce,ue),w[D+3+32]=w[D+2+64]=w[D+1+96]=xn(ce,ue,fe),w[D+3+64]=w[D+2+96]=xn(ue,fe,ge),w[D+3+96]=xn(fe,ge,ge)}function Ts(w,D){var H=w[D-1+0],X=w[D-1+32],ae=w[D-1+64],ce=w[D-1-32],ue=w[D+0-32],fe=w[D+1-32],ge=w[D+2-32],Se=w[D+3-32];w[D+0+0]=w[D+1+64]=ce+ue+1>>1,w[D+1+0]=w[D+2+64]=ue+fe+1>>1,w[D+2+0]=w[D+3+64]=fe+ge+1>>1,w[D+3+0]=ge+Se+1>>1,w[D+0+96]=xn(ae,X,H),w[D+0+64]=xn(X,H,ce),w[D+0+32]=w[D+1+96]=xn(H,ce,ue),w[D+1+32]=w[D+2+96]=xn(ce,ue,fe),w[D+2+32]=w[D+3+96]=xn(ue,fe,ge),w[D+3+32]=xn(fe,ge,Se)}function Xo(w,D){var H=w[D+0-32],X=w[D+1-32],ae=w[D+2-32],ce=w[D+3-32],ue=w[D+4-32],fe=w[D+5-32],ge=w[D+6-32],Se=w[D+7-32];w[D+0+0]=H+X+1>>1,w[D+1+0]=w[D+0+64]=X+ae+1>>1,w[D+2+0]=w[D+1+64]=ae+ce+1>>1,w[D+3+0]=w[D+2+64]=ce+ue+1>>1,w[D+0+32]=xn(H,X,ae),w[D+1+32]=w[D+0+96]=xn(X,ae,ce),w[D+2+32]=w[D+1+96]=xn(ae,ce,ue),w[D+3+32]=w[D+2+96]=xn(ce,ue,fe),w[D+3+64]=xn(ue,fe,ge),w[D+3+96]=xn(fe,ge,Se)}function mr(w,D){var H=w[D-1+0],X=w[D-1+32],ae=w[D-1+64],ce=w[D-1+96];w[D+0+0]=H+X+1>>1,w[D+2+0]=w[D+0+32]=X+ae+1>>1,w[D+2+32]=w[D+0+64]=ae+ce+1>>1,w[D+1+0]=xn(H,X,ae),w[D+3+0]=w[D+1+32]=xn(X,ae,ce),w[D+3+32]=w[D+1+64]=xn(ae,ce,ce),w[D+3+64]=w[D+2+64]=w[D+0+96]=w[D+1+96]=w[D+2+96]=w[D+3+96]=ce}function xo(w,D){var H=w[D-1+0],X=w[D-1+32],ae=w[D-1+64],ce=w[D-1+96],ue=w[D-1-32],fe=w[D+0-32],ge=w[D+1-32],Se=w[D+2-32];w[D+0+0]=w[D+2+32]=H+ue+1>>1,w[D+0+32]=w[D+2+64]=X+H+1>>1,w[D+0+64]=w[D+2+96]=ae+X+1>>1,w[D+0+96]=ce+ae+1>>1,w[D+3+0]=xn(fe,ge,Se),w[D+2+0]=xn(ue,fe,ge),w[D+1+0]=w[D+3+32]=xn(H,ue,fe),w[D+1+32]=w[D+3+64]=xn(X,H,ue),w[D+1+64]=w[D+3+96]=xn(ae,X,H),w[D+1+96]=xn(ce,ae,X)}function Wu(w,D){var H;for(H=0;8>H;++H)r(w,D+32*H,w,D-32,8)}function Qo(w,D){var H;for(H=0;8>H;++H)i(w,D,w[D-1],8),D+=32}function Jo(w,D,H){var X;for(X=0;8>X;++X)i(D,H+32*X,w,8)}function ba(w,D){var H,X=8;for(H=0;8>H;++H)X+=w[D+H-32]+w[D-1+32*H];Jo(X>>4,w,D)}function Zo(w,D){var H,X=4;for(H=0;8>H;++H)X+=w[D+H-32];Jo(X>>3,w,D)}function Es(w,D){var H,X=4;for(H=0;8>H;++H)X+=w[D-1+32*H];Jo(X>>3,w,D)}function Ai(w,D){Jo(128,w,D)}function _a(w,D,H){var X=w[D-H],ae=w[D+0],ce=3*(ae-X)+fc[1020+w[D-2*H]-w[D+H]],ue=Id[112+(ce+4>>3)];w[D-H]=Ws[255+X+Id[112+(ce+3>>3)]],w[D+0]=Ws[255+ae-ue]}function Ya(w,D,H,X){var ae=w[D+0],ce=w[D+H];return Cs[255+w[D-2*H]-w[D-H]]>X||Cs[255+ce-ae]>X}function el(w,D,H,X){return 4*Cs[255+w[D-H]-w[D+0]]+Cs[255+w[D-2*H]-w[D+H]]<=X}function Hc(w,D,H,X,ae){var ce=w[D-3*H],ue=w[D-2*H],fe=w[D-H],ge=w[D+0],Se=w[D+H],Re=w[D+2*H],Qe=w[D+3*H];return 4*Cs[255+fe-ge]+Cs[255+ue-Se]>X?0:Cs[255+w[D-4*H]-ce]<=ae&&Cs[255+ce-ue]<=ae&&Cs[255+ue-fe]<=ae&&Cs[255+Qe-Re]<=ae&&Cs[255+Re-Se]<=ae&&Cs[255+Se-ge]<=ae}function tl(w,D,H,X){var ae=2*X+1;for(X=0;16>X;++X)el(w,D+X,H,ae)&&_a(w,D+X,H)}function wa(w,D,H,X){var ae=2*X+1;for(X=0;16>X;++X)el(w,D+X*H,1,ae)&&_a(w,D+X*H,1)}function As(w,D,H,X){var ae;for(ae=3;0<ae;--ae)tl(w,D+=4*H,H,X)}function qc(w,D,H,X){var ae;for(ae=3;0<ae;--ae)wa(w,D+=4,H,X)}function vo(w,D,H,X,ae,ce,ue,fe){for(ce=2*ce+1;0<ae--;){if(Hc(w,D,H,ce,ue))if(Ya(w,D,H,fe))_a(w,D,H);else{var ge=w,Se=D,Re=H,Qe=ge[Se-2*Re],Xe=ge[Se-Re],Me=ge[Se+0],pt=ge[Se+Re],st=ge[Se+2*Re],Pe=27*(dt=fc[1020+3*(Me-Xe)+fc[1020+Qe-pt]])+63>>7,Le=18*dt+63>>7,dt=9*dt+63>>7;ge[Se-3*Re]=Ws[255+ge[Se-3*Re]+dt],ge[Se-2*Re]=Ws[255+Qe+Le],ge[Se-Re]=Ws[255+Xe+Pe],ge[Se+0]=Ws[255+Me-Pe],ge[Se+Re]=Ws[255+pt-Le],ge[Se+2*Re]=Ws[255+st-dt]}D+=X}}function Ns(w,D,H,X,ae,ce,ue,fe){for(ce=2*ce+1;0<ae--;){if(Hc(w,D,H,ce,ue))if(Ya(w,D,H,fe))_a(w,D,H);else{var ge=w,Se=D,Re=H,Qe=ge[Se-Re],Xe=ge[Se+0],Me=ge[Se+Re],pt=Id[112+((st=3*(Xe-Qe))+4>>3)],st=Id[112+(st+3>>3)],Pe=pt+1>>1;ge[Se-2*Re]=Ws[255+ge[Se-2*Re]+Pe],ge[Se-Re]=Ws[255+Qe+st],ge[Se+0]=Ws[255+Xe-pt],ge[Se+Re]=Ws[255+Me-Pe]}D+=X}}function Wc(w,D,H,X,ae,ce){vo(w,D,H,1,16,X,ae,ce)}function El(w,D,H,X,ae,ce){vo(w,D,1,H,16,X,ae,ce)}function ac(w,D,H,X,ae,ce){var ue;for(ue=3;0<ue;--ue)Ns(w,D+=4*H,H,1,16,X,ae,ce)}function Al(w,D,H,X,ae,ce){var ue;for(ue=3;0<ue;--ue)Ns(w,D+=4,1,H,16,X,ae,ce)}function Gh(w,D,H,X,ae,ce,ue,fe){vo(w,D,ae,1,8,ce,ue,fe),vo(H,X,ae,1,8,ce,ue,fe)}function Nl(w,D,H,X,ae,ce,ue,fe){vo(w,D,1,ae,8,ce,ue,fe),vo(H,X,1,ae,8,ce,ue,fe)}function Gc(w,D,H,X,ae,ce,ue,fe){Ns(w,D+4*ae,ae,1,8,ce,ue,fe),Ns(H,X+4*ae,ae,1,8,ce,ue,fe)}function Gu(w,D,H,X,ae,ce,ue,fe){Ns(w,D+4,1,ae,8,ce,ue,fe),Ns(H,X+4,1,ae,8,ce,ue,fe)}function ia(){this.ba=new tt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new kt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function $c(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Kc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function $u(){this.ua=0,this.Wa=new _e,this.vb=new _e,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Y,this.yc=new P}function $h(){this.xb=this.a=0,this.l=new ea,this.ca=new tt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new $u,this.ab=0,this.gc=a(4,Kc),this.Oc=0}function Xa(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ea,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ni(w,D,H,X,ae,ce,ue){for(w=w==null?0:w[D+0],D=0;D<ue;++D)ae[ce+D]=w+H[X+D]&255,w=ae[ce+D]}function Yc(w,D,H,X,ae,ce,ue){var fe;if(w==null)Ni(null,null,H,X,ae,ce,ue);else for(fe=0;fe<ue;++fe)ae[ce+fe]=w[D+fe]+H[X+fe]&255}function nl(w,D,H,X,ae,ce,ue){if(w==null)Ni(null,null,H,X,ae,ce,ue);else{var fe,ge=w[D+0],Se=ge,Re=ge;for(fe=0;fe<ue;++fe)Se=Re+(ge=w[D+fe])-Se,Re=H[X+fe]+(-256&Se?0>Se?0:255:Se)&255,Se=ge,ae[ce+fe]=Re}}function Qa(w,D,H,X){var ae=D.width,ce=D.o;if(e(w!=null&&D!=null),0>H||0>=X||H+X>ce)return null;if(!w.Cc){if(w.ga==null){var ue;if(w.ga=new Xa,(ue=w.ga==null)||(ue=D.width*D.o,e(w.Gb.length==0),w.Gb=s(ue),w.Uc=0,w.Gb==null?ue=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,ue=1),ue=!ue),!ue){ue=w.ga;var fe=w.Fa,ge=w.P,Se=w.qc,Re=w.mb,Qe=w.nb,Xe=ge+1,Me=Se-1,pt=ue.l;if(e(fe!=null&&Re!=null&&D!=null),dc[0]=null,dc[1]=Ni,dc[2]=Yc,dc[3]=nl,ue.ca=Re,ue.tb=Qe,ue.c=D.width,ue.i=D.height,e(0<ue.c&&0<ue.i),1>=Se)D=0;else if(ue.$a=fe[ge+0]>>0&3,ue.Z=fe[ge+0]>>2&3,ue.Lc=fe[ge+0]>>4&3,ge=fe[ge+0]>>6&3,0>ue.$a||1<ue.$a||4<=ue.Z||1<ue.Lc||ge)D=0;else if(pt.put=nr,pt.ac=hn,pt.bc=Tr,pt.ma=ue,pt.width=D.width,pt.height=D.height,pt.Da=D.Da,pt.v=D.v,pt.va=D.va,pt.j=D.j,pt.o=D.o,ue.$a)e:{e(ue.$a==1),D=rt();t:for(;;){if(D==null){D=0;break e}if(e(ue!=null),ue.mc=D,D.c=ue.c,D.i=ue.i,D.l=ue.l,D.l.ma=ue,D.l.width=ue.c,D.l.height=ue.i,D.a=0,se(D.m,fe,Xe,Me),!He(ue.c,ue.i,1,D,null)||(D.ab==1&&D.gc[0].hc==3&&xe(D.s)?(ue.ic=1,fe=D.c*D.i,D.Ta=null,D.Ua=0,D.V=s(fe),D.Ba=0,D.V==null?(D.a=1,D=0):D=1):(ue.ic=0,D=$e(D,ue.c)),!D))break t;D=1;break e}ue.mc=null,D=0}else D=Me>=ue.c*ue.i;ue=!D}if(ue)return null;w.ga.Lc!=1?w.Ga=0:X=ce-H}e(w.ga!=null),e(H+X<=ce);e:{if(D=(fe=w.ga).c,ce=fe.l.o,fe.$a==0){if(Xe=w.rc,Me=w.Vc,pt=w.Fa,ge=w.P+1+H*D,Se=w.mb,Re=w.nb+H*D,e(ge<=w.P+w.qc),fe.Z!=0)for(e(dc[fe.Z]!=null),ue=0;ue<X;++ue)dc[fe.Z](Xe,Me,pt,ge,Se,Re,D),Xe=Se,Me=Re,Re+=D,ge+=D;else for(ue=0;ue<X;++ue)r(Se,Re,pt,ge,D),Xe=Se,Me=Re,Re+=D,ge+=D;w.rc=Xe,w.Vc=Me}else{if(e(fe.mc!=null),D=H+X,e((ue=fe.mc)!=null),e(D<=ue.i),ue.C>=D)D=1;else if(fe.ic||pe(),fe.ic){fe=ue.V,Xe=ue.Ba,Me=ue.c;var st=ue.i,Pe=(pt=1,ge=ue.$/Me,Se=ue.$%Me,Re=ue.m,Qe=ue.s,ue.$),Le=Me*st,dt=Me*D,_t=Qe.wc,ft=Pe<dt?sr(Qe,Se,ge):null;e(Pe<=Le),e(D<=st),e(xe(Qe));t:for(;;){for(;!Re.h&&Pe<dt;){if(Se&_t||(ft=sr(Qe,Se,ge)),e(ft!=null),te(Re),256>(st=ei(ft.G[0],ft.H[0],Re)))fe[Xe+Pe]=st,++Pe,++Se>=Me&&(Se=0,++ge<=D&&!(ge%16)&&we(ue,ge));else{if(!(280>st)){pt=0;break t}st=Br(st-256,Re);var Yt,Vt=ei(ft.G[4],ft.H[4],Re);if(te(Re),!(Pe>=(Vt=Ar(Me,Vt=Br(Vt,Re)))&&Le-Pe>=st)){pt=0;break t}for(Yt=0;Yt<st;++Yt)fe[Xe+Pe+Yt]=fe[Xe+Pe+Yt-Vt];for(Pe+=st,Se+=st;Se>=Me;)Se-=Me,++ge<=D&&!(ge%16)&&we(ue,ge);Pe<dt&&Se&_t&&(ft=sr(Qe,Se,ge))}e(Re.h==K(Re))}we(ue,ge>D?D:ge);break t}!pt||Re.h&&Pe<Le?(pt=0,ue.a=Re.h?5:3):ue.$=Pe,D=pt}else D=Ee(ue,ue.V,ue.Ba,ue.c,ue.i,D,Ye);if(!D){X=0;break e}}H+X>=ce&&(w.Cc=1),X=1}if(!X)return null;if(w.Cc&&((X=w.ga)!=null&&(X.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+H*ae}function g(w,D,H,X,ae,ce){for(;0<ae--;){var ue,fe=w,ge=D+(H?1:0),Se=w,Re=D+(H?0:3);for(ue=0;ue<X;++ue){var Qe=Se[Re+4*ue];Qe!=255&&(Qe*=32897,fe[ge+4*ue+0]=fe[ge+4*ue+0]*Qe>>23,fe[ge+4*ue+1]=fe[ge+4*ue+1]*Qe>>23,fe[ge+4*ue+2]=fe[ge+4*ue+2]*Qe>>23)}D+=ce}}function N(w,D,H,X,ae){for(;0<X--;){var ce;for(ce=0;ce<H;++ce){var ue=w[D+2*ce+0],fe=15&(Se=w[D+2*ce+1]),ge=4369*fe,Se=(240&Se|Se>>4)*ge>>16;w[D+2*ce+0]=(240&ue|ue>>4)*ge>>16&240|(15&ue|ue<<4)*ge>>16>>4&15,w[D+2*ce+1]=240&Se|fe}D+=ae}}function U(w,D,H,X,ae,ce,ue,fe){var ge,Se,Re=255;for(Se=0;Se<ae;++Se){for(ge=0;ge<X;++ge){var Qe=w[D+ge];ce[ue+4*ge]=Qe,Re&=Qe}D+=H,ue+=fe}return Re!=255}function Z(w,D,H,X,ae){var ce;for(ce=0;ce<ae;++ce)H[X+ce]=w[D+ce]>>8}function pe(){Rl=g,qs=N,Yu=U,to=Z}function Ae(w,D,H){I[w]=function(X,ae,ce,ue,fe,ge,Se,Re,Qe,Xe,Me,pt,st,Pe,Le,dt,_t){var ft,Yt=_t-1>>1,Vt=fe[ge+0]|Se[Re+0]<<16,un=Qe[Xe+0]|Me[pt+0]<<16;e(X!=null);var Ht=3*Vt+un+131074>>2;for(D(X[ae+0],255&Ht,Ht>>16,st,Pe),ce!=null&&(Ht=3*un+Vt+131074>>2,D(ce[ue+0],255&Ht,Ht>>16,Le,dt)),ft=1;ft<=Yt;++ft){var lr=fe[ge+ft]|Se[Re+ft]<<16,Gn=Qe[Xe+ft]|Me[pt+ft]<<16,Xn=Vt+lr+un+Gn+524296,Dn=Xn+2*(lr+un)>>3;Ht=Dn+Vt>>1,Vt=(Xn=Xn+2*(Vt+Gn)>>3)+lr>>1,D(X[ae+2*ft-1],255&Ht,Ht>>16,st,Pe+(2*ft-1)*H),D(X[ae+2*ft-0],255&Vt,Vt>>16,st,Pe+(2*ft-0)*H),ce!=null&&(Ht=Xn+un>>1,Vt=Dn+Gn>>1,D(ce[ue+2*ft-1],255&Ht,Ht>>16,Le,dt+(2*ft-1)*H),D(ce[ue+2*ft+0],255&Vt,Vt>>16,Le,dt+(2*ft+0)*H)),Vt=lr,un=Gn}1&_t||(Ht=3*Vt+un+131074>>2,D(X[ae+_t-1],255&Ht,Ht>>16,st,Pe+(_t-1)*H),ce!=null&&(Ht=3*un+Vt+131074>>2,D(ce[ue+_t-1],255&Ht,Ht>>16,Le,dt+(_t-1)*H)))}}function Ve(){Is[cm]=Ju,Is[Gs]=nf,Is[um]=dg,Is[So]=pm,Is[Dd]=iu,Is[Zh]=Pl,Is[tu]=su,Is[Rd]=nf,Is[hm]=pm,Is[ef]=iu,Is[fm]=Pl}function vt(w){return w&-16384?0>w?0:255:w>>gm}function Kt(w,D){return vt((19077*w>>8)+(26149*D>>8)-14234)}function Xt(w,D,H){return vt((19077*w>>8)-(6419*D>>8)-(13320*H>>8)+8708)}function tn(w,D){return vt((19077*w>>8)+(33050*D>>8)-17685)}function Nn(w,D,H,X,ae){X[ae+0]=Kt(w,H),X[ae+1]=Xt(w,D,H),X[ae+2]=tn(w,D)}function ar(w,D,H,X,ae){X[ae+0]=tn(w,D),X[ae+1]=Xt(w,D,H),X[ae+2]=Kt(w,H)}function or(w,D,H,X,ae){var ce=Xt(w,D,H);D=ce<<3&224|tn(w,D)>>3,X[ae+0]=248&Kt(w,H)|ce>>5,X[ae+1]=D}function pr(w,D,H,X,ae){var ce=240&tn(w,D)|15;X[ae+0]=240&Kt(w,H)|Xt(w,D,H)>>4,X[ae+1]=ce}function pi(w,D,H,X,ae){X[ae+0]=255,Nn(w,D,H,X,ae+1)}function ai(w,D,H,X,ae){ar(w,D,H,X,ae),X[ae+3]=255}function Us(w,D,H,X,ae){Nn(w,D,H,X,ae),X[ae+3]=255}function Ja(w,D){return 0>w?0:w>D?D:w}function oc(w,D,H){I[w]=function(X,ae,ce,ue,fe,ge,Se,Re,Qe){for(var Xe=Re+(-2&Qe)*H;Re!=Xe;)D(X[ae+0],ce[ue+0],fe[ge+0],Se,Re),D(X[ae+1],ce[ue+0],fe[ge+0],Se,Re+H),ae+=2,++ue,++ge,Re+=2*H;1&Qe&&D(X[ae+0],ce[ue+0],fe[ge+0],Se,Re)}}function im(w,D,H){return H==0?w==0?D==0?6:5:D==0?4:0:H}function Kh(w,D,H,X,ae){switch(w>>>30){case 3:Jc(D,H,X,ae,0);break;case 2:hc(D,H,X,ae);break;case 1:_o(D,H,X,ae)}}function Yh(w,D){var H,X,ae=D.M,ce=D.Nb,ue=w.oc,fe=w.pc+40,ge=w.oc,Se=w.pc+584,Re=w.oc,Qe=w.pc+600;for(H=0;16>H;++H)ue[fe+32*H-1]=129;for(H=0;8>H;++H)ge[Se+32*H-1]=129,Re[Qe+32*H-1]=129;for(0<ae?ue[fe-1-32]=ge[Se-1-32]=Re[Qe-1-32]=129:(i(ue,fe-32-1,127,21),i(ge,Se-32-1,127,9),i(Re,Qe-32-1,127,9)),X=0;X<w.za;++X){var Xe=D.ya[D.aa+X];if(0<X){for(H=-1;16>H;++H)r(ue,fe+32*H-4,ue,fe+32*H+12,4);for(H=-1;8>H;++H)r(ge,Se+32*H-4,ge,Se+32*H+4,4),r(Re,Qe+32*H-4,Re,Qe+32*H+4,4)}var Me=w.Gd,pt=w.Hd+X,st=Xe.ad,Pe=Xe.Hc;if(0<ae&&(r(ue,fe-32,Me[pt].y,0,16),r(ge,Se-32,Me[pt].f,0,8),r(Re,Qe-32,Me[pt].ea,0,8)),Xe.Za){var Le=ue,dt=fe-32+16;for(0<ae&&(X>=w.za-1?i(Le,dt,Me[pt].y[15],4):r(Le,dt,Me[pt+1].y,0,4)),H=0;4>H;H++)Le[dt+128+H]=Le[dt+256+H]=Le[dt+384+H]=Le[dt+0+H];for(H=0;16>H;++H,Pe<<=2)Le=ue,dt=fe+ki[H],gi[Xe.Ob[H]](Le,dt),Kh(Pe,st,16*+H,Le,dt)}else if(Le=im(X,ae,Xe.Ob[0]),ca[Le](ue,fe),Pe!=0)for(H=0;16>H;++H,Pe<<=2)Kh(Pe,st,16*+H,ue,fe+ki[H]);for(H=Xe.Gc,Le=im(X,ae,Xe.Dd),al[Le](ge,Se),al[Le](Re,Qe),Pe=st,Le=ge,dt=Se,255&(Xe=H>>0)&&(170&Xe?kl(Pe,256,Le,dt):la(Pe,256,Le,dt)),Xe=Re,Pe=Qe,255&(H>>=8)&&(170&H?kl(st,320,Xe,Pe):la(st,320,Xe,Pe)),ae<w.Ub-1&&(r(Me[pt].y,0,ue,fe+480,16),r(Me[pt].f,0,ge,Se+224,8),r(Me[pt].ea,0,Re,Qe+224,8)),H=8*ce*w.B,Me=w.sa,pt=w.ta+16*X+16*ce*w.R,st=w.qa,Xe=w.ra+8*X+H,Pe=w.Ha,Le=w.Ia+8*X+H,H=0;16>H;++H)r(Me,pt+H*w.R,ue,fe+32*H,16);for(H=0;8>H;++H)r(st,Xe+H*w.B,ge,Se+32*H,8),r(Pe,Le+H*w.B,Re,Qe+32*H,8)}}function Cl(w,D,H,X,ae,ce,ue,fe,ge){var Se=[0],Re=[0],Qe=0,Xe=ge!=null?ge.kd:0,Me=ge??new $c;if(w==null||12>H)return 7;Me.data=w,Me.w=D,Me.ha=H,D=[D],H=[H],Me.gb=[Me.gb];e:{var pt=D,st=H,Pe=Me.gb;if(e(w!=null),e(st!=null),e(Pe!=null),Pe[0]=0,12<=st[0]&&!t(w,pt[0],"RIFF")){if(t(w,pt[0]+8,"WEBP")){Pe=3;break e}var Le=qe(w,pt[0]+4);if(12>Le||4294967286<Le){Pe=3;break e}if(Xe&&Le>st[0]-8){Pe=7;break e}Pe[0]=Le,pt[0]+=12,st[0]-=12}Pe=0}if(Pe!=0)return Pe;for(Le=0<Me.gb[0],H=H[0];;){e:{var dt=w;st=D,Pe=H;var _t=Se,ft=Re,Yt=pt=[0];if((Ht=Qe=[Qe])[0]=0,8>Pe[0])Pe=7;else{if(!t(dt,st[0],"VP8X")){if(qe(dt,st[0]+4)!=10){Pe=3;break e}if(18>Pe[0]){Pe=7;break e}var Vt=qe(dt,st[0]+8),un=1+oe(dt,st[0]+12);if(2147483648<=un*(dt=1+oe(dt,st[0]+15))){Pe=3;break e}Yt!=null&&(Yt[0]=Vt),_t!=null&&(_t[0]=un),ft!=null&&(ft[0]=dt),st[0]+=18,Pe[0]-=18,Ht[0]=1}Pe=0}}if(Qe=Qe[0],pt=pt[0],Pe!=0)return Pe;if(st=!!(2&pt),!Le&&Qe)return 3;if(ce!=null&&(ce[0]=!!(16&pt)),ue!=null&&(ue[0]=st),fe!=null&&(fe[0]=0),ue=Se[0],pt=Re[0],Qe&&st&&ge==null){Pe=0;break}if(4>H){Pe=7;break}if(Le&&Qe||!Le&&!Qe&&!t(w,D[0],"ALPH")){H=[H],Me.na=[Me.na],Me.P=[Me.P],Me.Sa=[Me.Sa];e:{Vt=w,Pe=D,Le=H;var Ht=Me.gb;_t=Me.na,ft=Me.P,Yt=Me.Sa,un=22,e(Vt!=null),e(Le!=null),dt=Pe[0];var lr=Le[0];for(e(_t!=null),e(Yt!=null),_t[0]=null,ft[0]=null,Yt[0]=0;;){if(Pe[0]=dt,Le[0]=lr,8>lr){Pe=7;break e}var Gn=qe(Vt,dt+4);if(4294967286<Gn){Pe=3;break e}var Xn=8+Gn+1&-2;if(un+=Xn,0<Ht&&un>Ht){Pe=3;break e}if(!t(Vt,dt,"VP8 ")||!t(Vt,dt,"VP8L")){Pe=0;break e}if(lr[0]<Xn){Pe=7;break e}t(Vt,dt,"ALPH")||(_t[0]=Vt,ft[0]=dt+8,Yt[0]=Gn),dt+=Xn,lr-=Xn}}if(H=H[0],Me.na=Me.na[0],Me.P=Me.P[0],Me.Sa=Me.Sa[0],Pe!=0)break}H=[H],Me.Ja=[Me.Ja],Me.xa=[Me.xa];e:if(Ht=w,Pe=D,Le=H,_t=Me.gb[0],ft=Me.Ja,Yt=Me.xa,Vt=Pe[0],dt=!t(Ht,Vt,"VP8 "),un=!t(Ht,Vt,"VP8L"),e(Ht!=null),e(Le!=null),e(ft!=null),e(Yt!=null),8>Le[0])Pe=7;else{if(dt||un){if(Ht=qe(Ht,Vt+4),12<=_t&&Ht>_t-12){Pe=3;break e}if(Xe&&Ht>Le[0]-8){Pe=7;break e}ft[0]=Ht,Pe[0]+=8,Le[0]-=8,Yt[0]=un}else Yt[0]=5<=Le[0]&&Ht[Vt+0]==47&&!(Ht[Vt+4]>>5),ft[0]=Le[0];Pe=0}if(H=H[0],Me.Ja=Me.Ja[0],Me.xa=Me.xa[0],D=D[0],Pe!=0)break;if(4294967286<Me.Ja)return 3;if(fe==null||st||(fe[0]=Me.xa?2:1),ue=[ue],pt=[pt],Me.xa){if(5>H){Pe=7;break}fe=ue,Xe=pt,st=ce,w==null||5>H?w=0:5<=H&&w[D+0]==47&&!(w[D+4]>>5)?(Le=[0],Ht=[0],_t=[0],se(ft=new M,w,D,H),sn(ft,Le,Ht,_t)?(fe!=null&&(fe[0]=Le[0]),Xe!=null&&(Xe[0]=Ht[0]),st!=null&&(st[0]=_t[0]),w=1):w=0):w=0}else{if(10>H){Pe=7;break}fe=pt,w==null||10>H||!si(w,D+3,H-3)?w=0:(Xe=w[D+0]|w[D+1]<<8|w[D+2]<<16,st=16383&(w[D+7]<<8|w[D+6]),w=16383&(w[D+9]<<8|w[D+8]),1&Xe||3<(Xe>>1&7)||!(Xe>>4&1)||Xe>>5>=Me.Ja||!st||!w?w=0:(ue&&(ue[0]=st),fe&&(fe[0]=w),w=1))}if(!w||(ue=ue[0],pt=pt[0],Qe&&(Se[0]!=ue||Re[0]!=pt)))return 3;ge!=null&&(ge[0]=Me,ge.offset=D-ge.w,e(4294967286>D-ge.w),e(ge.offset==ge.ha-H));break}return Pe==0||Pe==7&&Qe&&ge==null?(ce!=null&&(ce[0]|=Me.na!=null&&0<Me.na.length),X!=null&&(X[0]=ue),ae!=null&&(ae[0]=pt),0):Pe}function lc(w,D,H){var X=D.width,ae=D.height,ce=0,ue=0,fe=X,ge=ae;if(D.Da=w!=null&&0<w.Da,D.Da&&(fe=w.cd,ge=w.bd,ce=w.v,ue=w.j,11>H||(ce&=-2,ue&=-2),0>ce||0>ue||0>=fe||0>=ge||ce+fe>X||ue+ge>ae))return 0;if(D.v=ce,D.j=ue,D.va=ce+fe,D.o=ue+ge,D.U=fe,D.T=ge,D.da=w!=null&&0<w.da,D.da){if(!Be(fe,ge,H=[w.ib],ce=[w.hb]))return 0;D.ib=H[0],D.hb=ce[0]}return D.ob=w!=null&&w.ob,D.Kb=w==null||!w.Sd,D.da&&(D.ob=D.ib<3*X/4&&D.hb<3*ae/4,D.Kb=0),1}function Ed(w){if(w==null)return 2;if(11>w.S){var D=w.f.RGBA;D.fb+=(w.height-1)*D.A,D.A=-D.A}else D=w.f.kb,w=w.height,D.O+=(w-1)*D.fa,D.fa=-D.fa,D.N+=(w-1>>1)*D.Ab,D.Ab=-D.Ab,D.W+=(w-1>>1)*D.Db,D.Db=-D.Db,D.F!=null&&(D.J+=(w-1)*D.lb,D.lb=-D.lb);return 0}function cc(w,D,H,X){if(X==null||0>=w||0>=D)return 2;if(H!=null){if(H.Da){var ae=H.cd,ce=H.bd,ue=-2&H.v,fe=-2&H.j;if(0>ue||0>fe||0>=ae||0>=ce||ue+ae>w||fe+ce>D)return 2;w=ae,D=ce}if(H.da){if(!Be(w,D,ae=[H.ib],ce=[H.hb]))return 2;w=ae[0],D=ce[0]}}X.width=w,X.height=D;e:{var ge=X.width,Se=X.height;if(w=X.S,0>=ge||0>=Se||!(w>=cm&&13>w))w=2;else{if(0>=X.Rd&&X.sd==null){ue=ce=ae=D=0;var Re=(fe=ge*vm[w])*Se;if(11>w||(ce=(Se+1)/2*(D=(ge+1)/2),w==12&&(ue=(ae=ge)*Se)),(Se=s(Re+2*ce+ue))==null){w=1;break e}X.sd=Se,11>w?((ge=X.f.RGBA).eb=Se,ge.fb=0,ge.A=fe,ge.size=Re):((ge=X.f.kb).y=Se,ge.O=0,ge.fa=fe,ge.Fd=Re,ge.f=Se,ge.N=0+Re,ge.Ab=D,ge.Cd=ce,ge.ea=Se,ge.W=0+Re+ce,ge.Db=D,ge.Ed=ce,w==12&&(ge.F=Se,ge.J=0+Re+2*ce),ge.Tc=ue,ge.lb=ae)}if(D=1,ae=X.S,ce=X.width,ue=X.height,ae>=cm&&13>ae)if(11>ae)w=X.f.RGBA,D&=(fe=Math.abs(w.A))*(ue-1)+ce<=w.size,D&=fe>=ce*vm[ae],D&=w.eb!=null;else{w=X.f.kb,fe=(ce+1)/2,Re=(ue+1)/2,ge=Math.abs(w.fa),Se=Math.abs(w.Ab);var Qe=Math.abs(w.Db),Xe=Math.abs(w.lb),Me=Xe*(ue-1)+ce;D&=ge*(ue-1)+ce<=w.Fd,D&=Se*(Re-1)+fe<=w.Cd,D=(D&=Qe*(Re-1)+fe<=w.Ed)&ge>=ce&Se>=fe&Qe>=fe,D&=w.y!=null,D&=w.f!=null,D&=w.ea!=null,ae==12&&(D&=Xe>=ce,D&=Me<=w.Tc,D&=w.F!=null)}else D=0;w=D?0:2}}return w!=0||H!=null&&H.fd&&(w=Ed(X)),w}var sa=64,Ku=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xc=24,Qc=32,Xh=8,aa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];We("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(w){return w},I.Predictor2=function(w,D,H){return D[H+0]},I.Predictor3=function(w,D,H){return D[H+1]},I.Predictor4=function(w,D,H){return D[H-1]},I.Predictor5=function(w,D,H){return Oe(Oe(w,D[H+1]),D[H+0])},I.Predictor6=function(w,D,H){return Oe(w,D[H-1])},I.Predictor7=function(w,D,H){return Oe(w,D[H+0])},I.Predictor8=function(w,D,H){return Oe(D[H-1],D[H+0])},I.Predictor9=function(w,D,H){return Oe(D[H+0],D[H+1])},I.Predictor10=function(w,D,H){return Oe(Oe(w,D[H-1]),Oe(D[H+0],D[H+1]))},I.Predictor11=function(w,D,H){var X=D[H+0];return 0>=Wt(X>>24&255,w>>24&255,(D=D[H-1])>>24&255)+Wt(X>>16&255,w>>16&255,D>>16&255)+Wt(X>>8&255,w>>8&255,D>>8&255)+Wt(255&X,255&w,255&D)?X:w},I.Predictor12=function(w,D,H){var X=D[H+0];return(Dt((w>>24&255)+(X>>24&255)-((D=D[H-1])>>24&255))<<24|Dt((w>>16&255)+(X>>16&255)-(D>>16&255))<<16|Dt((w>>8&255)+(X>>8&255)-(D>>8&255))<<8|Dt((255&w)+(255&X)-(255&D)))>>>0},I.Predictor13=function(w,D,H){var X=D[H-1];return(Rt((w=Oe(w,D[H+0]))>>24&255,X>>24&255)<<24|Rt(w>>16&255,X>>16&255)<<16|Rt(w>>8&255,X>>8&255)<<8|Rt(w>>0&255,X>>0&255))>>>0};var sm=I.PredictorAdd0;I.PredictorAdd1=Jt,We("Predictor2","PredictorAdd2"),We("Predictor3","PredictorAdd3"),We("Predictor4","PredictorAdd4"),We("Predictor5","PredictorAdd5"),We("Predictor6","PredictorAdd6"),We("Predictor7","PredictorAdd7"),We("Predictor8","PredictorAdd8"),We("Predictor9","PredictorAdd9"),We("Predictor10","PredictorAdd10"),We("Predictor11","PredictorAdd11"),We("Predictor12","PredictorAdd12"),We("Predictor13","PredictorAdd13");var Ad=I.PredictorAdd2;Ft("ColorIndexInverseTransform","MapARGB","32b",(function(w){return w>>8&255}),(function(w){return w})),Ft("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(w){return w}),(function(w){return w>>8&255}));var am,rl=I.ColorIndexInverseTransform,Nd=I.MapARGB,ug=I.VP8LColorIndexInverseTransformAlpha,oa=I.MapAlpha,yo=I.VP8LPredictorsAdd=[];yo.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Za,bo,uc,il,sl,Qh,Hs,Jc,hc,kl,_o,la,wo,Zc,eu,Sa,Jh,eo,Il,zr,Ur,Ci,Li,Dl,Rl,qs,Yu,to,Xu=s(511),om=s(2041),Cd=s(225),kd=s(767),lm=0,fc=om,Id=Cd,Ws=kd,Cs=Xu,cm=0,Gs=1,um=2,So=3,Dd=4,Zh=5,tu=6,Rd=7,hm=8,ef=9,fm=10,To=[2,3,7],tf=[3,3,11],Qu=[280,256,256,256,40],dm=[0,1,1,1,0],Pd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Eo=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ao=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],nu=8,No=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Co=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],no=null,yv=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],hg=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mm=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],bv=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],ks=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Kr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Wn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ca=[],gi=[],al=[],ru=1,fg=2,dc=[],Is=[];Ae("UpsampleRgbLinePair",Nn,3),Ae("UpsampleBgrLinePair",ar,3),Ae("UpsampleRgbaLinePair",Us,4),Ae("UpsampleBgraLinePair",ai,4),Ae("UpsampleArgbLinePair",pi,4),Ae("UpsampleRgba4444LinePair",pr,2),Ae("UpsampleRgb565LinePair",or,2);var Ju=I.UpsampleRgbLinePair,dg=I.UpsampleBgrLinePair,nf=I.UpsampleRgbaLinePair,pm=I.UpsampleBgraLinePair,iu=I.UpsampleArgbLinePair,Pl=I.UpsampleRgba4444LinePair,su=I.UpsampleRgb565LinePair,ko=16,rf=1<<ko-1,Zu=-227,au=482,gm=6,ou=0,Ds=s(256),xm=s(256),_v=s(256),T_=s(256),E_=s(au-Zu),A_=s(au-Zu);oc("YuvToRgbRow",Nn,3),oc("YuvToBgrRow",ar,3),oc("YuvToRgbaRow",Us,4),oc("YuvToBgraRow",ai,4),oc("YuvToArgbRow",pi,4),oc("YuvToRgba4444Row",pr,2),oc("YuvToRgb565Row",or,2);var ki=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sf=[0,2,8],jd=[8,7,6,4,4,2,2,2,1,1,1,1],Ld=1;this.WebPDecodeRGBA=function(w,D,H,X,ae){var ce=Gs,ue=new ia,fe=new tt;ue.ba=fe,fe.S=ce,fe.width=[fe.width],fe.height=[fe.height];var ge=fe.width,Se=fe.height,Re=new Pt;if(Re==null||w==null)var Qe=2;else e(Re!=null),Qe=Cl(w,D,H,Re.width,Re.height,Re.Pd,Re.Qd,Re.format,null);if(Qe!=0?ge=0:(ge!=null&&(ge[0]=Re.width[0]),Se!=null&&(Se[0]=Re.height[0]),ge=1),ge){fe.width=fe.width[0],fe.height=fe.height[0],X!=null&&(X[0]=fe.width),ae!=null&&(ae[0]=fe.height);e:{if(X=new ea,(ae=new $c).data=w,ae.w=D,ae.ha=H,ae.kd=1,D=[0],e(ae!=null),((w=Cl(ae.data,ae.w,ae.ha,null,null,null,D,null,ae))==0||w==7)&&D[0]&&(w=4),(D=w)==0){if(e(ue!=null),X.data=ae.data,X.w=ae.w+ae.offset,X.ha=ae.ha-ae.offset,X.put=nr,X.ac=hn,X.bc=Tr,X.ma=ue,ae.xa){if((w=rt())==null){ue=1;break e}if((function(Xe,Me){var pt=[0],st=[0],Pe=[0];t:for(;;){if(Xe==null)return 0;if(Me==null)return Xe.a=2,0;if(Xe.l=Me,Xe.a=0,se(Xe.m,Me.data,Me.w,Me.ha),!sn(Xe.m,pt,st,Pe)){Xe.a=3;break t}if(Xe.xb=fg,Me.width=pt[0],Me.height=st[0],!He(pt[0],st[0],1,Xe,null))break t;return 1}return e(Xe.a!=0),0})(w,X)){if(X=(D=cc(X.width,X.height,ue.Oa,ue.ba))==0){t:{X=w;n:for(;;){if(X==null){X=0;break t}if(e(X.s.yc!=null),e(X.s.Ya!=null),e(0<X.s.Wb),e((H=X.l)!=null),e((ae=H.ma)!=null),X.xb!=0){if(X.ca=ae.ba,X.tb=ae.tb,e(X.ca!=null),!lc(ae.Oa,H,So)){X.a=2;break n}if(!$e(X,H.width)||H.da)break n;if((H.da||wt(X.ca.S))&&pe(),11>X.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),X.ca.f.kb.F!=null&&pe()),X.Pb&&0<X.s.ua&&X.s.vb.X==null&&!at(X.s.vb,X.s.Wa.Xa)){X.a=1;break n}X.xb=0}if(!Ee(X,X.V,X.Ba,X.c,X.i,H.o,Te))break n;ae.Dc=X.Ma,X=1;break t}e(X.a!=0),X=0}X=!X}X&&(D=w.a)}else D=w.a}else{if((w=new ls)==null){ue=1;break e}if(w.Fa=ae.na,w.P=ae.P,w.qc=ae.Sa,Ei(w,X)){if((D=cc(X.width,X.height,ue.Oa,ue.ba))==0){if(w.Aa=0,H=ue.Oa,e((ae=w)!=null),H!=null){if(0<(ge=0>(ge=H.Md)?0:100<ge?255:255*ge/100)){for(Se=Re=0;4>Se;++Se)12>(Qe=ae.pb[Se]).lc&&(Qe.ia=ge*jd[0>Qe.lc?0:Qe.lc]>>3),Re|=Qe.ia;Re&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=H.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}hr(w,X)||(D=w.a)}}else D=w.a}D==0&&ue.Oa!=null&&ue.Oa.fd&&(D=Ed(ue.ba))}ue=D}ce=ue!=0?null:11>ce?fe.f.RGBA.eb:fe.f.kb.y}else ce=null;return ce};var vm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(I,O){for(var B="",R=0;R<4;R++)B+=String.fromCharCode(I[O++]);return B}function d(I,O){return(I[O+0]<<0|I[O+1]<<8|I[O+2]<<16)>>>0}function p(I,O){return(I[O+0]<<0|I[O+1]<<8|I[O+2]<<16|I[O+3]<<24)>>>0}new c;var x=[0],v=[0],_=[],b=new c,S=n,T=(function(I,O){var B={},R=0,P=!1,V=0,Y=0;if(B.frames=[],!(function(W,K,G,te){for(var he=0;he<te;he++)if(W[K+he]!=G.charCodeAt(he))return!0;return!1})(I,O,"RIFF",4)){var ie,q;for(p(I,O+=4),O+=8;O<I.length;){var Q=u(I,O),se=p(I,O+=4);O+=4;var J=se+(1&se);switch(Q){case"VP8 ":case"VP8L":B.frames[R]===void 0&&(B.frames[R]={}),(M=B.frames[R]).src_off=P?Y:O-8,M.src_size=V+se+8,R++,P&&(P=!1,V=0,Y=0);break;case"VP8X":(M=B.header={}).feature_flags=I[O];var me=O+4;M.canvas_width=1+d(I,me),me+=3,M.canvas_height=1+d(I,me),me+=3;break;case"ALPH":P=!0,V=J+8,Y=O-8;break;case"ANIM":(M=B.header).bgcolor=p(I,O),me=O+4,M.loop_count=(ie=I)[(q=me)+0]<<0|ie[q+1]<<8,me+=2;break;case"ANMF":var re,M;(M=B.frames[R]={}).offset_x=2*d(I,O),O+=3,M.offset_y=2*d(I,O),O+=3,M.width=1+d(I,O),O+=3,M.height=1+d(I,O),O+=3,M.duration=d(I,O),O+=3,re=I[O++],M.dispose=1&re,M.blend=re>>1&1}Q!="ANMF"&&(O+=J)}return B}})(S,0);T.response=S,T.rgbaoutput=!0,T.dataurl=!1;var k=T.header?T.header:null,E=T.frames?T.frames:null;if(k){k.loop_counter=k.loop_count,x=[k.canvas_height],v=[k.canvas_width];for(var j=0;j<E.length&&E[j].blend!=0;j++);}var F=E[0],z=b.WebPDecodeRGBA(S,F.src_off,F.src_size,v,x);F.rgba=z,F.imgwidth=v[0],F.imgheight=x[0];for(var A=0;A<v[0]*x[0]*4;A++)_[A]=z[A];return this.width=v,this.height=x,this.data=_,this}(function(n){var e=function(){return typeof _T=="function"},t=function(x,v,_,b){var S=4,T=a;switch(b){case n.image_compression.FAST:S=1,T=s;break;case n.image_compression.MEDIUM:S=6,T=o;break;case n.image_compression.SLOW:S=9,T=c}x=r(x,v,_,T);var k=_T(x,{level:S});return n.__addimage__.arrayBufferToBinaryString(k)},r=function(x,v,_,b){for(var S,T,k,E=x.length/v,j=new Uint8Array(x.length+E),F=d(),z=0;z<E;z+=1){if(k=z*v,S=x.subarray(k,k+v),b)j.set(b(S,_,T),k+z);else{for(var A,I=F.length,O=[];A<I;A+=1)O[A]=F[A](S,_,T);var B=p(O.concat());j.set(O[B],k+z)}T=S}return j},i=function(x){var v=Array.apply([],x);return v.unshift(0),v},s=function(x,v){var _,b=[],S=x.length;b[0]=1;for(var T=0;T<S;T+=1)_=x[T-v]||0,b[T+1]=x[T]-_+256&255;return b},a=function(x,v,_){var b,S=[],T=x.length;S[0]=2;for(var k=0;k<T;k+=1)b=_&&_[k]||0,S[k+1]=x[k]-b+256&255;return S},o=function(x,v,_){var b,S,T=[],k=x.length;T[0]=3;for(var E=0;E<k;E+=1)b=x[E-v]||0,S=_&&_[E]||0,T[E+1]=x[E]+256-(b+S>>>1)&255;return T},c=function(x,v,_){var b,S,T,k,E=[],j=x.length;E[0]=4;for(var F=0;F<j;F+=1)b=x[F-v]||0,S=_&&_[F]||0,T=_&&_[F-v]||0,k=u(b,S,T),E[F+1]=x[F]-k+256&255;return E},u=function(x,v,_){if(x===v&&v===_)return x;var b=Math.abs(v-_),S=Math.abs(x-_),T=Math.abs(x+v-_-_);return b<=S&&b<=T?x:S<=T?v:_},d=function(){return[i,s,a,o,c]},p=function(x){var v=x.map((function(_){return _.reduce((function(b,S){return b+Math.abs(S)}),0)}));return v.indexOf(Math.min.apply(null,v))};n.processPNG=function(x,v,_,b){var S,T,k,E,j,F,z,A,I,O,B,R,P,V,Y,ie=this.decode.FLATE_DECODE,q="";if(this.__addimage__.isArrayBuffer(x)&&(x=new Uint8Array(x)),this.__addimage__.isArrayBufferView(x)){if(x=(k=new r0e(x)).imgData,T=k.bits,S=k.colorSpace,j=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){I=(A=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,B=new Uint8Array(I*k.colors),O=new Uint8Array(I);var Q,se=k.pixelBitlength-k.bits;for(V=0,Y=0;V<I;V++){for(P=A[V],Q=0;Q<se;)B[Y++]=P>>>Q&255,Q+=k.bits;O[V]=P>>>Q&255}}if(k.bits===16){I=(A=new Uint32Array(k.decodePixels().buffer)).length,B=new Uint8Array(I*(32/k.pixelBitlength)*k.colors),O=new Uint8Array(I*(32/k.pixelBitlength)),R=k.colors>1,V=0,Y=0;for(var J=0;V<I;)P=A[V++],B[Y++]=P>>>0&255,R&&(B[Y++]=P>>>16&255,P=A[V++],B[Y++]=P>>>0&255),O[J++]=P>>>16&255;T=8}b!==n.image_compression.NONE&&e()?(x=t(B,k.width*k.colors,k.colors,b),z=t(O,k.width,1,b)):(x=B,z=O,ie=void 0)}if(k.colorType===3&&(S=this.color_spaces.INDEXED,F=k.palette,k.transparency.indexed)){var me=k.transparency.indexed,re=0;for(V=0,I=me.length;V<I;++V)re+=me[V];if((re/=255)===I-1&&me.indexOf(0)!==-1)E=[me.indexOf(0)];else if(re!==I){for(A=k.decodePixels(),O=new Uint8Array(A.length),V=0,I=A.length;V<I;V++)O[V]=me[A[V]];z=t(O,k.width,1)}}var M=(function(W){var K;switch(W){case n.image_compression.FAST:K=11;break;case n.image_compression.MEDIUM:K=13;break;case n.image_compression.SLOW:K=14;break;default:K=12}return K})(b);return ie===this.decode.FLATE_DECODE&&(q="/Predictor "+M+" "),q+="/Colors "+j+" /BitsPerComponent "+T+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),(z&&this.__addimage__.isArrayBuffer(z)||this.__addimage__.isArrayBufferView(z))&&(z=this.__addimage__.arrayBufferToBinaryString(z)),{alias:_,data:x,index:v,filter:ie,decodeParameters:q,transparency:E,palette:F,sMask:z,predictor:M,width:k.width,height:k.height,bitsPerComponent:T,colorSpace:S}}}})(vn.API),(function(n){n.processGIF89A=function(e,t,r,i){var s=new i0e(e),a=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},d=new Y5(100).encode(u,100);return n.processJPEG.call(this,d,t,r,i)},n.processGIF87A=n.processGIF89A})(vn.API),Sc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Sc.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Qr.log("bit decode error:"+t)}},Sc.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Sc.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Sc.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Sc.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=c,this.data[d+1]=o,this.data[d+2]=a,this.data[d+3]=u}this.pos+=n}},Sc.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=u,this.data[d+1]=c,this.data[d+2]=o,this.data[d+3]=255}this.pos+=n}},Sc.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Sc.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Sc.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(e,t,r,i){var s=new Sc(e,!1),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Y5(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}})(vn.API),GD.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(e,t,r,i){var s=new GD(e),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Y5(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}})(vn.API),vn.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var d=r[u],p=r[u+1],x=r[u+2],v=r[u+3];s[o++]=d,s[o++]=p,s[o++]=x,a[c++]=v}var _=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:_,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},vn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Jm=vn.API,K2=Jm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=u.fof?u.fof:1,p=e.doKerning!==!1,x=0,v=n.length,_=0,b=o[0]||c,S=[];for(t=0;t<v;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?S.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(x=p&&Mr(u[r])==="object"&&!isNaN(parseInt(u[r][_],10))?u[r][_]/d:0,S.push((o[r]||b)/c+x)),_=r;return S},UD=Jm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Jm.processArabic&&(n=Jm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:K2.apply(this,arguments).reduce((function(s,a){return s+a}),0)},HD=function(n,e,t,r){for(var i=[],s=0,a=n.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(n.slice(0,s));var c=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(n.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},qD=function(n,e,t){t||(t={});var r,i,s,a,o,c,u,d=[],p=[d],x=t.textIndent||0,v=0,_=0,b=n.split(" "),S=K2.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?b[0].length+2:t.lineIndent||0){var T=Array(c).join(" "),k=[];b.map((function(j){(j=j.split(/\s*\n/)).length>1?k=k.concat(j.map((function(F,z){return(z&&F.length?`
`:"")+F}))):k.push(j[0])})),b=k,c=UD.apply(this,[T,t])}for(s=0,a=b.length;s<a;s++){var E=0;if(r=b[s],c&&r[0]==`
`&&(r=r.substr(1),E=1),x+v+(_=(i=K2.apply(this,[r,t])).reduce((function(j,F){return j+F}),0))>e||E){if(_>e){for(o=HD.apply(this,[r,i,e-(x+v),e]),d.push(o.shift()),d=[o.pop()];o.length;)p.push([o.shift()]);_=i.slice(r.length-(d[0]?d[0].length:0)).reduce((function(j,F){return j+F}),0)}else d=[r];p.push(d),x=_+c,v=S}else d.push(r),x+=v+_,v=S}return u=c?function(j,F){return(F?T:"")+j.join(" ")}:function(j){return j.join(" ")},p.map(u)},Jm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=r.length;o<c;o++)u=u.concat(qD.apply(this,[r[o],a,s]));return u},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},a=n.__fontmetrics__.compress=function(p){var x,v,_,b,S=["{"];for(var T in p){if(x=p[T],isNaN(parseInt(T,10))?v="'"+T+"'":(T=parseInt(T,10),v=(v=s(T).slice(2)).slice(0,-1)+r[v.slice(-1)]),typeof x=="number")x<0?(_=s(x).slice(3),b="-"):(_=s(x).slice(2),b=""),_=b+_.slice(0,-1)+r[_.slice(-1)];else{if(Mr(x)!=="object")throw new Error("Don't know what to do with value type "+Mr(x)+".");_=a(x)}S.push(v+_)}return S.push("}"),S.join("")},o=n.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,v,_,b,S={},T=1,k=S,E=[],j="",F="",z=p.length-1,A=1;A<z;A+=1)(b=p[A])=="'"?x?(_=x.join(""),x=void 0):x=[]:x?x.push(b):b=="{"?(E.push([k,_]),k={},_=void 0):b=="}"?((v=E.pop())[0][v[1]]=k,_=void 0,k=v[0]):b=="-"?T=-1:_===void 0?t.hasOwnProperty(b)?(j+=t[b],_=parseInt(j,16)*T,T=1,j=""):j+=b:t.hasOwnProperty(b)?(F+=t[b],k[_]=parseInt(F,16)*T,T=1,_=void 0,F=""):F+=b;return S},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(p){var x=p.font,v=d.Unicode[x.postScriptName];v&&(x.metadata.Unicode={},x.metadata.Unicode.widths=v.widths,x.metadata.Unicode.kerning=v.kerning);var _=u.Unicode[x.postScriptName];_&&(x.metadata.Unicode.encoding=_,x.encoding=_.codePages[0])}])})(vn.API),(function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(K1(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])})(vn),(function(n){function e(){return(Sn.canvg?Promise.resolve(Sn.canvg):pT(()=>import("./index.es-BGm0f_-W.js"),[])).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}vn.API.addSvgAsImage=function(t,r,i,s,a,o,c,u){if(isNaN(r)||isNaN(i))throw Qr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Qr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=a;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var x={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},v=this;return e().then((function(_){return _.fromString(p,t,x)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(_){return _.render(x)})).then((function(){v.addImage(d.toDataURL("image/jpeg",1),r,i,s,a,c,u)}))}})(),vn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},vn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,d=0,p=0;function x(_,b){var S,T=!1;for(S=0;S<_.length;S+=1)_[S]===b&&(T=!0);return T}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var v=o.length;for(p=0;p<v;p+=1)t[o[p]].value=t[o[p]].defaultValue,t[o[p]].explicitSet=!1}if(Mr(n)==="object"){for(i in n)if(s=n[i],x(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&x(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(d=0;d<s[u].length;d+=1)typeof s[u][d]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var _,b=[];for(_ in t)t[_].explicitSet===!0&&(t[_].type==="name"?b.push("/"+_+" /"+t[_].value):b.push("/"+_+" "+t[_].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},(function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}})(vn.API),(function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],d=[""],p=0,x=s.length;p<x;++p){if(o=a.metadata.characterToGlyph(s.charCodeAt(p)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(p),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return d.join("");o=o.toString(16),d.push(u[4-o.length],o)}return d.join("")},r=function(s){var a,o,c,u,d,p,x;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],p=0,x=(o=Object.keys(s).sort((function(v,_){return v-_}))).length;p<x;p++)a=o[p],c.length>=100&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(d+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var p=o.metadata.Unicode.widths,x=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),v="",_=0;_<x.length;_++)v+=String.fromCharCode(x[_]);var b=u();d({data:v,addLength1:!0,objectId:b}),c("endobj");var S=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:S}),c("endobj");var T=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+op(o.fontName)),c("/FontFile2 "+b+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var k=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+op(o.fontName)),c("/FontDescriptor "+T+" 0 R"),c("/W "+n.API.PDFObject.convert(p)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+S+" 0 R"),c("/BaseFont /"+op(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+k+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,d=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var p=o.metadata.rawData,x="",v=0;v<p.length;v++)x+=String.fromCharCode(p[v]);var _=u();d({data:x,addLength1:!0,objectId:_}),c("endobj");var b=u();d({data:r(o.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var S=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+_+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+op(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var T=0;T<o.metadata.hmtx.widths.length;T++)o.metadata.hmtx.widths[T]=parseInt(o.metadata.hmtx.widths[T]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+op(o.fontName)+"/FontDescriptor "+S+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",c=s.x,u=s.y,d=s.options||{},p=s.mutex||{},x=p.pdfEscape,v=p.activeFontKey,_=p.fonts,b=v,S="",T=0,k="",E=_[b].encoding;if(_[b].encoding!=="Identity-H")return{text:o,x:c,y:u,options:d,mutex:p};for(k=o,b=v,Array.isArray(o)&&(k=o[0]),T=0;T<k.length;T+=1)_[b].metadata.hasOwnProperty("cmap")&&(a=_[b].metadata.cmap.unicode.codeMap[k[T].charCodeAt(0)]),a||k[T].charCodeAt(0)<256&&_[b].metadata.hasOwnProperty("Unicode")?S+=k[T]:S+="";var j="";return parseInt(b.slice(1))<14||E==="WinAnsiEncoding"?j=x(S,b).split("").map((function(F){return F.charCodeAt(0).toString(16)})).join(""):E==="Identity-H"&&(j=t(S,_[b])),p.isHex=!0,{text:j,x:c,y:u,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},c,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:a})).text}])})(vn),(function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}})(vn.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,o,c,u,d,p=e,x=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],v=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],_={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},S=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],T=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,E=0;this.__bidiEngine__={};var j=function(R){var P=R.charCodeAt(),V=P>>8,Y=b[V];return Y!==void 0?p[256*Y+(255&P)]:V===252||V===253?"AL":T.test(V)?"L":V===8?"R":"N"},F=function(R){for(var P,V=0;V<R.length;V++){if((P=j(R.charAt(V)))==="L")return!1;if(P==="R")return!0}return!1},z=function(R,P,V,Y){var ie,q,Q,se,J=P[Y];switch(J){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(J="AN");break;case"AL":k=!0,J="R";break;case"WS":J="N";break;case"CS":Y<1||Y+1>=P.length||(ie=V[Y-1])!=="EN"&&ie!=="AN"||(q=P[Y+1])!=="EN"&&q!=="AN"?J="N":k&&(q="AN"),J=q===ie?q:"N";break;case"ES":J=(ie=Y>0?V[Y-1]:"B")==="EN"&&Y+1<P.length&&P[Y+1]==="EN"?"EN":"N";break;case"ET":if(Y>0&&V[Y-1]==="EN"){J="EN";break}if(k){J="N";break}for(Q=Y+1,se=P.length;Q<se&&P[Q]==="ET";)Q++;J=Q<se&&P[Q]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(se=P.length,Q=Y+1;Q<se&&P[Q]==="NSM";)Q++;if(Q<se){var me=R[Y],re=me>=1425&&me<=2303||me===64286;if(ie=P[Q],re&&(ie==="R"||ie==="AL")){J="R";break}}}J=Y<1||(ie=P[Y-1])==="B"?"N":V[Y-1];break;case"B":k=!1,i=!0,J=E;break;case"S":s=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":J="N"}return J},A=function(R,P,V){var Y=R.split("");return V&&I(Y,V,{hiLevel:E}),Y.reverse(),P&&P.reverse(),Y.join("")},I=function(R,P,V){var Y,ie,q,Q,se,J=-1,me=R.length,re=0,M=[],W=E?v:x,K=[];for(k=!1,i=!1,s=!1,ie=0;ie<me;ie++)K[ie]=j(R[ie]);for(q=0;q<me;q++){if(se=re,M[q]=z(R,K,M,q),Y=240&(re=W[se][_[M[q]]]),re&=15,P[q]=Q=W[re][5],Y>0)if(Y===16){for(ie=J;ie<q;ie++)P[ie]=1;J=-1}else J=-1;if(W[re][6])J===-1&&(J=q);else if(J>-1){for(ie=J;ie<q;ie++)P[ie]=Q;J=-1}K[q]==="B"&&(P[q]=0),V.hiLevel|=Q}s&&(function(G,te,he){for(var ye=0;ye<he;ye++)if(G[ye]==="S"){te[ye]=E;for(var be=ye-1;be>=0&&G[be]==="WS";be--)te[be]=E}})(K,P,me)},O=function(R,P,V,Y,ie){if(!(ie.hiLevel<R)){if(R===1&&E===1&&!i)return P.reverse(),void(V&&V.reverse());for(var q,Q,se,J,me=P.length,re=0;re<me;){if(Y[re]>=R){for(se=re+1;se<me&&Y[se]>=R;)se++;for(J=re,Q=se-1;J<Q;J++,Q--)q=P[J],P[J]=P[Q],P[Q]=q,V&&(q=V[J],V[J]=V[Q],V[Q]=q);re=se}re++}}},B=function(R,P,V){var Y=R.split(""),ie={hiLevel:E};return V||(V=[]),I(Y,V,ie),(function(q,Q,se){if(se.hiLevel!==0&&d)for(var J,me=0;me<q.length;me++)Q[me]===1&&(J=S.indexOf(q[me]))>=0&&(q[me]=S[J+1])})(Y,V,ie),O(2,Y,P,V,ie),O(1,Y,P,V,ie),Y.join("")};return this.__bidiEngine__.doBidiReorder=function(R,P,V){if((function(ie,q){if(q)for(var Q=0;Q<ie.length;Q++)q[Q]=Q;o===void 0&&(o=F(ie)),u===void 0&&(u=F(ie))})(R,P),a||!c||u)if(a&&c&&o^u)E=o?1:0,R=A(R,P,V);else if(!a&&c&&u)E=o?1:0,R=B(R,P,V),R=A(R,P);else if(!a||o||c||u){if(a&&!c&&o^u)R=A(R,P),o?(E=0,R=B(R,P,V)):(E=1,R=B(R,P,V),R=A(R,P));else if(a&&o&&!c&&u)E=1,R=B(R,P,V),R=A(R,P);else if(!a&&!c&&o^u){var Y=d;o?(E=1,R=B(R,P,V),E=0,d=!1,R=B(R,P,V),d=Y):(E=0,R=B(R,P,V),R=A(R,P),E=1,d=!1,R=B(R,P,V),d=Y,R=A(R,P))}}else E=0,R=B(R,P,V);else E=o?1:0,R=B(R,P,V);return R},this.__bidiEngine__.setOptions=function(R){R&&(a=R.isInputVisual,c=R.isOutputVisual,o=R.isInputRtl,u=R.isOutputRtl,d=R.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])})(vn),vn.API.TTFFont=(function(){function n(e){var t;if(this.rawData=e,t=this.contents=new fd(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new y0e(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new s0e(this.contents),this.head=new o0e(this),this.name=new f0e(this),this.cmap=new a7(this),this.toUnicode={},this.hhea=new l0e(this),this.maxp=new d0e(this),this.hmtx=new m0e(this),this.post=new u0e(this),this.os2=new c0e(this),this.loca=new v0e(this),this.glyf=new p0e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),(32768&(t=i>>16))!=0&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n})();var zc,fd=(function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,o,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n})(),s0e=(function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,o,c,u,d,p,x,v,_,b;for(b in v=Object.keys(t).length,c=Math.log(2),p=16*Math.floor(Math.log(v)/c),a=Math.floor(p/c),d=16*v-p,(i=new fd).writeInt(this.scalarType),i.writeShort(v),i.writeShort(p),i.writeShort(a),i.writeShort(d),s=16*v,u=i.pos+s,o=null,_=[],t)for(x=t[b],i.writeString(b),i.writeInt(n(x)),i.writeInt(u),i.writeInt(x.length),_=_.concat(x),b==="head"&&(o=u),u+=x.length;u%4;)_.push(0),u++;return i.write(_),r=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=o7.call(t);t.length%4;)t.push(0);for(s=new fd(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e})(),a0e={}.hasOwnProperty,Vu=function(n,e){for(var t in e)a0e.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};zc=(function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var o0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new fd).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),$D=(function(){function n(e,t){var r,i,s,a,o,c,u,d,p,x,v,_,b,S,T,k,E;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(v=e.readUInt16(),x=v/2,e.pos+=6,s=(function(){var j,F;for(F=[],c=j=0;0<=x?j<x:j>x;c=0<=x?++j:--j)F.push(e.readUInt16());return F})(),e.pos+=2,b=(function(){var j,F;for(F=[],c=j=0;0<=x?j<x:j>x;c=0<=x?++j:--j)F.push(e.readUInt16());return F})(),u=(function(){var j,F;for(F=[],c=j=0;0<=x?j<x:j>x;c=0<=x?++j:--j)F.push(e.readUInt16());return F})(),d=(function(){var j,F;for(F=[],c=j=0;0<=x?j<x:j>x;c=0<=x?++j:--j)F.push(e.readUInt16());return F})(),i=(this.length-e.pos+this.offset)/2,o=(function(){var j,F;for(F=[],c=j=0;0<=i?j<i:j>i;c=0<=i?++j:--j)F.push(e.readUInt16());return F})(),c=T=0,E=s.length;T<E;c=++T)for(S=s[c],r=k=_=b[c];_<=S?k<=S:k>=S;r=_<=S?++k:--k)d[c]===0?a=r+u[c]:(a=o[d[c]/2+(r-_)-(x-c)]||0)!==0&&(a+=u[c]),this.codeMap[r]=65535&a}e.pos=p}return n.encode=function(e,t){var r,i,s,a,o,c,u,d,p,x,v,_,b,S,T,k,E,j,F,z,A,I,O,B,R,P,V,Y,ie,q,Q,se,J,me,re,M,W,K,G,te,he,ye,be,Ce,ke,oe;switch(Y=new fd,a=Object.keys(e).sort((function(qe,at){return qe-at})),t){case"macroman":for(b=0,S=(function(){var qe=[];for(_=0;_<256;++_)qe.push(0);return qe})(),k={0:0},s={},ie=0,J=a.length;ie<J;ie++)k[be=e[i=a[ie]]]==null&&(k[be]=++b),s[i]={old:e[i],new:k[e[i]]},S[i]=k[e[i]];return Y.writeUInt16(1),Y.writeUInt16(0),Y.writeUInt32(12),Y.writeUInt16(0),Y.writeUInt16(262),Y.writeUInt16(0),Y.write(S),{charMap:s,subtable:Y.data,maxGlyphID:b+1};case"unicode":for(P=[],p=[],E=0,k={},r={},T=u=null,q=0,me=a.length;q<me;q++)k[F=e[i=a[q]]]==null&&(k[F]=++E),r[i]={old:F,new:k[F]},o=k[F]-i,T!=null&&o===u||(T&&p.push(T),P.push(i),u=o),T=i;for(T&&p.push(T),p.push(65535),P.push(65535),B=2*(O=P.length),I=2*Math.pow(Math.log(O)/Math.LN2,2),x=Math.log(I/2)/Math.LN2,A=2*O-I,c=[],z=[],v=[],_=Q=0,re=P.length;Q<re;_=++Q){if(R=P[_],d=p[_],R===65535){c.push(0),z.push(0);break}if(R-(V=r[R].new)>=32768)for(c.push(0),z.push(2*(v.length+O-_)),i=se=R;R<=d?se<=d:se>=d;i=R<=d?++se:--se)v.push(r[i].new);else c.push(V-R),z.push(0)}for(Y.writeUInt16(3),Y.writeUInt16(1),Y.writeUInt32(12),Y.writeUInt16(4),Y.writeUInt16(16+8*O+2*v.length),Y.writeUInt16(0),Y.writeUInt16(B),Y.writeUInt16(I),Y.writeUInt16(x),Y.writeUInt16(A),he=0,M=p.length;he<M;he++)i=p[he],Y.writeUInt16(i);for(Y.writeUInt16(0),ye=0,W=P.length;ye<W;ye++)i=P[ye],Y.writeUInt16(i);for(Ce=0,K=c.length;Ce<K;Ce++)o=c[Ce],Y.writeUInt16(o);for(ke=0,G=z.length;ke<G;ke++)j=z[ke],Y.writeUInt16(j);for(oe=0,te=v.length;oe<te;oe++)b=v[oe],Y.writeUInt16(b);return{charMap:r,subtable:Y.data,maxGlyphID:E+1}}},n})(),a7=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new $D(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=$D.encode(t,r),(s=new fd).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e})(),l0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),c0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i})(),this.charRange=(function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),u0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e})(),h0e=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},f0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,o,c,u,d,p,x,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=p=0,x=i.length;p<x;a=++p)s=i[a],t.pos=s.offset,d=t.readString(s.length),o=new h0e(d,s),u[v=s.nameID]==null&&(u[v]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e})(),d0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),m0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,o,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(t.readInt16());return p})(),this.widths=(function(){var d,p,x,v;for(v=[],d=0,p=(x=this.metrics).length;d<p;d++)a=x[d],v.push(a.advance);return v}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),o7=[].slice,p0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,o,c,u,d,p,x;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,o=(c=new fd(r.read(s))).readShort(),d=c.readShort(),x=c.readShort(),u=c.readShort(),p=c.readShort(),this.cache[t]=o===-1?new x0e(c,d,x,u,p):new g0e(c,o,d,x,u,p),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,o,c,u;for(o=[],a=[],c=0,u=r.length;c<u;c++)s=t[r[c]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e})(),g0e=(function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),x0e=(function(){function n(e,t,r,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new fd(o7.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n})(),v0e=(function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Vu(e,zc),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e})(),y0e=(function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,o,c,u,d,p,x,v,_,b,S,T;for(i in r=a7.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),v={0:0},T=r.charMap)v[(c=T[i]).old]=c.new;for(_ in x=r.maxGlyphID,a)_ in v||(v[_]=x++);return d=(function(k){var E,j;for(E in j={},k)j[k[E]]=E;return j})(v),p=Object.keys(d).sort((function(k,E){return k-E})),b=(function(){var k,E,j;for(j=[],k=0,E=p.length;k<E;k++)o=p[k],j.push(d[o]);return j})(),s=this.font.glyf.encode(a,b,v),u=this.font.loca.encode(s.offsets,b),S={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(S["OS/2"]=this.font.os2.raw()),this.font.directory.encode(S)},n})();vn.API.PDFObject=(function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+(function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)r=t[o],u.push(e.convert(r));return u})().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e})();const b0e=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:Qde,AcroFormAppearance:rn,AcroFormButton:js,AcroFormCheckBox:Q1,AcroFormChoiceField:y0,AcroFormComboBox:_0,AcroFormEditBox:Y1,AcroFormListBox:b0,AcroFormPasswordField:J1,AcroFormPushButton:X1,AcroFormRadioButton:w0,AcroFormTextField:ed,GState:Wx,ShadingPattern:Mf,TilingPattern:o0,default:vn,jsPDF:vn},Symbol.toStringTag,{value:"Module"}));var Ey={exports:{}};const _0e=P9(b0e);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.2
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */var KD=Ey.exports,YD;function w0e(){return YD||(YD=1,(function(n,e){(function(r,i){n.exports=i((function(){try{return _0e}catch{}})())})(typeof globalThis<"u"?globalThis:typeof KD<"u"?KD:typeof window<"u"?window:typeof self<"u"?self:R9,function(t){return(function(){var r={172:(function(o,c){var u=this&&this.__extends||(function(){var x=function(v,_){return x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,S){b.__proto__=S}||function(b,S){for(var T in S)Object.prototype.hasOwnProperty.call(S,T)&&(b[T]=S[T])},x(v,_)};return function(v,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");x(v,_);function b(){this.constructor=v}v.prototype=_===null?Object.create(_):(b.prototype=_.prototype,new b)}})();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var d=(function(){function x(v,_,b){this.table=_,this.pageNumber=_.pageNumber,this.pageCount=this.pageNumber,this.settings=_.settings,this.cursor=b,this.doc=v.getDocument()}return x})();c.HookData=d;var p=(function(x){u(v,x);function v(_,b,S,T,k,E){var j=x.call(this,_,b,E)||this;return j.cell=S,j.row=T,j.column=k,j.section=T.section,j}return v})(d);c.CellHookData=p}),340:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0});var d=u(4),p=u(136),x=u(744),v=u(776),_=u(664),b=u(972);function S(T){T.API.autoTable=function(){for(var k=[],E=0;E<arguments.length;E++)k[E]=arguments[E];var j;k.length===1?j=k[0]:(console.error("Use of deprecated autoTable initiation"),j=k[2]||{},j.columns=k[0],j.body=k[1]);var F=(0,v.parseInput)(this,j),z=(0,b.createTable)(this,F);return(0,_.drawTable)(this,z),this},T.API.lastAutoTable=!1,T.API.previousAutoTable=!1,T.API.autoTable.previous=!1,T.API.autoTableText=function(k,E,j,F){(0,p.default)(k,E,j,F,this)},T.API.autoTableSetDefaults=function(k){return x.DocHandler.setDefaults(k,this),this},T.autoTableSetDefaults=function(k,E){x.DocHandler.setDefaults(k,E)},T.API.autoTableHtmlToJson=function(k,E){var j;if(E===void 0&&(E=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var F=new x.DocHandler(this),z=(0,d.parseHtml)(F,k,window,E,!1),A=z.head,I=z.body,O=((j=A[0])===null||j===void 0?void 0:j.map(function(B){return B.content}))||[];return{columns:O,rows:I,data:I}},T.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var k=this.lastAutoTable;return k&&k.finalY?k.finalY:0},T.API.autoTableAddPageContent=function(k){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),T.API.autoTable.globalDefaults||(T.API.autoTable.globalDefaults={}),T.API.autoTable.globalDefaults.addPageContent=k,this},T.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=S}),136:(function(o,c){Object.defineProperty(c,"__esModule",{value:!0});function u(d,p,x,v,_){v=v||{};var b=1.15,S=_.internal.scaleFactor,T=_.internal.getFontSize()/S,k=_.getLineHeightFactor?_.getLineHeightFactor():b,E=T*k,j=/\r\n|\r|\n/g,F="",z=1;if((v.valign==="middle"||v.valign==="bottom"||v.halign==="center"||v.halign==="right")&&(F=typeof d=="string"?d.split(j):d,z=F.length||1),x+=T*(2-b),v.valign==="middle"?x-=z/2*E:v.valign==="bottom"&&(x-=z*E),v.halign==="center"||v.halign==="right"){var A=T;if(v.halign==="center"&&(A*=.5),F&&z>=1){for(var I=0;I<F.length;I++)_.text(F[I],p-_.getStringUnitWidth(F[I])*A,x),x+=E;return _}p-=_.getStringUnitWidth(d)*A}return v.halign==="justify"?_.text(d,p,x,{maxWidth:v.maxWidth||100,align:"justify"}):_.text(d,p,x),_}c.default=u}),420:(function(o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function u(_,b,S){S.applyStyles(b,!0);var T=Array.isArray(_)?_:[_],k=T.map(function(E){return S.getTextWidth(E)}).reduce(function(E,j){return Math.max(E,j)},0);return k}c.getStringWidth=u;function d(_,b,S,T){var k=b.settings.tableLineWidth,E=b.settings.tableLineColor;_.applyStyles({lineWidth:k,lineColor:E});var j=p(k,!1);j&&_.rect(S.x,S.y,b.getWidth(_.pageSize().width),T.y-S.y,j)}c.addTableBorder=d;function p(_,b){var S=_>0,T=b||b===0;return S&&T?"DF":S?"S":T?"F":null}c.getFillStyle=p;function x(_,b){var S,T,k,E;if(_=_||b,Array.isArray(_)){if(_.length>=4)return{top:_[0],right:_[1],bottom:_[2],left:_[3]};if(_.length===3)return{top:_[0],right:_[1],bottom:_[2],left:_[1]};if(_.length===2)return{top:_[0],right:_[1],bottom:_[0],left:_[1]};_.length===1?_=_[0]:_=b}return typeof _=="object"?(typeof _.vertical=="number"&&(_.top=_.vertical,_.bottom=_.vertical),typeof _.horizontal=="number"&&(_.right=_.horizontal,_.left=_.horizontal),{left:(S=_.left)!==null&&S!==void 0?S:b,top:(T=_.top)!==null&&T!==void 0?T:b,right:(k=_.right)!==null&&k!==void 0?k:b,bottom:(E=_.bottom)!==null&&E!==void 0?E:b}):(typeof _!="number"&&(_=b),{top:_,right:_,bottom:_,left:_})}c.parseSpacing=x;function v(_,b){var S=x(b.settings.margin,0);return _.pageSize().width-(S.left+S.right)}c.getPageAvailableWidth=v}),796:(function(o,c){var u=this&&this.__extends||(function(){var v=function(_,b){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,T){S.__proto__=T}||function(S,T){for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(S[k]=T[k])},v(_,b)};return function(_,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");v(_,b);function S(){this.constructor=_}_.prototype=b===null?Object.create(b):(S.prototype=b.prototype,new S)}})();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var d=(function(v){u(_,v);function _(b){var S=v.call(this)||this;return S._element=b,S}return _})(Array);c.HtmlRowInput=d;function p(v){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/v,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=p;function x(v){var _={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return _[v]}c.getTheme=x}),903:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var d=u(420);function p(S,T,k,E,j){var F={},z=1.3333333333333333,A=v(T,function(J){return j.getComputedStyle(J).backgroundColor});A!=null&&(F.fillColor=A);var I=v(T,function(J){return j.getComputedStyle(J).color});I!=null&&(F.textColor=I);var O=b(E,k);O&&(F.cellPadding=O);var B="borderTopColor",R=z*k,P=E.borderTopWidth;if(E.borderBottomWidth===P&&E.borderRightWidth===P&&E.borderLeftWidth===P){var V=(parseFloat(P)||0)/R;V&&(F.lineWidth=V)}else F.lineWidth={top:(parseFloat(E.borderTopWidth)||0)/R,right:(parseFloat(E.borderRightWidth)||0)/R,bottom:(parseFloat(E.borderBottomWidth)||0)/R,left:(parseFloat(E.borderLeftWidth)||0)/R},F.lineWidth.top||(F.lineWidth.right?B="borderRightColor":F.lineWidth.bottom?B="borderBottomColor":F.lineWidth.left&&(B="borderLeftColor"));console.log(F.lineWidth);var Y=v(T,function(J){return j.getComputedStyle(J)[B]});Y!=null&&(F.lineColor=Y);var ie=["left","right","center","justify"];ie.indexOf(E.textAlign)!==-1&&(F.halign=E.textAlign),ie=["middle","bottom","top"],ie.indexOf(E.verticalAlign)!==-1&&(F.valign=E.verticalAlign);var q=parseInt(E.fontSize||"");isNaN(q)||(F.fontSize=q/z);var Q=x(E);Q&&(F.fontStyle=Q);var se=(E.fontFamily||"").toLowerCase();return S.indexOf(se)!==-1&&(F.font=se),F}c.parseCss=p;function x(S){var T="";return(S.fontWeight==="bold"||S.fontWeight==="bolder"||parseInt(S.fontWeight)>=700)&&(T="bold"),(S.fontStyle==="italic"||S.fontStyle==="oblique")&&(T+="italic"),T}function v(S,T){var k=_(S,T);if(!k)return null;var E=k.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!E||!Array.isArray(E))return null;var j=[parseInt(E[1]),parseInt(E[2]),parseInt(E[3])],F=parseInt(E[4]);return F===0||isNaN(j[0])||isNaN(j[1])||isNaN(j[2])?null:j}function _(S,T){var k=T(S);return k==="rgba(0, 0, 0, 0)"||k==="transparent"||k==="initial"||k==="inherit"?S.parentElement==null?null:_(S.parentElement,T):k}function b(S,T){var k=[S.paddingTop,S.paddingRight,S.paddingBottom,S.paddingLeft],E=96/(72/T),j=(parseInt(S.lineHeight)-parseInt(S.fontSize))/T/2,F=k.map(function(A){return parseInt(A||"0")/E}),z=(0,d.parseSpacing)(F,0);return j>z.top&&(z.top=j),j>z.bottom&&(z.bottom=j),z}}),744:(function(o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var u={},d=(function(){function p(x){this.jsPDFDocument=x,this.userStyles={textColor:x.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:x.internal.getFontSize(),fontStyle:x.internal.getFont().fontStyle,font:x.internal.getFont().fontName,lineWidth:x.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:x.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return p.setDefaults=function(x,v){v===void 0&&(v=null),v?v.__autoTableDocumentDefaults=x:u=x},p.unifyColor=function(x){return Array.isArray(x)?x:typeof x=="number"?[x,x,x]:typeof x=="string"?[x]:null},p.prototype.applyStyles=function(x,v){var _,b,S;v===void 0&&(v=!1),x.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(x.fontStyle);var T=this.jsPDFDocument.internal.getFont(),k=T.fontStyle,E=T.fontName;if(x.font&&(E=x.font),x.fontStyle){k=x.fontStyle;var j=this.getFontList()[E];j&&j.indexOf(k)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(j[0]),k=j[0])}if(this.jsPDFDocument.setFont(E,k),x.fontSize&&this.jsPDFDocument.setFontSize(x.fontSize),!v){var F=p.unifyColor(x.fillColor);F&&(_=this.jsPDFDocument).setFillColor.apply(_,F),F=p.unifyColor(x.textColor),F&&(b=this.jsPDFDocument).setTextColor.apply(b,F),F=p.unifyColor(x.lineColor),F&&(S=this.jsPDFDocument).setDrawColor.apply(S,F),typeof x.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(x.lineWidth)}},p.prototype.splitTextToSize=function(x,v,_){return this.jsPDFDocument.splitTextToSize(x,v,_)},p.prototype.rect=function(x,v,_,b,S){return this.jsPDFDocument.rect(x,v,_,b,S)},p.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},p.prototype.getTextWidth=function(x){return this.jsPDFDocument.getTextWidth(x)},p.prototype.getDocument=function(){return this.jsPDFDocument},p.prototype.setPage=function(x){this.jsPDFDocument.setPage(x)},p.prototype.addPage=function(){return this.jsPDFDocument.addPage()},p.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},p.prototype.getGlobalOptions=function(){return u||{}},p.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},p.prototype.pageSize=function(){var x=this.jsPDFDocument.internal.pageSize;return x.width==null&&(x={width:x.getWidth(),height:x.getHeight()}),x},p.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},p.prototype.getLineHeightFactor=function(){var x=this.jsPDFDocument;return x.getLineHeightFactor?x.getLineHeightFactor():1.15},p.prototype.getLineHeight=function(x){return x/this.scaleFactor()*this.getLineHeightFactor()},p.prototype.pageNumber=function(){var x=this.jsPDFDocument.internal.getCurrentPageInfo();return x?x.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},p})();c.DocHandler=d}),4:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var d=u(903),p=u(796);function x(b,S,T,k,E){var j,F;k===void 0&&(k=!1),E===void 0&&(E=!1);var z;typeof S=="string"?z=T.document.querySelector(S):z=S;var A=Object.keys(b.getFontList()),I=b.scaleFactor(),O=[],B=[],R=[];if(!z)return console.error("Html table could not be found with input: ",S),{head:O,body:B,foot:R};for(var P=0;P<z.rows.length;P++){var V=z.rows[P],Y=(F=(j=V==null?void 0:V.parentElement)===null||j===void 0?void 0:j.tagName)===null||F===void 0?void 0:F.toLowerCase(),ie=v(A,I,T,V,k,E);ie&&(Y==="thead"?O.push(ie):Y==="tfoot"?R.push(ie):B.push(ie))}return{head:O,body:B,foot:R}}c.parseHtml=x;function v(b,S,T,k,E,j){for(var F=new p.HtmlRowInput(k),z=0;z<k.cells.length;z++){var A=k.cells[z],I=T.getComputedStyle(A);if(E||I.display!=="none"){var O=void 0;j&&(O=(0,d.parseCss)(b,A,S,I,T)),F.push({rowSpan:A.rowSpan,colSpan:A.colSpan,styles:O,_element:A,content:_(A)})}}var B=T.getComputedStyle(k);if(F.length>0&&(E||B.display!=="none"))return F}function _(b){var S=b.cloneNode(!0);return S.innerHTML=S.innerHTML.replace(/\n/g,"").replace(/ +/g," "),S.innerHTML=S.innerHTML.split(/<br.*?>/).map(function(T){return T.trim()}).join(`
`),S.innerText||S.textContent||""}}),776:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var d=u(4),p=u(356),x=u(420),v=u(744),_=u(792);function b(z,A){var I=new v.DocHandler(z),O=I.getDocumentOptions(),B=I.getGlobalOptions();(0,_.default)(I,B,O,A);var R=(0,p.assign)({},B,O,A),P;typeof window<"u"&&(P=window);var V=S(B,O,A),Y=T(B,O,A),ie=k(I,R),q=j(I,R,P);return{id:A.tableId,content:q,hooks:Y,styles:V,settings:ie}}c.parseInput=b;function S(z,A,I){for(var O={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},B=function(Y){if(Y==="columnStyles"){var ie=z[Y],q=A[Y],Q=I[Y];O.columnStyles=(0,p.assign)({},ie,q,Q)}else{var se=[z,A,I],J=se.map(function(me){return me[Y]||{}});O[Y]=(0,p.assign)({},J[0],J[1],J[2])}},R=0,P=Object.keys(O);R<P.length;R++){var V=P[R];B(V)}return O}function T(z,A,I){for(var O=[z,A,I],B={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},R=0,P=O;R<P.length;R++){var V=P[R];V.didParseCell&&B.didParseCell.push(V.didParseCell),V.willDrawCell&&B.willDrawCell.push(V.willDrawCell),V.didDrawCell&&B.didDrawCell.push(V.didDrawCell),V.willDrawPage&&B.willDrawPage.push(V.willDrawPage),V.didDrawPage&&B.didDrawPage.push(V.didDrawPage)}return B}function k(z,A){var I,O,B,R,P,V,Y,ie,q,Q,se,J,me=(0,x.parseSpacing)(A.margin,40/z.scaleFactor()),re=(I=E(z,A.startY))!==null&&I!==void 0?I:me.top,M;A.showFoot===!0?M="everyPage":A.showFoot===!1?M="never":M=(O=A.showFoot)!==null&&O!==void 0?O:"everyPage";var W;A.showHead===!0?W="everyPage":A.showHead===!1?W="never":W=(B=A.showHead)!==null&&B!==void 0?B:"everyPage";var K=(R=A.useCss)!==null&&R!==void 0?R:!1,G=A.theme||(K?"plain":"striped"),te=!!A.horizontalPageBreak,he=(P=A.horizontalPageBreakRepeat)!==null&&P!==void 0?P:null;return{includeHiddenHtml:(V=A.includeHiddenHtml)!==null&&V!==void 0?V:!1,useCss:K,theme:G,startY:re,margin:me,pageBreak:(Y=A.pageBreak)!==null&&Y!==void 0?Y:"auto",rowPageBreak:(ie=A.rowPageBreak)!==null&&ie!==void 0?ie:"auto",tableWidth:(q=A.tableWidth)!==null&&q!==void 0?q:"auto",showHead:W,showFoot:M,tableLineWidth:(Q=A.tableLineWidth)!==null&&Q!==void 0?Q:0,tableLineColor:(se=A.tableLineColor)!==null&&se!==void 0?se:200,horizontalPageBreak:te,horizontalPageBreakRepeat:he,horizontalPageBreakBehaviour:(J=A.horizontalPageBreakBehaviour)!==null&&J!==void 0?J:"afterAllRows"}}function E(z,A){var I=z.getLastAutoTable(),O=z.scaleFactor(),B=z.pageNumber(),R=!1;if(I&&I.startPageNumber){var P=I.startPageNumber+I.pageNumber-1;R=P===B}return typeof A=="number"?A:(A==null||A===!1)&&R&&(I==null?void 0:I.finalY)!=null?I.finalY+20/O:null}function j(z,A,I){var O=A.head||[],B=A.body||[],R=A.foot||[];if(A.html){var P=A.includeHiddenHtml;if(I){var V=(0,d.parseHtml)(z,A.html,I,P,A.useCss)||{};O=V.head||O,B=V.body||O,R=V.foot||O}else console.error("Cannot parse html in non browser environment")}var Y=A.columns||F(O,B,R);return{columns:Y,head:O,body:B,foot:R}}function F(z,A,I){var O=z[0]||A[0]||I[0]||[],B=[];return Object.keys(O).filter(function(R){return R!=="_element"}).forEach(function(R){var P=1,V;Array.isArray(O)?V=O[parseInt(R)]:V=O[R],typeof V=="object"&&!Array.isArray(V)&&(P=(V==null?void 0:V.colSpan)||1);for(var Y=0;Y<P;Y++){var ie=void 0;Array.isArray(O)?ie=B.length:ie=R+(Y>0?"_".concat(Y):"");var q={dataKey:ie};B.push(q)}}),B}}),792:(function(o,c){Object.defineProperty(c,"__esModule",{value:!0});function u(p,x,v,_){for(var b=function(E){E&&typeof E!="object"&&console.error("The options parameter should be of type object, is: "+typeof E),typeof E.extendWidth<"u"&&(E.tableWidth=E.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof E.margins<"u"&&(typeof E.margin>"u"&&(E.margin=E.margins),console.error("Use of deprecated option: margins, use margin instead.")),E.startY&&typeof E.startY!="number"&&(console.error("Invalid value for startY option",E.startY),delete E.startY),!E.didDrawPage&&(E.afterPageContent||E.beforePageContent||E.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),E.didDrawPage=function(R){p.applyStyles(p.userStyles),E.beforePageContent&&E.beforePageContent(R),p.applyStyles(p.userStyles),E.afterPageContent&&E.afterPageContent(R),p.applyStyles(p.userStyles),E.afterPageAdd&&R.pageNumber>1&&R.afterPageAdd(R),p.applyStyles(p.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(R){E[R]&&console.error('The "'.concat(R,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(R){var P=R[0],V=R[1];E[V]&&(console.error("Use of deprecated option ".concat(V,". Use ").concat(P," instead")),E[P]=E[V])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(R){var P=typeof R=="string"?R:R[0],V=typeof R=="string"?R:R[1];typeof E[P]<"u"&&(typeof E.styles[V]>"u"&&(E.styles[V]=E[P]),console.error("Use of deprecated option: "+P+", use the style "+V+" instead."))});for(var j=0,F=["styles","bodyStyles","headStyles","footStyles"];j<F.length;j++){var z=F[j];d(E[z]||{})}for(var A=E.columnStyles||{},I=0,O=Object.keys(A);I<O.length;I++){var B=O[I];d(A[B]||{})}},S=0,T=[x,v,_];S<T.length;S++){var k=T[S];b(k)}}c.default=u;function d(p){p.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),p.minCellHeight||(p.minCellHeight=p.rowHeight)):p.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),p.cellWidth||(p.cellWidth=p.columnWidth))}}),260:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var d=u(796),p=u(172),x=u(420),v=(function(){function T(k,E){this.pageNumber=1,this.pageCount=1,this.id=k.id,this.settings=k.settings,this.styles=k.styles,this.hooks=k.hooks,this.columns=E.columns,this.head=E.head,this.body=E.body,this.foot=E.foot}return T.prototype.getHeadHeight=function(k){return this.head.reduce(function(E,j){return E+j.getMaxCellHeight(k)},0)},T.prototype.getFootHeight=function(k){return this.foot.reduce(function(E,j){return E+j.getMaxCellHeight(k)},0)},T.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},T.prototype.callCellHooks=function(k,E,j,F,z,A){for(var I=0,O=E;I<O.length;I++){var B=O[I],R=new p.CellHookData(k,this,j,F,z,A),P=B(R)===!1;if(j.text=Array.isArray(j.text)?j.text:[j.text],P)return!1}return!0},T.prototype.callEndPageHooks=function(k,E){k.applyStyles(k.userStyles);for(var j=0,F=this.hooks.didDrawPage;j<F.length;j++){var z=F[j];z(new p.HookData(k,this,E))}},T.prototype.callWillDrawPageHooks=function(k,E){for(var j=0,F=this.hooks.willDrawPage;j<F.length;j++){var z=F[j];z(new p.HookData(k,this,E))}},T.prototype.getWidth=function(k){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var E=this.columns.reduce(function(F,z){return F+z.wrappedWidth},0);return E}else{var j=this.settings.margin;return k-j.left-j.right}},T})();c.Table=v;var _=(function(){function T(k,E,j,F,z){z===void 0&&(z=!1),this.height=0,this.raw=k,k instanceof d.HtmlRowInput&&(this.raw=k._element,this.element=k._element),this.index=E,this.section=j,this.cells=F,this.spansMultiplePages=z}return T.prototype.getMaxCellHeight=function(k){var E=this;return k.reduce(function(j,F){var z;return Math.max(j,((z=E.cells[F.index])===null||z===void 0?void 0:z.height)||0)},0)},T.prototype.hasRowSpan=function(k){var E=this;return k.filter(function(j){var F=E.cells[j.index];return F?F.rowSpan>1:!1}).length>0},T.prototype.canEntireRowFit=function(k,E){return this.getMaxCellHeight(E)<=k},T.prototype.getMinimumRowHeight=function(k,E){var j=this;return k.reduce(function(F,z){var A=j.cells[z.index];if(!A)return 0;var I=E.getLineHeight(A.styles.fontSize),O=A.padding("vertical"),B=O+I;return B>F?B:F},0)},T})();c.Row=_;var b=(function(){function T(k,E,j){var F,z;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=E,this.section=j,this.raw=k;var A=k;k!=null&&typeof k=="object"&&!Array.isArray(k)?(this.rowSpan=k.rowSpan||1,this.colSpan=k.colSpan||1,A=(z=(F=k.content)!==null&&F!==void 0?F:k.title)!==null&&z!==void 0?z:k,k._element&&(this.raw=k._element)):(this.rowSpan=1,this.colSpan=1);var I=A!=null?""+A:"",O=/\r\n|\r|\n/g;this.text=I.split(O)}return T.prototype.getTextPos=function(){var k;if(this.styles.valign==="top")k=this.y+this.padding("top");else if(this.styles.valign==="bottom")k=this.y+this.height-this.padding("bottom");else{var E=this.height-this.padding("vertical");k=this.y+E/2+this.padding("top")}var j;if(this.styles.halign==="right")j=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var F=this.width-this.padding("horizontal");j=this.x+F/2+this.padding("left")}else j=this.x+this.padding("left");return{x:j,y:k}},T.prototype.getContentHeight=function(k,E){E===void 0&&(E=1.15);var j=Array.isArray(this.text)?this.text.length:1,F=this.styles.fontSize/k*E,z=j*F+this.padding("vertical");return Math.max(z,this.styles.minCellHeight)},T.prototype.padding=function(k){var E=(0,x.parseSpacing)(this.styles.cellPadding,0);return k==="vertical"?E.top+E.bottom:k==="horizontal"?E.left+E.right:E[k]},T})();c.Cell=b;var S=(function(){function T(k,E,j){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=k,this.raw=E,this.index=j}return T.prototype.getMaxCustomCellWidth=function(k){for(var E=0,j=0,F=k.allRows();j<F.length;j++){var z=F[j],A=z.cells[this.index];A&&typeof A.styles.cellWidth=="number"&&(E=Math.max(E,A.styles.cellWidth))}return E},T})();c.Column=S}),356:(function(o,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function u(d,p,x,v,_){if(d==null)throw new TypeError("Cannot convert undefined or null to object");for(var b=Object(d),S=1;S<arguments.length;S++){var T=arguments[S];if(T!=null)for(var k in T)Object.prototype.hasOwnProperty.call(T,k)&&(b[k]=T[k])}return b}c.assign=u}),972:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var d=u(744),p=u(260),x=u(324),v=u(796),_=u(356);function b(z,A){var I=new d.DocHandler(z),O=S(A,I.scaleFactor()),B=new p.Table(A,O);return(0,x.calculateWidths)(I,B),I.applyStyles(I.userStyles),B}c.createTable=b;function S(z,A){var I=z.content,O=j(I.columns);if(I.head.length===0){var B=k(O,"head");B&&I.head.push(B)}if(I.foot.length===0){var B=k(O,"foot");B&&I.foot.push(B)}var R=z.settings.theme,P=z.styles;return{columns:O,head:T("head",I.head,O,P,R,A),body:T("body",I.body,O,P,R,A),foot:T("foot",I.foot,O,P,R,A)}}function T(z,A,I,O,B,R){var P={},V=A.map(function(Y,ie){for(var q=0,Q={},se=0,J=0,me=0,re=I;me<re.length;me++){var M=re[me];if(P[M.index]==null||P[M.index].left===0)if(J===0){var W=void 0;Array.isArray(Y)?W=Y[M.index-se-q]:W=Y[M.dataKey];var K={};typeof W=="object"&&!Array.isArray(W)&&(K=(W==null?void 0:W.styles)||{});var G=F(z,M,ie,B,O,R,K),te=new p.Cell(W,G,z);Q[M.dataKey]=te,Q[M.index]=te,J=te.colSpan-1,P[M.index]={left:te.rowSpan-1,times:J}}else J--,se++;else P[M.index].left--,J=P[M.index].times,q++}return new p.Row(Y,ie,z,Q)});return V}function k(z,A){var I={};return z.forEach(function(O){if(O.raw!=null){var B=E(A,O.raw);B!=null&&(I[O.dataKey]=B)}}),Object.keys(I).length>0?I:null}function E(z,A){if(z==="head"){if(typeof A=="object")return A.header||A.title||null;if(typeof A=="string"||typeof A=="number")return A}else if(z==="foot"&&typeof A=="object")return A.footer;return null}function j(z){return z.map(function(A,I){var O,B,R;return typeof A=="object"?R=(B=(O=A.dataKey)!==null&&O!==void 0?O:A.key)!==null&&B!==void 0?B:I:R=I,new p.Column(R,A,I)})}function F(z,A,I,O,B,R,P){var V=(0,v.getTheme)(O),Y;z==="head"?Y=B.headStyles:z==="body"?Y=B.bodyStyles:z==="foot"&&(Y=B.footStyles);var ie=(0,_.assign)({},V.table,V[z],B.styles,Y),q=B.columnStyles[A.dataKey]||B.columnStyles[A.index]||{},Q=z==="body"?q:{},se=z==="body"&&I%2===0?(0,_.assign)({},V.alternateRow,B.alternateRowStyles):{},J=(0,v.defaultStyles)(R),me=(0,_.assign)({},J,ie,se,Q);return(0,_.assign)(me,P)}}),664:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var d=u(420),p=u(260),x=u(744),v=u(356),_=u(136),b=u(224);function S(q,Q){var se=Q.settings,J=se.startY,me=se.margin,re={x:me.left,y:J},M=Q.getHeadHeight(Q.columns)+Q.getFootHeight(Q.columns),W=J+me.bottom+M;if(se.pageBreak==="avoid"){var K=Q.body,G=K.reduce(function(ye,be){return ye+be.height},0);W+=G}var te=new x.DocHandler(q);(se.pageBreak==="always"||se.startY!=null&&W>te.pageSize().height)&&(ie(te),re.y=me.top),Q.callWillDrawPageHooks(te,re);var he=(0,v.assign)({},re);Q.startPageNumber=te.pageNumber(),se.horizontalPageBreak?T(te,Q,he,re):(te.applyStyles(te.userStyles),(se.showHead==="firstPage"||se.showHead==="everyPage")&&Q.head.forEach(function(ye){return B(te,Q,ye,re,Q.columns)}),te.applyStyles(te.userStyles),Q.body.forEach(function(ye,be){var Ce=be===Q.body.length-1;O(te,Q,ye,Ce,he,re,Q.columns)}),te.applyStyles(te.userStyles),(se.showFoot==="lastPage"||se.showFoot==="everyPage")&&Q.foot.forEach(function(ye){return B(te,Q,ye,re,Q.columns)})),(0,d.addTableBorder)(te,Q,he,re),Q.callEndPageHooks(te,re),Q.finalY=re.y,q.lastAutoTable=Q,q.previousAutoTable=Q,q.autoTable&&(q.autoTable.previous=Q),te.applyStyles(te.userStyles)}c.drawTable=S;function T(q,Q,se,J){var me=(0,b.calculateAllColumnsCanFitInPage)(q,Q),re=Q.settings;if(re.horizontalPageBreakBehaviour==="afterAllRows")me.forEach(function(G,te){q.applyStyles(q.userStyles),te>0?Y(q,Q,se,J,G.columns,!0):k(q,Q,J,G.columns),E(q,Q,se,J,G.columns),F(q,Q,J,G.columns)});else for(var M=-1,W=me[0],K=function(){var G=M;if(W){q.applyStyles(q.userStyles);var te=W.columns;M>=0?Y(q,Q,se,J,te,!0):k(q,Q,J,te),G=j(q,Q,M+1,J,te),F(q,Q,J,te)}var he=G-M;me.slice(1).forEach(function(ye){q.applyStyles(q.userStyles),Y(q,Q,se,J,ye.columns,!0),j(q,Q,M+1,J,ye.columns,he),F(q,Q,J,ye.columns)}),M=G};M<Q.body.length-1;)K()}function k(q,Q,se,J){var me=Q.settings;q.applyStyles(q.userStyles),(me.showHead==="firstPage"||me.showHead==="everyPage")&&Q.head.forEach(function(re){return B(q,Q,re,se,J)})}function E(q,Q,se,J,me){q.applyStyles(q.userStyles),Q.body.forEach(function(re,M){var W=M===Q.body.length-1;O(q,Q,re,W,se,J,me)})}function j(q,Q,se,J,me,re){q.applyStyles(q.userStyles),re=re??Q.body.length;var M=Math.min(se+re,Q.body.length),W=-1;return Q.body.slice(se,M).forEach(function(K,G){var te=se+G===Q.body.length-1,he=V(q,Q,te,J);K.canEntireRowFit(he,me)&&(B(q,Q,K,J,me),W=se+G)}),W}function F(q,Q,se,J){var me=Q.settings;q.applyStyles(q.userStyles),(me.showFoot==="lastPage"||me.showFoot==="everyPage")&&Q.foot.forEach(function(re){return B(q,Q,re,se,J)})}function z(q,Q,se){var J=se.getLineHeight(q.styles.fontSize),me=q.padding("vertical"),re=Math.floor((Q-me)/J);return Math.max(0,re)}function A(q,Q,se,J){var me={};q.spansMultiplePages=!0,q.height=0;for(var re=0,M=0,W=se.columns;M<W.length;M++){var K=W[M],G=q.cells[K.index];if(G){Array.isArray(G.text)||(G.text=[G.text]);var te=new p.Cell(G.raw,G.styles,G.section);te=(0,v.assign)(te,G),te.text=[];var he=z(G,Q,J);G.text.length>he&&(te.text=G.text.splice(he,G.text.length));var ye=J.scaleFactor(),be=J.getLineHeightFactor();G.contentHeight=G.getContentHeight(ye,be),G.contentHeight>=Q&&(G.contentHeight=Q,te.styles.minCellHeight-=Q),G.contentHeight>q.height&&(q.height=G.contentHeight),te.contentHeight=te.getContentHeight(ye,be),te.contentHeight>re&&(re=te.contentHeight),me[K.index]=te}}var Ce=new p.Row(q.raw,-1,q.section,me,!0);Ce.height=re;for(var ke=0,oe=se.columns;ke<oe.length;ke++){var K=oe[ke],te=Ce.cells[K.index];te&&(te.height=Ce.height);var G=q.cells[K.index];G&&(G.height=q.height)}return Ce}function I(q,Q,se,J){var me=q.pageSize().height,re=J.settings.margin,M=re.top+re.bottom,W=me-M;Q.section==="body"&&(W-=J.getHeadHeight(J.columns)+J.getFootHeight(J.columns));var K=Q.getMinimumRowHeight(J.columns,q),G=K<se;if(K>W)return console.error("Will not be able to print row ".concat(Q.index," correctly since it's minimum height is larger than page height")),!0;if(!G)return!1;var te=Q.hasRowSpan(J.columns),he=Q.getMaxCellHeight(J.columns)>W;return he?(te&&console.error("The content of row ".concat(Q.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(te||J.settings.rowPageBreak==="avoid")}function O(q,Q,se,J,me,re,M){var W=V(q,Q,J,re);if(se.canEntireRowFit(W,M))B(q,Q,se,re,M);else if(I(q,se,W,Q)){var K=A(se,W,Q,q);B(q,Q,se,re,M),Y(q,Q,me,re,M),O(q,Q,K,J,me,re,M)}else Y(q,Q,me,re,M),O(q,Q,se,J,me,re,M)}function B(q,Q,se,J,me){J.x=Q.settings.margin.left;for(var re=0,M=me;re<M.length;re++){var W=M[re],K=se.cells[W.index];if(!K){J.x+=W.width;continue}q.applyStyles(K.styles),K.x=J.x,K.y=J.y;var G=Q.callCellHooks(q,Q.hooks.willDrawCell,K,se,W,J);if(G===!1){J.x+=W.width;continue}R(q,K,J);var te=K.getTextPos();(0,_.default)(K.text,te.x,te.y,{halign:K.styles.halign,valign:K.styles.valign,maxWidth:Math.ceil(K.width-K.padding("left")-K.padding("right"))},q.getDocument()),Q.callCellHooks(q,Q.hooks.didDrawCell,K,se,W,J),J.x+=W.width}J.y+=se.height}function R(q,Q,se){var J=Q.styles;if(q.getDocument().setFillColor(q.getDocument().getFillColor()),typeof J.lineWidth=="number"){var me=(0,d.getFillStyle)(J.lineWidth,J.fillColor);me&&q.rect(Q.x,se.y,Q.width,Q.height,me)}else typeof J.lineWidth=="object"&&(J.fillColor&&q.rect(Q.x,se.y,Q.width,Q.height,"F"),P(q,Q,se,J.lineWidth))}function P(q,Q,se,J){var me,re,M,W;J.top&&(me=se.x,re=se.y,M=se.x+Q.width,W=se.y,J.right&&(M+=.5*J.right),J.left&&(me-=.5*J.left),K(J.top,me,re,M,W)),J.bottom&&(me=se.x,re=se.y+Q.height,M=se.x+Q.width,W=se.y+Q.height,J.right&&(M+=.5*J.right),J.left&&(me-=.5*J.left),K(J.bottom,me,re,M,W)),J.left&&(me=se.x,re=se.y,M=se.x,W=se.y+Q.height,J.top&&(re-=.5*J.top),J.bottom&&(W+=.5*J.bottom),K(J.left,me,re,M,W)),J.right&&(me=se.x+Q.width,re=se.y,M=se.x+Q.width,W=se.y+Q.height,J.top&&(re-=.5*J.top),J.bottom&&(W+=.5*J.bottom),K(J.right,me,re,M,W));function K(G,te,he,ye,be){q.getDocument().setLineWidth(G),q.getDocument().line(te,he,ye,be,"S")}}function V(q,Q,se,J){var me=Q.settings.margin.bottom,re=Q.settings.showFoot;return(re==="everyPage"||re==="lastPage"&&se)&&(me+=Q.getFootHeight(Q.columns)),q.pageSize().height-J.y-me}function Y(q,Q,se,J,me,re){me===void 0&&(me=[]),re===void 0&&(re=!1),q.applyStyles(q.userStyles),Q.settings.showFoot==="everyPage"&&!re&&Q.foot.forEach(function(W){return B(q,Q,W,J,me)}),Q.callEndPageHooks(q,J);var M=Q.settings.margin;(0,d.addTableBorder)(q,Q,se,J),ie(q),Q.pageNumber++,Q.pageCount++,J.x=M.left,J.y=M.top,se.y=M.top,Q.callWillDrawPageHooks(q,J),Q.settings.showHead==="everyPage"&&(Q.head.forEach(function(W){return B(q,Q,W,J,me)}),q.applyStyles(q.userStyles))}c.addPage=Y;function ie(q){var Q=q.pageNumber();q.setPage(Q+1);var se=q.pageNumber();return se===Q?(q.addPage(),!0):!1}}),224:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var d=u(420);function p(v,_,b){var S;b===void 0&&(b={});var T=(0,d.getPageAvailableWidth)(v,_),k=new Map,E=[],j=[],F=[];_.settings.horizontalPageBreakRepeat,Array.isArray(_.settings.horizontalPageBreakRepeat)?F=_.settings.horizontalPageBreakRepeat:(typeof _.settings.horizontalPageBreakRepeat=="string"||typeof _.settings.horizontalPageBreakRepeat=="number")&&(F=[_.settings.horizontalPageBreakRepeat]),F.forEach(function(O){var B=_.columns.find(function(R){return R.dataKey===O||R.index===O});B&&!k.has(B.index)&&(k.set(B.index,!0),E.push(B.index),j.push(_.columns[B.index]),T-=B.wrappedWidth)});for(var z=!0,A=(S=b==null?void 0:b.start)!==null&&S!==void 0?S:0;A<_.columns.length;){if(k.has(A)){A++;continue}var I=_.columns[A].wrappedWidth;if(z||T>=I)z=!1,E.push(A),j.push(_.columns[A]),T-=I;else break;A++}return{colIndexes:E,columns:j,lastIndex:A-1}}function x(v,_){for(var b=[],S=0;S<_.columns.length;S++){var T=p(v,_,{start:S});T.columns.length&&(b.push(T),S=T.lastIndex)}return b}c.calculateAllColumnsCanFitInPage=x}),324:(function(o,c,u){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var d=u(420);function p(E,j){x(E,j);var F=[],z=0;j.columns.forEach(function(I){var O=I.getMaxCustomCellWidth(j);O?I.width=O:(I.width=I.wrappedWidth,F.push(I)),z+=I.width});var A=j.getWidth(E.pageSize().width)-z;A&&(A=v(F,A,function(I){return Math.max(I.minReadableWidth,I.minWidth)})),A&&(A=v(F,A,function(I){return I.minWidth})),A=Math.abs(A),!j.settings.horizontalPageBreak&&A>.1/E.scaleFactor()&&(A=A<1?A:Math.round(A),console.warn("Of the table content, ".concat(A," units width could not fit page"))),b(j),S(j,E),_(j)}c.calculateWidths=p;function x(E,j){var F=E.scaleFactor(),z=j.settings.horizontalPageBreak,A=(0,d.getPageAvailableWidth)(E,j);j.allRows().forEach(function(I){for(var O=0,B=j.columns;O<B.length;O++){var R=B[O],P=I.cells[R.index];if(P){var V=j.hooks.didParseCell;j.callCellHooks(E,V,P,I,R,null);var Y=P.padding("horizontal");P.contentWidth=(0,d.getStringWidth)(P.text,P.styles,E)+Y;var ie=(0,d.getStringWidth)(P.text.join(" ").split(/\s+/),P.styles,E);if(P.minReadableWidth=ie+P.padding("horizontal"),typeof P.styles.cellWidth=="number")P.minWidth=P.styles.cellWidth,P.wrappedWidth=P.styles.cellWidth;else if(P.styles.cellWidth==="wrap"||z===!0)P.contentWidth>A?(P.minWidth=A,P.wrappedWidth=A):(P.minWidth=P.contentWidth,P.wrappedWidth=P.contentWidth);else{var q=10/F;P.minWidth=P.styles.minCellWidth||q,P.wrappedWidth=P.contentWidth,P.minWidth>P.wrappedWidth&&(P.wrappedWidth=P.minWidth)}}}}),j.allRows().forEach(function(I){for(var O=0,B=j.columns;O<B.length;O++){var R=B[O],P=I.cells[R.index];if(P&&P.colSpan===1)R.wrappedWidth=Math.max(R.wrappedWidth,P.wrappedWidth),R.minWidth=Math.max(R.minWidth,P.minWidth),R.minReadableWidth=Math.max(R.minReadableWidth,P.minReadableWidth);else{var V=j.styles.columnStyles[R.dataKey]||j.styles.columnStyles[R.index]||{},Y=V.cellWidth||V.minCellWidth;Y&&typeof Y=="number"&&(R.minWidth=Y,R.wrappedWidth=Y)}P&&(P.colSpan>1&&!R.minWidth&&(R.minWidth=P.minWidth),P.colSpan>1&&!R.wrappedWidth&&(R.wrappedWidth=P.minWidth))}})}function v(E,j,F){for(var z=j,A=E.reduce(function(q,Q){return q+Q.wrappedWidth},0),I=0;I<E.length;I++){var O=E[I],B=O.wrappedWidth/A,R=z*B,P=O.width+R,V=F(O),Y=P<V?V:P;j-=Y-O.width,O.width=Y}if(j=Math.round(j*1e10)/1e10,j){var ie=E.filter(function(q){return j<0?q.width>F(q):!0});ie.length&&(j=v(ie,j,F))}return j}c.resizeColumns=v;function _(E){for(var j={},F=1,z=E.allRows(),A=0;A<z.length;A++)for(var I=z[A],O=0,B=E.columns;O<B.length;O++){var R=B[O],P=j[R.index];if(F>1)F--,delete I.cells[R.index];else if(P)P.cell.height+=I.height,F=P.cell.colSpan,delete I.cells[R.index],P.left--,P.left<=1&&delete j[R.index];else{var V=I.cells[R.index];if(!V)continue;if(V.height=I.height,V.rowSpan>1){var Y=z.length-A,ie=V.rowSpan>Y?Y:V.rowSpan;j[R.index]={cell:V,left:ie,row:I}}}}}function b(E){for(var j=E.allRows(),F=0;F<j.length;F++)for(var z=j[F],A=null,I=0,O=0,B=0;B<E.columns.length;B++){var R=E.columns[B];if(O-=1,O>1&&E.columns[B+1])I+=R.width,delete z.cells[R.index];else if(A){var P=A;delete z.cells[R.index],A=null,P.width=R.width+I}else{var P=z.cells[R.index];if(!P)continue;if(O=P.colSpan,I=0,P.colSpan>1){A=P,I+=R.width;continue}P.width=R.width+I}}}function S(E,j){for(var F={count:0,height:0},z=0,A=E.allRows();z<A.length;z++){for(var I=A[z],O=0,B=E.columns;O<B.length;O++){var R=B[O],P=I.cells[R.index];if(P){j.applyStyles(P.styles,!0);var V=P.width-P.padding("horizontal");if(P.styles.overflow==="linebreak")P.text=j.splitTextToSize(P.text,V+1/j.scaleFactor(),{fontSize:P.styles.fontSize});else if(P.styles.overflow==="ellipsize")P.text=T(P.text,V,P.styles,j,"...");else if(P.styles.overflow==="hidden")P.text=T(P.text,V,P.styles,j,"");else if(typeof P.styles.overflow=="function"){var Y=P.styles.overflow(P.text,V);typeof Y=="string"?P.text=[Y]:P.text=Y}P.contentHeight=P.getContentHeight(j.scaleFactor(),j.getLineHeightFactor());var ie=P.contentHeight/P.rowSpan;P.rowSpan>1&&F.count*F.height<ie*P.rowSpan?F={height:ie,count:P.rowSpan}:F&&F.count>0&&F.height>ie&&(ie=F.height),ie>I.height&&(I.height=ie)}}F.count--}}function T(E,j,F,z,A){return E.map(function(I){return k(I,j,F,z,A)})}c.ellipsize=T;function k(E,j,F,z,A){var I=1e4*z.scaleFactor();if(j=Math.ceil(j*I)/I,j>=(0,d.getStringWidth)(E,F,z))return E;for(;j<(0,d.getStringWidth)(E+A,F,z)&&!(E.length<=1);)E=E.substring(0,E.length-1);return E.trim()+A}}),964:(function(o){if(typeof t>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}o.exports=t})},i={};function s(o){var c=i[o];if(c!==void 0)return c.exports;var u=i[o]={exports:{}};return r[o].call(u.exports,u,u.exports,s),u.exports}var a={};return(function(){var o=a;Object.defineProperty(o,"__esModule",{value:!0}),o.Cell=o.Column=o.Row=o.Table=o.CellHookData=o.__drawTable=o.__createTable=o.applyPlugin=void 0;var c=s(340),u=s(776),d=s(664),p=s(972),x=s(260);Object.defineProperty(o,"Table",{enumerable:!0,get:function(){return x.Table}});var v=s(172);Object.defineProperty(o,"CellHookData",{enumerable:!0,get:function(){return v.CellHookData}});var _=s(260);Object.defineProperty(o,"Cell",{enumerable:!0,get:function(){return _.Cell}}),Object.defineProperty(o,"Column",{enumerable:!0,get:function(){return _.Column}}),Object.defineProperty(o,"Row",{enumerable:!0,get:function(){return _.Row}});function b(j){(0,c.default)(j)}o.applyPlugin=b;function S(j,F){var z=(0,u.parseInput)(j,F),A=(0,p.createTable)(j,z);(0,d.drawTable)(j,A)}function T(j,F){var z=(0,u.parseInput)(j,F);return(0,p.createTable)(j,z)}o.__createTable=T;function k(j,F){(0,d.drawTable)(j,F)}o.__drawTable=k;try{var E=s(964);E.jsPDF&&(E=E.jsPDF),b(E)}catch{}o.default=S})(),a})()})})(Ey)),Ey.exports}var S0e=w0e();const XD=DT(S0e),Y2=n=>new Date(n).toLocaleDateString("it-IT"),T0e=n=>{const e=new Date(n),t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear();return`${t}.${r}.${i}`},Zm=n=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(n),E0e=async n=>{try{const e=await fetch(n);if(!e.ok)throw new Error(`Network response was not ok: ${e.statusText}`);const t=await e.blob();return new Promise((r,i)=>{const s=new FileReader;s.onloadend=()=>r(s.result),s.onerror=i,s.readAsDataURL(t)})}catch(e){return console.warn("Impossibile caricare il logo:",e),""}},A0e=async(n,e,t,r)=>{var re,M;const i=new vn,s=[63,81,181],a=[117,117,117],o=[220,220,220],c=[100,100,100],u=14,p=i.internal.pageSize.getWidth()-u,x=20,v=u+x+4,_=10,b=40,S=45;try{let W="";if(t!=null&&t.logoBase64)W=t.logoBase64;else{const K=`${window.location.origin}/lemon_logo_150px.png`;W=await E0e(K)}if(W){const G=W.substring(0,30).includes("image/jpeg")?"JPEG":"PNG";i.addImage(W,G,u,_,x,x)}}catch(W){console.warn("Logo processing error",W)}t?(i.setTextColor(0,0,0),t.denomination&&(i.setFontSize(12),i.setFont("helvetica","bold"),i.text(t.denomination.toUpperCase(),v,_+4)),i.setFontSize(10),i.setFont("helvetica","normal"),i.text(t.name,v,_+10),i.setFontSize(8),i.setTextColor(...a),i.text(`${t.address} - P.IVA: ${t.vatNumber}`,v,_+15),i.text(`${t.email} - ${t.phone}`,v,_+20)):(i.setFontSize(8),i.text("Dati Aziendali non configurati",v,_+5)),i.setFontSize(16),i.setTextColor(...s),i.setFont("helvetica","bold");const T=e==="Fattura"&&n.isProForma?"FATTURA PRO-FORMA":e.toUpperCase();i.text(T,p,_+8,{align:"right"});let k=_+14;const E=e==="Fattura"?n.invoiceNumber:n.quoteNumber,j=Y2(n.issueDate);i.setFontSize(9),i.setTextColor(0,0,0),i.setFont("helvetica","normal"),i.text("Numero:",p-35,k,{align:"left"}),i.setFont("helvetica","bold"),i.text(E,p,k,{align:"right"}),k+=4,i.setFont("helvetica","normal"),i.text("Data:",p-35,k,{align:"left"}),i.setFont("helvetica","bold"),i.text(j,p,k,{align:"right"}),k+=4,e==="Fattura"&&n.sdiCode&&(i.setFont("helvetica","normal"),i.text("SDI/PEC:",p-35,k,{align:"left"}),i.text(n.sdiCode||"",p,k,{align:"right"})),i.setDrawColor(...o),i.setLineWidth(.1),i.line(u,b,p,b),i.setFontSize(7),i.setTextColor(...c),i.setFont("helvetica","bold"),i.text("CLIENTE",u,S);let z=S;if(i.setFontSize(9),i.setTextColor(0,0,0),r)if(i.setFont("helvetica","bold"),r.clientType===ur.Parent){const W=r;i.text(`${W.firstName} ${W.lastName}`,v,z),z+=6,i.setFont("helvetica","normal"),i.text(W.address,v,z),z+=4,i.text(`${W.zipCode} ${W.city} (${W.province})`,v,z),z+=4,i.text(`CF: ${W.taxCode}`,v,z)}else{const W=r;i.text(W.companyName,v,z),z+=6,i.setFont("helvetica","normal"),i.text(W.address,v,z),z+=4,i.text(`${W.zipCode} ${W.city} (${W.province})`,v,z),z+=4,i.text(`P.IVA: ${W.vatNumber}`,v,z)}else i.setFont("helvetica","bold"),i.text(n.clientName,v,z);const A=85,I=["Descrizione","Quantit","Prezzo Unit.","Totale"];let O=[];e==="Fattura"&&n.relatedQuoteNumber&&O.push([{content:`Rif. ns. documento ${n.relatedQuoteNumber}`,colSpan:4,styles:{fontStyle:"italic",textColor:[100,100,100],fillColor:[248,248,248],halign:"left"}}]);const B=n.items.map(W=>[W.notes?`${W.description}
${W.notes}`:W.description,W.quantity,Zm(W.price),Zm(W.quantity*W.price)]);O=[...O,...B],XD(i,{startY:A,head:[I],body:O,theme:"grid",headStyles:{fillColor:s,textColor:255,fontSize:9},bodyStyles:{fontSize:9,cellPadding:3},columnStyles:{0:{cellWidth:"auto"},1:{cellWidth:20,halign:"center"},2:{cellWidth:30,halign:"right"},3:{cellWidth:30,halign:"right"}}});let R=((re=i.lastAutoTable)==null?void 0:re.finalY)||A;const P=n.items.reduce((W,K)=>W+K.quantity*K.price,0),V=n.hasStampDuty?2:0,Y=P+V;R+=5,i.setFont("helvetica","normal"),i.setFontSize(10),i.text("Imponibile:",140,R+5),i.text(`${Zm(P)}`,p,R+5,{align:"right"}),n.hasStampDuty&&(i.text("Bollo Virtuale:",140,R+10),i.text(`${Zm(V)}`,p,R+10,{align:"right"}),R+=5),i.setDrawColor(200,200,200),i.line(140,R+13,p,R+13),i.setFont("helvetica","bold"),i.setFontSize(12),i.text("TOTALE:",140,R+20),i.text(`${Zm(Y)}`,p,R+20,{align:"right"}),i.setFontSize(9),i.setFont("helvetica","normal"),i.setTextColor(...a);const ie=Y2(e==="Fattura"?n.dueDate:n.expiryDate),q=e==="Fattura"?"Scadenza:":"Valido fino al:";if(i.text(`${q} ${ie}`,p,R+26,{align:"right"}),R+=35,R>i.internal.pageSize.height-50&&(i.addPage(),R=20),i.setTextColor(0,0,0),i.setFontSize(10),n.paymentMethod&&(i.setFont("helvetica","bold"),i.text("Modalit di Pagamento:",u,R),i.setFont("helvetica","normal"),i.text(`${n.paymentMethod}`,u+45,R)),n.installments&&n.installments.length>0){R+=8,i.setFont("helvetica","bold"),i.setFontSize(9),i.text("Piano Rateale",u,R);const W=n.installments.map(K=>[K.description,Y2(K.dueDate),Zm(K.amount),K.isPaid?"Saldato":"Da Saldare"]);XD(i,{startY:R+2,head:[["Descrizione","Scadenza","Importo","Stato"]],body:W,theme:"plain",styles:{fontSize:8,cellPadding:1},headStyles:{fontStyle:"bold",textColor:[100,100,100]},columnStyles:{2:{halign:"right"}},margin:{left:u,right:120}}),R=((M=i.lastAutoTable)==null?void 0:M.finalY)||R}if(n.notes&&n.notes.trim().length>0){R+=10,R>i.internal.pageSize.height-40&&(i.addPage(),R=20),i.setFillColor(250,250,250),i.setDrawColor(230,230,230),i.rect(u,R,180,20,"FD"),i.setFont("helvetica","bold"),i.setFontSize(8),i.setTextColor(80,80,80),i.text("NOTE:",u+2,R+5),i.setFont("helvetica","normal"),i.setTextColor(0,0,0);const W=i.splitTextToSize(n.notes,175);i.text(W,u+2,R+10),R+=25}const Q=`Operazione senza applicazione dellIVA ai sensi dellart. 1, commi da 54 a 89, Legge n. 190/2014.
Operazione non soggetta a ritenuta alla fonte a titolo di acconto ai sensi dellart. 1, comma 67, Legge n. 190/2014.`,se=i.internal.pageSize.height;i.setFontSize(7),i.setTextColor(...a);const J=i.splitTextToSize(Q,180);i.text(J,u,se-15);let me="";if(e==="Fattura"){const W=E.split("-"),K=W.length>0?W[W.length-1]:E,G=T0e(n.issueDate);me=`FT${K}_${G}`,n.isProForma&&(me+="_PROFORMA")}else me=E;i.save(`${me}.pdf`)},N0e=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),l7=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),C0e=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})});Ac.register(y1,qf,Ty,Sy,py,gy,up,xy,iT,vy,yy,by,uT,hT,fT,_1,Ux,mT,pfe,Lfe,zfe,Hfe,Jfe,qfe);const QD=85e3,JD=.78,ZD=.2623,eR=.05,k0e=`
**1. Acquisizione dei Parametri Economici**
Il sistema scansiona l'anagrafica dei tuoi Fornitori. Per ogni Sede (Location) configurata, memorizza due informazioni fondamentali:
- Il Costo Nolo (il prezzo che paghi per ogni singolo slot/lezione in quella sede).
- L'ID univoco della sede.

**2. Scansione Storica delle Lezioni (Il "Conteggio")**
Il sistema analizza tutte le iscrizioni e tutte le lezioni (appuntamenti) presenti nel database, passate e presenti.
Esegue un filtro molto specifico: conta solo le lezioni con stato "PRESENTE".
*Nota:* Le lezioni "Programmate" (future) o "Assenti" non vengono conteggiate per generare costi, poich il nolo si paga solitamente sull'utilizzo effettivo (o comunque questo  l'algoritmo attuale).

**3. Aggregazione Mensile e per Sede**
Una volta ottenute tutte le lezioni "Presenti", il sistema le raggruppa creando dei "pacchetti" basati su due chiavi:
- La Sede dove si  svolta la lezione.
- Il Mese e l'Anno della lezione.
*Esempio:* Se a Marzo 2025 ci sono state 10 lezioni nella "Sede A" e 5 nella "Sede B", il sistema crea due gruppi distinti.

**4. Calcolo dell'Importo (Moltiplicazione)**
Per ogni gruppo (Sede + Mese), il sistema applica la formula:
> Numero Lezioni Presenti  Costo Nolo Unitario della Sede = Totale da Pagare

**5. Verifica Anti-Duplicazione (Idempotenza)**
Questo  il passaggio di sicurezza pi importante. Prima di creare una transazione, il sistema controlla tra le Transazioni esistenti.
Cerca se esiste gi una spesa con:
- Categoria: "Nolo Sedi"
- Descrizione che contiene il nome della Sede e il Mese/Anno specifico.
- Stato: Non cancellata.
Se la transazione esiste gi, il sistema la ignora. Questo ti permette di cliccare il bottone "Calcola Noli" quante volte vuoi senza paura di creare doppioni per i mesi passati gi calcolati.

**6. Generazione delle Transazioni**
Per i soli gruppi che hanno superato il controllo anti-duplicazione, il sistema genera nuove Transazioni di Uscita:
- Data: Viene impostata automaticamente all'ultimo giorno del mese di riferimento (es. 31 Marzo).
- Importo: Il totale calcolato al punto 4.
- Descrizione: "Nolo Sede: [Nome Sede] - [Mese]/[Anno]".
- Stato: Viene impostata come "Pending" (In sospeso/Da pagare), cos ti ricorderai di effettuare il bonifico.
- Imputazione Costi: La transazione viene "taggata" con l'ID della Sede specifica. Questo  fondamentale per alimentare i grafici del Controllo di Gestione e calcolare la profittabilit di quel recinto specifico.

**7. Salvataggio e Feedback**
Infine, il sistema scrive tutte le nuove transazioni nel database in un'unica operazione (Batch) e ti mostra un avviso a video indicando quante nuove transazioni di nolo sono state generate.
`,I0e=({transaction:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState(n!=null&&n.date?n.date.split("T")[0]:new Date().toISOString().split("T")[0]),[s,a]=ne.useState((n==null?void 0:n.description)||""),[o,c]=ne.useState((n==null?void 0:n.amount)||0),[u,d]=ne.useState((n==null?void 0:n.type)||Fi.Expense),[p,x]=ne.useState((n==null?void 0:n.category)||_s.OtherExpense),[v,_]=ne.useState((n==null?void 0:n.paymentMethod)||Eu.BankTransfer),b=S=>{S.preventDefault();const T={date:new Date(r).toISOString(),description:s,amount:Number(o),type:u,category:p,paymentMethod:v,status:(n==null?void 0:n.status)||Lh.Completed};n!=null&&n.id?e({...T,id:n.id}):e(T)};return f.jsxs("form",{onSubmit:b,className:"p-6 flex flex-col gap-4",children:[f.jsx("h3",{className:"text-xl font-bold mb-2",children:n?"Modifica Transazione":"Nuova Transazione"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:r,onChange:S=>i(S.target.value),required:!0,className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Data"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsxs("select",{value:u,onChange:S=>d(S.target.value),className:"md-input",children:[f.jsx("option",{value:Fi.Income,children:"Entrata"}),f.jsx("option",{value:Fi.Expense,children:"Uscita"})]}),f.jsx("label",{className:"md-input-label !top-0",children:"Tipo"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:S=>a(S.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Descrizione"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"number",step:"0.01",value:o,onChange:S=>c(Number(S.target.value)),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Importo ()"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("select",{value:p,onChange:S=>x(S.target.value),className:"md-input",children:Object.values(_s).map(S=>f.jsx("option",{value:S,children:S},S))}),f.jsx("label",{className:"md-input-label !top-0",children:"Categoria"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("select",{value:v,onChange:S=>_(S.target.value),className:"md-input",children:Object.values(Eu).map(S=>f.jsx("option",{value:S,children:S},S))}),f.jsx("label",{className:"md-input-label !top-0",children:"Metodo Pagamento"})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-primary",children:"Salva"})]})]})},D0e=({docData:n,type:e,clients:t,onSave:r,onCancel:i})=>{const[s,a]=ne.useState((n==null?void 0:n.clientId)||""),[o,c]=ne.useState(n!=null&&n.issueDate?n.issueDate.split("T")[0]:new Date().toISOString().split("T")[0]),[u,d]=ne.useState((n==null?void 0:n.invoiceNumber)||""),[p,x]=ne.useState(n!=null&&n.dueDate?n.dueDate.split("T")[0]:""),v=new Date;v.setDate(v.getDate()+30);const[_,b]=ne.useState(n!=null&&n.expiryDate?n.expiryDate.split("T")[0]:v.toISOString().split("T")[0]),[S,T]=ne.useState((n==null?void 0:n.items)||[{description:"",quantity:1,price:0}]),[k,E]=ne.useState((n==null?void 0:n.notes)||""),[j,F]=ne.useState((n==null?void 0:n.paymentMethod)||Eu.BankTransfer),[z,A]=ne.useState((n==null?void 0:n.hasStampDuty)||!1),I=()=>T([...S,{description:"",quantity:1,price:0}]),O=V=>T(S.filter((Y,ie)=>ie!==V)),B=(V,Y,ie)=>{const q=[...S];q[V]={...q[V],[Y]:ie},T(q)},R=ne.useMemo(()=>t.map(V=>({id:V.id,label:V.clientType===ur.Parent?`${V.lastName} ${V.firstName}`:V.companyName})).sort((V,Y)=>V.label.localeCompare(Y.label)),[t]),P=V=>{V.preventDefault();try{const Y=t.find(se=>se.id===s),ie=Y?Y.clientType===ur.Parent?`${Y.firstName} ${Y.lastName}`:Y.companyName:"Cliente Manuale",q=S.reduce((se,J)=>se+J.quantity*J.price,0)+(z?2:0),Q={clientId:s,clientName:ie,issueDate:new Date(o).toISOString(),items:S,notes:k,paymentMethod:j,hasStampDuty:z,totalAmount:q,status:(n==null?void 0:n.status)||wi.Draft};if(n!=null&&n.id&&(Q.id=n.id),e==="invoice")r({...Q,dueDate:new Date(p||o).toISOString(),invoiceNumber:u});else{const se=_||o;r({...Q,expiryDate:new Date(se).toISOString()})}}catch(Y){console.error("Errore creazione payload documento:",Y),alert("Errore interno durante la preparazione del documento.")}};return f.jsxs("form",{onSubmit:P,className:"p-6 flex flex-col h-full max-h-[90vh]",children:[f.jsxs("h3",{className:"text-xl font-bold mb-4 flex-shrink-0",children:[n?"Modifica":"Nuovo"," ",e==="invoice"?"Fattura":"Preventivo"]}),f.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsxs("select",{value:s,onChange:V=>a(V.target.value),required:!0,className:"md-input",children:[f.jsx("option",{value:"",disabled:!0,children:"Seleziona Cliente"}),R.map(V=>f.jsx("option",{value:V.id,children:V.label},V.id))]}),f.jsx("label",{className:"md-input-label !top-0",children:"Cliente"})]}),e==="invoice"&&f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:u,onChange:V=>d(V.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Numero Fattura (Opzionale/Auto)"})]})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:o,onChange:V=>c(V.target.value),required:!0,className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Data Emissione"})]}),e==="invoice"?f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:p,onChange:V=>x(V.target.value),required:!0,className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Scadenza"})]}):f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:_,onChange:V=>b(V.target.value),required:!0,className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Validit Fino"})]})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Articoli"}),S.map((V,Y)=>f.jsxs("div",{className:"flex gap-2 mb-2 items-start",children:[f.jsxs("div",{className:"flex-1 space-y-1",children:[f.jsx("input",{type:"text",placeholder:"Descrizione",value:V.description,onChange:ie=>B(Y,"description",ie.target.value),required:!0,className:"md-input text-sm py-1"}),f.jsx("input",{type:"text",placeholder:"Note (opzionale)",value:V.notes||"",onChange:ie=>B(Y,"notes",ie.target.value),className:"md-input text-xs py-1 text-gray-500"})]}),f.jsx("input",{type:"number",placeholder:"Qta",value:V.quantity,onChange:ie=>B(Y,"quantity",Number(ie.target.value)),className:"w-16 border rounded p-1 text-sm text-center"}),f.jsx("input",{type:"number",placeholder:"Prezzo",value:V.price,onChange:ie=>B(Y,"price",Number(ie.target.value)),className:"w-24 border rounded p-1 text-sm text-right"}),f.jsx("button",{type:"button",onClick:()=>O(Y),className:"text-red-500 hover:text-red-700 font-bold px-2",children:""})]},Y)),f.jsx("button",{type:"button",onClick:I,className:"text-sm text-indigo-600 font-medium hover:underline",children:"+ Aggiungi Riga"})]}),f.jsxs("div",{className:"border-t pt-4 grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Metodo Pagamento"}),f.jsx("select",{value:j,onChange:V=>F(V.target.value),className:"w-full border rounded p-2 text-sm bg-white",children:Object.values(Eu).map(V=>f.jsx("option",{value:V,children:V},V))})]}),f.jsxs("div",{className:"flex items-center pt-4",children:[f.jsx("input",{type:"checkbox",checked:z,onChange:V=>A(V.target.checked),className:"h-4 w-4 text-indigo-600 rounded"}),f.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Applica Bollo (2)"})]})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:3,value:k,onChange:V=>E(V.target.value),className:"md-input",placeholder:"Note documento..."})})]}),f.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t flex-shrink-0 bg-white",children:[f.jsx("button",{type:"button",onClick:i,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-primary",children:"Salva"})]})]})},R0e=({invoice:n,onSeal:e,onCancel:t})=>{const[r,i]=ne.useState("");return f.jsx(mi,{onClose:t,size:"md",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4 text-blue-600",children:[f.jsx(l7,{}),f.jsx("h3",{className:"text-lg font-bold",children:"Sigilla Fattura su SDI"})]}),f.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Stai per cambiare lo stato della fattura ",f.jsx("strong",{children:n.invoiceNumber})," in ",f.jsx("span",{className:"font-bold text-green-600",children:"SEALED SDI"}),".",f.jsx("br",{}),f.jsx("br",{}),"Inserisci il ",f.jsx("strong",{children:"Numero Identificativo SDI"})," fornito dall'Agenzia delle Entrate per confermare la trasmissione."]}),f.jsxs("div",{className:"md-input-group mb-6",children:[f.jsx("input",{type:"text",value:r,onChange:s=>i(s.target.value),className:"md-input font-mono font-bold",placeholder:"Es. 123456789",autoFocus:!0}),f.jsx("label",{className:"md-input-label",children:"Numero Identificativo SDI"})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{onClick:()=>e(r),disabled:!r,className:"md-btn md-btn-raised md-btn-green md-btn-sm disabled:opacity-50",children:"SIGILLA"})]})]})})},P0e=({initialParams:n,onNavigate:e})=>{const[t,r]=ne.useState("overview"),[i,s]=ne.useState([]),[a,o]=ne.useState([]),[c,u]=ne.useState([]),[d,p]=ne.useState([]),[x,v]=ne.useState([]),[_,b]=ne.useState([]),[S,T]=ne.useState(null),[k,E]=ne.useState(!0),[j,F]=ne.useState({accountantCost:1200,fuelCost:1.85,targetNetMonthly:2e3,avgLessonPrice:20}),[z,A]=ne.useState({search:"",dateFrom:"",dateTo:"",minAmount:"",maxAmount:"",sortColumn:"date",sortDirection:"desc",invoiceStatus:""}),[I,O]=ne.useState([]),[B,R]=ne.useState(!1),[P,V]=ne.useState(!1),[Y,ie]=ne.useState(null),[q,Q]=ne.useState("invoice"),[se,J]=ne.useState(!1),[me,re]=ne.useState({isOpen:!1,type:null}),[M,W]=ne.useState(!1),[K,G]=ne.useState(!1),[te,he]=ne.useState(null),[ye,be]=ne.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDangerous:!1}),[Ce,ke]=ne.useState(1),oe=12,qe=ne.useRef({}),at=ne.useRef({}),Fe=ne.useRef(null),_e=ne.useRef(null),Be=ne.useRef(null),lt=ne.useRef(null),Ke=ne.useCallback(async()=>{E(!0);try{const[Ne,tt,Pt,kt,St,jt,Fn]=await Promise.all([Hp(),yx(),zS(),_l(),Jl(),Oh(),Up()]);s(Ne),o(tt),u(Pt),p(kt),v(St),b(jt),T(Fn),Fn&&F(hn=>({...hn,fuelCost:(Fn.carFuelConsumption,1.85)}))}catch(Ne){console.error(Ne)}finally{E(!1)}},[]);ne.useEffect(()=>(Ke(),window.addEventListener("EP_DataUpdated",Ke),()=>window.removeEventListener("EP_DataUpdated",Ke)),[Ke]),ne.useEffect(()=>{n&&n.tab&&r(n.tab)},[n]);const We=ne.useMemo(()=>{const Ne=i.filter(gn=>!gn.isDeleted),tt=Ne.filter(gn=>gn.type===Fi.Income&&!gn.excludeFromStats).reduce((gn,Hn)=>gn+Hn.amount,0),Pt=Ne.filter(gn=>gn.type===Fi.Expense).reduce((gn,Hn)=>gn+Hn.amount,0),kt=tt-Pt,St=tt>0?kt/tt*100:0,jt=tt*JD,Fn=jt*ZD,hn=jt*eR,nr=Fn+hn,Tr=nr,sn=nr*.5,Br=nr*.5,Ar=Tr+sn,ei=Ar/6,sr=(Ar+Br)/10,le=a.filter(gn=>!gn.isDeleted&&gn.hasStampDuty),Te=le.length*2;let xe=0;d.forEach(gn=>{var Hn;if(gn.status===Pr.Active||gn.status===Pr.Completed){const ti=(Hn=x.find(Ki=>Ki.locations.some(ea=>ea.id===gn.locationId)))==null?void 0:Hn.locations.find(Ki=>Ki.id===gn.locationId),zs=((ti==null?void 0:ti.distance)||0)*2*gn.lessonsTotal;xe+=zs}});const ve=(S==null?void 0:S.carFuelConsumption)||16.5,we=xe/ve*j.fuelCost,Ue=xe*.045,rt=600,He=180,$e=we+Ue+rt+He,Ye=ZD+eR,yt=1-JD*Ye,It=j.targetNetMonthly*10,Lt=$e+j.accountantCost+Pt,bt=(It+Lt)/yt,Ot=bt/10,Qt=Ot/j.avgLessonPrice,Un=Qt/4;return{revenue:tt,expenses:Pt,netProfit:kt,margin:St,fiscal:{limitProgress:tt/QD*100,remainingCeiling:QD-tt,taxableIncome:jt,inpsTotal:Fn,taxTotal:hn,totalFiscalBurden:nr,monthlySavingQuota:sr,totalBolloCost:Te,invoicesCount:le.length,installmentsProjection:{saldo2025:Tr,acconto1_2026:sn,acconto2_2026:Br,totalDueJune:Ar,installmentAmount:ei}},logistics:{totalKm:xe,estimatedFuelCost:we,estimatedWearCost:Ue,fixedCosts:rt+He,totalLogisticsCost:$e,impactPerKm:xe>0?$e/xe:0},accountant:{annualCost:j.accountantCost},ai:{requiredAnnualRevenue:bt,requiredMonthlyRevenue:Ot,lessonsNeeded:Qt,studentsNeeded:Un}}},[i,a,d,x,S,j]),Et=ne.useMemo(()=>{const Ne={};return x.forEach(tt=>{tt.locations.forEach(Pt=>{Ne[Pt.id]={name:Pt.name,revenue:0,rentCost:0,otherAllocatedCosts:0,enrollmentsCount:0,margin:0,marginPercent:0}})}),i.forEach(tt=>{if(!tt.isDeleted&&tt.allocationType==="location"&&tt.allocationId){const Pt=tt.allocationId,kt=tt.allocationName||"Sede Sconosciuta";Ne[Pt]||(Ne[Pt]={name:kt,revenue:0,rentCost:0,otherAllocatedCosts:0,enrollmentsCount:0,margin:0,marginPercent:0}),tt.type===Fi.Income?Ne[Pt].revenue+=tt.amount:tt.type===Fi.Expense&&(tt.category===_s.Rent?Ne[Pt].rentCost+=tt.amount:Ne[Pt].otherAllocatedCosts+=tt.amount)}}),Object.values(Ne).map(tt=>{const Pt=tt.rentCost+tt.otherAllocatedCosts,kt=tt.revenue-Pt,St=tt.revenue>0?kt/tt.revenue*100:0;return{...tt,totalCosts:Pt,margin:kt,marginPercent:St}}).sort((tt,Pt)=>Pt.revenue-tt.revenue)},[x,i]),Oe=ne.useMemo(()=>{const Ne={};let tt=0;return i.forEach(kt=>{if(!kt.isDeleted&&kt.type===Fi.Expense){const St=kt.category||"Altro";Ne[St]=(Ne[St]||0)+kt.amount,tt+=kt.amount}}),{sortedCategories:Object.entries(Ne).map(([kt,St])=>({name:kt,value:St,percentage:tt>0?St/tt*100:0,description:Dt(kt)})).sort((kt,St)=>St.value-kt.value),totalExpenses:tt}},[i]);function Dt(Ne){switch(Ne){case _s.Rent:return"Nolo Sedi e Spazi";case _s.Taxes:return"Imposte e Tasse";case _s.Fuel:return"Carburante e Trasporti";case _s.Materials:return"Materiale Didattico";case _s.ProfessionalServices:return"Commercialista/Consulenze";case _s.Software:return"Licenze e Servizi Web";case _s.Marketing:return"Pubblicit e Promo";default:return"Spese operative varie"}}ne.useEffect(()=>{if(t==="overview"&&Fe.current){_e.current&&_e.current.destroy();const Ne=Fe.current.getContext("2d");if(Ne){const tt=["#6366f1","#f43f5e","#f59e0b","#10b981","#3b82f6","#8b5cf6","#ec4899","#64748b"];_e.current=new Ac(Ne,{type:"doughnut",data:{labels:Oe.sortedCategories.map(Pt=>Pt.name),datasets:[{data:Oe.sortedCategories.map(Pt=>Pt.value),backgroundColor:tt,borderWidth:0,hoverOffset:10}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"70%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:Pt=>{const kt=Pt.raw,St=(kt/Oe.totalExpenses*100).toFixed(1);return`${Pt.label}: ${kt.toFixed(2)} (${St}%)`}}}}}})}}return()=>{_e.current&&_e.current.destroy()}},[t,Oe]),ne.useEffect(()=>{if(t==="controlling"&&Be.current){lt.current&&lt.current.destroy();const Ne=Be.current.getContext("2d");if(Ne){const tt=Et.map(St=>St.name),Pt=Et.map(St=>St.revenue),kt=Et.map(St=>St.totalCosts);lt.current=new Ac(Ne,{type:"bar",data:{labels:tt,datasets:[{label:"Ricavi",data:Pt,backgroundColor:"#4ade80",borderRadius:4},{label:"Costi Diretti",data:kt,backgroundColor:"#f87171",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{display:!1}},plugins:{legend:{display:!0,position:"bottom",labels:{boxWidth:10}}}}})}}return()=>{lt.current&&lt.current.destroy()}},[t,Et]),ne.useEffect(()=>{if(t==="analytics"){const Ne=(jt,Fn,hn,nr)=>{var sn;const Tr=(sn=at.current[jt])==null?void 0:sn.getContext("2d");Tr&&(qe.current[jt]&&qe.current[jt].destroy(),qe.current[jt]=new Ac(Tr,{type:Fn,data:hn,options:{responsive:!0,maintainAspectRatio:!1,...nr}}))},tt=new Array(12).fill(0),Pt=new Array(12).fill(0);i.forEach(jt=>{if(!jt.isDeleted){const Fn=new Date(jt.date).getMonth();jt.type===Fi.Income?tt[Fn]+=jt.amount:Pt[Fn]+=jt.amount}}),Ne("bar","bar",{labels:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],datasets:[{label:"Entrate",data:tt,backgroundColor:"#4ade80",borderRadius:4},{label:"Uscite",data:Pt,backgroundColor:"#f87171",borderRadius:4}]},{plugins:{title:{display:!0,text:"Andamento Mensile"}}}),Ne("doughnut","doughnut",{labels:["Logistica (TCO)","Tasse (Stima)","Commercialista","Noli Sedi","Altro Operativo"],datasets:[{data:[We.logistics.totalLogisticsCost,We.fiscal.totalFiscalBurden,We.accountant.annualCost,i.filter(jt=>jt.category===_s.Rent).reduce((jt,Fn)=>jt+Fn.amount,0),Math.max(0,We.expenses-We.logistics.totalLogisticsCost-We.fiscal.totalFiscalBurden)],backgroundColor:["#f87171","#fbbf24","#60a5fa","#a78bfa","#9ca3af"]}]},{cutout:"60%"});let kt=0;const St=tt.map((jt,Fn)=>(kt+=jt-Pt[Fn],kt));Ne("line","line",{labels:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],datasets:[{label:"Saldo Progressivo",data:St,borderColor:"#6366f1",fill:!0,backgroundColor:"rgba(99, 102, 241, 0.1)",tension:.4}]},{}),Ne("radar","radar",{labels:["Liquidit","Redditivit","Efficienza Fiscale","Sostenibilit Logistica","Crescita"],datasets:[{label:"Score Aziendale",data:[85,We.margin,70,60,75],backgroundColor:"rgba(52, 211, 153, 0.2)",borderColor:"#34d399",pointBackgroundColor:"#34d399"}]},{scales:{r:{suggestedMin:0,suggestedMax:100}}})}},[t,We,i]);const Rt=Ne=>{A(tt=>({...tt,sortColumn:Ne,sortDirection:tt.sortColumn===Ne&&tt.sortDirection==="asc"?"desc":"asc"}))},Wt=ne.useMemo(()=>{let Ne=[];return t==="transactions"&&(Ne=i.filter(tt=>!tt.isDeleted)),t==="invoices"&&(Ne=a.filter(tt=>!tt.isDeleted)),t==="quotes"&&(Ne=c.filter(tt=>!tt.isDeleted)),t==="archive"&&(Ne=a.filter(tt=>!tt.isDeleted&&tt.status===wi.SealedSDI)),Ne=Ne.filter(tt=>{const Pt=(tt.description||tt.clientName||tt.invoiceNumber||tt.quoteNumber||"").toLowerCase().includes(z.search.toLowerCase()),kt=(!z.dateFrom||new Date(tt.date||tt.issueDate)>=new Date(z.dateFrom))&&(!z.dateTo||new Date(tt.date||tt.issueDate)<=new Date(z.dateTo)),St=tt.amount||tt.totalAmount,jt=(!z.minAmount||St>=Number(z.minAmount))&&(!z.maxAmount||St<=Number(z.maxAmount)),Fn=!z.invoiceStatus||tt.status===z.invoiceStatus,hn=t==="archive"?(tt.sdiId||"").includes(z.search):!0;return Pt&&kt&&jt&&Fn&&hn}),Ne.sort((tt,Pt)=>{const kt=tt[z.sortColumn]||(z.sortColumn==="date"?tt.date||tt.issueDate:0),St=Pt[z.sortColumn]||(z.sortColumn==="date"?Pt.date||Pt.issueDate:0);return typeof kt=="string"?z.sortDirection==="asc"?kt.localeCompare(St):St.localeCompare(kt):z.sortDirection==="asc"?kt-St:St-kt}),Ne},[t,i,a,c,z]),Jt=ne.useMemo(()=>{const Ne=(Ce-1)*oe;return Wt.slice(Ne,Ne+oe)},[Wt,Ce]);ne.useEffect(()=>{ke(1)},[t,z]);const yn=async()=>{J(!1),E(!0);try{if(t==="transactions")for(const Ne of await Hp())await RL(Ne.id);else if(t==="invoices")for(const Ne of await yx())await jL(Ne.id);else if(t==="quotes")for(const Ne of await zS())await $Y(Ne.id);await Ke(),alert("Eliminazione completata.")}catch{alert("Errore")}finally{E(!1)}},ln=async Ne=>{try{"id"in Ne?await LY(Ne.id,Ne):await BS(Ne),R(!1),Ke()}catch{alert("Errore")}},Zt=Ne=>{be({isOpen:!0,title:"Elimina",message:"Sicuro?",isDangerous:!0,onConfirm:async()=>{await OY(Ne),be(tt=>({...tt,isOpen:!1})),Ke()}})},Ft=async Ne=>{E(!0);try{Ne.id?q==="invoice"?await Yk(Ne.id,Ne):await WY(Ne.id,Ne):q==="invoice"?await VS(Ne):await qY(Ne),V(!1),Ke()}catch(tt){console.error("Error in handleSaveDocument:",tt);const Pt=tt instanceof Error?tt.message:String(tt);alert("Errore durante il salvataggio: "+Pt)}finally{E(!1)}},At=Ne=>{be({isOpen:!0,title:"Elimina",message:"Sicuro?",isDangerous:!0,onConfirm:async()=>{q==="invoice"?await UY(Ne):await GY(Ne),be(tt=>({...tt,isOpen:!1})),Ke()}})},De=async Ne=>{const tt=await Up(),Pt=_.find(kt=>kt.id===Ne.clientId);await A0e(Ne,q==="invoice"?"Fattura":"Preventivo",tt,Pt)},nt=async()=>{const Ne=BY(d,x,i);Ne.length>0?(await FY(Ne),Ke(),alert(`Generate ${Ne.length} transazioni.`)):alert("Nessun nolo da generare.")},ct=Ne=>{he(Ne),G(!0)},Nt=async Ne=>{if(te){G(!1),E(!0);try{await Yk(te.id,{status:wi.SealedSDI,sdiId:Ne}),await Ke(),alert("Fattura sigillata correttamente!")}catch(tt){console.error(tt),alert("Errore durante il salvataggio.")}finally{E(!1),he(null)}}},gt=async()=>{if(me.type){re(Ne=>({...Ne,isOpen:!1})),E(!0);try{await YY(me.type),await Ke(),alert(`Tutte le ${me.type===Fi.Income?"Entrate":"Uscite"} sono state eliminate.`)}catch{alert("Errore durante l'eliminazione.")}finally{E(!1)}}},$t=Ne=>{O(tt=>tt.includes(Ne)?tt.filter(Pt=>Pt!==Ne):[...tt,Ne])},wt=()=>{I.length===Jt.length?O([]):O(Jt.map(Ne=>Ne.id))},In=()=>{if(I.length===0)return alert("Seleziona almeno una fattura.");const Ne=a.filter(kt=>I.includes(kt.id));let tt=`*Oggetto: trasmissione lista fatture*

`;tt+=`Totale fatture trasmesse: ${Ne.length}

`,Ne.forEach((kt,St)=>{const jt=new Date(kt.issueDate).toLocaleDateString("it-IT");tt+=`${St+1}. ${kt.invoiceNumber} - ${jt} - ${kt.sdiId||"SDI N/D"}
`}),tt+=`
FINE TRASMISSIONE. Cordiali saluti`;const Pt=encodeURIComponent(tt);window.open(`https://wa.me/?text=${Pt}`,"_blank")};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Finanza Enterprise"}),f.jsx("p",{className:"mt-1",style:{color:"var(--md-text-secondary)"},children:"Controllo di gestione, fiscalit, logistica e flussi."})]}),t==="controlling"?f.jsxs("div",{className:"flex flex-col items-end gap-1",children:[f.jsxs("button",{onClick:nt,className:"md-btn md-btn-raised bg-purple-600 text-white flex items-center",children:[f.jsx(l7,{})," ",f.jsx("span",{className:"ml-2",children:"Calcola Noli"})]}),f.jsx("button",{onClick:()=>W(!0),className:"text-[10px] text-indigo-600 underline hover:text-indigo-800",children:"Come funziona?"})]}):f.jsxs("div",{className:"flex gap-2",children:[t==="transactions"&&f.jsxs(f.Fragment,{children:[f.jsxs("button",{onClick:()=>re({isOpen:!0,type:Fi.Income}),className:"md-btn md-btn-sm bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 flex items-center text-xs font-bold",children:[f.jsx($r,{})," ENTRATE: Elimina tutte"]}),f.jsxs("button",{onClick:()=>re({isOpen:!0,type:Fi.Expense}),className:"md-btn md-btn-sm bg-red-50 text-red-700 border border-red-200 hover:bg-red-100 flex items-center text-xs font-bold",children:[f.jsx($r,{})," USCITE: Elimina tutte"]})]}),t==="archive"&&f.jsxs("button",{onClick:In,className:"md-btn md-btn-sm bg-green-500 text-white hover:bg-green-600 flex items-center shadow-sm",children:[f.jsx("span",{className:"mr-2",children:"WhatsApp Commercialista"})," (",I.length,")"]}),["invoices","quotes"].includes(t)&&f.jsxs("button",{onClick:()=>J(!0),className:"md-btn md-btn-sm bg-gray-50 text-gray-700 border border-gray-200 hover:bg-gray-100 flex items-center text-xs font-bold mr-2",children:[f.jsx($r,{})," Elimina Tutto"]}),t==="transactions"&&f.jsxs("button",{onClick:()=>{ie(null),R(!0)},className:"md-btn md-btn-raised md-btn-green",children:[f.jsx(po,{})," Nuova"]}),(t==="invoices"||t==="quotes")&&f.jsxs("button",{onClick:()=>{ie(null),Q(t==="invoices"?"invoice":"quote"),V(!0)},className:"md-btn md-btn-raised md-btn-primary",children:[f.jsx(po,{})," Nuovo"]})]})]}),f.jsx("div",{className:"border-b border-gray-200 mb-6",children:f.jsx("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:[{id:"overview",label:"Panoramica"},{id:"cfo",label:"CFO (Strategia)"},{id:"controlling",label:"Controllo di Gestione (Realt)"},{id:"analytics",label:"Analisi Grafica"},{id:"transactions",label:"Transazioni"},{id:"invoices",label:"Fatture"},{id:"archive",label:"ARCHIVIO"},{id:"quotes",label:"Preventivi"}].map(Ne=>f.jsx("button",{onClick:()=>r(Ne.id),className:`whitespace-nowrap py-3 px-1 border-b-2 font-medium text-sm ${t===Ne.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:Ne.label},Ne.id))})}),k?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs(f.Fragment,{children:[t==="overview"&&f.jsxs("div",{className:"animate-fade-in space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[f.jsxs("div",{className:"md-card p-6 bg-green-50 border-l-4 border-green-500",children:[f.jsx("h3",{className:"text-xs font-bold text-green-800 uppercase tracking-wider",children:"Ricavi Totali"}),f.jsxs("p",{className:"text-2xl font-bold text-green-900 mt-2",children:[We.revenue.toFixed(2),""]})]}),f.jsxs("div",{className:"md-card p-6 bg-red-50 border-l-4 border-red-500",children:[f.jsx("h3",{className:"text-xs font-bold text-red-800 uppercase tracking-wider",children:"Costi Totali"}),f.jsxs("p",{className:"text-2xl font-bold text-red-900 mt-2",children:[We.expenses.toFixed(2),""]})]}),f.jsxs("div",{className:"md-card p-6 bg-indigo-50 border-l-4 border-indigo-500",children:[f.jsx("h3",{className:"text-xs font-bold text-indigo-800 uppercase tracking-wider",children:"Utile Netto"}),f.jsxs("p",{className:"text-2xl font-bold text-indigo-900 mt-2",children:[We.netProfit.toFixed(2),""]})]}),f.jsxs("div",{className:"md-card p-6 bg-blue-50 border-l-4 border-blue-500",children:[f.jsx("h3",{className:"text-xs font-bold text-blue-800 uppercase tracking-wider",children:"Margine (MOL)"}),f.jsxs("p",{className:"text-2xl font-bold text-blue-900 mt-2",children:[We.margin.toFixed(1),"%"]})]})]}),f.jsxs("div",{className:"md-card p-6 border-t-4 border-slate-500",children:[f.jsx("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:" Dove vanno a finire i miei soldi?"}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-center",children:[f.jsxs("div",{className:"h-64 relative flex justify-center items-center",children:[f.jsx("canvas",{ref:Ne=>Fe.current=Ne}),f.jsxs("div",{className:"absolute inset-0 flex flex-col justify-center items-center pointer-events-none",children:[f.jsx("span",{className:"text-xs text-slate-400 font-medium",children:"TOTALE USCITE"}),f.jsxs("span",{className:"text-xl font-bold text-slate-800",children:[Oe.totalExpenses.toFixed(2),""]})]})]}),f.jsx("div",{className:"lg:col-span-2 overflow-y-auto max-h-72 pr-2 custom-scrollbar",children:f.jsxs("table",{className:"w-full text-sm",children:[f.jsx("thead",{className:"text-xs text-slate-400 border-b border-slate-100",children:f.jsxs("tr",{children:[f.jsx("th",{className:"text-left py-2",children:"Categoria Spesa"}),f.jsx("th",{className:"text-left py-2",children:"Dettaglio"}),f.jsx("th",{className:"text-right py-2",children:"Importo"}),f.jsx("th",{className:"text-right py-2",children:"%"})]})}),f.jsx("tbody",{className:"divide-y divide-slate-50",children:Oe.sortedCategories.map((Ne,tt)=>f.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[f.jsx("td",{className:"py-3 font-bold text-slate-700",children:Ne.name}),f.jsx("td",{className:"py-3 text-xs text-slate-500 italic",children:Ne.description}),f.jsxs("td",{className:"py-3 text-right font-mono text-red-600 font-medium",children:["-",Ne.value.toFixed(2),""]}),f.jsx("td",{className:"py-3 text-right",children:f.jsxs("span",{className:"text-xs bg-slate-100 text-slate-600 px-2 py-1 rounded-full font-bold",children:[Ne.percentage.toFixed(1),"%"]})})]},tt))})]})})]})]})]}),t==="cfo"&&f.jsxs("div",{className:"space-y-8 animate-slide-up",children:[f.jsxs("div",{className:"md-card p-6 border-l-4 border-indigo-600",children:[f.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[f.jsx(C0e,{})," Proiezione Fiscale 2025 (Forfettario Start-up)"]}),f.jsxs("div",{className:"mb-6",children:[f.jsxs("div",{className:"flex justify-between text-xs mb-1 font-bold text-gray-600",children:[f.jsx("span",{children:"Plafond 85.000"}),f.jsxs("span",{children:[We.fiscal.limitProgress.toFixed(1),"% Utilizzato"]})]}),f.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:f.jsx("div",{className:`h-3 rounded-full transition-all duration-1000 ${We.fiscal.limitProgress>80?"bg-red-500":"bg-indigo-500"}`,style:{width:`${Math.min(We.fiscal.limitProgress,100)}%`}})}),f.jsxs("p",{className:"text-xs text-right mt-1 text-gray-500",children:["Residuo: ",We.fiscal.remainingCeiling.toFixed(2),""]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-sm",children:[f.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[f.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Imponibile (78%)"}),f.jsxs("p",{className:"text-xl font-mono font-bold text-gray-800 mt-1",children:[We.fiscal.taxableIncome.toFixed(2),""]}),f.jsx("p",{className:"text-[10px] text-gray-400",children:"Su fatturato incassato"})]}),f.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[f.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"INPS (26.23%)"}),f.jsxs("p",{className:"text-xl font-mono font-bold text-orange-600 mt-1",children:[We.fiscal.inpsTotal.toFixed(2),""]}),f.jsx("p",{className:"text-[10px] text-gray-400",children:"Gestione Separata"})]}),f.jsxs("div",{className:"bg-gray-50 p-3 rounded border border-gray-200",children:[f.jsx("p",{className:"text-gray-500 text-xs uppercase font-bold",children:"Imposta Sost. (5%)"}),f.jsxs("p",{className:"text-xl font-mono font-bold text-red-600 mt-1",children:[We.fiscal.taxTotal.toFixed(2),""]}),f.jsx("p",{className:"text-[10px] text-gray-400",children:"Aliquota Start-up"})]})]})]}),f.jsxs("div",{className:"md-card p-6 border-l-4 border-teal-500",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:" Simulatore Rate & Acconti (Anno Successivo)"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"Stimiamo il carico fiscale totale per Giugno e Novembre dell'anno prossimo, basato sul fatturato attuale."}),f.jsxs("ul",{className:"space-y-2 text-sm",children:[f.jsxs("li",{className:"flex justify-between border-b border-dashed pb-1",children:[f.jsx("span",{children:"Saldo 2025:"})," ",f.jsxs("span",{className:"font-bold",children:[We.fiscal.installmentsProjection.saldo2025.toFixed(2),""]})]}),f.jsxs("li",{className:"flex justify-between border-b border-dashed pb-1",children:[f.jsx("span",{children:"I Acconto 2026 (50%):"})," ",f.jsxs("span",{className:"font-bold",children:[We.fiscal.installmentsProjection.acconto1_2026.toFixed(2),""]})]}),f.jsxs("li",{className:"flex justify-between bg-teal-50 p-1 rounded font-bold text-teal-800",children:[f.jsx("span",{children:"TOTALE GIUGNO:"})," ",f.jsxs("span",{children:[We.fiscal.installmentsProjection.totalDueJune.toFixed(2),""]})]}),f.jsxs("li",{className:"flex justify-between text-xs text-gray-500 pt-1",children:[f.jsx("span",{children:"Rata Mensile (x6):"})," ",f.jsxs("span",{children:[We.fiscal.installmentsProjection.installmentAmount.toFixed(2),""]})]}),f.jsxs("li",{className:"flex justify-between pt-2 border-t border-teal-200 font-bold text-orange-700",children:[f.jsx("span",{children:"II Acconto (Nov):"})," ",f.jsxs("span",{children:[We.fiscal.installmentsProjection.acconto2_2026.toFixed(2),""]})]})]})]}),f.jsxs("div",{className:"flex flex-col justify-center items-center bg-teal-50 rounded-xl p-4 border border-teal-100",children:[f.jsxs("div",{className:"text-4xl font-bold text-teal-600 mb-1",children:[We.fiscal.monthlySavingQuota.toFixed(0),""]}),f.jsx("p",{className:"text-xs font-bold text-teal-800 uppercase tracking-wide",children:"Accantonamento Mensile"}),f.jsx("p",{className:"text-[10px] text-center text-teal-600 mt-2 px-4",children:"Metti da parte questa cifra ogni mese per coprire tasse e acconti senza stress."})]})]})]}),f.jsxs("div",{className:"md-card p-6 border-l-4 border-purple-600 bg-purple-50/50",children:[f.jsx("h3",{className:"text-lg font-bold text-purple-900 mb-4 flex items-center gap-2",children:" AI CFO: Reverse Engineering"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-purple-800 uppercase block mb-1",children:"Obiettivo Netto Mensile ()"}),f.jsx("input",{type:"number",value:j.targetNetMonthly,onChange:Ne=>F({...j,targetNetMonthly:Number(Ne.target.value)}),className:"w-full p-2 border border-purple-200 rounded text-purple-900 font-bold bg-white focus:ring-purple-500"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-purple-800 uppercase block mb-1",children:"Prezzo Medio Lezione ()"}),f.jsx("input",{type:"number",value:j.avgLessonPrice,onChange:Ne=>F({...j,avgLessonPrice:Number(Ne.target.value)}),className:"w-full p-2 border border-purple-200 rounded text-purple-900 font-bold bg-white focus:ring-purple-500"})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("p",{className:"text-sm text-purple-800",children:["Per guadagnare ",f.jsxs("strong",{children:[j.targetNetMonthly," netti"]})," al mese, considerando le tue spese attuali e le tasse stimate:"]}),f.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-purple-100 space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-600",children:"Fatturato Mensile:"}),f.jsxs("span",{className:"font-bold text-purple-700",children:[We.ai.requiredMonthlyRevenue.toFixed(0),""]})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-600",children:"Lezioni Necessarie:"}),f.jsx("span",{className:"font-bold text-purple-700",children:We.ai.lessonsNeeded.toFixed(0)})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-gray-600",children:"Allievi (4 lez/mese):"}),f.jsx("span",{className:"font-bold text-purple-700",children:We.ai.studentsNeeded.toFixed(0)})]})]})]})]})]}),f.jsxs("div",{className:"md-card p-6 border-l-4 border-blue-500 bg-blue-50/50",children:[f.jsx("h3",{className:"text-lg font-bold text-blue-900 mb-3",children:" Strategia & Allarmi"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"font-bold text-blue-800 uppercase text-xs",children:"Situazione Corrente"}),f.jsxs("ul",{className:"space-y-1",children:[We.fiscal.limitProgress>80&&f.jsxs("li",{className:"flex items-center gap-2 text-red-600 font-bold",children:[" ATTENZIONE LIMITE 85K: Sei all'",We.fiscal.limitProgress.toFixed(1),"% del plafond."]}),f.jsxs("li",{className:"text-blue-700",children:[" Hai emesso ",We.fiscal.invoicesCount," fatture con bollo (Costo: ",We.fiscal.totalBolloCost,")."]}),We.netProfit<0&&f.jsx("li",{className:"flex items-center gap-2 text-red-600 font-bold",children:" Cash Flow Negativo: Spese superiori ai ricavi."})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"font-bold text-blue-800 uppercase text-xs",children:"Suggerimenti"}),f.jsxs("ul",{className:"space-y-1 text-blue-700",children:[f.jsxs("li",{className:"cursor-pointer hover:underline",onClick:()=>e&&e("Finance",{tab:"controlling"}),children:[" Controlla i costi di nolo nella sezione ",f.jsx("span",{className:"font-bold",children:"Controlling"}),"."]}),f.jsxs("li",{children:[" Per raggiungere il target di ",j.targetNetMonthly," netti, mantieni il fatturato sopra i ",We.ai.requiredMonthlyRevenue.toFixed(0),"/mese."]}),f.jsxs("li",{children:[" Accantona ",We.fiscal.monthlySavingQuota.toFixed(0)," questo mese per le tasse future."]})]})]})]})]})]}),t==="controlling"&&f.jsxs("div",{className:"space-y-8 animate-slide-up",children:[f.jsxs("div",{className:"md-card p-6 border-t-4 border-indigo-500",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:" Profittabilit Immobiliare (Sedi)"}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[f.jsx("div",{className:"h-64 relative",children:f.jsx("canvas",{ref:Ne=>Be.current=Ne})}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left",children:[f.jsx("thead",{className:"text-xs text-gray-500 uppercase bg-gray-50 border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-3 py-2",children:"Sede"}),f.jsx("th",{className:"px-3 py-2 text-right",children:"Ricavi Reali"}),f.jsx("th",{className:"px-3 py-2 text-right",children:"Costi Nolo"}),f.jsx("th",{className:"px-3 py-2 text-right",children:"Margine"})]})}),f.jsxs("tbody",{className:"divide-y divide-gray-100",children:[Et.map((Ne,tt)=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsx("td",{className:"px-3 py-2 font-bold text-gray-700",children:Ne.name}),f.jsxs("td",{className:"px-3 py-2 text-right text-green-600 font-mono",children:[Ne.revenue.toFixed(0),""]}),f.jsxs("td",{className:"px-3 py-2 text-right text-red-600 font-mono",children:["-",Ne.rentCost.toFixed(0),""]}),f.jsx("td",{className:"px-3 py-2 text-right",children:f.jsxs("span",{className:`px-2 py-0.5 rounded text-xs font-bold ${Ne.margin>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[Ne.marginPercent.toFixed(0),"%"]})})]},tt)),Et.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"p-4 text-center text-gray-400 italic",children:"Nessun dato per sede."})})]})]})})]})]}),f.jsxs("div",{className:"md-card p-6 border-t-4 border-amber-500 bg-amber-50/30",children:[f.jsx("h3",{className:"text-lg font-bold text-amber-900 mb-4 flex items-center gap-2",children:" Efficienza Logistica (TCO Veicolo)"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("span",{className:"text-sm font-bold text-gray-600",children:"Costo Carburante (/L)"}),f.jsx("input",{type:"number",step:"0.01",value:j.fuelCost,onChange:Ne=>F({...j,fuelCost:Number(Ne.target.value)}),className:"w-20 p-1 border rounded text-right font-bold bg-white"})]}),f.jsxs("div",{className:"space-y-3 text-sm",children:[f.jsxs("div",{className:"flex justify-between border-b border-amber-200 pb-1",children:[f.jsx("span",{children:"Km Totali Percorsi (A/R):"}),f.jsxs("span",{className:"font-bold",children:[We.logistics.totalKm.toFixed(0)," km"]})]}),f.jsxs("div",{className:"flex justify-between text-amber-800",children:[f.jsx("span",{children:"Carburante Stimato:"}),f.jsxs("span",{className:"font-bold",children:[We.logistics.estimatedFuelCost.toFixed(2),""]})]}),f.jsxs("div",{className:"flex justify-between text-gray-600",children:[f.jsx("span",{children:"Usura/Ammortamento:"}),f.jsxs("span",{className:"font-bold",children:[We.logistics.estimatedWearCost.toFixed(2),""]})]}),f.jsxs("div",{className:"flex justify-between text-gray-600",children:[f.jsx("span",{children:"Fissi (Assic./Bollo):"}),f.jsxs("span",{className:"font-bold",children:[We.logistics.fixedCosts.toFixed(2),""]})]})]})]}),f.jsxs("div",{className:"flex flex-col justify-center items-center bg-white rounded-xl shadow-sm p-4 border border-amber-100",children:[f.jsx("p",{className:"text-xs font-bold text-amber-800 uppercase mb-1",children:"Costo Totale Logistica"}),f.jsxs("p",{className:"text-3xl font-bold text-amber-600 mb-2",children:[We.logistics.totalLogisticsCost.toFixed(2),""]}),f.jsxs("p",{className:"text-xs bg-amber-100 text-amber-800 px-2 py-1 rounded",children:["Incidenza: ",f.jsxs("strong",{children:[We.logistics.impactPerKm.toFixed(2)," /km"]})]})]})]})]}),f.jsxs("div",{className:"md-card p-6 border-t-4 border-gray-500 bg-gray-50",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:" Costi di Struttura (Overhead)"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Commercialista (Annuale)"}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"number",value:j.accountantCost,onChange:Ne=>F({...j,accountantCost:Number(Ne.target.value)}),className:"flex-1 border rounded p-2 text-right font-bold bg-white"}),f.jsx("span",{className:"self-center font-bold",children:""})]})]}),f.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[f.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[f.jsx("span",{className:"text-gray-600",children:"Software & Servizi Web"}),f.jsxs("span",{className:"font-bold",children:[i.filter(Ne=>Ne.category===_s.Software).reduce((Ne,tt)=>Ne+tt.amount,0).toFixed(2),""]})]}),f.jsx("div",{className:"w-full bg-gray-100 h-1 mt-2",children:f.jsx("div",{className:"bg-blue-500 h-1",style:{width:"100%"}})})]}),f.jsxs("div",{className:"p-3 bg-white rounded border border-gray-200",children:[f.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[f.jsx("span",{className:"text-gray-600",children:"Materiali Didattici"}),f.jsxs("span",{className:"font-bold",children:[i.filter(Ne=>Ne.category===_s.Materials).reduce((Ne,tt)=>Ne+tt.amount,0).toFixed(2),""]})]}),f.jsx("div",{className:"w-full bg-gray-100 h-1 mt-2",children:f.jsx("div",{className:"bg-purple-500 h-1",style:{width:"100%"}})})]})]})]})]}),t==="analytics"&&f.jsx("div",{className:"animate-fade-in space-y-6",children:f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"md-card p-4 h-80",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-600 mb-2 text-center",children:"Fatturato vs Spese (Mensile)"}),f.jsx("div",{className:"h-64 w-full relative",children:f.jsx("canvas",{ref:Ne=>at.current.bar=Ne})})]}),f.jsxs("div",{className:"md-card p-4 h-80",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-600 mb-2 text-center",children:"Ripartizione Costi (Doughnut)"}),f.jsx("div",{className:"h-64 w-full relative flex justify-center",children:f.jsx("canvas",{ref:Ne=>at.current.doughnut=Ne})})]}),f.jsxs("div",{className:"md-card p-4 h-80",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-600 mb-2 text-center",children:"Trend Cash Flow (Lineare)"}),f.jsx("div",{className:"h-64 w-full relative",children:f.jsx("canvas",{ref:Ne=>at.current.line=Ne})})]}),f.jsxs("div",{className:"md-card p-4 h-80",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-600 mb-2 text-center",children:"Analisi Salute Aziendale (Radar)"}),f.jsx("div",{className:"h-64 w-full relative flex justify-center",children:f.jsx("canvas",{ref:Ne=>at.current.radar=Ne})})]})]})}),["transactions","invoices","quotes","archive"].includes(t)&&f.jsxs("div",{className:"animate-slide-up space-y-4",children:[f.jsxs("div",{className:"bg-white p-3 rounded-lg border border-gray-200 flex flex-wrap gap-2 items-center",children:[f.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",placeholder:"Cerca...",className:"w-full pl-8 pr-2 py-1 text-sm border rounded",value:z.search,onChange:Ne=>A({...z,search:Ne.target.value})})]}),f.jsx("input",{type:"date",className:"text-sm border rounded p-1",value:z.dateFrom,onChange:Ne=>A({...z,dateFrom:Ne.target.value}),title:"Da Data"}),f.jsx("input",{type:"date",className:"text-sm border rounded p-1",value:z.dateTo,onChange:Ne=>A({...z,dateTo:Ne.target.value}),title:"A Data"}),f.jsx("input",{type:"number",placeholder:"Min ",className:"w-20 text-sm border rounded p-1",value:z.minAmount,onChange:Ne=>A({...z,minAmount:Ne.target.value})}),f.jsx("input",{type:"number",placeholder:"Max ",className:"w-20 text-sm border rounded p-1",value:z.maxAmount,onChange:Ne=>A({...z,maxAmount:Ne.target.value})})]}),f.jsx("div",{className:"bg-white border rounded-lg overflow-hidden shadow-sm",children:f.jsxs("table",{className:"w-full text-left text-sm",children:[f.jsx("thead",{className:"bg-gray-50 border-b text-xs uppercase text-gray-500 font-semibold",children:f.jsxs("tr",{children:[t==="archive"&&f.jsx("th",{className:"p-4 w-10 text-center",children:f.jsx("input",{type:"checkbox",onChange:wt,checked:I.length>0&&I.length===Jt.length})}),f.jsxs("th",{className:"p-4 cursor-pointer hover:text-gray-700",onClick:()=>Rt("date"),children:["Data ",z.sortColumn==="date"&&(z.sortDirection==="asc"?"":"")]}),f.jsx("th",{className:"p-4 cursor-pointer hover:text-gray-700",onClick:()=>Rt("description"),children:"Descrizione / Cliente"}),f.jsxs("th",{className:"p-4 text-right cursor-pointer hover:text-gray-700",onClick:()=>Rt("amount"),children:["Importo ",z.sortColumn==="amount"&&(z.sortDirection==="asc"?"":"")]}),f.jsx("th",{className:"p-4 text-center",children:"Stato"}),t==="archive"&&f.jsx("th",{className:"p-4 text-center",children:"Numero SDI"}),f.jsx("th",{className:"p-4 text-right",children:"Azioni"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-100",children:Jt.map(Ne=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[t==="archive"&&f.jsx("td",{className:"p-4 text-center",children:f.jsx("input",{type:"checkbox",checked:I.includes(Ne.id),onChange:()=>$t(Ne.id)})}),f.jsx("td",{className:"p-4 text-gray-600 font-mono text-xs",children:new Date(Ne.date||Ne.issueDate).toLocaleDateString()}),f.jsxs("td",{className:"p-4",children:[f.jsx("div",{className:"font-bold text-gray-800",children:Ne.description||Ne.clientName}),t!=="transactions"&&f.jsx("div",{className:"text-xs text-gray-500",children:Ne.invoiceNumber||Ne.quoteNumber})]}),f.jsxs("td",{className:`p-4 text-right font-bold ${Ne.type===Fi.Expense?"text-red-600":"text-green-600"}`,children:[Ne.type===Fi.Expense?"-":"",(Ne.amount||Ne.totalAmount).toFixed(2),""]}),f.jsx("td",{className:"p-4 text-center",children:Ne.status===wi.PendingSDI||Ne.status===wi.Draft?f.jsx("button",{onClick:()=>ct(Ne),className:`px-2 py-1 rounded text-[10px] font-bold uppercase hover:shadow-sm transition-colors ${Ne.status===wi.PendingSDI?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:Ne.status===wi.PendingSDI?" Pending SDI":" Draft"}):f.jsx("span",{className:`px-2 py-1 rounded text-[10px] font-bold uppercase ${Ne.status==="completed"||Ne.status==="paid"?"bg-green-100 text-green-800":Ne.status===wi.SealedSDI?"bg-blue-100 text-blue-800 border border-blue-200":Ne.status==="overdue"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-600"}`,children:Ne.status===wi.SealedSDI?"SEALED SDI":Ne.status})}),t==="archive"&&f.jsx("td",{className:"p-4 text-center font-mono text-xs",children:Ne.sdiId||"-"}),f.jsxs("td",{className:"p-4 text-right flex justify-end gap-2",children:[t!=="transactions"&&f.jsx("button",{onClick:()=>De(Ne),className:"text-gray-500 hover:text-indigo-600 p-1",children:f.jsx(N0e,{})}),t!=="archive"&&f.jsx("button",{onClick:()=>{ie(Ne),t==="transactions"?R(!0):(Q(t==="invoices"?"invoice":"quote"),V(!0))},className:"text-blue-500 hover:bg-blue-50 p-1 rounded",children:f.jsx(mo,{})}),t!=="archive"&&f.jsx("button",{onClick:()=>{t==="transactions"?Zt(Ne.id):(Q(t==="invoices"?"invoice":"quote"),At(Ne.id))},className:"text-red-500 hover:bg-red-50 p-1 rounded",children:f.jsx($r,{})})]})]},Ne.id))})]})}),f.jsx(tm,{currentPage:Ce,totalItems:Wt.length,itemsPerPage:oe,onPageChange:ke})]})]}),B&&f.jsx(mi,{onClose:()=>R(!1),size:"lg",children:f.jsx(I0e,{transaction:Y,onSave:ln,onCancel:()=>R(!1)})}),P&&f.jsx(mi,{onClose:()=>V(!1),size:"2xl",children:f.jsx(D0e,{docData:Y,type:q,clients:_,onSave:Ft,onCancel:()=>V(!1)},Y?Y.id:"new")}),K&&te&&f.jsx(R0e,{invoice:te,onSeal:Nt,onCancel:()=>{G(!1),he(null)}}),f.jsx(Ho,{isOpen:ye.isOpen,onClose:()=>be(Ne=>({...Ne,isOpen:!1})),onConfirm:ye.onConfirm,title:ye.title,message:ye.message,isDangerous:ye.isDangerous}),f.jsx(Ho,{isOpen:se,onClose:()=>J(!1),onConfirm:yn,title:`ELIMINA TUTTO (${t.toUpperCase()})`,message:"ATTENZIONE: Operazione irreversibile. Confermi?",isDangerous:!0,confirmText:"Elimina TUTTO"}),f.jsx(Ho,{isOpen:me.isOpen,onClose:()=>re({isOpen:!1,type:null}),onConfirm:gt,title:`Elimina tutte le ${me.type===Fi.Income?"ENTRATE":"USCITE"}`,message:`Sei sicuro di voler eliminare TUTTE le transazioni di tipo ${me.type===Fi.Income?"ENTRATA":"USCITA"}? L'operazione  irreversibile.`,isDangerous:!0,confirmText:"S, Procedi"}),M&&f.jsx(mi,{onClose:()=>W(!1),size:"lg",children:f.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[f.jsx("div",{className:"p-6 border-b flex-shrink-0 bg-indigo-50",children:f.jsx("h3",{className:"text-xl font-bold text-indigo-900",children:"Come funziona il Calcolo Noli?"})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:f.jsx("div",{className:"prose prose-sm max-w-none text-slate-700 whitespace-pre-wrap leading-relaxed",children:k0e})}),f.jsx("div",{className:"p-4 border-t flex justify-end bg-gray-50 flex-shrink-0",children:f.jsx("button",{onClick:()=>W(!1),className:"md-btn md-btn-raised md-btn-primary",children:"Ho capito"})})]})})]})},tR="",j0e=async()=>{if("serviceWorker"in navigator)try{return await navigator.serviceWorker.register("/firebase-messaging-sw.js")}catch(n){console.error("[FCM Service] Errore CRITICO registrazione SW:",n);try{return await navigator.serviceWorker.register("./firebase-messaging-sw.js")}catch(e){return console.error("[FCM Service] Fallback fallito:",e),null}}return null},c7=async n=>{if(!("Notification"in window))return{success:!1,error:"Questo browser non supporta le notifiche."};const e=await j0e();if(!e)return{success:!1,error:"Impossibile registrare il Service Worker. Verifica di essere su HTTPS o localhost."};if(await Notification.requestPermission()!=="granted")return{success:!1,error:"Permesso negato dall'utente nelle impostazioni del browser."};try{if(!tR)return{success:!1,error:"VAPID KEY mancante. Configurare VITE_VAPID_KEY in .env.local"};const r=e||await navigator.serviceWorker.ready,i=await XK(JK,{vapidKey:tR,serviceWorkerRegistration:r});return i?(await L0e(i,n),{success:!0,token:i}):{success:!1,error:"Firebase non ha restituito nessun token (Token Null)."}}catch(r){console.error("[FCM Service] Error:",r);let i=r.message||"Errore sconosciuto";return i.includes("Subscription failed")&&(i="Sottoscrizione fallita (VAPID Key errata o Push Service bloccato)."),i.includes("communication with the push service")&&(i="Impossibile contattare i server di notifica (Blocco di rete/AdBlock?)."),{success:!1,error:i}}},L0e=async(n,e)=>{try{const t=fn(Ut,"fcm_tokens",n);await ov(t,{token:n,userId:e,updatedAt:dG(),userAgent:navigator.userAgent,platform:navigator.platform},{merge:!0})}catch(t){console.error("[FCM Service] Errore salvataggio DB:",t)}},$f={primary:"#757575",bgLight:"#f5f5f5"},O0e=n=>{let e=n.replace("#","");e.length===3&&(e=e.split("").map(r=>r+r).join(""));const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:t&255}},Tc=(n,e,t)=>{const r=t/100,i=Math.round(n.r*(1-r)+e.r*r),s=Math.round(n.g*(1-r)+e.g*r),a=Math.round(n.b*(1-r)+e.b*r);return`rgb(${i}, ${s}, ${a})`},u7=(n,e)=>{const t=document.documentElement;(!n||!/^#[0-9A-F]{6}$/i.test(n))&&(n=$f.primary);const r=e||$f.bgLight;localStorage.setItem("ep_theme_primary",n),localStorage.setItem("ep_theme_bg",r);const i=O0e(n),s={r:255,g:255,b:255},a={r:0,g:0,b:0},o=(c,u)=>t.style.setProperty(c,u);o("--theme-50",Tc(i,s,95)),o("--theme-100",Tc(i,s,90)),o("--theme-200",Tc(i,s,75)),o("--theme-300",Tc(i,s,60)),o("--theme-400",Tc(i,s,30)),o("--theme-500",Tc(i,s,10)),o("--theme-600",`rgb(${i.r}, ${i.g}, ${i.b})`),o("--theme-700",Tc(i,a,15)),o("--theme-800",Tc(i,a,30)),o("--theme-900",Tc(i,a,50)),o("--theme-950",Tc(i,a,70)),o("--md-primary",n),o("--md-primary-dark",Tc(i,a,20)),o("--md-bg-light",r)},h7=()=>{const n=localStorage.getItem("ep_theme_primary")||$f.primary,e=localStorage.getItem("ep_theme_bg")||$f.bgLight;return{primary:n,bg:e}},M0e=({currentConfig:n,suppliers:e,onSave:t,onClose:r})=>{const[i,s]=ne.useState((n==null?void 0:n.status)||"active"),[a,o]=ne.useState((n==null?void 0:n.validDate)||new Date().toISOString().split("T")[0]),[c,u]=ne.useState((n==null?void 0:n.discountType)||"percent"),[d,p]=ne.useState((n==null?void 0:n.discountValue)||0),[x,v]=ne.useState((n==null?void 0:n.targetLocationIds)||[]),[_,b]=ne.useState((n==null?void 0:n.targetClientIds)||[]),[S,T]=ne.useState([]),[k,E]=ne.useState(!1),[j,F]=ne.useState("");ne.useEffect(()=>{i==="promo"&&(async()=>{E(!0);try{const P=await Oh();T(P)}catch(P){console.error(P)}finally{E(!1)}})()},[i]);const z=()=>{t({status:i,validDate:i!=="active"?a:void 0,discountType:i==="promo"?c:void 0,discountValue:i==="promo"?d:void 0,targetLocationIds:i==="promo"?x:[],targetClientIds:i==="promo"?_:[]}),r()},A=R=>v(P=>P.includes(R)?P.filter(V=>V!==R):[...P,R]),I=R=>b(P=>P.includes(R)?P.filter(V=>V!==R):[...P,R]),O=ne.useMemo(()=>{const R=[];return e.forEach(P=>P.locations.forEach(V=>R.push({id:V.id,name:V.name}))),R},[e]),B=S.filter(R=>(R.clientType===ur.Parent?`${R.firstName} ${R.lastName}`:R.companyName).toLowerCase().includes(j.toLowerCase()));return f.jsx(mi,{onClose:r,size:"lg",children:f.jsxs("div",{className:"flex flex-col h-full max-h-[85vh]",children:[f.jsxs("div",{className:"p-6 border-b bg-gray-50 flex-shrink-0",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Stato Abbonamento"}),f.jsx("p",{className:"text-xs text-gray-500",children:"Definisci disponibilit e regole promozionali."})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsx("button",{onClick:()=>s("active"),className:`p-3 border rounded-lg text-sm font-bold transition-all ${i==="active"?"bg-green-50 border-green-500 text-green-700 ring-1 ring-green-500":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Attivo"}),f.jsx("button",{onClick:()=>s("obsolete"),className:`p-3 border rounded-lg text-sm font-bold transition-all ${i==="obsolete"?"bg-gray-100 border-gray-500 text-gray-700 ring-1 ring-gray-500":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Obsoleto"}),f.jsx("button",{onClick:()=>s("future"),className:`p-3 border rounded-lg text-sm font-bold transition-all ${i==="future"?"bg-blue-50 border-blue-500 text-blue-700 ring-1 ring-blue-500":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Da Attivare"}),f.jsx("button",{onClick:()=>s("promo"),className:`p-3 border rounded-lg text-sm font-bold transition-all ${i==="promo"?"bg-yellow-50 border-yellow-500 text-yellow-700 ring-1 ring-yellow-500":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"Promo"})]}),f.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-4 animate-fade-in",children:[i==="active"&&f.jsx("p",{className:"text-sm text-green-600",children:"L'abbonamento  visibile e selezionabile liberamente."}),i==="obsolete"&&f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:a,onChange:R=>o(R.target.value),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Non pi selezionabile dal:"}),f.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Le iscrizioni esistenti non verranno modificate."})]}),i==="future"&&f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:a,onChange:R=>o(R.target.value),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Disponibile a partire dal:"})]}),i==="promo"&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-gray-500",children:"Tipo Sconto"}),f.jsxs("select",{value:c,onChange:R=>u(R.target.value),className:"md-input",children:[f.jsx("option",{value:"percent",children:"Percentuale (%)"}),f.jsx("option",{value:"fixed",children:"Importo Fisso ()"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"number",value:d,onChange:R=>p(Number(R.target.value)),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Valore Sconto"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:a,onChange:R=>o(R.target.value),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Valido dal:"})]}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("label",{className:"text-xs font-bold text-indigo-600 uppercase mb-2 block",children:"A) Target Sedi (Recinti)"}),f.jsxs("div",{className:"flex flex-wrap gap-2 max-h-24 overflow-y-auto mb-4",children:[O.map(R=>f.jsx("button",{onClick:()=>A(R.id),className:`px-2 py-1 rounded border text-xs ${x.includes(R.id)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-300"}`,children:R.name},R.id)),O.length===0&&f.jsx("span",{className:"text-xs text-gray-400 italic",children:"Nessuna sede configurata."})]}),f.jsx("label",{className:"text-xs font-bold text-indigo-600 uppercase mb-2 block",children:"B) Target Clienti"}),k?f.jsx(as,{}):f.jsxs("div",{className:"border rounded-lg p-2",children:[f.jsx("input",{type:"text",placeholder:"Cerca cliente...",value:j,onChange:R=>F(R.target.value),className:"w-full text-xs border-b pb-1 mb-2 outline-none"}),f.jsxs("div",{className:"max-h-32 overflow-y-auto space-y-1",children:[B.map(R=>{const P=R.clientType===ur.Parent?`${R.firstName} ${R.lastName}`:R.companyName;return f.jsxs("label",{className:"flex items-center gap-2 text-xs p-1 hover:bg-gray-50 cursor-pointer",children:[f.jsx("input",{type:"checkbox",checked:_.includes(R.id),onChange:()=>I(R.id),className:"rounded text-indigo-600"}),f.jsx("span",{className:"truncate",children:P})]},R.id)}),B.length===0&&f.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Nessun cliente trovato."})]}),f.jsxs("div",{className:"mt-2 text-[10px] text-gray-400 text-right",children:[_.length," selezionati (Vuoto = Tutti)"]})]})]})]})]})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50 flex-shrink-0",children:[f.jsx("button",{onClick:r,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{onClick:z,className:"md-btn md-btn-raised md-btn-primary",children:"Applica Stato"})]})]})})},F0e=({sub:n,onSave:e,onCancel:t,suppliers:r})=>{const[i,s]=ne.useState((n==null?void 0:n.name)||""),[a,o]=ne.useState((n==null?void 0:n.price)||0),[c,u]=ne.useState((n==null?void 0:n.lessons)||0),[d,p]=ne.useState((n==null?void 0:n.durationInDays)||0),[x,v]=ne.useState((n==null?void 0:n.target)||"kid"),[_,b]=ne.useState((n==null?void 0:n.statusConfig)||{status:"active"}),[S,T]=ne.useState(!1),k=j=>{j.preventDefault();let F=i;const z=x==="kid"?"K - ":"A - ";!F.startsWith(z)&&!F.startsWith(x==="kid"?"K-":"A-")&&(F=z+F);const A={name:F,price:Number(a),lessons:Number(c),durationInDays:Number(d),target:x,statusConfig:_};n!=null&&n.id?e({...A,id:n.id}):e(A)},E=()=>{switch(_.status){case"active":return" Attivo";case"obsolete":return" Obsoleto";case"future":return" Da Attivare";case"promo":return" Promo";default:return"Attivo"}};return f.jsxs("form",{onSubmit:k,className:"flex flex-col h-full max-h-full overflow-hidden",children:[f.jsxs("div",{className:"p-6 pb-2 flex-shrink-0 border-b border-gray-100 flex justify-between items-center",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n?"Modifica Abbonamento":"Nuovo Abbonamento"}),f.jsxs("button",{type:"button",onClick:()=>T(!0),className:"flex items-center gap-2 px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded-full text-xs font-bold text-gray-700 transition-colors border border-gray-300",children:[f.jsx("span",{children:E()}),f.jsx(mo,{})," "]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-6 space-y-4",children:[f.jsxs("div",{className:"flex gap-4 mb-4",children:[f.jsxs("label",{className:`flex-1 p-3 border rounded-lg cursor-pointer text-center transition-colors ${x==="kid"?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-white text-gray-600"}`,children:[f.jsx("input",{type:"radio",name:"target",value:"kid",checked:x==="kid",onChange:()=>v("kid"),className:"hidden"})," Bambini (K)"]}),f.jsxs("label",{className:`flex-1 p-3 border rounded-lg cursor-pointer text-center transition-colors ${x==="adult"?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-white text-gray-600"}`,children:[f.jsx("input",{type:"radio",name:"target",value:"adult",checked:x==="adult",onChange:()=>v("adult"),className:"hidden"})," Adulti (A)"]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"subName",type:"text",value:i,onChange:j=>s(j.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"subName",className:"md-input-label",children:"Nome Abbonamento"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"subPrice",type:"number",value:a,onChange:j=>o(Number(j.target.value)),required:!0,min:"0",className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"subPrice",className:"md-input-label",children:"Prezzo ()"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"subLessons",type:"number",value:c,onChange:j=>u(Number(j.target.value)),required:!0,min:"1",className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"subLessons",className:"md-input-label",children:"N. Lezioni"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"subDuration",type:"number",value:d,onChange:j=>p(Number(j.target.value)),required:!0,min:"1",className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"subDuration",className:"md-input-label",children:"Durata (giorni)"})]}),(_.status==="promo"||_.status==="future")&&f.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded text-xs text-yellow-800",children:[f.jsx("strong",{children:"Nota:"})," Questo abbonamento ha regole speciali di validit (",_.status,").",_.discountValue?` Sconto attivo: ${_.discountValue}${_.discountType==="percent"?"%":""}`:""]})]}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",style:{borderColor:"var(--md-divider)"},children:[f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-green md-btn-sm",children:"Salva"})]}),S&&f.jsx(M0e,{currentConfig:_,suppliers:r,onSave:b,onClose:()=>T(!1)})]})},B0e=({template:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState(n.subject),[s,a]=ne.useState(n.body),[o,c]=ne.useState(n.signature),u=p=>{p.preventDefault(),e({...n,subject:r,body:s,signature:o})},d=n.id==="payment"?["{{fornitore}}","{{descrizione}}"]:["{{cliente}}","{{bambino}}","{{data}}"];return f.jsxs("form",{onSubmit:u,className:"flex flex-col h-full max-h-full overflow-hidden",children:[" ",f.jsxs("div",{className:"p-6 pb-2 flex-shrink-0 border-b border-gray-100",children:[" ",f.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:["Modifica Template: ",n.label]})," "]})," ",f.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-6 space-y-4",children:[" ",f.jsxs("div",{className:"bg-indigo-50 p-3 rounded text-xs text-indigo-800",children:[" ",f.jsx("strong",{children:"Variabili disponibili:"})," ",d.join(", ")," "]})," ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsx("input",{type:"text",value:r,onChange:p=>i(p.target.value),required:!0,className:"md-input",placeholder:" "})," ",f.jsx("label",{className:"md-input-label",children:"Oggetto / Titolo"})," "]})," ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsx("textarea",{rows:6,value:s,onChange:p=>a(p.target.value),required:!0,className:"w-full p-2 border rounded text-sm bg-transparent focus:border-indigo-500",style:{borderColor:"var(--md-divider)"},placeholder:"Messaggio..."})," ",f.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"Corpo del messaggio"})," "]})," ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsx("textarea",{rows:2,value:o,onChange:p=>c(p.target.value),className:"w-full p-2 border rounded text-sm bg-transparent focus:border-indigo-500",style:{borderColor:"var(--md-divider)"},placeholder:"Firma..."})," ",f.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"Firma"})," "]})," "]})," ",f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",style:{borderColor:"var(--md-divider)"},children:[" ",f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"})," ",f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-green md-btn-sm",children:"Salva Template"})," "]})," "]})},V0e=({check:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState((n==null?void 0:n.category)||MS.Payments),[s,a]=ne.useState((n==null?void 0:n.subCategory)||""),[o,c]=ne.useState((n==null?void 0:n.daysOfWeek)||[]),[u,d]=ne.useState((n==null?void 0:n.startTime)||"09:00"),[p,x]=ne.useState((n==null?void 0:n.pushEnabled)||!1),[v,_]=ne.useState((n==null?void 0:n.note)||""),b=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],S=k=>{c(E=>E.includes(k)?E.filter(j=>j!==k):[...E,k])},T=k=>{k.preventDefault();const E={category:r,subCategory:s,daysOfWeek:o.sort(),startTime:u,endTime:u,pushEnabled:p,note:v};n!=null&&n.id?e({...E,id:n.id}):e(E)};return f.jsxs("form",{onSubmit:T,className:"flex flex-col h-full overflow-hidden",children:[" ",f.jsxs("div",{className:"p-6 pb-2 border-b",children:[" ",f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:n?"Modifica Controllo":"Nuovo Controllo Periodico"})," "]})," ",f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[" ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsxs("select",{value:r,onChange:k=>i(k.target.value),className:"md-input",children:[" ",Object.values(MS).map(k=>f.jsx("option",{value:k,children:k},k))," "]})," ",f.jsx("label",{className:"md-input-label",children:"Categoria"})," "]})," ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsx("input",{type:"text",value:s,onChange:k=>a(k.target.value),className:"md-input",placeholder:" "})," ",f.jsx("label",{className:"md-input-label",children:"Dettaglio (es. Commercialista)"})," "]})," ",f.jsxs("div",{children:[" ",f.jsx("label",{className:"block text-xs text-gray-500 mb-2",children:"Giorni della Settimana"})," ",f.jsxs("div",{className:"flex flex-wrap gap-2",children:[" ",b.map((k,E)=>f.jsxs("button",{type:"button",onClick:()=>S(E),className:`px-3 py-1 rounded text-xs font-bold border transition-colors ${o.includes(E)?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"}`,children:[" ",k," "]},E))," "]})," "]})," ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsx("input",{type:"time",value:u,onChange:k=>d(k.target.value),className:"md-input"})," ",f.jsx("label",{className:"md-input-label !top-0",children:"Orario Notifica"})," "]})," ",f.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[" ",f.jsx("input",{type:"checkbox",checked:p,onChange:k=>x(k.target.checked),className:"h-4 w-4 text-indigo-600"})," ",f.jsx("label",{className:"text-sm text-gray-700",children:"Abilita Notifica Push"})," "]})," ",f.jsxs("div",{className:"md-input-group",children:[" ",f.jsx("textarea",{value:v,onChange:k=>_(k.target.value),className:"md-input",rows:2,placeholder:" "})," ",f.jsx("label",{className:"md-input-label",children:"Nota / Messaggio"})," "]})," "]})," ",f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50",children:[" ",f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"})," ",f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-primary md-btn-sm",children:"Salva"})," "]})," "]})},z0e=()=>{const[n,e]=ne.useState(null),[t,r]=ne.useState([]),[i,s]=ne.useState([]),[a,o]=ne.useState([]),[c,u]=ne.useState([]),[d,p]=ne.useState({}),[x,v]=ne.useState(!0),[_,b]=ne.useState(!1),[S,T]=ne.useState(null),[k,E]=ne.useState(!1),[j,F]=ne.useState(null),[z,A]=ne.useState(null),[I,O]=ne.useState(!1),[B,R]=ne.useState(null),[P,V]=ne.useState(!1),[Y,ie]=ne.useState(null),[q,Q]=ne.useState($f.primary),[se,J]=ne.useState($f.bgLight),[me,re]=ne.useState(Notification.permission),[M,W]=ne.useState([]),K=Oe=>W(Dt=>[...Dt,`${new Date().toLocaleTimeString()} - ${Oe}`]),G=ne.useCallback(async()=>{try{v(!0);const[Oe,Dt,Rt,Wt,Jt,yn]=await Promise.all([Up(),AL(),xY(),kL(),Jl(),cY()]);e(Oe),r(Dt),s(Rt),o(Wt),u(Jt),p(yn);const ln=h7();Q(ln.primary),J(ln.bg)}catch(Oe){T("Impossibile caricare le impostazioni."),console.error(Oe)}finally{v(!1)}},[]);ne.useEffect(()=>{G()},[G]);const te=async()=>{if(n)try{b(!0),await iY(n),window.dispatchEvent(new Event("EP_DataUpdated")),alert("Dati salvati con successo!")}catch(Oe){console.error(Oe),alert("Errore durante il salvataggio.")}finally{b(!1)}},he=(Oe,Dt)=>{e(Rt=>Rt?{...Rt,[Oe]:Dt}:null)},ye=Oe=>{var Rt;const Dt=(Rt=Oe.target.files)==null?void 0:Rt[0];if(Dt){const Wt=new FileReader;Wt.onloadend=()=>{he("logoBase64",Wt.result)},Wt.readAsDataURL(Dt)}},be=(Oe=null)=>{F(Oe),E(!0)},Ce=async Oe=>{"id"in Oe?await oY(Oe.id,Oe):await aY(Oe),E(!1),F(null),G()},ke=Oe=>{A(Oe)},oe=async()=>{z&&(await lY(z),G(),A(null))},qe=Oe=>{R(Oe),O(!0)},at=async Oe=>{await vY(Oe),O(!1),R(null),G()},Fe=async Oe=>{"id"in Oe?await dY(Oe.id,Oe):await fY(Oe),V(!1),ie(null),G(),window.dispatchEvent(new Event("EP_DataUpdated"))},_e=async Oe=>{confirm("Eliminare questo controllo periodico?")&&(await mY(Oe),G(),window.dispatchEvent(new Event("EP_DataUpdated")))},Be=(Oe,Dt)=>{Q(Oe),J(Dt),u7(Oe,Dt)},lt=()=>{Be($f.primary,$f.bgLight)},Ke=async(Oe,Dt)=>{const Rt={...d,[Oe]:Dt};p(Rt),await uY(Rt)},We=async()=>{var Dt,Rt;W([]);const Oe=(Dt=ig.currentUser)==null?void 0:Dt.uid;if(Oe){K("Avvio procedura richiesta permessi...");const Wt=await c7(Oe);if(re(Wt.success?"granted":"denied"),Wt.success){K("TOKEN OTTENUTO! Token inviato al database."),K(`Token (parziale): ${(Rt=Wt.token)==null?void 0:Rt.substring(0,15)}...`);try{K("Tentativo invio notifica LOCALE di test..."),"serviceWorker"in navigator?(await(await navigator.serviceWorker.ready).showNotification("EP v1: Test",{body:"Se leggi questo, il browser permette le notifiche!",icon:n==null?void 0:n.logoBase64,tag:"test-notification"}),K("Notifica inviata tramite Service Worker (Mobile Friendly)!")):(new Notification("EP v1: Test",{body:"Se leggi questo, il browser permette le notifiche!",icon:n==null?void 0:n.logoBase64}),K("Notifica inviata tramite API Standard."))}catch(Jt){K("Errore invio notifica locale: "+Jt.message)}}else K("ERRORE: "+Wt.error)}else K("Errore: Utente non loggato.")},Et=["Dom","Lun","Mar","Mer","Gio","Ven","Sab"];return x?f.jsx("div",{className:"mt-8 flex justify-center items-center h-64",children:f.jsx(as,{})}):S?f.jsx("p",{className:"text-center text-red-500 py-8",children:S}):f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Impostazioni"}),f.jsx("p",{className:"mt-1",style:{color:"var(--md-text-secondary)"},children:"Configura i dati aziendali, i listini e il planner operativo."}),f.jsxs("div",{className:"mt-8 grid grid-cols-1 lg:grid-cols-2 gap-8 pb-10",children:[f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"md-card p-6",children:[f.jsx("h2",{className:"text-lg font-semibold border-b pb-3",style:{borderColor:"var(--md-divider)"},children:"Dati Aziendali & Logo"}),n&&f.jsxs("div",{className:"mt-4 space-y-4",children:[f.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[f.jsx("div",{className:"w-16 h-16 border rounded-lg overflow-hidden flex items-center justify-center bg-gray-50",children:n.logoBase64?f.jsx("img",{src:n.logoBase64,alt:"Logo",className:"w-full h-full object-contain"}):f.jsx("span",{className:"text-xs text-gray-400",children:"No Logo"})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo Applicazione"}),f.jsxs("label",{className:"cursor-pointer inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:[f.jsx(d_,{})," ",f.jsx("span",{className:"ml-2",children:"Carica Immagine"})," ",f.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:ye})]})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"infoDenom",type:"text",value:n.denomination||"",onChange:Oe=>he("denomination",Oe.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"infoDenom",className:"md-input-label",children:"Denominazione"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"infoName",type:"text",value:n.name||"",onChange:Oe=>he("name",Oe.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"infoName",className:"md-input-label",children:"Ragione Sociale"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"infoVat",type:"text",value:n.vatNumber||"",onChange:Oe=>he("vatNumber",Oe.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"infoVat",className:"md-input-label",children:"P.IVA / C.F."})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"infoAddress",type:"text",value:n.address||"",onChange:Oe=>he("address",Oe.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"infoAddress",className:"md-input-label",children:"Indirizzo Sede"})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"infoEmail",type:"email",value:n.email||"",onChange:Oe=>he("email",Oe.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"infoEmail",className:"md-input-label",children:"Email"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"infoPhone",type:"tel",value:n.phone||"",onChange:Oe=>he("phone",Oe.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"infoPhone",className:"md-input-label",children:"Telefono"})]})]}),f.jsxs("div",{className:"pt-4 border-t mt-4",children:[f.jsx("h3",{className:"text-sm font-bold text-gray-700 mb-3",children:"Parametri Veicolo Aziendale"}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"fuelCons",type:"number",step:"0.1",value:n.carFuelConsumption||16.5,onChange:Oe=>he("carFuelConsumption",parseFloat(Oe.target.value)),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"fuelCons",className:"md-input-label",children:"Consumo Medio (km/l)"})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsx("button",{onClick:te,disabled:_,className:"md-btn md-btn-raised md-btn-primary",children:_?"Salvataggio...":"Salva Modifiche"})})]})]}),f.jsxs("div",{className:"md-card p-6",children:[f.jsx("h2",{className:"text-lg font-semibold border-b pb-3 mb-4",style:{borderColor:"var(--md-divider)"},children:"Personalizzazione Tema"}),f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Colore Primario"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"color",value:q,onChange:Oe=>Be(Oe.target.value,se),className:"h-10 w-20 rounded border cursor-pointer"}),f.jsx("span",{className:"text-xs text-gray-500",children:q})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium mb-1",children:"Colore Sfondo"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("input",{type:"color",value:se,onChange:Oe=>Be(q,Oe.target.value),className:"h-10 w-20 rounded border cursor-pointer"}),f.jsx("span",{className:"text-xs text-gray-500",children:se})]})]}),f.jsx("button",{onClick:lt,className:"md-btn md-btn-flat md-btn-sm text-gray-500 mt-2 self-start",children:"Ripristina Default"})]})]})]}),f.jsxs("div",{className:"space-y-8",children:[f.jsxs("div",{className:"md-card p-6",children:[f.jsxs("div",{className:"flex justify-between items-center border-b pb-3",style:{borderColor:"var(--md-divider)"},children:[f.jsx("h2",{className:"text-lg font-semibold",children:"Abbonamenti"}),f.jsxs("button",{onClick:()=>be(),className:"md-btn md-btn-raised md-btn-green md-btn-sm",children:[f.jsx(po,{})," Nuovo"]})]}),f.jsx("div",{className:"mt-4 space-y-3",children:t.map(Oe=>f.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"font-medium flex items-center gap-2",children:[Oe.name,f.jsx("span",{className:`text-[10px] uppercase px-1.5 py-0.5 rounded font-bold ${Oe.target==="adult"?"bg-orange-100 text-orange-700":"bg-blue-100 text-blue-700"}`,children:Oe.target==="adult"?"Adulti":"Bambini"}),Oe.statusConfig&&Oe.statusConfig.status!=="active"&&f.jsx("span",{className:"text-[10px] bg-gray-200 text-gray-700 px-1 rounded uppercase font-bold",children:Oe.statusConfig.status})]}),f.jsxs("p",{className:"text-xs",style:{color:"var(--md-text-secondary)"},children:[Oe.lessons," lezioni - ",Oe.durationInDays," giorni"]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"font-bold text-sm",children:[Oe.price,""]}),f.jsxs("div",{className:"flex space-x-1",children:[f.jsx("button",{onClick:()=>be(Oe),className:"md-icon-btn edit",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>ke(Oe.id),className:"md-icon-btn delete",children:f.jsx($r,{})})]})]})]},Oe.id))})]}),f.jsxs("div",{className:"md-card p-6 border-l-4 border-orange-500",children:[f.jsx("h2",{className:"text-lg font-semibold border-b pb-3 mb-4",children:"Politica Recuperi"}),f.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Definisci se le lezioni perse possono essere recuperate per ciascuna sede (recinto)."}),f.jsxs("div",{className:"space-y-4 max-h-60 overflow-y-auto custom-scrollbar",children:[c.flatMap(Oe=>Oe.locations).length===0&&f.jsx("p",{className:"text-sm italic text-gray-400",children:"Nessuna sede configurata."}),c.flatMap(Oe=>Oe.locations).map(Oe=>{const Dt=d[Oe.id]||"allowed";return f.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-200",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:Oe.color}}),f.jsx("span",{className:"text-sm font-bold text-gray-700",children:Oe.name})]}),f.jsxs("div",{className:"flex bg-white rounded border border-gray-300 p-0.5",children:[f.jsx("button",{onClick:()=>Ke(Oe.id,"allowed"),className:`px-2 py-1 text-[10px] font-bold rounded ${Dt==="allowed"?"bg-green-100 text-green-700 shadow-sm":"text-gray-400 hover:bg-gray-50"}`,children:"Consenti"}),f.jsx("button",{onClick:()=>Ke(Oe.id,"forbidden"),className:`px-2 py-1 text-[10px] font-bold rounded ${Dt==="forbidden"?"bg-red-100 text-red-700 shadow-sm":"text-gray-400 hover:bg-gray-50"}`,children:"Vieta"})]})]},Oe.id)})]})]}),f.jsxs("div",{className:"md-card p-6 bg-white border-l-4 border-indigo-500",children:[f.jsxs("div",{className:"flex justify-between items-center border-b pb-3 mb-3",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Planner & Controlli"}),f.jsx("p",{className:"text-xs text-gray-500",children:"Notifiche operative ricorrenti"})]}),f.jsxs("button",{onClick:()=>{ie(null),V(!0)},className:"md-btn md-btn-sm md-btn-primary",children:[f.jsx(po,{})," Nuovo"]})]}),f.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto mb-4",children:a.map(Oe=>f.jsxs("div",{className:`p-3 rounded border flex justify-between items-start ${Oe.pushEnabled?"bg-indigo-50 border-indigo-200":"bg-gray-50 border-gray-200 opacity-70"}`,children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:Oe.category}),Oe.pushEnabled&&f.jsx("span",{className:"text-[9px] bg-green-100 text-green-800 px-1 rounded",children:"PUSH"})]}),f.jsx("p",{className:"text-sm font-medium text-gray-800",children:Oe.subCategory||"Generico"}),f.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[f.jsx(tb,{})," ",Oe.startTime,"  ",Oe.daysOfWeek.map(Dt=>Et[Dt].substring(0,3)).join(", ")]})]}),f.jsxs("div",{className:"flex gap-1",children:[f.jsx("button",{onClick:()=>{ie(Oe),V(!0)},className:"md-icon-btn edit p-1",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>_e(Oe.id),className:"md-icon-btn delete p-1",children:f.jsx($r,{})})]})]},Oe.id))}),f.jsxs("div",{className:"p-3 bg-slate-50 rounded border border-slate-200",children:[f.jsxs("h3",{className:"text-[10px] font-bold text-slate-500 uppercase mb-2 flex items-center gap-1",children:[f.jsx(ML,{})," Diagnostica Notifiche Push"]}),f.jsxs("div",{className:"flex justify-between items-center mb-2",children:[f.jsxs("div",{children:[f.jsxs("p",{className:"text-sm text-gray-800 font-medium",children:["Target: ",f.jsx("span",{className:"font-mono text-indigo-700",children:"Admin"})]}),f.jsxs("p",{className:"text-[10px] text-gray-500 mt-0.5",children:["Stato Browser: ",me]})]}),f.jsx("div",{className:"flex flex-col items-end",children:f.jsx("button",{onClick:We,className:"text-[10px] bg-white border border-gray-300 px-2 py-1 rounded hover:bg-gray-50 shadow-sm",children:"Rinizializza / Test"})})]}),M.length>0&&f.jsx("div",{className:"mt-2 bg-black text-green-400 p-2 rounded text-[10px] font-mono h-24 overflow-y-auto",children:M.map((Oe,Dt)=>f.jsx("div",{children:Oe},Dt))}),M.length===0&&f.jsx("p",{className:"text-[10px] text-gray-400 italic",children:'Premi "Rinizializza / Test" per verificare i log di errore.'})]})]}),f.jsxs("div",{className:"md-card p-6",children:[f.jsx("h2",{className:"text-lg font-semibold border-b pb-3",style:{borderColor:"var(--md-divider)"},children:"Template Comunicazioni"}),f.jsx("div",{className:"mt-4 space-y-3",children:i.map(Oe=>f.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded border border-gray-100",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-sm",children:Oe.label}),f.jsx("p",{className:"text-xs text-gray-500 truncate max-w-[200px]",children:Oe.subject})]}),f.jsx("button",{onClick:()=>qe(Oe),className:"md-icon-btn edit",children:f.jsx(mo,{})})]},Oe.id))})]})]})]}),k&&f.jsx(mi,{onClose:()=>E(!1),children:f.jsx(F0e,{sub:j,onSave:Ce,onCancel:()=>E(!1),suppliers:c})}),I&&B&&f.jsx(mi,{onClose:()=>O(!1),children:f.jsx(B0e,{template:B,onSave:at,onCancel:()=>O(!1)})}),P&&f.jsx(mi,{onClose:()=>V(!1),children:f.jsx(V0e,{check:Y,onSave:Fe,onCancel:()=>V(!1)})}),f.jsx(Ho,{isOpen:!!z,onClose:()=>A(null),onConfirm:oe,title:"Elimina Abbonamento",message:"Sei sicuro?",isDangerous:!0})]})},U0e=({user:n})=>f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Il mio Profilo"}),f.jsx("p",{className:"mt-1",style:{color:"var(--md-text-secondary)"},children:"Gestisci le tue informazioni personali."}),f.jsx("div",{className:"mt-8 max-w-2xl",children:f.jsxs("div",{className:"md-card p-6",children:[f.jsx("h2",{className:"text-lg font-semibold border-b pb-3",style:{borderColor:"var(--md-divider)"},children:"Informazioni Utente"}),f.jsx("div",{className:"mt-6",children:f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm",style:{color:"var(--md-text-secondary)"},children:"Email"}),f.jsx("p",{className:"font-medium break-all",children:n.email}),f.jsx("p",{className:"text-sm mt-4",style:{color:"var(--md-text-secondary)"},children:"Ruolo"}),f.jsx("p",{className:"font-medium",children:"Amministratore"})]})})]})})]}),H0e=()=>{const[n,e]=ne.useState("labeasypeasy@gmail.com"),[t,r]=ne.useState(""),[i,s]=ne.useState(null),[a,o]=ne.useState(!1),c=async u=>{u.preventDefault(),s(null),o(!0);try{await yz(ig,n,t)}catch(d){s("Credenziali non valide. Riprova."),console.error(d)}finally{o(!1)}};return f.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"var(--md-bg-light)"},children:f.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 md-card border-t-4",style:{borderColor:"var(--md-primary)"},children:[f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"flex justify-center items-center gap-3 mb-4",children:f.jsx("h1",{className:"text-3xl font-bold tracking-wider",style:{color:"var(--md-text-primary)"},children:"EP v1"})}),f.jsx("p",{className:"mt-2",style:{color:"var(--md-text-secondary)"},children:"Accedi al tuo gestionale"})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:c,children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:u=>e(u.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"email-address",className:"md-input-label",children:"Indirizzo email"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:u=>r(u.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{htmlFor:"password",className:"md-input-label",children:"Password"})]})]}),i&&f.jsx("p",{className:"text-sm text-red-600 text-center",children:i}),f.jsx("div",{className:"pt-4",children:f.jsx("button",{type:"submit",disabled:a,className:"w-full md-btn md-btn-raised md-btn-primary",children:a?f.jsx(as,{}):"Accedi"})})]})]})})},q0e=()=>f.jsx("div",{className:"flex items-center justify-center h-screen w-screen bg-slate-100",children:f.jsx("div",{className:"w-12 h-12 border-4 border-slate-200 border-t-indigo-600 rounded-full animate-spin",role:"status","aria-label":"loading",children:f.jsx("span",{className:"sr-only",children:"Caricamento..."})})}),W0e=()=>{const[n,e]=ne.useState(!0),[t,r]=ne.useState([]),[i,s]=ne.useState(new Date),[a,o]=ne.useState(null),c=ne.useCallback(async()=>{try{e(!0);const[v,_,b]=await Promise.all([_l(),BL(),Jl()]),S=new Map,T=new Map;b.forEach(k=>{k.locations.forEach(E=>{var F;const j=new Set(((F=E.availability)==null?void 0:F.map(z=>z.dayOfWeek))||[]);E.name&&T.set(E.name.trim(),j)})}),v.forEach(k=>{k.appointments&&k.appointments.length>0&&k.appointments.forEach(E=>{const F=new Date(E.date).getDay(),z=E.date.split("T")[0],A=(E.locationName||k.locationName||"N/D").trim(),I=E.locationColor||k.locationColor||"#ccc",O=T.get(A);if(O&&!O.has(F))return;const B=`${z}_${E.startTime}_${A}`;S.has(B)||S.set(B,{id:B,date:E.date,startTime:E.startTime,endTime:E.endTime,locationName:A,locationColor:I,count:0});const R=S.get(B);R&&R.count++})}),_.forEach(k=>{const j=`${k.date.split("T")[0]}_${k.startTime}_${k.locationName}_MANUAL`;S.set(j,{id:k.id,date:k.date,startTime:k.startTime,endTime:k.endTime,locationName:k.locationName,locationColor:k.locationColor||"#94a3b8",count:0,isManual:!0,title:"EXTRA"})}),r(Array.from(S.values())),o(null)}catch(v){console.error(v),o("Impossibile caricare il calendario.")}finally{e(!1)}},[]);ne.useEffect(()=>{c()},[c]);const u=v=>{if(!v)return"#000";const _=v.charAt(0)==="#"?v.substring(1,7):v,b=parseInt(_.substring(0,2),16),S=parseInt(_.substring(2,4),16),T=parseInt(_.substring(4,6),16);return b*.299+S*.587+T*.114>186?"#000":"#fff"},{monthGrid:d,daysOfWeek:p}=ne.useMemo(()=>{const v=i.getFullYear(),_=i.getMonth(),b=new Date(v,_,1).getDay(),S=new Date(v,_+1,0).getDate(),T=b===0?6:b-1,k=Array(T).fill(null);for(let E=1;E<=S;E++)k.push(new Date(v,_,E));return{monthGrid:k,daysOfWeek:["Lun","Mar","Mer","Gio","Ven","Sab","Dom"]}},[i]),x=v=>{s(_=>new Date(_.getFullYear(),_.getMonth()+v,1))};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center mb-4",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Calendario"}),f.jsx("div",{className:"flex gap-2",children:f.jsxs("button",{className:"md-btn md-btn-raised md-btn-green md-btn-sm opacity-50 cursor-not-allowed",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2",children:"Nuovo"})]})})]}),f.jsxs("div",{className:"mt-2 md-card p-2 md:p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("button",{onClick:()=>x(-1),className:"md-icon-btn h-10 w-10 bg-gray-100 rounded-full font-bold",children:"<"}),f.jsx("h2",{className:"text-lg md:text-xl font-bold capitalize text-center",children:i.toLocaleString("it-IT",{month:"long",year:"numeric"})}),f.jsx("button",{onClick:()=>x(1),className:"md-icon-btn h-10 w-10 bg-gray-100 rounded-full font-bold",children:">"})]}),n?f.jsx("div",{className:"flex justify-center items-center py-8",children:f.jsx(as,{})}):f.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[p.map(v=>f.jsx("div",{className:"text-center font-bold text-xs md:text-sm p-1 md:p-2",style:{color:"var(--md-text-secondary)"},children:v},v)),d.map((v,_)=>{const b=v?t.filter(S=>new Date(S.date).toDateString()===v.toDateString()).sort((S,T)=>S.startTime.localeCompare(T.startTime)):[];return f.jsxs("div",{className:`border min-h-[80px] md:min-h-[120px] p-1 overflow-hidden flex flex-col relative transition-colors ${v?"bg-white":"bg-gray-50"}`,style:{borderColor:"var(--md-divider)"},children:[v&&f.jsx("span",{className:`font-semibold text-xs mb-1 ${new Date().toDateString()===v.toDateString()?"bg-indigo-600 text-white rounded-full h-5 w-5 flex items-center justify-center":""}`,children:v.getDate()}),f.jsx("div",{className:"space-y-1 overflow-y-auto flex-1 custom-scrollbar",children:b.map(S=>{const T=u(S.locationColor),k=S.locationName.substring(0,3).toUpperCase();return f.jsxs("div",{className:"rounded p-1 text-[10px] md:text-xs font-bold shadow-sm leading-tight flex justify-between items-center",style:{backgroundColor:S.locationColor,color:T},children:[f.jsxs("span",{className:"truncate mr-1",children:[S.isManual?"EXTRA":k," ",S.startTime]}),!S.isManual&&f.jsx("span",{className:"bg-white/30 px-1 rounded text-[9px]",children:S.count})]},S.id)})})]},_)})]})]})]})},f7=ss(Ut,"communications"),G0e=n=>{const e=n.data();return{id:n.id,...e}},nR=async()=>{const n=ga(f7,Ou("date","desc"));return(await Jr(n)).docs.map(G0e)},$0e=async n=>(await Go(f7,n)).id,K0e=async(n,e)=>{const t=fn(Ut,"communications",n);await Zr(t,e)},rR=async n=>{const e=fn(Ut,"communications",n);await Wo(e)},d7=ss(Ut,"campaigns"),Y0e=n=>{const e=n.data();return{id:n.id,...e}},iR=async()=>{const n=ga(d7,Ou("nextRun","asc"));return(await Jr(n)).docs.map(Y0e)},X0e=async n=>(await Go(d7,n)).id,Q0e=async(n,e)=>{const t=fn(Ut,"campaigns",n);await Zr(t,e)},sR=async n=>{const e=fn(Ut,"campaigns",n);await Wo(e)},J0e=async n=>{const e=`${Date.now()}_${n.name.replace(/[^a-zA-Z0-9.]/g,"_")}`,t=Qj(wL,`campaigns/${e}`),r=await Yj(t,n);return await Xj(r.ref)},Z0e=async n=>{const e=`${Date.now()}_${n.name.replace(/[^a-zA-Z0-9.]/g,"_")}`,t=Qj(wL,`activities/${e}`),r=await Yj(t,n);return await Xj(r.ref)},aR=()=>f.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[" ",f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})," "]}),Ay=n=>n.clientType===ur.Parent?`${n.firstName||""} ${n.lastName||""}`:n.companyName||"",eme=({onClose:n,onSent:e,clients:t,suppliers:r})=>{const[i,s]=ne.useState("clients"),[a,o]=ne.useState([]),[c,u]=ne.useState(""),[d,p]=ne.useState(""),[x,v]=ne.useState(""),[_,b]=ne.useState("email"),[S,T]=ne.useState(""),k=i==="clients"?t.filter(F=>Ay(F).toLowerCase().includes(S.toLowerCase())):r.filter(F=>(F.companyName||"").toLowerCase().includes(S.toLowerCase())),E=F=>{o(z=>z.includes(F)?z.filter(A=>A!==F):[...z,F])},j=async()=>{const F=[],z=[];if(i==="custom"?(F.push(c),_==="whatsapp"&&z.push(c)):a.forEach(A=>{let I="",O="";if(i==="clients"){const B=t.find(R=>R.id===A);B&&(I=Ay(B),O=B.phone)}else{const B=r.find(R=>R.id===A);B&&(I=B.companyName,O=B.phone)}I&&F.push(I),O&&z.push(O)}),F.length===0)return alert("Seleziona almeno un destinatario.");if(_==="whatsapp"){if(z.length===0)return alert("Nessun numero di telefono trovato per i destinatari selezionati.");const A=encodeURIComponent(`*${d}*

${x}`);z.forEach(I=>{if(!I||I.trim().length===0){console.error("[CRM] Numero di telefono vuoto - impossibile inviare WhatsApp");return}let O=I.replace(/[^0-9]/g,"");if(O.length<7||O.length>15){console.error(`[CRM] Numero di telefono invalido (${O.length} cifre): ${I}`);return}if(O.startsWith("00")&&(O=O.substring(2)),O.length===10&&(O="39"+O),!O.match(/^[1-9][0-9]{6,14}$/)){console.error(`[CRM] Formato numero WhatsApp invalido: ${O}`);return}O&&window.open(`https://wa.me/${O}?text=${A}`,"_blank")})}else{const I=`mailto:?bcc=${i==="custom"?c:""}&subject=${encodeURIComponent(d)}&body=${encodeURIComponent(x)}`;window.location.href=I}await $0e({date:new Date().toISOString(),channel:_,subject:d,message:x,recipients:F,recipientCount:F.length,type:"manual"}),e()};return f.jsxs("div",{className:"flex flex-col h-full max-h-[90vh] overflow-hidden",children:[f.jsx("div",{className:"p-6 border-b bg-gray-50 flex-shrink-0",children:f.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Nuova Comunicazione"})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700",children:"Destinatari"}),f.jsxs("div",{className:"flex gap-2 mb-2",children:[f.jsx("button",{onClick:()=>{s("clients"),o([])},className:`px-3 py-1 rounded text-xs ${i==="clients"?"bg-indigo-600 text-white":"bg-gray-200"}`,children:"Clienti"}),f.jsx("button",{onClick:()=>{s("suppliers"),o([])},className:`px-3 py-1 rounded text-xs ${i==="suppliers"?"bg-indigo-600 text-white":"bg-gray-200"}`,children:"Fornitori"}),f.jsx("button",{onClick:()=>{s("custom"),o([])},className:`px-3 py-1 rounded text-xs ${i==="custom"?"bg-indigo-600 text-white":"bg-gray-200"}`,children:"Manuale"})]}),i==="custom"?f.jsx("input",{type:"text",value:c,onChange:F=>u(F.target.value),className:"md-input",placeholder:_==="whatsapp"?"Numero di telefono (es. 3331234567)":"Email o Telefono..."}):f.jsxs("div",{className:"border rounded-md h-40 overflow-hidden flex flex-col",children:[f.jsx("div",{className:"p-2 border-b bg-gray-50",children:f.jsx("input",{type:"text",value:S,onChange:F=>T(F.target.value),className:"w-full text-xs p-1 border rounded",placeholder:"Cerca..."})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:k.map(F=>f.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[f.jsx("input",{type:"checkbox",checked:a.includes(F.id),onChange:()=>E(F.id)}),f.jsx("span",{children:i==="clients"?Ay(F):F.companyName})]},F.id))})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Canale"}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"radio",checked:_==="email",onChange:()=>b("email"),className:"mr-1"})," Email"]}),f.jsxs("label",{className:"flex items-center",children:[f.jsx("input",{type:"radio",checked:_==="whatsapp",onChange:()=>b("whatsapp"),className:"mr-1"})," WhatsApp"]})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:d,onChange:F=>p(F.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Oggetto / Titolo"})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:5,value:x,onChange:F=>v(F.target.value),className:"md-input",placeholder:"Scrivi il messaggio..."})})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50 flex-shrink-0",children:[f.jsx("button",{onClick:n,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{onClick:j,className:"md-btn md-btn-raised md-btn-primary",children:"Invia Messaggio"})]})]})},tme=({log:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState(n.subject),[s,a]=ne.useState(n.message),[o,c]=ne.useState(!1),u=async()=>{c(!0);try{await K0e(n.id,{subject:r,message:s}),e()}catch{alert("Errore durante l'aggiornamento.")}finally{c(!1)}};return f.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[f.jsx("div",{className:"p-6 border-b flex-shrink-0",children:f.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"Modifica Log Archivio"})}),f.jsxs("div",{className:"flex-1 p-6 space-y-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:r,onChange:d=>i(d.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Oggetto / Titolo"})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:8,value:s,onChange:d=>a(d.target.value),className:"md-input",placeholder:"Messaggio..."})}),f.jsx("p",{className:"text-xs text-gray-500 italic",children:"Nota: La modifica aggiorna solo il record nel database, non invia nuovi messaggi."})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50 flex-shrink-0",children:[f.jsx("button",{onClick:t,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{onClick:u,disabled:o,className:"md-btn md-btn-raised md-btn-primary",children:o?"Salvataggio...":"Salva Modifiche"})]})]})},nme=({onClose:n,onSave:e,clients:t,campaign:r})=>{const[i,s]=ne.useState(1),[a,o]=ne.useState((r==null?void 0:r.name)||""),[c,u]=ne.useState((r==null?void 0:r.channel)||"email"),[d,p]=ne.useState((r==null?void 0:r.subject)||""),[x,v]=ne.useState((r==null?void 0:r.message)||""),[_,b]=ne.useState((r==null?void 0:r.mediaLinks)||""),[S,T]=ne.useState("all"),k=r!=null&&r.startDate?new Date(r.startDate).toISOString().split("T")[0]:"",[E,j]=ne.useState(k),F=async A=>{var I;if((I=A.target.files)!=null&&I[0])try{const O=await J0e(A.target.files[0]);b(O)}catch{alert("Errore upload")}},z=async()=>{const A=t.map(O=>({id:O.id,name:Ay(O),contact:O.email,type:"client"})),I={name:a,channel:c,subject:d,message:x,mediaLinks:_,recipients:A.slice(0,5),startDate:E||new Date().toISOString(),time:"09:00",frequency:"once",repeatCount:1,status:"active",sentCount:0,nextRun:E||new Date().toISOString()};r?await Q0e(r.id,I):await X0e(I),e()};return f.jsxs("div",{className:"flex flex-col h-full max-h-[90vh]",children:[f.jsxs("div",{className:"p-6 border-b bg-indigo-600 text-white flex-shrink-0",children:[f.jsx("h3",{className:"text-xl font-bold",children:r?"Modifica Campagna":"Creazione Campagna"}),f.jsxs("p",{className:"text-xs opacity-80",children:["Step ",i," di 3"]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[i===1&&f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:a,onChange:A=>o(A.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Nome Campagna"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Canale"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsx("button",{onClick:()=>u("email"),className:`p-4 border rounded-xl ${c==="email"?"bg-indigo-50 border-indigo-500 ring-1 ring-indigo-500":""}`,children:" Email"}),f.jsx("button",{onClick:()=>u("whatsapp"),className:`p-4 border rounded-xl ${c==="whatsapp"?"bg-green-50 border-green-500 ring-1 ring-green-500":""}`,children:" WhatsApp"})]})]})]}),i===2&&f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:d,onChange:A=>p(A.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Oggetto / Titolo"})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:6,value:x,onChange:A=>v(A.target.value),className:"md-input",placeholder:"Scrivi il contenuto..."})}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"Media (Opzionale)"}),f.jsxs("div",{className:"flex gap-2 items-center",children:[f.jsx("input",{type:"file",onChange:F,className:"text-xs"}),_&&f.jsx("span",{className:"text-green-600 text-xs",children:"Caricato!"})]})]})]}),i===3&&f.jsxs("div",{className:"space-y-4 animate-fade-in",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Target"}),f.jsxs("select",{value:S,onChange:A=>T(A.target.value),className:"md-input",children:[f.jsx("option",{value:"all",children:"Tutti i Clienti Attivi"}),f.jsx("option",{value:"expired",children:"Clienti Scaduti (Win-back)"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:E,onChange:A=>j(A.target.value),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Data Invio"})]}),f.jsx("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-200 text-xs text-yellow-800",children:"La campagna verr messa in coda e inviata automaticamente alla data stabilita."})]})]}),f.jsxs("div",{className:"p-4 border-t flex justify-between bg-gray-50 flex-shrink-0",children:[i>1?f.jsx("button",{onClick:()=>s(A=>A-1),className:"md-btn md-btn-flat",children:"Indietro"}):f.jsx("button",{onClick:n,className:"md-btn md-btn-flat",children:"Annulla"}),i<3?f.jsx("button",{onClick:()=>s(A=>A+1),className:"md-btn md-btn-raised md-btn-primary",children:"Avanti"}):f.jsx("button",{onClick:z,className:"md-btn md-btn-raised md-btn-green",children:"Pianifica"})]})]})},rme=()=>{const[n,e]=ne.useState(!0),[t,r]=ne.useState("overview"),[i,s]=ne.useState([]),[a,o]=ne.useState([]),[c,u]=ne.useState([]),[d,p]=ne.useState([]),[x,v]=ne.useState([]),[_,b]=ne.useState([]),[S,T]=ne.useState(!1),[k,E]=ne.useState(!1),[j,F]=ne.useState(!1),[z,A]=ne.useState(void 0),[I,O]=ne.useState(void 0),[B,R]=ne.useState(null),[P,V]=ne.useState(1),Y=10,ie=ne.useCallback(async()=>{e(!0);try{const[G,te,he,ye,be,Ce]=await Promise.all([_l(),Hp(),Oh(),Jl(),nR(),iR()]);v(he),b(ye),p(be),u(Ce);const ke=new Date,oe=[];G.forEach(at=>{if(at.status===Pr.Active){const _e=new Date(at.endDate).getTime()-ke.getTime(),Be=Math.ceil(_e/(1e3*60*60*24));let lt=null;Be>=0&&Be<=30?lt="expiry":at.lessonsRemaining<=2&&(lt="lessons"),lt&&oe.push({enrollment:at,client:he.find(Ke=>Ke.id===at.clientId),daysRemaining:Be,reason:lt})}}),s(oe);const qe=[];te.forEach(at=>{if(at.status===Lh.Pending&&at.category===_s.Rent){const Fe=ye.find(_e=>at.description.toLowerCase().includes((_e.companyName||"").toLowerCase()));qe.push({transaction:at,supplier:Fe,locationColor:"#ccc"})}}),o(qe)}catch(G){console.error(G)}finally{e(!1)}},[]);ne.useEffect(()=>{ie()},[ie]);const q=()=>{T(!1),ie(),alert("Messaggio inviato e archiviato!")},Q=()=>{E(!1),A(void 0),ie(),alert("Campagna salvata!")},se=()=>{O(void 0),ie()},J=G=>{A(G),E(!0)},me=G=>{O(G)},re=(G,te)=>{R({isOpen:!0,id:G,type:te})},M=async()=>{if(B){e(!0);try{B.type==="campaign"?await sR(B.id):await rR(B.id),await ie()}catch{alert("Errore durante l'eliminazione.")}finally{e(!1),R(null)}}},W=async()=>{F(!1),e(!0);try{if(t==="campaigns"){const G=await iR();for(const te of G)await sR(te.id)}else if(t==="archive"){const G=await nR();for(const te of G)await rR(te.id)}await ie(),alert("Eliminazione completata.")}catch{alert("Errore durante l'eliminazione.")}finally{e(!1)}},K=ne.useMemo(()=>{const G=(P-1)*Y;return d.slice(G,G+Y)},[d,P]);return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap gap-4 justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"CRM"}),f.jsx("p",{className:"mt-1 text-gray-500",children:"Gestione relazioni e comunicazioni."})]}),f.jsxs("div",{className:"flex gap-2",children:[t!=="overview"&&f.jsxs("button",{onClick:()=>F(!0),className:"md-btn md-btn-sm bg-red-50 text-red-700 border border-red-200 hover:bg-red-100 flex items-center text-xs font-bold mr-2",children:[f.jsx($r,{})," Elimina Tutto"]}),f.jsxs("button",{onClick:()=>T(!0),className:"md-btn md-btn-raised md-btn-green flex items-center",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2",children:"Nuova"})]}),f.jsxs("button",{onClick:()=>{A(void 0),E(!0)},className:"md-btn md-btn-flat border border-gray-300 bg-white flex items-center",children:[f.jsx(vx,{}),f.jsx("span",{className:"ml-2",children:"Campagna"})]})]})]}),f.jsx("div",{className:"mt-6 border-b mb-6 border-gray-200",children:f.jsxs("nav",{className:"-mb-px flex space-x-6 overflow-x-auto",children:[f.jsx("button",{onClick:()=>r("overview"),className:`shrink-0 py-3 px-1 border-b-2 font-medium text-sm ${t==="overview"?"border-indigo-500 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Panoramica"}),f.jsx("button",{onClick:()=>r("campaigns"),className:`shrink-0 py-3 px-1 border-b-2 font-medium text-sm ${t==="campaigns"?"border-indigo-500 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Campagne"}),f.jsx("button",{onClick:()=>r("archive"),className:`shrink-0 py-3 px-1 border-b-2 font-medium text-sm ${t==="archive"?"border-indigo-500 text-indigo-600":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Archivio"})]})}),n?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs(f.Fragment,{children:[t==="overview"&&f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-fade-in",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"text-xl font-bold text-indigo-800",children:["Rinnovi Iscrizioni (",i.length,")"]}),i.length===0?f.jsx("p",{className:"text-gray-400 italic",children:"Nessuna scadenza imminente."}):i.map((G,te)=>f.jsxs("div",{className:"md-card p-4 flex justify-between items-center border-l-4 border-l-indigo-500",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold",children:G.enrollment.childName}),f.jsx("div",{className:"text-xs text-gray-500",children:G.reason==="expiry"?`Scade il ${new Date(G.enrollment.endDate).toLocaleDateString()}`:`${G.enrollment.lessonsRemaining} lezioni rimaste`})]}),f.jsxs("button",{onClick:()=>T(!0),className:"md-btn md-btn-flat text-indigo-600",children:[f.jsx(aR,{})," Contatta"]})]},te))]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("h2",{className:"text-xl font-bold text-amber-800",children:["Pagamenti Noli (",a.length,")"]}),a.length===0?f.jsx("p",{className:"text-gray-400 italic",children:"Nessun pagamento in sospeso."}):a.map((G,te)=>f.jsxs("div",{className:"md-card p-4 flex justify-between items-center border-l-4 border-l-amber-500",children:[f.jsxs("div",{children:[f.jsx("div",{className:"font-bold",children:G.transaction.description}),f.jsxs("div",{className:"text-xs text-red-600 font-bold",children:[G.transaction.amount," da saldare"]})]}),f.jsxs("button",{onClick:()=>T(!0),className:"md-btn md-btn-flat text-amber-600",children:[f.jsx(aR,{})," Contatta"]})]},te))]})]}),t==="campaigns"&&f.jsxs("div",{className:"animate-slide-up space-y-4",children:[c.map(G=>f.jsxs("div",{className:"md-card p-4 flex justify-between items-center group",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-gray-800",children:G.name}),f.jsxs("p",{className:"text-xs text-gray-500",children:[G.status,"  Next: ",new Date(G.nextRun).toLocaleDateString()]})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${G.channel==="email"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:G.channel.toUpperCase()}),f.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>J(G),className:"md-icon-btn edit",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>re(G.id,"campaign"),className:"md-icon-btn delete",children:f.jsx($r,{})})]})]})]},G.id)),c.length===0&&f.jsx("p",{className:"text-center text-gray-500 py-10",children:"Nessuna campagna attiva."})]}),t==="archive"&&f.jsxs("div",{className:"animate-slide-up",children:[f.jsxs("div",{className:"space-y-3",children:[K.map(G=>f.jsxs("div",{className:"bg-white border rounded p-4 shadow-sm group",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:"text-xs text-gray-400",children:new Date(G.date).toLocaleString()}),f.jsx("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded font-bold uppercase",children:G.channel})]}),f.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[f.jsx("button",{onClick:()=>me(G),className:"md-icon-btn edit p-1",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>re(G.id,"log"),className:"md-icon-btn delete p-1",children:f.jsx($r,{})})]})]}),f.jsx("h4",{className:"font-bold text-sm text-gray-800",children:G.subject}),f.jsx("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:G.message}),f.jsxs("div",{className:"mt-2 text-xs text-indigo-600 font-medium",children:["Inviato a: ",G.recipients.length>3?`${G.recipients.length} destinatari`:G.recipients.join(", ")]})]},G.id)),d.length===0&&f.jsx("p",{className:"text-center text-gray-500 py-10",children:"Nessuna comunicazione in archivio."})]}),f.jsx(tm,{currentPage:P,totalItems:d.length,itemsPerPage:Y,onPageChange:V})]})]}),S&&f.jsx(mi,{onClose:()=>T(!1),size:"lg",children:f.jsx(eme,{onClose:()=>T(!1),onSent:q,clients:x,suppliers:_})}),k&&f.jsx(mi,{onClose:()=>E(!1),size:"lg",children:f.jsx(nme,{campaign:z,onClose:()=>E(!1),onSave:Q,clients:x})}),I&&f.jsx(mi,{onClose:()=>O(void 0),size:"lg",children:f.jsx(tme,{log:I,onSave:se,onCancel:()=>O(void 0)})}),f.jsx(Ho,{isOpen:!!B,onClose:()=>R(null),onConfirm:M,title:(B==null?void 0:B.type)==="campaign"?"Elimina Campagna":"Elimina Log",message:"Sei sicuro di voler eliminare questo elemento? L'operazione  irreversibile.",isDangerous:!0}),f.jsx(Ho,{isOpen:j,onClose:()=>F(!1),onConfirm:W,title:`ELIMINA TUTTO (${t.toUpperCase()})`,message:" ATTENZIONE: Stai per eliminare TUTTI i record di questa sezione. Questa operazione  irreversibile. Confermi?",isDangerous:!0,confirmText:"S, Elimina TUTTO"})]})},ime=({parents:n,initialParent:e,existingEnrollment:t,onSave:r,onCancel:i})=>{const[s,a]=ne.useState((e==null?void 0:e.id)||(t==null?void 0:t.clientId)||""),[o,c]=ne.useState(t?[t.childId]:[]),[u,d]=ne.useState((t==null?void 0:t.isAdult)||!1),[p,x]=ne.useState((t==null?void 0:t.subscriptionTypeId)||""),[v,_]=ne.useState(t?t.startDate.split("T")[0]:new Date().toISOString().split("T")[0]),[b,S]=ne.useState(!1),[T,k]=ne.useState(""),[E,j]=ne.useState("surname_asc"),[F,z]=ne.useState([]),[A,I]=ne.useState(!0),O=n.find(Y=>Y.id===s),B=ne.useMemo(()=>F.filter(Y=>{if(Y.target)return u?Y.target==="adult":Y.target==="kid";const ie=Y.name.startsWith("A -")||Y.name.startsWith("A-");return u?ie:!ie}),[F,u]);ne.useEffect(()=>{(async()=>{I(!0);const ie=await AL();z(ie),I(!1)})()},[t]),ne.useEffect(()=>{!t&&B.length>0?x(B[0].id):t||x("")},[B,t,u]),ne.useEffect(()=>{!t&&O&&c([])},[s,t]);const R=Y=>{t||c(ie=>ie.includes(Y)?ie.filter(q=>q!==Y):[...ie,Y])},P=ne.useMemo(()=>{let Y=n.filter(ie=>{const q=T.toLowerCase(),Q=`${ie.firstName} ${ie.lastName}`.toLowerCase().includes(q),se=ie.children.some(J=>J.name.toLowerCase().includes(q));return Q||se});return Y.sort((ie,q)=>{switch(E){case"surname_asc":return ie.lastName.localeCompare(q.lastName);case"surname_desc":return q.lastName.localeCompare(ie.lastName);case"name_asc":return ie.firstName.localeCompare(q.firstName);case"name_desc":return q.firstName.localeCompare(ie.firstName);default:return 0}}),Y},[n,T,E]),V=Y=>{if(Y.preventDefault(),!s){alert("Seleziona un genitore/cliente.");return}if(!u&&o.length===0){alert("Seleziona almeno un figlio.");return}const ie=F.find(se=>se.id===p);if(!ie)return;const q=[];(u?[{id:s,name:`${O==null?void 0:O.firstName} ${O==null?void 0:O.lastName}`}]:o.map(se=>{const J=O==null?void 0:O.children.find(me=>me.id===se);return J?{id:J.id,name:J.name}:null}).filter(Boolean)).forEach(se=>{if(!se)return;const J=new Date(v),me=new Date(J);me.setDate(me.getDate()+(ie.durationInDays||0));const re=me.toISOString(),M={clientId:s,childId:se.id,childName:se.name,isAdult:u,subscriptionTypeId:p,subscriptionName:ie.name,price:ie.price,supplierId:"unassigned",supplierName:"",locationId:"unassigned",locationName:"Sede Non Definita",locationColor:"#e5e7eb",appointments:[],lessonsTotal:ie.lessons,lessonsRemaining:ie.lessons,startDate:J.toISOString(),endDate:re,status:t?t.status:Pr.Pending};t&&(M.id=t.id,t.locationId!=="unassigned"&&(M.supplierId=t.supplierId,M.supplierName=t.supplierName,M.locationId=t.locationId,M.locationName=t.locationName,M.locationColor=t.locationColor,M.appointments=t.appointments)),q.push(M)}),r(q)};return A?f.jsx("div",{className:"flex justify-center items-center h-40",children:f.jsx(as,{})}):f.jsxs("form",{onSubmit:V,className:"flex flex-col h-full max-h-full w-full overflow-hidden",children:[f.jsxs("div",{className:"p-6 pb-2 flex-shrink-0 border-b border-gray-100",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:t?"Modifica Iscrizione":"Nuova Iscrizione"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Crea il cartellino. Assegnerai la sede trascinandolo nel calendario."})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto min-h-0 p-6 space-y-5",children:[f.jsxs("div",{className:"space-y-2",children:[!t&&f.jsxs("div",{className:"bg-gray-50 p-2 rounded border border-gray-200 flex gap-2 items-center",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-2 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",className:"w-full pl-8 pr-2 py-1 text-sm border rounded focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Cerca genitore o figlio...",value:T,onChange:Y=>k(Y.target.value)})]}),f.jsxs("select",{value:E,onChange:Y=>j(Y.target.value),className:"text-xs border-gray-300 rounded py-1 pl-2 pr-6 bg-white",children:[f.jsx("option",{value:"surname_asc",children:"Cognome (A-Z)"}),f.jsx("option",{value:"surname_desc",children:"Cognome (Z-A)"}),f.jsx("option",{value:"name_asc",children:"Nome (A-Z)"}),f.jsx("option",{value:"name_desc",children:"Nome (Z-A)"})]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsxs("select",{id:"parent-select",value:s,onChange:Y=>a(Y.target.value),required:!0,disabled:!!t,className:`md-input font-medium ${t?"bg-gray-100 cursor-not-allowed":""}`,children:[f.jsx("option",{value:"",disabled:!0,children:"Seleziona Genitore..."}),P.map(Y=>f.jsxs("option",{value:Y.id,children:[Y.lastName," ",Y.firstName]},Y.id))]}),f.jsx("label",{htmlFor:"parent-select",className:"md-input-label !top-0 !text-xs !text-gray-500",children:"1. Cliente / Genitore"})]})]}),!t&&f.jsxs("div",{className:"flex gap-4 p-3 bg-gray-50 rounded border border-gray-200",children:[f.jsx("span",{className:"text-xs font-bold text-gray-700 self-center",children:"Chi si iscrive?"}),f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"radio",name:"enrollmentTarget",checked:!u,onChange:()=>d(!1),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),f.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Figlio/i"})]}),f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"radio",name:"enrollmentTarget",checked:u,onChange:()=>d(!0),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),f.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Genitore (Adulto)"})]})]}),!u&&f.jsxs("div",{className:`md-input-group relative transition-opacity duration-200 ${s?"":"opacity-50 pointer-events-none"}`,children:[f.jsx("label",{className:"block text-xs text-gray-500 absolute top-0 left-0",children:"2. Figli (Seleziona uno o pi)"}),f.jsxs("div",{className:"md-input cursor-pointer flex justify-between items-center mt-2",onClick:()=>!t&&S(!b),children:[f.jsx("span",{className:"truncate",children:o.length===0?(O==null?void 0:O.children.length)===0?"Nessun figlio registrato":"Seleziona figli...":O==null?void 0:O.children.filter(Y=>o.includes(Y.id)).map(Y=>Y.name).join(", ")}),!t&&f.jsx("svg",{className:`w-4 h-4 transition-transform ${b?"transform rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),(b||t)&&f.jsxs("div",{className:`${t?"block mt-2":"absolute z-20 w-full bg-white shadow-xl border border-gray-200 rounded-md mt-1 max-h-48 overflow-y-auto"}`,children:[O==null?void 0:O.children.map(Y=>f.jsxs("label",{className:`flex items-center px-4 py-2 hover:bg-gray-50 cursor-pointer ${t?"opacity-70 cursor-not-allowed":""}`,children:[f.jsx("input",{type:"checkbox",checked:o.includes(Y.id),onChange:()=>R(Y.id),disabled:!!t,className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mr-3"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-medium text-gray-700",children:Y.name}),f.jsx("span",{className:"text-[10px] text-gray-500",children:Y.age})]})]},Y.id)),(O==null?void 0:O.children.length)===0&&f.jsx("div",{className:"px-4 py-2 text-sm text-gray-500 italic",children:"Nessun figlio disponibile. Aggiungili nell'anagrafica clienti."})]}),b&&!t&&f.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>S(!1)})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{id:"startDate",type:"date",value:v,onChange:Y=>_(Y.target.value),required:!0,className:"md-input"}),f.jsx("label",{htmlFor:"startDate",className:"md-input-label !top-0 !text-xs !text-gray-500",children:"3. Data Inizio Validit"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsxs("select",{id:"sub-type",value:p,onChange:Y=>x(Y.target.value),required:!0,className:"md-input",children:[f.jsx("option",{value:"",disabled:!0,children:"Seleziona pacchetto..."}),B.map(Y=>f.jsxs("option",{value:Y.id,children:[Y.name," (",Y.lessons," lez. - ",Y.price,")"]},Y.id))]}),f.jsxs("label",{htmlFor:"sub-type",className:"md-input-label !top-0 !text-xs !text-gray-500",children:["4. Pacchetto (",u?"Adulti":"Bambini",")"]})]})]}),f.jsxs("div",{className:"bg-gray-50 p-4 rounded-md mt-4 border border-dashed border-gray-300 text-center",children:[f.jsx("p",{className:"text-sm text-gray-600 font-medium",children:'Cartellino "Da Assegnare"'}),f.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Il fornitore, la sede e gli orari verranno definiti quando sposterai il cartellino nel recinto desiderato."})]})]}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",style:{borderColor:"var(--md-divider)"},children:[f.jsx("button",{type:"button",onClick:i,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-green md-btn-sm",disabled:!s||!u&&o.length===0,children:t?"Salva Modifiche":`Crea Cartellino ${u?"(Adulto)":`(${o.length})`}`})]})]})},s1=["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],sme=({enrollment:n,maxRecoverable:e,suppliers:t,onClose:r,onConfirm:i})=>{const[s,a]=ne.useState(new Date().toISOString().split("T")[0]),[o,c]=ne.useState(1),u=n.locationId,[d,p]=ne.useState(u),[x,v]=ne.useState(null),[_,b]=ne.useState([]),S=ne.useMemo(()=>{for(const E of t){const j=E.locations.find(F=>F.id===d);if(j)return j}return null},[t,d]),T=ne.useMemo(()=>{const E=[];return t.forEach(j=>{j.locations.forEach(F=>{E.push({id:F.id,name:F.name})})}),E.sort((j,F)=>j.name.localeCompare(F.name))},[t]);ne.useEffect(()=>{const E=new Date(s).getDay();if(S&&S.availability){const j=S.availability.filter(F=>F.dayOfWeek===E);b(j.map(F=>({start:F.startTime,end:F.endTime,day:F.dayOfWeek}))),v(null)}else b([])},[s,S]);const k=()=>{if(x===null||!S)return;const E=_[x];i(s,E.start,E.end,o,S.name,S.color)};return f.jsx(mi,{onClose:r,size:"md",children:f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:"Recupero Lezioni"}),f.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Programma il recupero per ",f.jsx("strong",{children:n.childName}),"."]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Presso Sede (Recinto)"}),f.jsx("select",{value:d,onChange:E=>p(E.target.value),className:"md-input bg-white",children:T.map(E=>f.jsx("option",{value:E.id,children:E.name},E.id))})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:s,onChange:E=>a(E.target.value),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Data Inizio"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Seleziona Slot (Sede Selezionata)"}),_.length>0?f.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map((E,j)=>f.jsxs("button",{onClick:()=>v(j),className:`p-2 border rounded text-sm ${x===j?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"hover:bg-gray-50"}`,children:[E.start," - ",E.end]},j))}):f.jsx("p",{className:"text-xs text-red-500 italic",children:"Nessuno slot disponibile per questo giorno in questa sede."})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"number",min:"1",max:e,value:o,onChange:E=>c(Math.min(e,Math.max(1,Number(E.target.value)))),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"Numero Lezioni"})]})]}),f.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[f.jsx("button",{onClick:r,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{onClick:k,disabled:x===null,className:"md-btn md-btn-raised md-btn-primary md-btn-sm disabled:opacity-50",children:"Conferma"})]})]})})},ame=({initialParams:n})=>{const[e,t]=ne.useState([]),[r,i]=ne.useState([]),[s,a]=ne.useState([]),[o,c]=ne.useState(!0),[u,d]=ne.useState(null),[p,x]=ne.useState(""),[v,_]=ne.useState("az"),[b,S]=ne.useState(""),[T,k]=ne.useState(""),[E,j]=ne.useState(""),[F,z]=ne.useState(""),[A,I]=ne.useState(!1),[O,B]=ne.useState(null),[R,P]=ne.useState(void 0),[V,Y]=ne.useState(!1),[ie,q]=ne.useState({isOpen:!1,enrollment:null,date:new Date().toISOString().split("T")[0],method:Eu.BankTransfer,createInvoice:!0,isDeposit:!1,isBalance:!1,depositAmount:0}),[Q,se]=ne.useState({isOpen:!1,enrollment:null,maxRecoverable:0}),[J,me]=ne.useState({isOpen:!1,enrollment:null,scope:"single"}),[re,M]=ne.useState(null),[W,K]=ne.useState(!1),[G,te]=ne.useState(null),he=ne.useCallback(async()=>{try{c(!0);const[De,nt,ct]=await Promise.all([Oh(),_l(),Jl()]);t(De.filter(Nt=>Nt.clientType===ur.Parent)),a(nt),i(ct),d(null)}catch{d("Errore nel caricamento dati.")}finally{c(!1)}},[]);ne.useEffect(()=>(he(),window.addEventListener("EP_DataUpdated",he),()=>window.removeEventListener("EP_DataUpdated",he)),[he]);const ye=()=>{B(null),P(void 0),I(!0)},be=(De,nt,ct)=>{De.stopPropagation(),nt&&(B(nt),P(ct),I(!0))},Ce=async De=>{c(!0);try{for(const nt of De)if("id"in nt)await f5(nt.id,nt);else{const ct=nt,gt=(s||[]).find($t=>$t.clientId===ct.clientId&&$t.childId===ct.childId&&($t.status===Pr.Active||$t.status===Pr.Pending)&&$t.id!==nt.id);gt&&(console.log(`[RENEWAL] Marking previous enrollment ${gt.id} (${gt.childName}) as Completed`),await f5(gt.id,{status:Pr.Completed,endDate:new Date().toISOString()})),await wY(ct)}I(!1),await he(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch(nt){console.error("Save error:",nt),d("Errore salvataggio."),c(!1)}},ke=async(De,nt,ct,Nt,gt,$t,wt,In)=>{c(!0);try{const Ne=new Date(nt);if(isNaN(Ne.getTime()))throw new Error("Data pagamento non valida.");const tt=e.find(hn=>hn.id===De.clientId);if(!tt)throw new Error(`Cliente non trovato: ${De.clientId}. Sincronizzare i dati.`);const Pt=`${tt.firstName} ${tt.lastName}`,kt=De.price!==void 0?De.price:0;if(kt<=0)throw new Error("Importo iscrizione non valido ( 0).");let St=kt;if(gt||$t){if(wt<=0)throw new Error("Importo acconto/saldo deve essere > 0.");if(wt>kt)throw new Error(`Importo (${wt}) supera il totale (${kt}).`);St=wt}const jt=new Date(nt).toISOString(),Fn={allocationType:"location",allocationId:De.locationId,allocationName:De.locationName};if(Nt){let hn=`Iscrizione corso: ${De.childName} - ${De.subscriptionName}`;gt&&(hn=`Acconto iscrizione corso: ${De.childName} - ${De.subscriptionName}`),$t&&(hn=`Saldo iscrizione corso: ${De.childName} - ${De.subscriptionName}`,In&&(hn+=` (a saldo della fattura di acconto n. ${In})`));let nr=`Sede: ${De.locationName} | Iscrizione: ${De.id}`;const Tr={clientId:De.clientId,clientName:Pt,issueDate:jt,dueDate:jt,status:wi.PendingSDI,paymentMethod:ct,items:[{description:hn,quantity:1,price:St,notes:nr}],totalAmount:St,hasStampDuty:St>77,notes:`Rif. Iscrizione ${De.childName} [${De.id}]`,invoiceNumber:""},{id:sn,invoiceNumber:Br}=await VS(Tr);if(St>0&&await BS({date:jt,description:`Incasso Fattura ${Br} (${ct}) - ${De.childName}`,amount:St,type:Fi.Income,category:_s.Sales,paymentMethod:ct,status:Lh.Completed,relatedDocumentId:sn,...Fn}),gt){const Ar=kt-wt;if(Ar>0){const ei={clientId:De.clientId,clientName:Pt,issueDate:jt,dueDate:De.endDate,status:wi.Draft,paymentMethod:Eu.BankTransfer,items:[{description:`Saldo iscrizione corso: ${De.childName} - ${De.subscriptionName}`,quantity:1,price:Ar,notes:`Sede: ${De.locationName} - A saldo della fattura di acconto n. ${Br}`}],totalAmount:Ar,hasStampDuty:Ar>77,notes:"Fattura generata automaticamente come saldo.",invoiceNumber:"",isGhost:!0};await VS(ei)}}alert(`Pagamento registrato con FATTURA n. ${Br}.`)}else St>0&&await BS({date:jt,description:`Incasso Iscrizione (No Fattura): ${De.childName} - ${gt?"Acconto":$t?"Saldo":"Totale"}`,amount:St,type:Fi.Income,category:_s.Sales,paymentMethod:ct,status:Lh.Completed,excludeFromStats:!0,...Fn}),alert("Pagamento registrato (Solo Transazione Interna).");De.status===Pr.Pending&&await f5(De.id,{status:Pr.Active}),await he(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch(Ne){const tt=Ne instanceof Error?Ne.message:String(Ne);console.error(`[PAYMENT ERROR] Enrollment: ${De.id}, Child: ${De.childName}, Method: ${ct}`,Ne),d(`Errore pagamento: ${tt}`),c(!1)}},oe=async(De,nt,ct,Nt,gt,$t,wt)=>{const In=s.find(jt=>jt.id===De);if(!In)return;if(In.locationId==="unassigned"){if(window.confirm(`Assegnare ${In.childName} a ${ct} (${s1[gt]} ${$t})? Verranno generate tutte le lezioni.`)){c(!0);try{let jt="",Fn="";r.forEach(hn=>{hn.locations.find(Tr=>Tr.id===nt)&&(jt=hn.id,Fn=hn.companyName)}),await NY(De,jt,Fn,nt,ct,Nt,gt,$t,wt),await he()}catch(jt){console.error("Errore assegnazione:",jt),alert("Errore durante l'assegnazione.")}finally{c(!1),te(null),K(!1)}}return}const Ne=new Date,tt=Ne.getDay();let Pt=gt-tt;Pt<0&&(Pt+=7);const kt=new Date(Ne);kt.setDate(Ne.getDate()+Pt);const St=kt.toISOString().split("T")[0];if(window.confirm(`Spostare ${In.childName} a ${s1[gt]} ${$t}? L'iscrizione sar aggiornata con il nuovo orario per le lezioni future.`)){c(!0);try{await CY([De],St,nt,ct,Nt,$t,wt),await he()}catch(jt){console.error("Errore spostamento:",jt),alert("Errore durante lo spostamento.")}finally{c(!1),te(null),K(!1)}}},qe=(De,nt)=>{M(nt),De.dataTransfer.effectAllowed="move",De.dataTransfer.setData("text/plain",nt)},at=De=>{De.preventDefault(),De.dataTransfer.dropEffect="move"},Fe=(De,nt,ct,Nt,gt,$t,wt)=>{De.preventDefault();const In=re;M(null),In&&oe(In,nt,ct,Nt,gt,$t,wt)},_e=(De,nt)=>{W&&(De.stopPropagation(),te(ct=>ct===nt?null:nt))},Be=(De,nt,ct,Nt,gt,$t)=>{W&&G&&oe(G,De,nt,ct,Nt,gt,$t)},lt=async(De,nt)=>{De.stopPropagation();let ct=!1,Nt,gt=nt.price||0;try{const $t=await yx(),wt=nt.childName.toLowerCase(),In=$t.find(Ne=>Ne.clientId===nt.clientId&&!Ne.isDeleted&&!Ne.isGhost&&Ne.items.some(tt=>tt.description.toLowerCase().includes("acconto")&&tt.description.toLowerCase().includes(wt)));In&&(ct=!0,Nt=In.invoiceNumber,gt=Math.max(0,(nt.price||0)-In.totalAmount))}catch($t){console.error("Error checking invoices",$t)}q({isOpen:!0,enrollment:nt,date:new Date().toISOString().split("T")[0],method:Eu.BankTransfer,createInvoice:!0,isDeposit:!ct,isBalance:ct,depositAmount:ct?gt:(nt.price||0)/2,previousDepositInvoiceNumber:Nt})},Ke=async()=>{ie.enrollment&&ie.date&&(q(De=>({...De,isOpen:!1})),await ke(ie.enrollment,ie.date,ie.method,ie.createInvoice,ie.isDeposit,ie.isBalance,ie.depositAmount,ie.previousDepositInvoiceNumber))},We=(De,nt,ct)=>{De.stopPropagation(),se({isOpen:!0,enrollment:nt,maxRecoverable:ct})},Et=async(De,nt,ct,Nt,gt,$t)=>{if(Q.enrollment){se(wt=>({...wt,isOpen:!1})),c(!0);try{await AY(Q.enrollment.id,De,nt,ct,Nt,gt,$t),await he(),window.dispatchEvent(new Event("EP_DataUpdated")),alert("Recupero programmato con successo!")}catch{alert("Errore recupero.")}finally{c(!1)}}},Oe=(De,nt)=>{De.stopPropagation(),me({isOpen:!0,enrollment:nt,scope:"single"})},Dt=async()=>{if(!J.enrollment)return;const De=J.enrollment,nt=J.scope,ct=De.locationId;me(Nt=>({...Nt,isOpen:!1})),c(!0);try{if(nt==="single")await L1(De),await j1(De.id),ct&&ct!=="unassigned"&&s.filter(gt=>gt.locationId===ct&&gt.id!==De.id).length===0&&await gp(ct);else{const Nt=await FS(De.clientId);for(const gt of Nt)await L1(gt),await j1(gt.id),gt.locationId&&gt.locationId!=="unassigned"&&s.filter(wt=>wt.locationId===gt.locationId&&wt.clientId!==De.clientId).length===0&&await gp(gt.locationId)}await he(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch(Nt){console.error("Delete error:",Nt),alert("Errore durante l'eliminazione.")}finally{c(!1)}},Rt=async()=>{Y(!1),c(!0);try{const De=await _l();for(const nt of De)await L1(nt),await j1(nt.id),nt.locationId&&nt.locationId!=="unassigned"&&await gp(nt.locationId);await he(),window.dispatchEvent(new Event("EP_DataUpdated")),alert("Tutte le iscrizioni e i dati correlati sono stati eliminati.")}catch(De){console.error("Error deleting all:",De),alert("Errore durante l'eliminazione totale.")}finally{c(!1)}},Wt=De=>{const nt=e.find(Nt=>Nt.id===De.clientId),ct=nt==null?void 0:nt.children.find(Nt=>Nt.id===De.childId);return(ct==null?void 0:ct.age)||""},Jt=De=>{if(De.appointments&&De.appointments.length>0){const nt=new Date,ct=De.appointments.find(gt=>new Date(gt.date)>=nt)||De.appointments[0],Nt=new Date(ct.date);return{dayIndex:Nt.getDay(),dayName:s1[Nt.getDay()],startTime:ct.startTime,endTime:ct.endTime}}return{dayIndex:9,dayName:"Da Definire",startTime:"",endTime:""}},yn=ne.useMemo(()=>Array.from(new Set(s.map(De=>De.locationName))).filter(De=>De&&De!=="Sede Non Definita").sort(),[s]),ln=ne.useMemo(()=>{const De=new Set;return s.forEach(nt=>{const ct=Wt(nt);ct&&De.add(ct)}),Array.from(De).sort()},[s,e]),Zt=ne.useMemo(()=>{const De=new Set;return s.forEach(nt=>{const ct=Jt(nt);ct.startTime&&De.add(`${ct.startTime} - ${ct.endTime}`)}),Array.from(De).sort()},[s]),Ft=ne.useMemo(()=>{const De=new Date;De.setDate(De.getDate()-7),De.setHours(0,0,0,0);let nt=s.filter(ct=>{var gt;if(ct.lessonsRemaining<=0||ct.status===Pr.Completed||ct.status===Pr.Expired){let $t=new Date(ct.endDate);const wt=(gt=ct.appointments)==null?void 0:gt.filter(In=>In.status==="Present");if(wt&&wt.length>0){const In=wt.reduce((Ne,tt)=>new Date(tt.date)>new Date(Ne.date)?tt:Ne);$t=new Date(In.date)}if($t<De)return!1}if(p){const $t=p.toLowerCase(),wt=e.find(kt=>kt.id===ct.clientId),In=wt?`${wt.firstName} ${wt.lastName}`:"",Ne=Wt(ct),tt=Jt(ct);if(!(ct.childName.toLowerCase().includes($t)||In.toLowerCase().includes($t)||ct.locationName.toLowerCase().includes($t)||Ne.toLowerCase().includes($t)||tt.dayName.toLowerCase().includes($t)||tt.startTime.includes($t)))return!1}if(b&&ct.locationName!==b||F&&Wt(ct)!==F||T&&Jt(ct).dayName!==T)return!1;if(E){const $t=Jt(ct);if(`${$t.startTime} - ${$t.endTime}`!==E)return!1}return!0});return nt.sort((ct,Nt)=>{const gt=ct.childName.toLowerCase(),$t=Nt.childName.toLowerCase();return v==="az"?gt.localeCompare($t):$t.localeCompare(gt)}),nt},[s,e,p,b,F,T,E,v]),At=ne.useMemo(()=>{const De={};return r.forEach(ct=>{ct.locations.forEach(Nt=>{const gt=Nt.name;De[gt]={locationId:Nt.id,locationName:Nt.name,locationColor:Nt.color||"#ccc",days:{}},Nt.availability&&Nt.availability.forEach($t=>{De[gt].days[$t.dayOfWeek]||(De[gt].days[$t.dayOfWeek]={dayName:s1[$t.dayOfWeek],slots:{}});const wt=`${$t.startTime} - ${$t.endTime}`;De[gt].days[$t.dayOfWeek].slots[wt]||(De[gt].days[$t.dayOfWeek].slots[wt]={timeRange:wt,start:$t.startTime,end:$t.endTime,items:[]})})})}),Ft.forEach(ct=>{const Nt=ct.locationName||"Sede Non Definita",gt=ct.locationId||"unassigned",$t=ct.locationColor||"#e5e7eb",wt=Jt(ct),In=gt==="unassigned"?"Da Assegnare":wt.startTime?`${wt.startTime} - ${wt.endTime}`:"Orario N/D",Ne=gt==="unassigned"?99:wt.dayIndex;De[Nt]||(De[Nt]={locationId:gt,locationName:Nt,locationColor:$t,days:{}}),De[Nt].days[Ne]||(De[Nt].days[Ne]={dayName:gt==="unassigned"?"In Attesa":wt.dayName,slots:{}}),De[Nt].days[Ne].slots[In]||(De[Nt].days[Ne].slots[In]={timeRange:In,start:wt.startTime,end:wt.endTime,items:[]}),De[Nt].days[Ne].slots[In].items.push(ct)}),Object.values(De).sort((ct,Nt)=>ct.locationId==="unassigned"?-1:Nt.locationId==="unassigned"?1:ct.locationName.localeCompare(Nt.locationName)).map(ct=>({...ct,days:Object.entries(ct.days).sort(([Nt],[gt])=>Number(Nt)-Number(gt)).map(([Nt,gt])=>({dayIndex:Number(Nt),...gt,slots:Object.values(gt.slots).sort(($t,wt)=>$t.timeRange.localeCompare(wt.timeRange))}))}))},[Ft,r]);return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col xl:flex-row xl:items-center justify-between gap-4 mb-6",children:[f.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start md:items-center",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Iscrizioni"}),f.jsx("p",{className:"mt-1 text-gray-500",children:'Gestione dei "recinti" e dotazione slot.'})]}),f.jsx("button",{onClick:()=>{K(!W),te(null)},className:`md-btn md-btn-sm md:hidden mt-2 ${W?"bg-amber-100 text-amber-800 border-2 border-amber-300 shadow-inner":"bg-white border text-gray-700 shadow-sm"}`,children:W?f.jsxs("span",{className:"flex items-center font-bold",children:[f.jsx("span",{className:"animate-pulse mr-2",children:""})," Scegli..."]}):f.jsx("span",{className:"flex items-center",children:" Sposta"})})]}),f.jsxs("div",{className:"flex flex-col md:flex-row gap-2 flex-1 xl:max-w-4xl xl:justify-end",children:[f.jsxs("div",{className:"relative w-full md:w-64",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",className:"block w-full bg-white border border-gray-300 rounded-lg py-2 pl-10 pr-3 text-sm focus:ring-indigo-500 focus:border-indigo-500 shadow-sm",placeholder:"Cerca nome, sede, orario...",value:p,onChange:De=>x(De.target.value)})]}),f.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 md:pb-0 scrollbar-hide",children:[f.jsxs("select",{value:b,onChange:De=>S(De.target.value),className:"bg-white border border-gray-300 text-gray-700 text-xs rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2 min-w-[100px]",children:[f.jsx("option",{value:"",children:"Tutte le Sedi"}),yn.map(De=>f.jsx("option",{value:De,children:De},De))]}),f.jsxs("select",{value:T,onChange:De=>k(De.target.value),className:"bg-white border border-gray-300 text-gray-700 text-xs rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2 min-w-[100px]",children:[f.jsx("option",{value:"",children:"Tutti i Giorni"}),s1.map(De=>f.jsx("option",{value:De,children:De},De))]}),f.jsxs("select",{value:E,onChange:De=>j(De.target.value),className:"bg-white border border-gray-300 text-gray-700 text-xs rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2 min-w-[90px]",children:[f.jsx("option",{value:"",children:"Tutti Orari"}),Zt.map(De=>f.jsx("option",{value:De,children:De},De))]}),f.jsxs("select",{value:F,onChange:De=>z(De.target.value),className:"bg-white border border-gray-300 text-gray-700 text-xs rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2 min-w-[80px]",children:[f.jsx("option",{value:"",children:"Tutte Et"}),ln.map(De=>f.jsx("option",{value:De,children:De},De))]}),f.jsx("button",{onClick:()=>_(De=>De==="az"?"za":"az"),className:"bg-white border border-gray-300 hover:bg-gray-50 text-gray-700 font-bold py-2 px-3 rounded-lg text-xs whitespace-nowrap shadow-sm",children:v==="az"?"A-Z":"Z-A"})]}),f.jsxs("button",{onClick:()=>Y(!0),className:"md-btn md-btn-sm bg-red-50 text-red-700 border border-red-200 hover:bg-red-100 flex items-center text-xs font-bold mr-2",children:[f.jsx($r,{})," Elimina Tutto"]}),f.jsxs("button",{onClick:ye,className:"md-btn md-btn-raised md-btn-green whitespace-nowrap h-9 flex items-center",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2 hidden sm:inline",children:"Nuova"})]})]})]}),W&&f.jsx("div",{className:"bg-amber-50 text-amber-900 px-4 py-2 rounded-lg mb-4 text-sm border border-amber-200 shadow-sm md:hidden",children:G?f.jsxs("span",{children:["Selezionato. ",f.jsx("strong",{children:"Tocca uno slot orario"})," per spostare."]}):f.jsx("span",{children:"Tocca un'iscrizione per selezionarla."})}),o?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs("div",{className:"space-y-8 pb-10",children:[At.length===0&&f.jsx("p",{className:"text-center text-gray-500 italic py-10",children:"Nessuna iscrizione trovata."}),At.map((De,nt)=>f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[f.jsxs("div",{className:`px-6 py-3 border-b border-gray-200 flex items-center gap-3 ${De.locationId==="unassigned"?"bg-gray-200":"bg-gray-50"}`,children:[f.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300 shadow-sm",style:{backgroundColor:De.locationColor}}),f.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-wide",children:De.locationName}),De.locationId==="unassigned"&&f.jsx("span",{className:"text-xs bg-gray-600 text-white px-2 py-0.5 rounded",children:"Trascina nei recinti"})]}),f.jsx("div",{className:"p-6 space-y-6",children:De.days.map((ct,Nt)=>f.jsxs("div",{className:"relative pl-4 border-l-2 border-dashed border-gray-300",children:[f.jsxs("h3",{className:"text-md font-bold text-indigo-700 mb-3 uppercase flex items-center",children:[f.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full mr-2 -ml-[21px] ring-4 ring-white"}),ct.dayName]}),f.jsx("div",{className:"space-y-4",children:ct.slots.map((gt,$t)=>f.jsxs("div",{className:`rounded-lg p-3 border transition-all ${W&&G?"bg-indigo-50 border-indigo-200 cursor-pointer hover:bg-indigo-100 ring-2 ring-indigo-200 ring-offset-1":"bg-slate-50 border-slate-100 hover:bg-slate-100"}`,onDragOver:at,onDrop:wt=>Fe(wt,De.locationId,De.locationName,De.locationColor,ct.dayIndex,gt.start,gt.end),onClick:()=>Be(De.locationId,De.locationName,De.locationColor,ct.dayIndex,gt.start,gt.end),children:[f.jsxs("div",{className:"flex items-center mb-3",children:[f.jsx("span",{className:"bg-white text-slate-600 border border-slate-200 text-xs font-mono font-bold px-2 py-1 rounded shadow-sm",children:gt.timeRange}),f.jsx("div",{className:"h-px bg-slate-200 flex-1 ml-3"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3",children:gt.items.map(wt=>{const In=Wt(wt),Ne=G===wt.id,tt=wt.status===Pr.Pending,Pt=wt.lessonsRemaining<=0,kt=wt.locationId==="unassigned";let St=De.locationColor,jt="bg-white",Fn="opacity-100";return tt?(St="#fbbf24",jt="bg-amber-50"):Pt?(St="#9ca3af",jt="bg-gray-100",Fn="opacity-75"):kt&&(St="#6b7280",jt="bg-gray-50"),f.jsxs("div",{draggable:!Pt,onDragStart:hn=>!Pt&&qe(hn,wt.id),onClick:hn=>_e(hn,wt.id),className:`p-3 rounded-lg border shadow-sm transition-all relative group 
                                                                        ${jt} ${Fn} border-gray-200 hover:shadow-md cursor-grab active:cursor-grabbing
                                                                        ${re===wt.id?"opacity-50 ring-2 ring-indigo-300":""}
                                                                        ${Ne?"ring-4 ring-indigo-500 transform scale-95 border-indigo-300 z-10":""}
                                                                    `,style:{borderLeftWidth:"5px",borderLeftColor:St},children:[f.jsxs("div",{className:"flex justify-between items-start",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-bold text-sm text-gray-800",children:wt.childName}),f.jsx("p",{className:"text-[10px] text-gray-500",children:In})]}),tt&&f.jsx("span",{className:"text-[9px] bg-amber-200 text-amber-800 px-1.5 py-0.5 rounded font-bold uppercase",children:"Dormiente"}),Pt&&f.jsx("span",{className:"text-[9px] bg-gray-300 text-gray-700 px-1.5 py-0.5 rounded font-bold uppercase",children:"Esaurito"})]}),f.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[f.jsx("p",{className:"text-xs text-gray-600 truncate flex-1 pr-2",title:wt.subscriptionName,children:wt.subscriptionName}),f.jsxs("div",{className:"text-xs font-mono bg-white px-1.5 py-0.5 rounded border border-gray-200 whitespace-nowrap",title:"Slot Consumati / Totali",children:[f.jsx("span",{className:"font-bold text-indigo-600",children:wt.lessonsTotal-wt.lessonsRemaining}),f.jsx("span",{className:"text-gray-400",children:"/"}),f.jsx("span",{className:"font-bold text-gray-600",children:wt.lessonsTotal})]})]}),!W&&f.jsxs("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-[1px] opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2 rounded-lg",children:[!kt&&f.jsx("button",{onClick:hn=>lt(hn,wt),className:"bg-green-100 text-green-700 p-1.5 rounded-full hover:bg-green-200 shadow-sm",title:"Registra Pagamento / Saldo",children:f.jsx("span",{className:"font-bold text-xs",children:""})}),f.jsx("button",{onClick:hn=>be(hn,e.find(nr=>nr.id===wt.clientId),wt),className:"bg-blue-100 text-blue-600 p-1.5 rounded-full hover:bg-blue-200 shadow-sm",title:"Modifica",children:f.jsx(mo,{})}),f.jsx("button",{onClick:hn=>Oe(hn,wt),className:"bg-red-100 text-red-600 p-1.5 rounded-full hover:bg-red-200 shadow-sm",title:"Elimina",children:f.jsx($r,{})}),!Pt&&!tt&&!kt&&f.jsx("button",{onClick:hn=>We(hn,wt,1),className:"bg-orange-100 text-orange-600 p-1.5 rounded-full hover:bg-orange-200 shadow-sm",title:"Recupero",children:f.jsx(HE,{})})]})]},wt.id)})})]},$t))})]},Nt))})]},nt))]}),ie.isOpen&&ie.enrollment&&f.jsx(mi,{onClose:()=>q(De=>({...De,isOpen:!1})),size:"md",children:f.jsxs("div",{className:"p-6",children:[f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Registra Pagamento"}),f.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Pagamento per ",f.jsx("strong",{children:ie.enrollment.childName}),".",f.jsx("br",{}),"Totale Iscrizione: ",f.jsxs("span",{className:"font-bold text-indigo-600",children:[ie.enrollment.price,""]})]}),f.jsxs("div",{className:"md-input-group mb-4",children:[f.jsx("input",{type:"date",value:ie.date,onChange:De=>q(nt=>({...nt,date:De.target.value})),className:"md-input font-bold"}),f.jsx("label",{className:"md-input-label !top-0",children:"Data Pagamento"})]}),f.jsxs("div",{className:"md-input-group mb-4",children:[f.jsx("select",{value:ie.method,onChange:De=>q(nt=>({...nt,method:De.target.value})),className:"md-input",children:Object.values(Eu).map(De=>f.jsx("option",{value:De,children:De},De))}),f.jsx("label",{className:"md-input-label !top-0",children:"Metodo Pagamento"})]}),f.jsxs("div",{className:"mb-4 bg-gray-50 p-3 rounded border border-gray-200 space-y-3",children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"radio",name:"paymentType",checked:ie.isDeposit,onChange:()=>q(De=>{var nt;return{...De,isDeposit:!0,isBalance:!1,depositAmount:(((nt=De.enrollment)==null?void 0:nt.price)||0)/2}}),className:"h-4 w-4 text-indigo-600 rounded"}),f.jsx("span",{className:"ml-2 text-sm font-bold text-gray-700",children:"In Acconto"})]}),f.jsxs("label",{className:"flex items-center cursor-pointer",children:[f.jsx("input",{type:"radio",name:"paymentType",checked:ie.isBalance,onChange:()=>q(De=>({...De,isBalance:!0,isDeposit:!1,depositAmount:De.enrollment?(De.enrollment.price||0)-(De.isBalance?0:(De.enrollment.price||0)/2):0})),className:"h-4 w-4 text-green-600 rounded"}),f.jsx("span",{className:"ml-2 text-sm font-bold text-green-700",children:"A Saldo"})]})]}),(ie.isDeposit||ie.isBalance)&&f.jsxs("div",{className:"animate-fade-in pl-2 pt-2",children:[f.jsx("label",{className:"text-xs text-gray-500 block font-bold mb-1",children:"Importo Versato Ora"}),f.jsx("input",{type:"number",value:ie.depositAmount,onChange:De=>q(nt=>({...nt,depositAmount:Number(De.target.value)})),className:"w-full p-2 border rounded text-sm font-bold text-right"}),ie.isDeposit&&f.jsxs("div",{className:"text-xs text-orange-600 mt-2 bg-orange-50 p-2 rounded",children:["Rimanenza (Saldo): ",f.jsxs("strong",{children:[(ie.enrollment.price||0)-ie.depositAmount,""]}),f.jsx("br",{}),"Verr generata una notifica di saldo tra 30 giorni."]}),ie.isBalance&&ie.previousDepositInvoiceNumber&&f.jsxs("div",{className:"text-xs text-green-600 mt-2 bg-green-50 p-2 rounded",children:["A saldo della fattura di acconto n. ",ie.previousDepositInvoiceNumber]})]})]}),f.jsxs("div",{className:"mb-4",children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-2 uppercase",children:"Generazione Documento"}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:`flex-1 p-2 border rounded cursor-pointer text-center text-xs transition-colors ${ie.createInvoice?"bg-white border-gray-200":"bg-gray-100 border-gray-300 text-gray-600"}`,children:[f.jsx("input",{type:"radio",name:"invoiceGen",checked:!ie.createInvoice,onChange:()=>q(De=>({...De,createInvoice:!1})),className:"hidden"})," Non crea fattura"]}),f.jsxs("label",{className:`flex-1 p-2 border rounded cursor-pointer text-center text-xs transition-colors ${ie.createInvoice?"bg-blue-50 border-blue-500 text-blue-700 font-bold":"bg-white border-gray-200"}`,children:[f.jsx("input",{type:"radio",name:"invoiceGen",checked:ie.createInvoice,onChange:()=>q(De=>({...De,createInvoice:!0})),className:"hidden"})," Crea fattura"]})]}),f.jsx("p",{className:"text-[10px] text-gray-400 mt-2 italic",children:ie.createInvoice?"Verr generata una fattura (SDI o Pro-Forma) e la relativa transazione.":"L'importo verr registrato solo come Transazione interna (non fiscale)."})]}),f.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>q(De=>({...De,isOpen:!1})),className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{onClick:Ke,className:"md-btn md-btn-raised md-btn-green md-btn-sm",children:"Conferma Pagamento"})]})]})}),J.isOpen&&J.enrollment&&f.jsx(mi,{onClose:()=>me(De=>({...De,isOpen:!1})),size:"md",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4 text-red-600",children:[f.jsx($r,{}),f.jsx("h3",{className:"text-lg font-bold",children:"Elimina Iscrizione"})]}),f.jsxs("p",{className:"text-sm text-gray-600 mb-6",children:["Stai per eliminare l'iscrizione di ",f.jsx("strong",{children:J.enrollment.childName}),". Questa azione  irreversibile."]}),f.jsxs("div",{className:"space-y-3 mb-6",children:[f.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${J.scope==="single"?"bg-red-50 border-red-200":"bg-white hover:bg-gray-50"}`,children:[f.jsx("input",{type:"radio",name:"deleteScope",checked:J.scope==="single",onChange:()=>me(De=>({...De,scope:"single"})),className:"w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500"}),f.jsxs("div",{className:"ml-3",children:[f.jsx("span",{className:"block text-sm font-bold text-gray-800",children:"Elimina solo questa"}),f.jsx("span",{className:"block text-xs text-gray-500",children:"Rimuove solo questa iscrizione e i relativi movimenti finanziari."})]})]}),f.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-colors ${J.scope==="all"?"bg-red-50 border-red-200":"bg-white hover:bg-gray-50"}`,children:[f.jsx("input",{type:"radio",name:"deleteScope",checked:J.scope==="all",onChange:()=>me(De=>({...De,scope:"all"})),className:"w-4 h-4 text-red-600 border-gray-300 focus:ring-red-500"}),f.jsxs("div",{className:"ml-3",children:[f.jsx("span",{className:"block text-sm font-bold text-gray-800",children:"Elimina tutte (Cliente)"}),f.jsx("span",{className:"block text-xs text-gray-500",children:"Rimuove TUTTE le iscrizioni storiche e i dati finanziari di questo cliente."})]})]})]}),f.jsxs("div",{className:"flex justify-end gap-2",children:[f.jsx("button",{onClick:()=>me(De=>({...De,isOpen:!1})),className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{onClick:Dt,className:"md-btn md-btn-raised md-btn-red md-btn-sm",children:"Conferma Eliminazione"})]})]})}),f.jsx(Ho,{isOpen:V,onClose:()=>Y(!1),onConfirm:Rt,title:"ELIMINA TUTTE LE ISCRIZIONI",message:" ATTENZIONE: Stai per eliminare TUTTE le iscrizioni attive e storiche. Questa azione canceller a cascata anche tutte le Lezioni, Presenze, Transazioni e Fatture collegate. Questa operazione  irreversibile. Confermi?",isDangerous:!0,confirmText:"S, Elimina TUTTO"}),A&&f.jsx(mi,{onClose:()=>I(!1),size:"lg",children:f.jsx(ime,{parents:e,initialParent:O,existingEnrollment:R,onSave:Ce,onCancel:()=>I(!1)})}),Q.isOpen&&Q.enrollment&&f.jsx(sme,{enrollment:Q.enrollment,maxRecoverable:Q.maxRecoverable,suppliers:r,onClose:()=>se(De=>({...De,isOpen:!1})),onConfirm:Et})]})},CT=n=>{const e=new Date(n),t=e.getDay(),r=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(r))},oR=n=>{const e=CT(n);return e.setDate(e.getDate()+6),e},ome=n=>new Date(n.getFullYear(),n.getMonth(),1),lme=n=>new Date(n.getFullYear(),n.getMonth()+1,0),cme=()=>{const[n,e]=ne.useState(!0),[t,r]=ne.useState([]),[i,s]=ne.useState(new Date),[a,o]=ne.useState("day"),[c,u]=ne.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{},isDangerous:!1}),d=ne.useCallback(async()=>{e(!0);try{const j=await _l(),F=[];let z=new Date(i),A=new Date(i);z.setHours(0,0,0,0),A.setHours(23,59,59,999),a==="week"?(z=CT(i),z.setHours(0,0,0,0),A=oR(i),A.setHours(23,59,59,999)):a==="month"&&(z=ome(i),A=lme(i),A.setHours(23,59,59,999)),j.forEach(I=>{(I.status===Pr.Active||I.status===Pr.Pending)&&I.appointments&&I.appointments.forEach(O=>{const B=new Date(O.date);B>=z&&B<=A&&F.push({...O,enrollmentId:I.id,childName:I.childName,subscriptionName:I.subscriptionName,lessonsRemaining:I.lessonsRemaining})})}),r(F)}catch(j){console.error("Errore caricamento presenze:",j)}finally{e(!1)}},[i,a]);ne.useEffect(()=>{d()},[d]);const p=ne.useMemo(()=>{const j={};return t.forEach(F=>{const z=F.locationName||"Sede Non Definita",A=new Date(F.date).toDateString();j[z]||(j[z]={}),j[z][A]||(j[z][A]=[]),j[z][A].push(F)}),Object.keys(j).forEach(F=>{Object.keys(j[F]).forEach(z=>{j[F][z].sort((A,I)=>A.startTime.localeCompare(I.startTime))})}),j},[t]),x=j=>{const F=new Date(i);a==="day"?F.setDate(F.getDate()+j):a==="week"?F.setDate(F.getDate()+j*7):a==="month"&&F.setMonth(F.getMonth()+j),s(F)},v=()=>{const j={day:"numeric",month:"long",year:"numeric"};if(a==="day")return i.toLocaleDateString("it-IT",{weekday:"long",...j});if(a==="week"){const F=CT(i),z=oR(i);return`${F.getDate()} - ${z.getDate()} ${z.toLocaleDateString("it-IT",{month:"long",year:"numeric"})}`}return i.toLocaleDateString("it-IT",{month:"long",year:"numeric"})},_=async j=>{try{e(!0),await $k(j.enrollmentId,j.lessonId),await d(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch(F){console.error(F),alert("Errore segnando la presenza."),e(!1)}},b=j=>{u({isOpen:!0,title:"Assenza & Recupero",message:`Il bambino ${j.childName}  assente. Vuoi riprogrammare lo slot per il futuro? Se annulli, l'assenza viene registrata ma lo slot non viene automaticamente riprogrammato.`,isDangerous:!1,onConfirm:async()=>{try{e(!0),await Gk(j.enrollmentId,j.lessonId,!0),await d(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch(F){console.error("Errore assenza:",F),alert("Errore."),e(!1)}}})},S=async j=>{try{e(!0),await EY(j.enrollmentId,j.lessonId),await d(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch{alert("Errore modifica stato."),e(!1)}},T=async j=>{if(confirm("Eliminare lo stato di presenza/assenza? L'appuntamento torner in attesa."))try{e(!0),await TY(j.enrollmentId,j.lessonId),await d(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch{alert("Errore eliminazione stato."),e(!1)}},k=async()=>{if(confirm("Segnare TUTTI gli studenti visualizzati come PRESENTI?")){e(!0);try{const j=t.filter(F=>F.status!=="Present");for(const F of j)await $k(F.enrollmentId,F.lessonId);await d(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch{alert("Errore durante l'aggiornamento massivo.")}finally{e(!1)}}},E=async()=>{if(confirm("Segnare TUTTI gli studenti visualizzati come ASSENTI con RECUPERO automatico?")){e(!0);try{const j=t.filter(F=>F.status!=="Absent");for(const F of j)await Gk(F.enrollmentId,F.lessonId,!0);await d(),window.dispatchEvent(new Event("EP_DataUpdated"))}catch{alert("Errore durante l'aggiornamento massivo.")}finally{e(!1)}}};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Registro Presenze"}),f.jsx("p",{className:"text-gray-500",children:"Gestione presenze e recuperi."})]}),f.jsxs("div",{className:"flex gap-2 items-center",children:[f.jsx("button",{onClick:k,className:"md-btn md-btn-sm bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 whitespace-nowrap",children:" Tutti Presenti"}),f.jsx("button",{onClick:E,className:"md-btn md-btn-sm bg-red-50 text-red-700 border border-red-200 hover:bg-red-100 whitespace-nowrap",children:" Tutti Assenti"}),f.jsxs("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1 shadow-sm ml-2",children:[f.jsx("button",{onClick:()=>o("day"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${a==="day"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Giorno"}),f.jsx("button",{onClick:()=>o("week"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${a==="week"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Settimana"}),f.jsx("button",{onClick:()=>o("month"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${a==="month"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Mese"})]})]})]}),f.jsxs("div",{className:"md-card p-4 mb-6 flex items-center justify-between bg-white border-l-4 border-indigo-500 shadow-sm",children:[f.jsx("button",{onClick:()=>x(-1),className:"md-icon-btn h-10 w-10 bg-gray-50 hover:bg-gray-100 rounded-full font-bold text-gray-600 transition-colors",children:"<"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(vx,{}),f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"block text-lg font-bold text-gray-800 capitalize",children:v()}),a==="day"&&f.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Oggi"})]})]}),f.jsx("button",{onClick:()=>x(1),className:"md-icon-btn h-10 w-10 bg-gray-50 hover:bg-gray-100 rounded-full font-bold text-gray-600 transition-colors",children:">"})]}),n?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs("div",{className:"space-y-8 animate-fade-in",children:[Object.keys(p).length===0&&f.jsx("div",{className:"text-center py-12 text-gray-500 italic bg-gray-50 rounded-xl border border-dashed border-gray-300",children:"Nessuna lezione in programma nel periodo selezionato."}),Object.entries(p).map(([j,F])=>{const z=Object.keys(F).sort((I,O)=>new Date(I).getTime()-new Date(O).getTime()),A=F[z[0]][0];return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden mb-6",children:[f.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b border-gray-200 flex items-center gap-3 cursor-pointer hover:bg-gray-100 transition-colors",children:[f.jsx("span",{className:"w-4 h-4 rounded-full shadow-sm ring-2 ring-white",style:{backgroundColor:(A==null?void 0:A.locationColor)||"#ccc"}}),f.jsx("h2",{className:"text-lg font-bold text-gray-800 uppercase tracking-wide",children:j}),f.jsxs("span",{className:"text-xs bg-white border border-gray-300 text-gray-600 px-2 py-0.5 rounded-full font-mono",children:[Object.values(F).reduce((I,O)=>I+O.length,0)," lez."]})]}),f.jsx("div",{className:"divide-y divide-gray-100",children:z.map(I=>f.jsxs("div",{children:[a!=="day"&&f.jsxs("div",{className:"px-6 py-2 bg-indigo-50/50 text-xs font-bold text-indigo-800 uppercase border-b border-indigo-100/50 flex items-center",children:[f.jsx(vx,{})," ",f.jsx("span",{className:"ml-2",children:new Date(I).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})})]}),F[I].map(O=>{const B=O.status==="Present",R=O.status==="Absent";return f.jsxs("div",{className:`px-6 py-4 flex flex-col md:flex-row md:items-center justify-between hover:bg-gray-50 transition-all border-l-4 ${R?"border-l-red-400 bg-red-50/30":B?"border-l-green-400 bg-green-50/30":"border-l-transparent"}`,children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("span",{className:"font-mono font-bold text-sm text-gray-600 bg-gray-100 px-2 py-1 rounded",children:[O.startTime," - ",O.endTime]}),f.jsx("h3",{className:"font-bold text-gray-900 text-base",children:O.childName})]}),f.jsxs("div",{className:"flex items-center gap-2 mt-1 ml-1",children:[f.jsx("span",{className:"text-xs text-gray-500",children:O.subscriptionName}),f.jsx("span",{className:"text-[10px] text-gray-400",children:""}),f.jsxs("span",{className:"text-xs text-gray-500",children:["Slot residui: ",f.jsx("strong",{children:O.lessonsRemaining})]})]})]}),f.jsx("div",{className:"flex items-center gap-2 mt-3 md:mt-0 md:ml-4",children:B||R?f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full border shadow-sm flex items-center gap-1 min-w-[90px] justify-center ${B?"bg-green-100 text-green-800 border-green-200":"bg-red-100 text-red-800 border-red-200"}`,children:B?" PRESENTE":" ASSENTE"}),f.jsx("button",{onClick:()=>S(O),className:"md-icon-btn edit p-1.5 bg-white border border-gray-200 hover:bg-blue-50",title:"Modifica Stato",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>T(O),className:"md-icon-btn delete p-1.5 bg-white border border-gray-200 hover:bg-red-50",title:"Elimina Stato",children:f.jsx($r,{})})]}):f.jsxs(f.Fragment,{children:[f.jsx("button",{onClick:()=>_(O),className:"px-4 py-2 bg-white border border-green-500 text-green-600 rounded-lg text-xs font-bold hover:bg-green-50 hover:shadow-md transition-all active:scale-95",children:" Presente"}),f.jsx("button",{onClick:()=>b(O),className:"px-4 py-2 bg-white border border-red-300 text-red-500 rounded-lg text-xs font-medium hover:bg-red-50 hover:shadow-md transition-all active:scale-95",children:" Assente"})]})})]},O.lessonId)})]},I))})]},j)})]}),f.jsx(Ho,{isOpen:c.isOpen,onClose:()=>u(j=>({...j,isOpen:!1})),onConfirm:c.onConfirm,title:c.title,message:c.message,isDangerous:c.isDangerous,confirmText:"S, recupera slot",cancelText:"Solo Assenza"})]})},ume=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),hme=({enrollmentId:n,childName:e,currentLocationName:t,suppliers:r,onClose:i,onSave:s})=>{const[a,o]=ne.useState(""),[c,u]=ne.useState(new Date().toISOString().split("T")[0]),[d,p]=ne.useState(!1),x=ne.useMemo(()=>{const _=[];return r.forEach(b=>b.locations.forEach(S=>_.push({id:S.id,name:S.name,color:S.color}))),_.sort((b,S)=>b.name.localeCompare(S.name))},[r]),v=async()=>{if(!a||!c)return alert("Seleziona sede e data.");const _=x.find(b=>b.id===a);_&&(p(!0),await s(n,_.id,_.name,_.color,c),p(!1),i())};return f.jsx(mi,{onClose:i,size:"md",children:f.jsxs("div",{className:"p-6",children:[f.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:["Cambio Sede: ",e]}),f.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Attualmente in: ",f.jsx("strong",{children:t}),".",f.jsx("br",{}),"La modifica influir sul registro presenze e sui costi di nolo a partire dalla data selezionata."]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-700 mb-1",children:"Nuova Sede"}),f.jsxs("select",{value:a,onChange:_=>o(_.target.value),className:"md-input bg-white",children:[f.jsx("option",{value:"",children:"Seleziona..."}),x.map(_=>f.jsx("option",{value:_.id,children:_.name},_.id))]})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"date",value:c,onChange:_=>u(_.target.value),className:"md-input"}),f.jsx("label",{className:"md-input-label !top-0",children:"A partire dal"})]})]}),f.jsxs("div",{className:"mt-6 flex justify-end gap-2",children:[f.jsx("button",{onClick:i,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsx("button",{onClick:v,disabled:d||!a,className:"md-btn md-btn-raised md-btn-primary md-btn-sm",children:d?"Salvataggio...":"Conferma Cambio"})]})]})})},fme=()=>{const[n,e]=ne.useState([]),[t,r]=ne.useState([]),[i,s]=ne.useState(!0),[a,o]=ne.useState(""),[c,u]=ne.useState(null),[d,p]=ne.useState(1),x=20,v=async()=>{s(!0);try{const[T,k]=await Promise.all([_l(),Jl()]);r(k);const E=[];T.forEach(j=>{const F=(j.price||0)/(j.lessonsTotal||1);j.appointments&&j.appointments.forEach(z=>{z.status==="Present"&&E.push({id:`${j.id}-${z.lessonId}`,enrollmentId:j.id,date:z.date,childName:j.childName,locationName:z.locationName||j.locationName,locationColor:z.locationColor||j.locationColor||"#ccc",startTime:z.startTime,value:F})})}),E.sort((j,F)=>new Date(F.date).getTime()-new Date(j.date).getTime()),e(E)}catch(T){console.error(T)}finally{s(!1)}};ne.useEffect(()=>{v()},[]);const _=async(T,k,E,j,F)=>{try{const z=fn(Ut,"enrollments",T),A=await Mu(z);if(A.exists()){const I=A.data(),O=new Date(F);O.setHours(0,0,0,0);const B=(I.appointments||[]).map(R=>new Date(R.date)>=O?{...R,locationName:E,locationColor:j}:R);await Zr(z,{locationId:k,locationName:E,locationColor:j,appointments:B}),alert("Sede aggiornata con successo."),v()}}catch(z){console.error(z),alert("Errore durante l'aggiornamento della sede.")}};ne.useEffect(()=>{p(1)},[a]);const b=ne.useMemo(()=>n.filter(T=>T.childName.toLowerCase().includes(a.toLowerCase())||T.locationName.toLowerCase().includes(a.toLowerCase())),[n,a]),S=ne.useMemo(()=>{const T=(d-1)*x;return b.slice(T,T+x)},[b,d]);return f.jsxs("div",{children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Archivio Presenze"}),f.jsx("p",{className:"mt-1 text-gray-500",children:"Storico degli slot consumati e loro valore."})]}),f.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200 mb-6",children:f.jsxs("div",{className:"relative max-w-md",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",className:"block w-full bg-gray-50 border border-gray-300 rounded-lg py-2 pl-10 pr-3 text-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Cerca bambino o sede...",value:a,onChange:T=>o(T.target.value)})]})}),i?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 overflow-hidden",children:[f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-sm text-left",children:[f.jsx("thead",{className:"bg-gray-50 text-gray-500 uppercase text-xs font-bold border-b",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4",children:"Data"}),f.jsx("th",{className:"p-4",children:"Bambino"}),f.jsx("th",{className:"p-4",children:"Sede (Slot Consumato)"}),f.jsx("th",{className:"p-4 text-right",children:"Valore Slot"})]})}),f.jsxs("tbody",{className:"divide-y divide-gray-100",children:[S.map(T=>f.jsxs("tr",{className:"hover:bg-gray-50",children:[f.jsxs("td",{className:"p-4 font-mono text-gray-600",children:[new Date(T.date).toLocaleDateString()," ",f.jsx("span",{className:"text-xs text-gray-400 ml-1",children:T.startTime})]}),f.jsx("td",{className:"p-4 font-bold text-gray-800",children:T.childName}),f.jsx("td",{className:"p-4",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200",children:[f.jsx("span",{className:"w-2 h-2 rounded-full mr-1.5",style:{backgroundColor:T.locationColor}}),T.locationName]}),f.jsx("button",{onClick:()=>u({isOpen:!0,enrollmentId:T.enrollmentId,childName:T.childName,currentLocationName:T.locationName}),className:"text-gray-400 hover:text-indigo-600 p-1 rounded-full hover:bg-indigo-50 transition-colors",title:"Cambia Sede (Nuova Sede)",children:f.jsx(ume,{})})]})}),f.jsxs("td",{className:"p-4 text-right font-mono text-green-600 font-bold",children:[T.value.toFixed(2),""]})]},T.id)),b.length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:4,className:"p-8 text-center text-gray-500 italic",children:"Nessuno storico trovato."})})]})]})}),f.jsx(tm,{currentPage:d,totalItems:b.length,itemsPerPage:x,onPageChange:p})]}),c&&f.jsx(hme,{enrollmentId:c.enrollmentId,childName:c.childName,currentLocationName:c.currentLocationName,suppliers:t,onClose:()=>u(null),onSave:_})]})},m7=ss(Ut,"activities"),dme=n=>{const e=n.data();return{id:n.id,...e}},p7=async()=>{const n=ga(m7,Ou("createdAt","desc"));return(await Jr(n)).docs.map(dme)},mme=async n=>{const e={...n,createdAt:n.createdAt||new Date().toISOString()};return(await Go(m7,e)).id},pme=async(n,e)=>{const t=fn(Ut,"activities",n);await Zr(t,e)},gme=async n=>{const e=fn(Ut,"activities",n);await Wo(e)},kT=ss(Ut,"lesson_activities"),xme=async n=>n.length===0?[]:(await Jr(kT)).docs.map(r=>({id:r.id,...r.data()})).filter(r=>n.includes(r.lessonId)),vme=async(n,e,t)=>{const r=Bc(Ut),i=await Jr(kT),s=new Map;i.docs.forEach(a=>{const o=a.data();s.set(o.lessonId,a.id)}),n.forEach(a=>{const o=s.get(a);if(o){const c=fn(Ut,"lesson_activities",o);r.update(c,{activityIds:e})}else{const c=fn(kT);r.set(c,{lessonId:a,activityIds:e,date:t})}}),await r.commit()},g7=n=>{if(!n)return null;const e=n.match(/(https?:\/\/[^\s]+)/g);return e?e[0]:null},yme=({activity:n,onSave:e,onCancel:t})=>{const[r,i]=ne.useState((n==null?void 0:n.title)||""),[s,a]=ne.useState((n==null?void 0:n.category)||""),[o,c]=ne.useState((n==null?void 0:n.theme)||""),[u,d]=ne.useState((n==null?void 0:n.description)||""),[p,x]=ne.useState((n==null?void 0:n.materials)||""),[v,_]=ne.useState((n==null?void 0:n.links)||""),[b,S]=ne.useState((n==null?void 0:n.attachments)||[]),[T,k]=ne.useState(!1),E=A=>{A.preventDefault();const I={title:r,category:s,theme:o,description:u,materials:p,links:v,attachments:b,createdAt:(n==null?void 0:n.createdAt)||new Date().toISOString()};n!=null&&n.id?e({...I,id:n.id}):e(I)},j=async A=>{const I=A.target.files;if(!I||I.length===0)return;k(!0);const O=[];try{for(let B=0;B<I.length;B++){const R=await Z0e(I[B]);O.push(R)}S(B=>[...B,...O])}catch(B){console.error("Errore caricamento file:",B),alert("Errore durante il caricamento dei file.")}finally{k(!1),A.target.value=""}},F=A=>{S(I=>I.filter(O=>O!==A))},z=g7(v);return f.jsxs("form",{onSubmit:E,className:"flex flex-col h-full max-h-[90vh]",children:[f.jsx("div",{className:"p-6 border-b flex-shrink-0",children:f.jsx("h3",{className:"text-xl font-bold",children:n?"Modifica Attivit":"Nuova Attivit"})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:r,onChange:A=>i(A.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Titolo Attivit"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:s,onChange:A=>a(A.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Categoria (es. Motoria)"})]}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:o,onChange:A=>c(A.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Filo Conduttore"})]})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:4,value:u,onChange:A=>d(A.target.value),required:!0,className:"md-input",placeholder:"Descrizione dell'attivit..."})}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:2,value:p,onChange:A=>x(A.target.value),className:"md-input",placeholder:"Materiali necessari..."})}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:2,value:v,onChange:A=>_(A.target.value),className:"md-input",placeholder:"Link utili (Youtube, Pinterest...)"})}),z&&f.jsx("div",{className:"text-xs text-indigo-600 truncate",children:f.jsxs("a",{href:z,target:"_blank",rel:"noreferrer",className:"hover:underline",children:["Link rilevato: ",z]})}),f.jsxs("div",{className:"border-t pt-4",children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Allegati (Foto/Video)"}),f.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:b.map((A,I)=>f.jsxs("div",{className:"relative group w-16 h-16 border rounded overflow-hidden bg-gray-100",children:[f.jsx("img",{src:A,alt:"attachment",className:"w-full h-full object-cover"}),f.jsx("button",{type:"button",onClick:()=>F(A),className:"absolute top-0 right-0 bg-red-500 text-white w-5 h-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity",children:""})]},I))}),f.jsxs("label",{className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[T?f.jsx(as,{}):f.jsx(d_,{}),f.jsx("span",{className:"ml-2",children:T?"Caricamento...":"Carica File"}),f.jsx("input",{type:"file",onChange:j,multiple:!0,className:"hidden",accept:"image/*,video/*"})]})]})]}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",children:[f.jsx("button",{type:"button",onClick:t,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{type:"submit",disabled:T,className:"md-btn md-btn-raised md-btn-primary",children:"Salva"})]})]})},bme=()=>{const[n,e]=ne.useState([]),[t,r]=ne.useState(!0),[i,s]=ne.useState(""),[a,o]=ne.useState(1),c=9,[u,d]=ne.useState(!1),[p,x]=ne.useState(null),[v,_]=ne.useState(null),b=ne.useCallback(async()=>{r(!0);try{const j=await p7();e(j)}catch(j){console.error(j)}finally{r(!1)}},[]);ne.useEffect(()=>{b()},[b]);const S=async j=>{try{"id"in j?await pme(j.id,j):await mme(j),d(!1),b()}catch{alert("Errore salvataggio")}},T=async()=>{v&&(await gme(v),_(null),b())},k=ne.useMemo(()=>n.filter(j=>j.title.toLowerCase().includes(i.toLowerCase())||j.category.toLowerCase().includes(i.toLowerCase())||(j.theme||"").toLowerCase().includes(i.toLowerCase())),[n,i]),E=ne.useMemo(()=>{const j=(a-1)*c;return k.slice(j,j+c)},[k,a]);return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Libreria Attivit"}),f.jsx("p",{className:"mt-1",style:{color:"var(--md-text-secondary)"},children:"Archivio idee, materiali e proposte didattiche."})]}),f.jsxs("button",{onClick:()=>{x(null),d(!0)},className:"md-btn md-btn-raised md-btn-green flex items-center",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2",children:"Nuova Attivit"})]})]}),f.jsx("div",{className:"mb-6 bg-white p-3 rounded-lg border border-gray-200",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",placeholder:"Cerca per titolo, categoria o tema...",className:"block w-full bg-gray-50 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm focus:ring-1 focus:ring-indigo-500",value:i,onChange:j=>{s(j.target.value),o(1)}})]})}),t?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map(j=>f.jsxs("div",{className:"md-card flex flex-col h-full group hover:shadow-lg transition-shadow",children:[j.attachments&&j.attachments.length>0?f.jsxs("div",{className:"h-32 w-full bg-gray-100 relative overflow-hidden border-b",children:[f.jsx("img",{src:j.attachments[0],alt:j.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),j.attachments.length>1&&f.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/60 text-white text-xs px-2 py-1 rounded",children:["+",j.attachments.length-1]})]}):f.jsx("div",{className:"h-4 bg-indigo-50 border-b border-indigo-100"}),f.jsxs("div",{className:"p-5 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-2",children:[f.jsx("span",{className:"text-[10px] uppercase font-bold text-indigo-600 bg-indigo-50 px-2 py-1 rounded",children:j.category}),j.theme&&f.jsxs("span",{className:"text-[10px] text-gray-500 italic",children:['"',j.theme,'"']})]}),f.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-2",children:j.title}),f.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-4 flex-1",children:j.description}),f.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-100 mt-auto",children:[f.jsxs("div",{className:"flex gap-2",children:[j.links&&f.jsx("a",{href:g7(j.links)||"#",target:"_blank",rel:"noreferrer",className:"text-blue-500 hover:text-blue-700 text-xs font-medium flex items-center",children:"LINK"}),j.materials&&f.jsx("span",{className:"text-gray-400 text-xs",title:j.materials,children:"Mat."})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx("button",{onClick:()=>{x(j),d(!0)},className:"text-blue-600 hover:bg-blue-50 p-1 rounded",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>_(j.id),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:f.jsx($r,{})})]})]})]})]},j.id))}),k.length===0&&f.jsxs("div",{className:"text-center py-12 text-gray-500 italic",children:["Nessuna attivit trovata. ",f.jsx("br",{}),f.jsx("span",{className:"text-xs",children:"Crea la prima attivit per popolare la libreria."})]}),f.jsx(tm,{currentPage:a,totalItems:k.length,itemsPerPage:c,onPageChange:o})]}),u&&f.jsx(mi,{onClose:()=>d(!1),size:"lg",children:f.jsx(yme,{activity:p,onSave:S,onCancel:()=>d(!1)})}),f.jsx(Ho,{isOpen:!!v,onClose:()=>_(null),onConfirm:T,title:"Elimina Attivit",message:"Sei sicuro di voler eliminare questa attivit dalla libreria?",isDangerous:!0})]})},x7=ss(Ut,"homeworks"),_me=n=>{const e=n.data();return{id:n.id,...e}},v7=async()=>{const n=ga(x7,Ou("createdAt","desc"));return(await Jr(n)).docs.map(_me)},wme=async n=>{const e={...n,createdAt:new Date().toISOString()};return(await Go(x7,e)).id},Sme=async(n,e)=>{const t=fn(Ut,"homeworks",n);await Zr(t,e)},Tme=async n=>{const e=fn(Ut,"homeworks",n);await Wo(e)},IT=n=>{const e=new Date(n),t=e.getDay(),r=e.getDate()-t+(t===0?-6:1);return new Date(e.setDate(r))},lR=n=>{const e=IT(n);return e.setDate(e.getDate()+6),e},Eme=n=>new Date(n.getFullYear(),n.getMonth(),1),Ame=n=>new Date(n.getFullYear(),n.getMonth()+1,0),Nme=({activities:n,onSave:e,onCancel:t,initialSelection:r=[]})=>{const[i,s]=ne.useState(r),[a,o]=ne.useState(""),c=d=>{s(p=>p.includes(d)?p.filter(x=>x!==d):[...p,d])},u=n.filter(d=>d.title.toLowerCase().includes(a.toLowerCase())||d.category.toLowerCase().includes(a.toLowerCase()));return f.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[f.jsxs("div",{className:"p-6 pb-2 border-b flex-shrink-0",children:[f.jsx("h3",{className:"text-xl font-bold",children:"Assegna Attivit"}),f.jsx("p",{className:"text-sm text-gray-500",children:"Seleziona le attivit da collegare alle lezioni scelte."})]}),f.jsx("div",{className:"p-4 bg-gray-50 border-b",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",placeholder:"Cerca attivit...",className:"block w-full bg-white border rounded-md py-2 pl-10 pr-3 text-sm focus:outline-none focus:ring-1 focus:ring-gray-500",value:a,onChange:d=>o(d.target.value)})]})}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:u.map(d=>f.jsxs("label",{className:"flex items-start p-3 border rounded hover:bg-gray-50 cursor-pointer transition-colors",children:[f.jsx("input",{type:"checkbox",checked:i.includes(d.id),onChange:()=>c(d.id),className:"mt-1 h-4 w-4 text-gray-600 border-gray-300 rounded focus:ring-gray-500"}),f.jsxs("div",{className:"ml-3",children:[f.jsx("p",{className:"font-medium text-gray-900",children:d.title}),f.jsxs("p",{className:"text-xs text-gray-500",children:[d.category," ",d.theme?` - ${d.theme}`:""]})]})]},d.id))}),f.jsxs("div",{className:"p-4 border-t bg-gray-50 flex justify-end space-x-3 flex-shrink-0",children:[f.jsx("button",{onClick:t,className:"md-btn md-btn-flat md-btn-sm",children:"Annulla"}),f.jsxs("button",{onClick:()=>e(i),className:"md-btn md-btn-raised md-btn-primary md-btn-sm",children:["Conferma (",i.length,")"]})]})]})},Cme=()=>{var O;const[n,e]=ne.useState(!0),[t,r]=ne.useState([]),[i,s]=ne.useState([]),[a,o]=ne.useState([]),[c,u]=ne.useState(new Date),[d,p]=ne.useState("day"),[x,v]=ne.useState([]),[_,b]=ne.useState(!1),[S,T]=ne.useState("time_asc"),k=ne.useCallback(async()=>{e(!0);try{const[B,R,P]=await Promise.all([_l(),p7(),v7()]);s(R),o(P);let V=new Date(c),Y=new Date(c);V.setHours(0,0,0,0),Y.setHours(23,59,59,999),d==="week"?(V=IT(c),V.setHours(0,0,0,0),Y=lR(c),Y.setHours(23,59,59,999)):d==="month"&&(V=Eme(c),Y=Ame(c),Y.setHours(23,59,59,999));const ie=[];B.forEach(J=>{(J.status===Pr.Active||J.status===Pr.Pending)&&J.appointments&&J.appointments.forEach(me=>{const re=new Date(me.date);re>=V&&re<=Y&&ie.push({...me,enrollmentId:J.id,childName:J.childName,assignedActivities:[]})})});const q=ie.map(J=>J.lessonId),Q=await xme(q),se=new Map(R.map(J=>[J.id,J]));ie.forEach(J=>{const me=Q.find(re=>re.lessonId===J.lessonId);me&&(J.assignedActivities=me.activityIds.map(re=>se.get(re)).filter(re=>!!re))}),r(ie),v([])}catch(B){console.error("Error fetching activity log:",B)}finally{e(!1)}},[c,d]);ne.useEffect(()=>{k()},[k]),ne.useEffect(()=>{r(B=>{const R=[...B];return R.sort((P,V)=>S==="time_asc"?P.startTime.localeCompare(V.startTime):V.startTime.localeCompare(P.startTime)),R})},[S]);const E=B=>{const R=new Date(c);d==="day"?R.setDate(R.getDate()+B):d==="week"?R.setDate(R.getDate()+B*7):d==="month"&&R.setMonth(R.getMonth()+B),u(R)},j=()=>{const B={day:"numeric",month:"long",year:"numeric"};if(d==="day")return c.toLocaleDateString("it-IT",{weekday:"long",...B});if(d==="week"){const R=IT(c),P=lR(c);return`${R.getDate()} - ${P.getDate()} ${P.toLocaleDateString("it-IT",{month:"long",year:"numeric"})}`}return c.toLocaleDateString("it-IT",{month:"long",year:"numeric"})},F=B=>{v(R=>R.includes(B)?R.filter(P=>P!==B):[...R,B])},z=async B=>{try{await vme(x,B,new Date().toISOString()),b(!1),k()}catch(R){console.error("Error saving assignments:",R),alert("Errore durante il salvataggio.")}},A=(()=>{const B={};return t.forEach(P=>{const V=new Date(P.date).toDateString(),Y=P.locationName||"Sede Non Definita";B[V]||(B[V]={}),B[V][Y]||(B[V][Y]=[]),B[V][Y].push(P)}),{sortedDates:Object.keys(B).sort((P,V)=>new Date(P).getTime()-new Date(V).getTime()),grouped:B}})(),I=(B,R)=>{const P=new Date(B).toISOString().split("T")[0];return a.filter(V=>V.assignedDate===P&&V.assignedLocationName===R)};return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold mb-1",children:"Lezioni"}),f.jsx("p",{className:"text-gray-500",children:"Programma e traccia le attivit didattiche."})]}),f.jsxs("div",{className:"flex gap-2 items-center",children:[f.jsxs("div",{className:"flex bg-white rounded-lg border border-gray-200 p-1 shadow-sm",children:[f.jsx("button",{onClick:()=>p("day"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${d==="day"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Giorno"}),f.jsx("button",{onClick:()=>p("week"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${d==="week"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Settimana"}),f.jsx("button",{onClick:()=>p("month"),className:`px-3 py-1.5 text-sm font-medium rounded-md transition-all ${d==="month"?"bg-indigo-100 text-indigo-700 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Mese"})]}),x.length>0&&f.jsxs("button",{onClick:()=>b(!0),className:"md-btn md-btn-raised md-btn-green animate-fade-in",children:["Assegna (",x.length,")"]})]})]}),f.jsxs("div",{className:"md-card p-4 mb-6 flex items-center justify-between bg-white border-l-4 border-indigo-500 shadow-sm",children:[f.jsx("button",{onClick:()=>E(-1),className:"md-icon-btn h-10 w-10 bg-gray-50 hover:bg-gray-100 rounded-full font-bold text-gray-600 transition-colors",children:"<"}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(vx,{}),f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"block text-lg font-bold text-gray-800 capitalize",children:j()}),d==="day"&&f.jsx("span",{className:"text-xs text-gray-400 font-medium",children:"Oggi"})]})]}),f.jsx("button",{onClick:()=>E(1),className:"md-icon-btn h-10 w-10 bg-gray-50 hover:bg-gray-100 rounded-full font-bold text-gray-600 transition-colors",children:">"})]}),n?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs("div",{className:"space-y-8 animate-fade-in",children:[t.length===0&&f.jsx("div",{className:"p-12 text-center text-gray-500 italic bg-gray-50 rounded-xl border border-dashed border-gray-300",children:"Nessuna lezione in programma nel periodo selezionato."}),A.sortedDates.map(B=>f.jsxs("div",{className:"space-y-4",children:[d!=="day"&&f.jsxs("div",{className:"flex items-center gap-4 py-4",children:[f.jsx("div",{className:"h-px bg-gray-300 flex-1"}),f.jsx("span",{className:"text-sm font-bold text-gray-600 uppercase bg-gray-100 px-3 py-1 rounded-full border border-gray-200",children:new Date(B).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})}),f.jsx("div",{className:"h-px bg-gray-300 flex-1"})]}),Object.keys(A.grouped[B]).sort().map(R=>{var ie;const P=A.grouped[B][R],V=((ie=P[0])==null?void 0:ie.locationColor)||"#ccc",Y=I(B,R);return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[f.jsxs("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200 flex items-center gap-3 cursor-pointer hover:bg-gray-100 transition-colors",children:[f.jsx("span",{className:"w-4 h-4 rounded-full shadow-sm ring-2 ring-white",style:{backgroundColor:V}}),f.jsx("h2",{className:"text-sm font-bold text-gray-800 uppercase tracking-wide",children:R}),f.jsxs("span",{className:"text-xs text-gray-500 bg-white border px-2 py-0.5 rounded-full",children:[P.length," lez."]})]}),Y.length>0&&f.jsxs("div",{className:"px-6 py-2 bg-yellow-50 border-b border-yellow-100 flex flex-col gap-1",children:[f.jsx("h4",{className:"text-[10px] font-bold text-yellow-700 uppercase",children:"Compiti Assegnati:"}),Y.map(q=>f.jsxs("div",{className:"text-xs text-yellow-900 flex items-center gap-2",children:[f.jsxs("span",{className:"font-bold",children:[" ",q.title]}),f.jsxs("span",{className:"text-yellow-600 italic",children:["(",q.type==="textbook"?`Manuale: ${q.textbookName||"N/D"}`:"Multimedia",")"]})]},q.id))]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"bg-white border-b text-xs text-gray-400 uppercase",children:f.jsxs("tr",{children:[f.jsx("th",{className:"p-4 w-10",children:"#"}),f.jsx("th",{className:"p-4 font-semibold",children:"Orario"}),f.jsx("th",{className:"p-4 font-semibold",children:"Allievo"}),f.jsx("th",{className:"p-4 font-semibold",children:"Attivit Svolte"})]})}),f.jsx("tbody",{className:"divide-y divide-gray-50",children:P.map(q=>f.jsxs("tr",{onClick:()=>F(q.lessonId),className:`cursor-pointer transition-colors ${x.includes(q.lessonId)?"bg-indigo-50 hover:bg-indigo-100":"hover:bg-gray-50"}`,children:[f.jsx("td",{className:"p-4",children:f.jsx("input",{type:"checkbox",checked:x.includes(q.lessonId),onChange:()=>F(q.lessonId),className:"h-4 w-4 text-indigo-600 rounded border-gray-300 focus:ring-indigo-500 pointer-events-none"})}),f.jsxs("td",{className:"p-4 whitespace-nowrap font-mono font-bold text-sm text-gray-600",children:[q.startTime," - ",q.endTime]}),f.jsx("td",{className:"p-4",children:f.jsx("div",{className:"font-bold text-gray-800 text-sm",children:q.childName})}),f.jsx("td",{className:"p-4",children:q.assignedActivities.length>0?f.jsx("div",{className:"flex flex-wrap gap-2",children:q.assignedActivities.map(Q=>f.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200",children:Q.title},Q.id))}):f.jsx("span",{className:"text-xs text-gray-400 italic",children:"Nessuna attivit registrata"})})]},q.lessonId))})]})})]},R)})]},B))]}),_&&f.jsx(mi,{onClose:()=>b(!1),size:"lg",children:f.jsx(Nme,{activities:i,onSave:z,onCancel:()=>b(!1),initialSelection:x.length===1?((O=t.find(B=>B.lessonId===x[0]))==null?void 0:O.assignedActivities.map(B=>B.id))||[]:[]})})]})},kme=()=>f.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:f.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),Ime=({homework:n,suppliers:e,onSave:t,onCancel:r})=>{const[i,s]=ne.useState((n==null?void 0:n.title)||""),[a,o]=ne.useState((n==null?void 0:n.description)||""),[c,u]=ne.useState((n==null?void 0:n.type)||"textbook"),[d,p]=ne.useState((n==null?void 0:n.textbookName)||""),[x,v]=ne.useState((n==null?void 0:n.pageNumber)||""),[_,b]=ne.useState((n==null?void 0:n.exercises)||""),[S,T]=ne.useState((n==null?void 0:n.linkUrl)||""),[k,E]=ne.useState((n==null?void 0:n.expectedOutcome)||""),[j,F]=ne.useState((n==null?void 0:n.assignedDate)||""),[z,A]=ne.useState((n==null?void 0:n.assignedLocationId)||""),I=wp.useMemo(()=>{const B=[];return e.forEach(R=>R.locations.forEach(P=>B.push({id:P.id,name:P.name}))),B.sort((R,P)=>R.name.localeCompare(P.name))},[e]),O=B=>{var V;B.preventDefault();const R=z?(V=I.find(Y=>Y.id===z))==null?void 0:V.name:"",P={title:i,description:a,type:c,textbookName:d,pageNumber:x,exercises:_,linkUrl:S,expectedOutcome:k,assignedDate:j,assignedLocationId:z,assignedLocationName:R,createdAt:(n==null?void 0:n.createdAt)||new Date().toISOString()};n!=null&&n.id?t({...P,id:n.id}):t(P)};return f.jsxs("form",{onSubmit:O,className:"flex flex-col h-full max-h-[90vh]",children:[f.jsx("div",{className:"p-6 border-b flex-shrink-0",children:f.jsx("h3",{className:"text-xl font-bold",children:n?"Modifica Compiti":"Crea Lista Compiti"})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:"1. Intestazione"}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:i,onChange:B=>s(B.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Titolo (es. Unit 3 Review)"})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:2,value:a,onChange:B=>o(B.target.value),className:"md-input",placeholder:"Breve descrizione..."})})]}),f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:"2. Contenuto"}),f.jsxs("div",{className:"flex gap-4 mb-4",children:[f.jsxs("label",{className:`flex-1 p-3 border rounded-lg cursor-pointer text-center transition-colors ${c==="textbook"?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-white text-gray-600"}`,children:[f.jsx("input",{type:"radio",name:"type",value:"textbook",checked:c==="textbook",onChange:()=>u("textbook"),className:"hidden"})," Manuale"]}),f.jsxs("label",{className:`flex-1 p-3 border rounded-lg cursor-pointer text-center transition-colors ${c==="link"?"bg-indigo-50 border-indigo-500 text-indigo-700 font-bold":"bg-white text-gray-600"}`,children:[f.jsx("input",{type:"radio",name:"type",value:"link",checked:c==="link",onChange:()=>u("link"),className:"hidden"})," Link Multimediale"]})]}),c==="textbook"?f.jsxs("div",{className:"space-y-3 animate-fade-in",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:d,onChange:B=>p(B.target.value),className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Nome Manuale (Opzionale)"})]}),f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("div",{className:"md-input-group w-24",children:[f.jsx("input",{type:"text",value:x,onChange:B=>v(B.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Pagina"})]}),f.jsxs("div",{className:"md-input-group flex-1",children:[f.jsx("input",{type:"text",value:_,onChange:B=>b(B.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Esercizi (Num. e Titolo)"})]})]})]}):f.jsxs("div",{className:"md-input-group animate-fade-in",children:[f.jsx("input",{type:"url",value:S,onChange:B=>T(B.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Link (es. YouTube URL)"})]})]}),f.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-3",children:[f.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:"3. Obiettivi & Assegnazione"}),f.jsxs("div",{className:"md-input-group",children:[f.jsx("textarea",{rows:2,value:k,onChange:B=>E(B.target.value),required:!0,className:"md-input",placeholder:"Cosa impareranno?"}),f.jsx("label",{className:"text-xs text-gray-500 mt-1 block",children:"Risultato atteso / Scopo"})]}),f.jsxs("div",{className:"pt-2 border-t border-gray-200 mt-2",children:[f.jsx("p",{className:"text-xs text-gray-400 mb-2 italic",children:"Opzionale: Abbina a una lezione specifica"}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx("input",{type:"date",value:j,onChange:B=>F(B.target.value),className:"text-sm border rounded p-2 bg-white"}),f.jsxs("select",{value:z,onChange:B=>A(B.target.value),className:"text-sm border rounded p-2 bg-white flex-1",children:[f.jsx("option",{value:"",children:"Nessun Recinto"}),I.map(B=>f.jsx("option",{value:B.id,children:B.name},B.id))]})]})]})]})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50 flex-shrink-0",children:[f.jsx("button",{type:"button",onClick:r,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-primary",children:"Salva Compiti"})]})]})},Dme=({homework:n,clients:e,suppliers:t,onClose:r})=>{const[i,s]=ne.useState("location"),[a,o]=ne.useState(n.assignedLocationId||""),[c,u]=ne.useState([]),[d,p]=ne.useState(""),x=wp.useMemo(()=>e.filter(T=>T.clientType===ur.Parent),[e]),[v,_]=ne.useState([]);ne.useEffect(()=>{i==="location"&&a?_l().then(T=>{const k=T.filter(E=>E.status===Pr.Active&&E.locationId===a).map(E=>E.clientId);_([...new Set(k)])}):_([])},[i,a]);const b=wp.useMemo(()=>{const T=[];return t.forEach(k=>k.locations.forEach(E=>T.push({id:E.id,name:E.name}))),T.sort((k,E)=>k.name.localeCompare(E.name))},[t]),S=()=>{let T=[];if(i==="location"){if(!a)return alert("Seleziona un recinto.");if(v.length===0)return alert("Nessun cliente attivo in questo recinto.");T=e.filter(F=>v.includes(F.id)&&F.phone).map(F=>F.phone)}else{if(c.length===0)return alert("Seleziona almeno un cliente.");T=e.filter(F=>c.includes(F.id)&&F.phone).map(F=>F.phone)}if(T.length===0)return alert("Nessun numero di telefono valido trovato.");let k=`*Compiti per la settimana*

`;k+=` *${n.title}*
`,n.description&&(k+=`_${n.description}_
`),k+=`
`,n.type==="textbook"?(n.textbookName&&(k+=` Manuale: ${n.textbookName}
`),n.pageNumber&&(k+=` Pagina: ${n.pageNumber}
`),n.exercises&&(k+=` Esercizi: ${n.exercises}
`)):k+=` Link: ${n.linkUrl}
`,n.expectedOutcome&&(k+=`
 Obiettivo: ${n.expectedOutcome}`);const E=encodeURIComponent(k);let j=0;T.forEach(F=>{let z=F.replace(/[^0-9]/g,"");z.startsWith("00")&&(z=z.substring(2)),z.length===10&&(z="39"+z),z&&(window.open(`https://wa.me/${z}?text=${E}`,"_blank"),j++)}),alert(`Apertura di ${j} chat WhatsApp avviata.`),r()};return f.jsx(mi,{onClose:r,size:"lg",children:f.jsxs("div",{className:"flex flex-col h-[80vh]",children:[f.jsxs("div",{className:"p-6 border-b bg-green-50",children:[f.jsx("h3",{className:"text-xl font-bold text-green-900",children:"Invia Compiti su WhatsApp"}),f.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["Titolo: ",f.jsx("strong",{children:n.title})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[f.jsxs("div",{className:"flex gap-4",children:[f.jsxs("label",{className:`flex-1 p-3 border rounded cursor-pointer ${i==="location"?"bg-indigo-50 border-indigo-500 font-bold text-indigo-700":"bg-white"}`,children:[f.jsx("input",{type:"radio",name:"mode",checked:i==="location",onChange:()=>s("location"),className:"hidden"})," Per Recinto (Gruppo)"]}),f.jsxs("label",{className:`flex-1 p-3 border rounded cursor-pointer ${i==="manual"?"bg-indigo-50 border-indigo-500 font-bold text-indigo-700":"bg-white"}`,children:[f.jsx("input",{type:"radio",name:"mode",checked:i==="manual",onChange:()=>s("manual"),className:"hidden"})," Selezione Manuale"]})]}),i==="location"?f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Seleziona Recinto"}),f.jsxs("select",{value:a,onChange:T=>o(T.target.value),className:"md-input",children:[f.jsx("option",{value:"",children:"Seleziona..."}),b.map(T=>f.jsx("option",{value:T.id,children:T.name},T.id))]}),a&&f.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Clienti attivi trovati: ",f.jsx("strong",{children:v.length})]})]}):f.jsxs("div",{className:"flex flex-col h-64 border rounded",children:[f.jsx("input",{type:"text",placeholder:"Cerca cliente...",className:"p-2 border-b text-sm",value:d,onChange:T=>p(T.target.value)}),f.jsx("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:x.filter(T=>`${T.firstName} ${T.lastName}`.toLowerCase().includes(d.toLowerCase())).map(T=>f.jsxs("label",{className:"flex items-center gap-2 p-1 hover:bg-gray-50",children:[f.jsx("input",{type:"checkbox",checked:c.includes(T.id),onChange:()=>{u(k=>k.includes(T.id)?k.filter(E=>E!==T.id):[...k,T.id])}}),f.jsxs("span",{className:"text-sm",children:[T.firstName," ",T.lastName]})]},T.id))}),f.jsxs("div",{className:"p-2 border-t bg-gray-50 text-xs text-right",children:["Selezionati: ",c.length]})]}),f.jsxs("div",{className:"bg-gray-100 p-4 rounded-lg border border-gray-300 font-mono text-xs text-gray-600 whitespace-pre-wrap",children:[f.jsx("strong",{children:"ANTEMPRIMA MESSAGGIO:"}),f.jsx("br",{}),f.jsx("br",{}),"*Compiti per la settimana*",f.jsx("br",{}),f.jsx("br",{})," *",n.title,"*",f.jsx("br",{}),"_",n.description||"","_",f.jsx("br",{}),f.jsx("br",{}),n.type==="textbook"?f.jsxs(f.Fragment,{children:[" Manuale: ",n.textbookName||"N/D",f.jsx("br",{})," Pagina: ",n.pageNumber,f.jsx("br",{})," Esercizi: ",n.exercises,f.jsx("br",{})]}):f.jsxs(f.Fragment,{children:[" Link: ",n.linkUrl]}),f.jsx("br",{})," Obiettivo: ",n.expectedOutcome]})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50",children:[f.jsx("button",{onClick:r,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{onClick:S,className:"md-btn md-btn-raised md-btn-green",children:"Invia WhatsApp"})]})]})})},Rme=()=>{const[n,e]=ne.useState([]),[t,r]=ne.useState([]),[i,s]=ne.useState([]),[a,o]=ne.useState(!0),[c,u]=ne.useState(""),[d,p]=ne.useState(1),x=10,[v,_]=ne.useState(!1),[b,S]=ne.useState(null),[T,k]=ne.useState(null),[E,j]=ne.useState(null),F=ne.useCallback(async()=>{o(!0);try{const[B,R,P]=await Promise.all([v7(),Jl(),Oh()]);e(B),r(R),s(P)}catch(B){console.error(B)}finally{o(!1)}},[]);ne.useEffect(()=>{F()},[F]);const z=async B=>{try{"id"in B?await Sme(B.id,B):await wme(B),_(!1),F()}catch{alert("Errore salvataggio")}},A=async()=>{T&&(await Tme(T),k(null),F())},I=wp.useMemo(()=>n.filter(B=>B.title.toLowerCase().includes(c.toLowerCase())),[n,c]),O=wp.useMemo(()=>{const B=(d-1)*x;return I.slice(B,B+x)},[I,d]);return f.jsxs("div",{children:[f.jsxs("div",{className:"flex flex-wrap justify-between items-center mb-6",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Compiti"}),f.jsx("p",{className:"mt-1",style:{color:"var(--md-text-secondary)"},children:"Gestione e invio compiti a casa."})]}),f.jsxs("button",{onClick:()=>{S(null),_(!0)},className:"md-btn md-btn-raised md-btn-green flex items-center",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2",children:"Nuova Lista"})]})]}),f.jsx("div",{className:"mb-6 bg-white p-3 rounded-lg border border-gray-200",children:f.jsxs("div",{className:"relative",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:f.jsx(Vh,{})}),f.jsx("input",{type:"text",placeholder:"Cerca lista compiti...",className:"block w-full bg-gray-50 border border-gray-300 rounded-md py-2 pl-10 pr-3 text-sm focus:ring-1 focus:ring-indigo-500",value:c,onChange:B=>u(B.target.value)})]})}),a?f.jsx("div",{className:"flex justify-center py-12",children:f.jsx(as,{})}):f.jsxs("div",{className:"space-y-6",children:[O.map(B=>f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-5 flex flex-col md:flex-row gap-4 hover:shadow-md transition-shadow",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase ${B.type==="textbook"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:B.type==="textbook"?"Manuale":"Multimedia"}),B.assignedDate&&f.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded border border-gray-200",children:[" ",new Date(B.assignedDate).toLocaleDateString()," ",B.assignedLocationName?` ${B.assignedLocationName}`:""]})]}),f.jsx("h3",{className:"text-lg font-bold text-gray-800",children:B.title}),f.jsx("p",{className:"text-sm text-gray-500 mb-3",children:B.description}),f.jsxs("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-700 border border-gray-100 grid grid-cols-1 md:grid-cols-2 gap-4",children:[B.type==="textbook"?f.jsxs("div",{children:[f.jsxs("p",{children:[f.jsx("span",{className:"font-bold text-xs text-gray-400 uppercase",children:"Manuale:"})," ",B.textbookName||"-"]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-bold text-xs text-gray-400 uppercase",children:"Pagina:"})," ",B.pageNumber]}),f.jsxs("p",{children:[f.jsx("span",{className:"font-bold text-xs text-gray-400 uppercase",children:"Esercizi:"})," ",B.exercises]})]}):f.jsxs("div",{children:[f.jsx("span",{className:"font-bold text-xs text-gray-400 uppercase",children:"Link:"}),f.jsx("a",{href:B.linkUrl,target:"_blank",rel:"noreferrer",className:"block text-indigo-600 truncate hover:underline",children:B.linkUrl})]}),f.jsxs("div",{className:"border-t md:border-t-0 md:border-l border-gray-200 pt-2 md:pt-0 md:pl-4",children:[f.jsx("span",{className:"font-bold text-xs text-gray-400 uppercase",children:"Obiettivo:"}),f.jsx("p",{className:"italic text-gray-600",children:B.expectedOutcome})]})]})]}),f.jsxs("div",{className:"flex md:flex-col justify-end gap-2 border-t md:border-t-0 md:border-l border-gray-100 pt-4 md:pt-0 md:pl-4",children:[f.jsxs("button",{onClick:()=>j(B),className:"md-btn md-btn-sm bg-green-50 text-green-700 border border-green-200 hover:bg-green-100 flex items-center justify-center gap-1 w-full",children:[f.jsx(kme,{})," ",f.jsx("span",{className:"hidden md:inline",children:"Invia"})]}),f.jsx("button",{onClick:()=>{S(B),_(!0)},className:"md-icon-btn edit bg-gray-50",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>k(B.id),className:"md-icon-btn delete bg-gray-50",children:f.jsx($r,{})})]})]},B.id)),I.length===0&&f.jsx("p",{className:"text-center text-gray-500 py-10",children:"Nessuna lista compiti trovata."}),f.jsx(tm,{currentPage:d,totalItems:I.length,itemsPerPage:x,onPageChange:p})]}),v&&f.jsx(mi,{onClose:()=>_(!1),size:"lg",children:f.jsx(Ime,{homework:b,suppliers:t,onSave:z,onCancel:()=>_(!1)})}),E&&f.jsx(Dme,{homework:E,clients:i,suppliers:t,onClose:()=>j(null)}),f.jsx(Ho,{isOpen:!!T,onClose:()=>k(null),onConfirm:A,title:"Elimina Compiti",message:"Sei sicuro di voler eliminare questa lista? L'operazione  irreversibile.",isDangerous:!0})]})},y7=ss(Ut,"initiatives"),Pme=n=>{const e=n.data();return{id:n.id,...e}},jme=async()=>(await Jr(y7)).docs.map(Pme),Lme=async n=>(await Go(y7,n)).id,Ome=async(n,e)=>{const t=fn(Ut,"initiatives",n);await Zr(t,e)},Mme=async n=>{const e=fn(Ut,"initiatives",n);await Wo(e)},b7=ss(Ut,"books"),Fme=n=>{const e=n.data();return{id:n.id,...e}},Bme=async()=>{const n=ga(b7,Ou("title"));return(await Jr(n)).docs.map(Fme)},Vme=async n=>(await Go(b7,{...n,isAvailable:!0})).id,zme=async n=>{const e=fn(Ut,"books",n);await Wo(e)},_7=ss(Ut,"book_loans"),Ume=n=>{const e=n.data();return{id:n.id,...e}},Hme=async()=>{const n=ga(_7,R0("status","==","active"));return(await Jr(n)).docs.map(Ume)},qme=async n=>{const e=Bc(Ut),t=fn(_7);e.set(t,{...n,status:"active"});const r=fn(Ut,"books",n.bookId);e.update(r,{isAvailable:!1}),await e.commit()},Wme=async(n,e)=>{const t=Bc(Ut),r=fn(Ut,"book_loans",n);t.update(r,{status:"returned",returnDate:new Date().toISOString()});const i=fn(Ut,"books",e);t.update(i,{isAvailable:!0}),await t.commit()},Gme=({initiative:n,suppliers:e,onSave:t,onCancel:r})=>{const[i,s]=ne.useState((n==null?void 0:n.name)||""),[a,o]=ne.useState((n==null?void 0:n.description)||""),[c,u]=ne.useState((n==null?void 0:n.materials)||""),[d,p]=ne.useState((n==null?void 0:n.targetLocationIds)||[]),x=ne.useMemo(()=>{const b=[];return e.forEach(S=>S.locations.forEach(T=>b.push({id:T.id,name:T.name}))),b.sort((S,T)=>S.name.localeCompare(T.name))},[e]),v=b=>{p(S=>S.includes(b)?S.filter(T=>T!==b):[...S,b])},_=b=>{b.preventDefault();const S=d.map(k=>{var E;return((E=x.find(j=>j.id===k))==null?void 0:E.name)||""}).filter(Boolean),T={name:i,description:a,type:"standard",materials:c,targetLocationIds:d,targetLocationNames:S};n!=null&&n.id?t({...T,id:n.id}):t(T)};return f.jsxs("form",{onSubmit:_,className:"flex flex-col h-full",children:[f.jsx("div",{className:"p-6 border-b",children:f.jsx("h3",{className:"text-xl font-bold",children:n?"Modifica Iniziativa":"Nuova Iniziativa"})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[f.jsxs("div",{className:"md-input-group",children:[f.jsx("input",{type:"text",value:i,onChange:b=>s(b.target.value),required:!0,className:"md-input",placeholder:" "}),f.jsx("label",{className:"md-input-label",children:"Nome Iniziativa"})]}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:3,value:a,onChange:b=>o(b.target.value),className:"md-input",placeholder:"Descrizione..."})}),f.jsx("div",{className:"md-input-group",children:f.jsx("textarea",{rows:3,value:c,onChange:b=>u(b.target.value),className:"md-input",placeholder:"Materiali necessari (lista)..."})}),f.jsxs("div",{className:"border-t pt-2",children:[f.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase mb-2 block",children:"Destinatari (Recinti)"}),f.jsx("div",{className:"max-h-40 overflow-y-auto border rounded p-2 grid grid-cols-2 gap-2",children:x.map(b=>f.jsxs("label",{className:"flex items-center gap-2 text-sm p-1 hover:bg-gray-50",children:[f.jsx("input",{type:"checkbox",checked:d.includes(b.id),onChange:()=>v(b.id),className:"rounded text-indigo-600"}),f.jsx("span",{children:b.name})]},b.id))})]})]}),f.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 bg-gray-50",children:[f.jsx("button",{type:"button",onClick:r,className:"md-btn md-btn-flat",children:"Annulla"}),f.jsx("button",{type:"submit",className:"md-btn md-btn-raised md-btn-primary",children:"Salva"})]})]})},$me=()=>{const[n,e]=ne.useState("loans"),[t,r]=ne.useState([]),[i,s]=ne.useState([]),[a,o]=ne.useState([]),[c,u]=ne.useState([]),[d,p]=ne.useState(!1),[x,v]=ne.useState(""),[_,b]=ne.useState(""),[S,T]=ne.useState(""),[k,E]=ne.useState(""),[j,F]=ne.useState(""),z=ne.useCallback(async()=>{p(!0);try{const[Y,ie,q,Q]=await Promise.all([Bme(),Hme(),Jl(),_l()]);r(Y),s(ie),o(q),u(Q.filter(se=>se.status===Pr.Active))}catch(Y){console.error(Y)}finally{p(!1)}},[]);ne.useEffect(()=>{z()},[z]);const A=ne.useMemo(()=>{const Y=[];return a.forEach(ie=>ie.locations.forEach(q=>Y.push({id:q.id,name:q.name,color:q.color}))),Y.sort((ie,q)=>ie.name.localeCompare(q.name))},[a]),I=ne.useMemo(()=>x?c.filter(Y=>Y.locationId===x).map(Y=>({id:Y.childId,name:Y.childName,clientId:Y.clientId})):[],[x,c]),O=ne.useMemo(()=>t.filter(Y=>Y.isAvailable).sort((Y,ie)=>Y.title.localeCompare(ie.title)),[t]),B=async()=>{if(!x||!_||!S)return alert("Compila tutti i campi.");const Y=t.find(Q=>Q.id===S),ie=A.find(Q=>Q.id===x),q=I.find(Q=>Q.id===_);!Y||!ie||!q||(p(!0),await qme({bookId:Y.id,bookTitle:Y.title,studentId:q.id,studentName:q.name,locationId:ie.id,locationName:ie.name,locationColor:ie.color,borrowDate:new Date().toISOString(),status:"active"}),await z(),T(""),e("loans"))},R=async Y=>{confirm(`Restituire "${Y.bookTitle}" da ${Y.studentName}?`)&&(p(!0),await Wme(Y.id,Y.bookId),await z())},P=async()=>{k.trim()&&(p(!0),await Vme({title:k,isAvailable:!0}),E(""),await z())},V=async Y=>{confirm("Eliminare questo libro dall'inventario?")&&(p(!0),await zme(Y),await z())};return f.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden flex flex-col h-[600px]",children:[f.jsxs("div",{className:"bg-amber-50 border-b border-amber-100 p-4 flex flex-col sm:flex-row justify-between items-center gap-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-amber-900 flex items-center gap-2",children:" Peek-a-Boo(k)"}),f.jsx("p",{className:"text-xs text-amber-700",children:"Sistema Prestito Libri"})]}),f.jsxs("div",{className:"flex bg-white rounded-lg p-1 border border-amber-200 shadow-sm",children:[f.jsxs("button",{onClick:()=>e("loans"),className:`px-3 py-1 text-xs font-bold rounded ${n==="loans"?"bg-amber-100 text-amber-800":"text-gray-500"}`,children:["Prestiti Attivi (",i.length,")"]}),f.jsx("button",{onClick:()=>e("checkout"),className:`px-3 py-1 text-xs font-bold rounded ${n==="checkout"?"bg-amber-100 text-amber-800":"text-gray-500"}`,children:"Nuovo Prestito"}),f.jsxs("button",{onClick:()=>e("inventory"),className:`px-3 py-1 text-xs font-bold rounded ${n==="inventory"?"bg-amber-100 text-amber-800":"text-gray-500"}`,children:["Inventario (",t.length,")"]})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-6 relative",children:[d&&f.jsx("div",{className:"absolute inset-0 bg-white/50 flex justify-center items-center z-10",children:f.jsx(as,{})}),n==="loans"&&f.jsx("div",{className:"space-y-2",children:i.length===0?f.jsx("p",{className:"text-center text-gray-400 italic mt-10",children:"Nessun libro in prestito."}):i.map(Y=>f.jsxs("div",{className:"flex justify-between items-center p-3 bg-white border border-gray-100 rounded-lg hover:shadow-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-gray-800 text-sm",children:Y.bookTitle}),f.jsxs("div",{className:"flex items-center gap-2 text-xs mt-1",children:[f.jsxs("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-gray-600 flex items-center gap-1",children:[" ",Y.studentName]}),f.jsxs("span",{className:"bg-gray-100 px-2 py-0.5 rounded text-gray-600 flex items-center gap-1",children:[" ",Y.locationName]}),f.jsxs("span",{className:"text-gray-400",children:["Dal: ",new Date(Y.borrowDate).toLocaleDateString()]})]})]}),f.jsx("button",{onClick:()=>R(Y),className:"md-btn md-btn-sm bg-green-50 text-green-700 border border-green-200 hover:bg-green-100",children:"Restituisci"})]},Y.id))}),n==="checkout"&&f.jsxs("div",{className:"max-w-md mx-auto space-y-4 pt-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"1. Dove siamo? (Recinto)"}),f.jsxs("select",{value:x,onChange:Y=>{v(Y.target.value),b("")},className:"md-input bg-gray-50",children:[f.jsx("option",{value:"",children:"Seleziona Sede..."}),A.map(Y=>f.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),f.jsxs("div",{className:`transition-opacity ${x?"":"opacity-50 pointer-events-none"}`,children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"2. Chi prende il libro?"}),f.jsxs("select",{value:_,onChange:Y=>b(Y.target.value),className:"md-input bg-gray-50",children:[f.jsx("option",{value:"",children:"Seleziona Allievo..."}),I.map(Y=>f.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),f.jsxs("div",{className:`transition-opacity ${_?"":"opacity-50 pointer-events-none"}`,children:[f.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"3. Quale libro?"}),f.jsxs("select",{value:S,onChange:Y=>T(Y.target.value),className:"md-input bg-gray-50",children:[f.jsx("option",{value:"",children:"Seleziona Libro Disponibile..."}),O.map(Y=>f.jsx("option",{value:Y.id,children:Y.title},Y.id))]})]}),f.jsx("button",{onClick:B,disabled:!S,className:"w-full md-btn md-btn-raised md-btn-primary mt-4 disabled:opacity-50",children:"Registra Prestito"})]}),n==="inventory"&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsx("input",{type:"text",value:k,onChange:Y=>E(Y.target.value),placeholder:"Titolo nuovo libro...",className:"flex-1 md-input"}),f.jsx("button",{onClick:P,disabled:!k,className:"md-btn md-btn-raised md-btn-green",children:f.jsx(po,{})})]}),f.jsx("input",{type:"text",value:j,onChange:Y=>F(Y.target.value),placeholder:"Cerca nell'inventario...",className:"w-full p-2 border rounded text-xs bg-gray-50"}),f.jsx("div",{className:"space-y-1 max-h-80 overflow-y-auto",children:t.filter(Y=>Y.title.toLowerCase().includes(j.toLowerCase())).map(Y=>f.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-gray-50 border-b border-gray-100",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("span",{className:`w-2 h-2 rounded-full ${Y.isAvailable?"bg-green-500":"bg-red-500"}`}),f.jsx("span",{className:`text-sm ${Y.isAvailable?"text-gray-800":"text-gray-400 line-through"}`,children:Y.title})]}),f.jsx("button",{onClick:()=>V(Y.id),className:"text-gray-300 hover:text-red-500",children:f.jsx($r,{})})]},Y.id))})]})]})]})},Kme=()=>{const[n,e]=ne.useState([]),[t,r]=ne.useState([]),[i,s]=ne.useState(!0),[a,o]=ne.useState(!1),[c,u]=ne.useState(null),[d,p]=ne.useState(null),x=ne.useCallback(async()=>{s(!0);try{const[b,S]=await Promise.all([jme(),Jl()]);e(b.filter(T=>T.type!=="peek-a-book")),r(S)}catch(b){console.error(b)}finally{s(!1)}},[]);ne.useEffect(()=>{x()},[x]);const v=async b=>{"id"in b?await Ome(b.id,b):await Lme(b),o(!1),x()},_=async()=>{d&&(await Mme(d),p(null),x())};return f.jsxs("div",{className:"space-y-8 pb-10",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-3xl font-bold",children:"Iniziative"}),f.jsx("p",{className:"mt-1 text-gray-500",children:"Gestione progetti speciali e biblioteca."})]}),f.jsx("section",{children:f.jsx($me,{})}),f.jsxs("section",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-4",children:[f.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Altre Iniziative"}),f.jsxs("button",{onClick:()=>{u(null),o(!0)},className:"md-btn md-btn-sm md-btn-raised md-btn-primary flex items-center",children:[f.jsx(po,{}),f.jsx("span",{className:"ml-2",children:"Nuova Iniziativa"})]})]}),i?f.jsx(as,{}):f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.map(b=>{var S;return f.jsxs("div",{className:"md-card p-5 flex flex-col hover:shadow-md transition-shadow",children:[f.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-2",children:b.name}),f.jsx("p",{className:"text-sm text-gray-600 mb-4 flex-1",children:b.description}),f.jsxs("div",{className:"space-y-2 mb-4",children:[f.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs",children:[f.jsx("span",{className:"font-bold block text-gray-500 mb-1",children:"MATERIALI"}),f.jsx("p",{className:"line-clamp-2",children:b.materials||"Nessuno specificato"})]}),f.jsxs("div",{className:"bg-indigo-50 p-2 rounded text-xs text-indigo-700",children:[f.jsx("span",{className:"font-bold block mb-1",children:"DESTINATARI"}),f.jsx("p",{className:"line-clamp-2",children:((S=b.targetLocationNames)==null?void 0:S.join(", "))||"Nessun recinto selezionato"})]})]}),f.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-100",children:[f.jsx("button",{onClick:()=>{u(b),o(!0)},className:"md-icon-btn edit",children:f.jsx(mo,{})}),f.jsx("button",{onClick:()=>p(b.id),className:"md-icon-btn delete",children:f.jsx($r,{})})]})]},b.id)}),n.length===0&&f.jsx("p",{className:"col-span-full text-center text-gray-400 italic py-8",children:"Nessuna altra iniziativa attiva."})]})]}),a&&f.jsx(mi,{onClose:()=>o(!1),size:"lg",children:f.jsx(Gme,{initiative:c,suppliers:t,onSave:v,onCancel:()=>o(!1)})}),f.jsx(Ho,{isOpen:!!d,onClose:()=>p(null),onConfirm:_,title:"Elimina Iniziativa",message:"Sei sicuro?",isDangerous:!0})]})},Yme=()=>{const n=ne.useRef([]),e=ne.useRef({}),t=ne.useRef(null);ne.useEffect(()=>{const i=async()=>{try{const a=await kL();n.current=a}catch(a){console.error("Scheduler: Failed to load checks",a)}};i(),t.current=setInterval(()=>{const a=new Date,o=a.getDay(),c=String(a.getHours()).padStart(2,"0"),u=String(a.getMinutes()).padStart(2,"0"),d=`${c}:${u}`;n.current&&n.current.forEach(p=>{if(p.pushEnabled&&p.daysOfWeek.includes(o)&&p.startTime===d){const x=e.current[p.id]||0;Date.now()-x>6e4&&(r(p),e.current[p.id]=Date.now())}})},1e4);const s=()=>i();return window.addEventListener("EP_DataUpdated",s),()=>{t.current&&clearInterval(t.current),window.removeEventListener("EP_DataUpdated",s)}},[]);const r=async i=>{if("Notification"in window&&Notification.permission==="granted")try{const s=`EP Planner: ${i.category}`,a={body:i.note||` ora del controllo periodico: ${i.subCategory||i.category}`,icon:"/lemon_logo_150px.png",tag:`ep-check-${i.id}`,requireInteraction:!0};"serviceWorker"in navigator?await(await navigator.serviceWorker.ready).showNotification(s,a):new Notification(s,a)}catch(s){console.warn("Errore invio notifica:",s)}};return null},Xme=()=>{const[n,e]=ne.useState("Dashboard"),[t,r]=ne.useState(null),[i,s]=ne.useState(null),[a,o]=ne.useState(!0),[c,u]=ne.useState(!1);ne.useEffect(()=>{const x=wz(ig,v=>{s(v),o(!1),v&&c7(v.uid)});return()=>x()},[]),ne.useEffect(()=>{const x=async()=>{try{const v=await Up();if(v&&v.logoBase64){let _=document.querySelector("link[rel~='icon']");_||(_=document.createElement("link"),_.rel="icon",document.head.appendChild(_)),_.href=v.logoBase64;let b=document.querySelector("link[rel='apple-touch-icon']");b||(b=document.createElement("link"),b.rel="apple-touch-icon",document.head.appendChild(b)),b.href=v.logoBase64;const S=document.querySelector("link[rel='manifest']");if(S){const T={short_name:"EP v1",name:"EP v1",gcm_sender_id:"103953800507",start_url:".",display:"standalone",theme_color:"#757575",background_color:"#f5f5f5",icons:[{src:v.logoBase64,type:"image/png",sizes:"192x192",purpose:"any maskable"},{src:v.logoBase64,type:"image/png",sizes:"512x512",purpose:"any maskable"}]},k=JSON.stringify(T),E=new Blob([k],{type:"application/json"}),j=URL.createObjectURL(E);S.href=j}}}catch(v){console.error("Errore aggiornamento icona app:",v)}};return x(),window.addEventListener("EP_DataUpdated",x),()=>window.removeEventListener("EP_DataUpdated",x)},[]);const d=(x,v)=>{console.log("[DEBUG 3] App: handleNavigation verso",x),e(x),r(v||null)},p=()=>i?(console.log("[DEBUG 4] App: rendering content per",n),f.jsx("div",{className:"animate-slide-up h-full",children:(()=>{switch(n){case"Dashboard":return f.jsx(Qk,{setCurrentPage:d});case"Enrollments":return f.jsx(ame,{initialParams:t});case"Attendance":return f.jsx(cme,{});case"AttendanceArchive":return f.jsx(fme,{});case"Activities":return f.jsx(bme,{});case"ActivityLog":return f.jsx(Cme,{});case"Homeworks":return f.jsx(Rme,{});case"Initiatives":return f.jsx(Kme,{});case"Clients":return f.jsx(ble,{});case"Suppliers":return f.jsx(Tle,{});case"Calendar":return f.jsx(W0e,{});case"CRM":return f.jsx(rme,{});case"Finance":return f.jsx(P0e,{initialParams:t,onNavigate:d});case"Settings":return f.jsx(z0e,{});case"Profile":return f.jsx(U0e,{user:i});default:return f.jsx(Qk,{setCurrentPage:d})}})()},n)):null;return a?f.jsx(q0e,{}):i?f.jsxs("div",{className:"flex h-screen h-[100dvh] w-full bg-slate-50 text-gray-900 font-sans overflow-hidden",children:[f.jsx(Yme,{}),f.jsx(_Y,{user:i,currentPage:n,setCurrentPage:x=>d(x),isOpen:c,setIsOpen:u}),f.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden relative w-full",children:[f.jsx(eX,{user:i,setCurrentPage:x=>d(x),onNavigate:d,onMenuClick:()=>u(!0)}),f.jsx("main",{className:"flex-1 overflow-x-hidden overflow-y-auto p-4 md:p-8 scroll-smooth pb-24 md:pb-8 touch-pan-y",style:{WebkitOverflowScrolling:"touch"},children:p()})]})]}):f.jsx(H0e,{})},cR=h7();u7(cR.primary,cR.bg);const w7=document.getElementById("root");if(!w7)throw new Error("Could not find root element to mount to");const Qme=H9.createRoot(w7);Qme.render(f.jsx(wp.StrictMode,{children:f.jsx(Xme,{})}));export{Mr as _,R9 as c,DT as g};
